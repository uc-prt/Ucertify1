var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function i(e){e.forEach(t)}function r(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let s,a;function l(e,t){return s||(s=document.createElement("a")),s.href=t,e===s.href}function c(e){return null==e?"":e}function d(e,t){e.appendChild(t)}function h(e,t,n){var i;const r=function(e){const t=function(e){return e?e.getRootNode?e.getRootNode():e.ownerDocument:document}(e);return t.host,t}(e);if(!(null===(i=r)||void 0===i?void 0:i.getElementById(t))){const e=m("style");e.id=t,e.textContent=n,function(e,t){d(e.head||e,t)}(r,e)}}function p(e,t,n){e.insertBefore(t,n||null)}function u(e){e.parentNode.removeChild(e)}function m(e){return document.createElement(e)}function g(e){return document.createTextNode(e)}function f(){return g(" ")}function w(){return g("")}function y(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function v(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function b(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function x(e,t,n,i){e.style.setProperty(t,n,i?"important":"")}function A(e,t,n){e.classList[n?"add":"remove"](t)}class _{constructor(){this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.e=m(t.nodeName),this.t=t,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)p(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(u)}}function S(e){a=e}function k(){if(!a)throw new Error("Function called outside component initialization");return a}function T(e){k().$$.on_mount.push(e)}function E(){const e=k();return(t,n)=>{const i=e.$$.callbacks[t];if(i){const r=function(e,t,n=!1){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,!1,t),i}(t,n);i.slice().forEach((t=>{t.call(e,r)}))}}}const C=[],D=[],M=[],N=[],I=Promise.resolve();let O=!1;function j(){O||(O=!0,I.then(R))}function L(e){M.push(e)}let $=!1;const P=new Set;function R(){if(!$){$=!0;do{for(let e=0;e<C.length;e+=1){const t=C[e];S(t),H(t.$$)}for(S(null),C.length=0;D.length;)D.pop()();for(let e=0;e<M.length;e+=1){const t=M[e];P.has(t)||(P.add(t),t())}M.length=0}while(C.length);for(;N.length;)N.pop()();O=!1,$=!1,P.clear()}}function H(e){if(null!==e.fragment){e.update(),i(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(L)}}const q=new Set;let X;function B(){X={r:0,c:[],p:X}}function F(){X.r||i(X.c),X=X.p}function J(e,t){e&&e.i&&(q.delete(e),e.i(t))}function z(e,t,n,i){if(e&&e.o){if(q.has(e))return;q.add(e),X.c.push((()=>{q.delete(e),i&&(n&&e.d(1),i())})),e.o(t)}}function U(e){e&&e.c()}function W(e,n,o,s){const{fragment:a,on_mount:l,on_destroy:c,after_update:d}=e.$$;a&&a.m(n,o),s||L((()=>{const n=l.map(t).filter(r);c?c.push(...n):i(n),e.$$.on_mount=[]})),d.forEach(L)}function Y(e,t){const n=e.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function V(t,r,o,s,l,c,d,h=[-1]){const p=a;S(t);const m=t.$$={fragment:null,ctx:null,props:c,update:e,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(p?p.$$.context:r.context||[]),callbacks:n(),dirty:h,skip_bound:!1,root:r.target||p.$$.root};d&&d(m.root);let g=!1;if(m.ctx=o?o(t,r.props||{},((e,n,...i)=>{const r=i.length?i[0]:n;return m.ctx&&l(m.ctx[e],m.ctx[e]=r)&&(!m.skip_bound&&m.bound[e]&&m.bound[e](r),g&&function(e,t){-1===e.$$.dirty[0]&&(C.push(e),j(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n})):[],m.update(),g=!0,i(m.before_update),m.fragment=!!s&&s(m.ctx),r.target){if(r.hydrate){const e=function(e){return Array.from(e.childNodes)}(r.target);m.fragment&&m.fragment.l(e),e.forEach(u)}else m.fragment&&m.fragment.c();r.intro&&J(t.$$.fragment),W(t,r.target,r.anchor,r.customElement),R()}S(p)}class Q{$destroy(){Y(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function K(e,t={}){const n="tagin-tag",i="tagin-tag-remove",r="tagin-input",o=e.dataset.separator||t.separator||",",s=e.dataset.duplicate||t.duplicate||"false",a=(0,eval)(e.dataset.transform)||t.transform||(e=>e),l=e.dataset.placeholder||t.placeholder||"",c=e=>`<span class="tagin-tag">${e}<span class="${i}"></span></span>`,d=()=>e.value,h=()=>d().split(o);!function(){const t=`<div class="${"tagin-wrapper "+e.className.replace("tagin","").trim()}">${""===d().trim()?"":h().map(c).join("")}<input type="text" class="tagin-input" placeholder="${l}"></div>`;e.insertAdjacentHTML("afterend",t)}();const p=e.nextElementSibling,u=p.getElementsByClassName(r)[0],m=()=>[...p.getElementsByClassName(n)].map((e=>e.textContent)),g=()=>m().join(o),f=()=>{e.value=g(),e.dispatchEvent(new Event("change"))};function w(){const e=document.createElement("div");e.classList.add(r,"tagin-input-hidden");const t=u.value||u.getAttribute("placeholder")||"";e.innerHTML=t.replace(/ /g,"&nbsp;"),document.body.appendChild(e),u.style.setProperty("width",Math.ceil(window.getComputedStyle(e).width.replace("px",""))+1+"px"),e.remove()}function y(e=!1){const t=a(u.value.replace(new RegExp(function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}(o),"g"),"").trim());""===t&&(u.value=""),(u.value.includes(o)||e&&""!=u.value)&&(m().includes(t)&&"false"===s?function(e){for(const t of p.getElementsByClassName(n))t.textContent===e&&(t.style.transform="scale(1.09)",setTimeout((()=>{t.removeAttribute("style")}),150))}(t):(u.insertAdjacentHTML("beforebegin",c(t)),f()),u.value="",u.removeAttribute("style"))}p.addEventListener("click",(()=>u.focus())),u.addEventListener("focus",(()=>p.classList.add("focus"))),u.addEventListener("blur",(()=>p.classList.remove("focus"))),document.addEventListener("click",(e=>{e.target.closest("."+i)&&(e.target.closest("."+i).parentNode.remove(),f())})),u.addEventListener("keydown",(e=>{""===u.value&&8===e.keyCode&&p.getElementsByClassName(n).length&&(p.querySelector(".tagin-tag:last-of-type").remove(),f())})),u.addEventListener("input",(()=>{y(),w()})),u.addEventListener("blur",(()=>{y(!0),w()})),w(),e.addEventListener("change",(()=>{d()!==g()&&([...p.getElementsByClassName(n)].map((e=>e.remove())),""!==d().trim()&&u.insertAdjacentHTML("beforebegin",h().map(c).join("")))}))}var G=".tagin{display:none}.tagin-wrapper{border: 1px solid #ccc;display:flex;flex-wrap:wrap;height:auto;padding:calc(.375rem - 2px) calc(.75rem - 2px);position:relative;overflow:hidden;cursor:text}.tagin-wrapper.focus{color:#495057;background-color:#fff;border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.tagin.is-valid+.tagin-wrapper,.was-validated .tagin:valid+.tagin-wrapper{border-color:#28a745}.tagin.is-invalid+.tagin-wrapper,.was-validated .tagin:invalid+.tagin-wrapper{border-color:#dc3545}.tagin-tag{border-radius:.25rem;color:#fff;border:0;padding:0 4px;display:inline-flex;align-items:center;height:24px;margin:2px;font-weight:300;background-color:#6c757d;transition:transform .1s}.tagin-tag-remove{margin-left:2px;width:18px;height:18px;cursor:pointer;background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23a0aec0' width='18px' height='18px'%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3Cpath d='M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z'/%3E%3C/svg%3E\")}.tagin-tag-remove:hover{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white' width='18px' height='18px'%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3Cpath d='M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z'/%3E%3C/svg%3E\")}.tagin-input{margin-left:2px;border-color:transparent;outline:0;border-width:1px 0;padding:0 2px 0 0;height:28px;color:#495057}.tagin-input:not(.tagin-input-hidden){width:4px;min-width:4px}.tagin-input-hidden{position:absolute;top:0;left:-9999px;overflow:hidden;visibility:hidden;white-space:nowrap";class Z extends class{constructor(e){this._servers=["http://localhost/pe-gold3/","https://www.ucertify.com/","https://www.jigyaasa.info/","http://172.10.195.203/pe-gold3/"],this._REMOTE_API_URL=this._servers[1]+"pe-api/1/index.php",this._client={email:"pradeep.yadav@ucertify.com",password:"786pradeep",isSocial:"false",clientId:"040MA"}}validateApp(e){return new Promise(((t,n)=>{let i=e?"&action=refresh_token&refresh_token=1":"",r=this._client.isSocial?"&social_login=1":"",o=`${this._REMOTE_API_URL}?func=cat2.authenticate&device_id=${this._client.clientId}&email=${this._client.email}&password=${this._client.password+r+i}`,s=new XMLHttpRequest;s.open("POST",o,!0),s.onreadystatechange=e=>{if(4==s.readyState&&200===s.status)try{let e=s.responseText.match(/<jsonstring>(.*?)<\/jsonstring>/);t(JSON.parse(e[1]))}catch(e){n(e)}},s.onerror=e=>{n(e)},e&&s.setRequestHeader("old-access-token",globalThis.apiAccessToken),s.send()}))}getAPIDataJ(e,t,n=function(){}){let i="",r={},o="",s=t.ajax_info||{};if(t=this._assignPartial(t,{},"ajax_info",!0),r.device_id=this._client.clientId,"object"==typeof t)for(let e in t)"object"!=typeof t[e]&&(i+="&"+e+"="+t[e]);if(void 0!==e&&""!=e){for(let e in r)"object"!=typeof r[e]&&(o+="&"+e+"="+r[e]);o+="&func="+e}this.getAPIDataJSON(this._REMOTE_API_URL+"?"+o+"&debug=0&"+i,i,s,(i=>{"Expired"==i?this.getAPIDataJ(e,t,n):n(i)}),e)}getAPIDataJSON(e,t,n,i=function(){},r){let o=new XMLHttpRequest;o.open("POST",e,!0),o.onreadystatechange=e=>{if(4==o.readyState&&200===o.status){let e=o.responseText,n={};try{let t=e.match(/<jsonstring>(.*?)<\/jsonstring>/);if(""!=t[1]){let e=JSON.parse(t[1]);if(e.error&&["Expired","-9"].includes(e.error.error_id))return console.log("Api Error = ",e.error.error_id),void this.validateApp(-9!=e.error.error_id).then((e=>{"Success"==e.status&&(this.setAccessKey(e),i("Expired"))})).catch((e=>{console.log(e)}));e.response?(n=e.response,console.warn("Api data J reponse <-- Received --\x3e",e)):null==e.response&&null==e.error?(n=e,console.warn("Api data J reponse <-- Received II--\x3e",n)):(n=void 0,console.warn({Response_error:e.error}))}}catch(i){if(console.warn("Please check your Internet connection."),console.log("Api data error = ",e),!t.includes("must_reply_override"))return 0;n=void 0}i(n)}},t.includes("no_access_token_required")||o.setRequestHeader("access-token",globalThis.apiAccessToken),o.setRequestHeader("Content-type","application/json"),o.setRequestHeader("Access-Control-Allow-Origin","*"),o.setRequestHeader("Access-Control-Allow-Headers","*"),o.send()}_assignPartial(e,t={},n,i=!1){if(n=n.split(","),i)for(let i in e){-1===n.indexOf(i)&&(t[i]=e[i])}else for(let i in n){let r=n[i];void 0!==e[r]&&(t[r]=e[r])}return t}setAccessKey(e){e.access_token&&e.access_token.length>50&&(globalThis.apiAccessToken=e.access_token,"undefined"!=typeof Storage&&localStorage.setItem("apiAccessToken",e.access_token))}}{constructor(e){super(),this.trackInf={},this.buffer={},this.bsCat1=["Modal","Tooltip","Collapse","Popover","ScrollSpy","Tab","Alert","Dropdown"],this.extraSelectors=["hidden","visible","selected","checked","enabled","children","childNodes"],this.parseHtml=this.templateHtml.bind(this),this.isSSDloaded="",this.loadSSD()}loadSSD(){"object"==typeof globalThis?(globalThis.eventTracker=globalThis.eventTracker||{},globalThis.JUITemp=globalThis.JUITemp||{}):this.isSSDloaded=setInterval((()=>{"object"==typeof globalThis&&(globalThis.eventTracker=globalThis.eventTracker||{},globalThis.JUITemp=globalThis.JUITemp||{},clearInterval(this.isSSDloaded))}),500)}validate(e){return new Promise(((t,n)=>{this.validateApp(e).then((e=>{if("Success"!=e.status)n(e);else try{this.setAccessKey(e),t(e)}catch(e){n(e)}})).catch((e=>{n(e)}))}))}param2Url(e){let t=[];for(var n in e){var i=n+"="+e[n];t.push(i)}return t.join("&")}unique(e){return e.filter(((e,t,n)=>n.indexOf(e)===t))}parseJSON(e,t){let n=t||!1;try{return JSON.parse(e)}catch(e){return n&&console.warn(e),{}}}parseDom(e){return(new DOMParser).parseFromString(e,"text/html")}addScript(e,t,n={}){let i=document.createElement("script");return t?(i.src=t,i.async=!0,n.callback&&(i.onload=function(){n.callback()})):i.innerHTML=e,(n.target?document.body:document.head).append(i),i}createLink(e,t={}){let n=document.createElement("link"),i=t.target?document.body:document.head;return n.href=e,t.preload?(n.rel="preload",n.onload=function(){this.rel=t.type||"stylesheet"},n.as=t.as||"style",n.crossorigin="anonymous"):n.rel="stylesheet",i.append(n),n}enableTagView(e){let t=document.querySelectorAll(".tagin");for(const n of t)e?K(n,e):K(n);return t}addTagViewCss(){this.insert(document.head,`<style>${G}</style>`,"beforeend")}hasInall(e,t){let n="object"==typeof e?e:document.querySelectorAll(e),i=[];return n&&Array.prototype.forEach.call(n,(e=>{e.contains(t)&&i.push(e)})),i}removeDomAttr(e,t){let n="object"==typeof e?e:document.querySelector(e);return n&&Array.prototype.forEach.call(t,(e=>{n.removeAttribute(e)})),n||{}}trigger(e,t,n){let i="object"==typeof e?e:document.querySelector(e);i?n?i.dispatchEvent(new Event(t,n)):i.dispatchEvent(new Event(t)):console.warn("Selector not found.",e)}findChild(e,t,n){let i=("object"==typeof e?e:document.querySelector(e)).children||[],r=[];if(t&&i.length>0){let e=0;for(;i[e];){if(i[e].matches(t)){if(!n){r=i[e];break}r.push(i[e])}e++}return r}return i}closest(e,t){let n="object"==typeof e?e:document.querySelector(e),i=n?n.parentElement:null,r=[];if(t)for(;i;){if(this.find(i,t)){r=this.find(i,t);break}i=i.parentElement}return r}parent(e,t){let n="object"==typeof e?e:document.querySelector(e),i=n?n.parentElement:null;if(t)for(;i&&!i.matches(t);)i=i.parentElement;return i}siblings(e,t){let n="object"==typeof e?e:document.querySelector(e),i=[];if(n)for(var r=n.parentNode.firstChild;r;)r!==n&&r.nodeType===Node.ELEMENT_NODE&&(t?r.matches(t)&&i.push(r):i.push(r)),r=r.nextElementSibling||r.nextSibling;return i}nextAll(e){let t=("object"==typeof e?e:document.querySelector(e)).nextElementSibling,n=[];if(t)for(;t;)t=t.nextElementSibling,n.push(t);return n}nextElm(e,t){let n=("object"==typeof e?e:document.querySelector(e)).nextElementSibling;if(t)for(;n&&!n.matches(t);)n=n.nextElementSibling;return n}prevElm(e,t){let n=("object"==typeof e?e:document.querySelector(e)).previousElementSibling;if(t)for(;n&&!n.matches(t);)n=n.previousElementSibling;return n}onReady(e){document.addEventListener("DOMContentLoaded",(function(t){e.call(t)}))}create(e,t){let n=document.createElement(e);return t&&(n.innerHTML=t),n}clone(e){let t="object"==typeof e?e:document.querySelector(e);return t?t.cloneNode(!0):null}serialize(e){let t="object"==typeof e?e:document.querySelector(e);return t?new URLSearchParams(new FormData(t)).toString():null}empty(e){let t="object"==typeof e?e:document.querySelector(e);if(t)for(;t.firstChild;)t.removeChild(t.firstChild);return t}getBS(e,t,n){let i="object"==typeof e?e:document.querySelector(e);if(i&&this.bsCat1.includes(t)){if(bootstrap[t].getInstance&&bootstrap[t].getInstance(i))return bootstrap[t].getInstance(i);return new bootstrap[t](i,n)}return{}}enableBsAll(e,t,n={}){if(n={...n,trigger:"hover"},this.bsCat1.includes(t)){return[].slice.call(document.querySelectorAll(e)).map((function(e){return n?new bootstrap[t](e,n):new bootstrap[t](e)}))}return console.error("Bootstrap can't enable for this component name"),[]}hideBsAll(e,t){let n=[].slice.call(document.querySelectorAll(e));this.bsCat1.includes(t)?n.forEach((function(e){bootstrap[t].getInstance(e)?.hide?.()})):console.error("Bootstrap can't disable for this component name")}initDropdown(){let e=this;e.enableBsAll('[data-toggle="dropdown"]',"Dropdown"),e.bind("body","click",(function(t){t.target.closest('[data-toggle="dropdown"]')||(e.selectAll('[data-toggle="dropdown"]').forEach((function(e){e.classList.remove("show")})),e.selectAll(".dropdown-menu").forEach((function(e){e.classList.remove("show")})))}))}ajax(e){let t="";if("object"==typeof e.data)if(e.formData)t=e.data;else if(e.withUrl){let t="?";for(let n in e.data)"object"!=typeof e.data[n]&&(t+="&"+n+"="+e.data[n]);e.url+=t}else{t=new FormData;for(let n in e.data)"object"==typeof e.data[n]&&this.isValid(e.data[n])?t=this.jsonFormEncode(t,n,e.data[n]):t.append(n,e.data[n])}return new Promise(((n,i)=>{const r=new XMLHttpRequest;r.open(e.type||"POST",e.url,!0),e.responseType&&(r.responseType=e.responseType),r.onreadystatechange=e=>{if(4==r.readyState&&200===r.status)try{n(r.responseText,e)}catch(e){i(e)}},r.onerror=e=>{i(e)},e.onStart&&(r.onloadstart=e.onStart),e.onEnd&&(r.onloadend=e.onEnd),r.send(t)}))}jsonFormEncode(e,t,n){try{if(Array.isArray(n))for(let i=0;i<n.length;i++)this.jsonFormEncode(e,`${t}[${i}]`,n[i]);else if("object"==typeof n)for(let i in n)this.jsonFormEncode(e,`${t}[${i}]`,n[i]);else e.append(t,n)}catch(e){console.warn("Please provide valid JSON Object in ajax data."+e)}return e}getJSON(e){var t=document.createElement("script");t.src=e,document.body.appendChild(t)}offset(e){let t="object"==typeof e?e:document.querySelector(e),n={rect:t};if(t){let e=t.getBoundingClientRect();n={target:t,clientRect:e,top:e.top+window.scrollY,left:e.left+window.scrollX}}return n}findInArray(e,t){return!(!e||!t)&&t.find((t=>t==e))}inArray(e,t){let n=[];return e&&t&&e.forEach((e=>{t.forEach((t=>{e==t&&!n.includes(t)&&n.push(t)}))})),n.length>0?n.length:-1}serializeArray(e,t){let n=[];return e.forEach((e=>{if((!t||e.matches(t))&&(console.log(e.attributes.length),e.attributes.length>0)){let t={};for(let n of e.attributes)t[n.name]=n.value;n.push(t)}})),n}find(e,t,n){let i="object"==typeof e?e:document.querySelector(e);if(i)switch("object"==typeof n?"action":n){case"all":return i?.querySelectorAll(t);case"child":return i?.querySelector(t).childNodes;case"hidden":return Array.prototype.filter.call(i.querySelectorAll(t),(e=>0==e.offsetWidth&&0==e.offsetHeight));case"visible":return Array.prototype.filter.call(i.querySelectorAll(t),(e=>e.offsetWidth>0&&e.offsetHeight>0));case"checked":return Array.prototype.filter.call(document.querySelectorAll(selector),(e=>e.checked));case"selected":return Array.prototype.filter.call(i.querySelectorAll(t),(e=>e.selected));case"action":{let e=i.querySelectorAll(t);return e&&e.length>0&&n.action&&e.forEach((e=>this.jsAction(e,{action:n.action,actionData:n.actionData}))),e}default:return i.querySelector(t)}return[]}selectAll(e,t,n){let i=this.isExtraSelectors(t,n)?this.selectAction(e,t):"object"==typeof e?e:document.querySelectorAll(e);return i&&i.length>0&&t&&Array.prototype.forEach.call(i,(e=>this.jsAction(e,{action:t,actionData:n}))),i}isExtraSelectors(e,t){return!!this.extraSelectors.includes(e)&&("checked"!=e||void 0===t)}select(e,t,n){return this.isExtraSelectors(t,n)?this.selectAction(e,t):((e="object"==typeof e?e:document.querySelector(e))&&this.jsAction(e,{action:t,actionData:n}),e||{})}getElm(e,t){return document.getElementById(e)||{}}listenAll(e,t,n){let i="object"==typeof e?e:document.querySelectorAll(e);if(i&&i.length>0)for(let e=0;e<i.length;e++)i[e].addEventListener(t,n,!1)}bind(e,t,n){let i="object"==typeof e?e:document.querySelector(e);i&&i.addEventListener(t,n)}listen(e,t,n,i){let r="object"==typeof e?e:"undefined"!=typeof document&&document.querySelector(e);if(!r)return!1;globalThis.eventTracker[n]&&r.removeEventListener(t,globalThis.eventTracker[n]),globalThis.eventTracker[n]=this.onListen.bind(this,n,i,r),r.addEventListener(t,globalThis.eventTracker[n])}removeClass(e,t){let n="object"==typeof e?e:document.querySelectorAll(e);return n&&n?.length>0?Array.prototype.forEach.call(n,(e=>this.jsAction(e,{action:"removeClass",actionData:t}))):"object"==typeof n&&this.jsAction(n,{action:"removeClass",actionData:t}),n||{}}addClass(e,t){let n="object"==typeof e?e:document.querySelectorAll(e);return n&&n?.length>0?Array.prototype.forEach.call(n,(e=>this.jsAction(e,{action:"addClass",actionData:t}))):"object"==typeof n&&this.jsAction(n,{action:"addClass",actionData:t}),n||{}}toggleDom(e,t="toggleDisplay"){let n="object"==typeof e?e:document.querySelectorAll(e);return n&&n.length>0&&Array.prototype.forEach.call(n,(e=>this.jsAction(e,{action:t}))),n||{}}select2(e){let t=document.querySelector(e+" + span > .selection > span");t&&t.click()}setData(e,t){let n="object"==typeof e?e:document.querySelector(e);if(n)for(let e in t)n.dataset[e]=t[e];return n||{}}getData(e,t){return("object"==typeof e?e:document.querySelector(e))?.dataset[t]||{}}setAttr(e,t){let n="object"==typeof e?e:document.querySelector(e);if(n)for(let e in t)n.setAttribute(e,t[e]);return n||{}}setCss(e,t){let n="object"==typeof e?e:document.querySelector(e);if(n)for(let e in t)n.style&&(n.style[e]=t[e]);return n||{}}remove(e){let t=document.querySelectorAll(e);t.length>0&&Array.prototype.forEach.call(t,(e=>e.remove()))}replaceWith(e,t){let n="object"==typeof e?e:document.querySelector(e);if(n){let e=this.templateHtml(t);return n.replaceWith(e),e}return n}wrap(e,t){let n="object"==typeof e?e:document.querySelector(e);if(n){let e=this.templateHtml(t),i=this.innerChild(e);return i.innerHTML=n.outerHTML,n.parentNode.replaceChild(e,n),i.firstChild}return n}unwrap(e){let t="object"==typeof e?e:document.querySelectorAll(e);t&&t.length>0&&t.forEach((e=>{e.outerHTML=e.innerHTML}))}insertAfter(e,t){return e="object"==typeof e?e:document.querySelector(e),t="object"==typeof t?t:document.querySelector(t),e&&t&&t.parentNode.insertBefore(e,t.nextSibling),e}insert(e,t,n){let i="object"==typeof e?e:document.querySelector(e);if(i)switch(n){case"beforebegin":i.insertAdjacentHTML("beforebegin",t);break;case"afterbegin":i.insertAdjacentHTML("afterbegin",t);break;case"beforeend":i.insertAdjacentHTML("beforeend",t);break;case"afterend":i.insertAdjacentHTML("afterend",t)}return i||{}}domIndex(e){let t="object"==typeof e?e:document.querySelector(e);return t?Array.from(t.parentNode.children).indexOf(t):-1}match(e,t){let n="object"==typeof e?e:document.querySelector(e),i=[];return n&&n.length>0?(Array.prototype.forEach.call(n,(e=>{e.matches(t)&&i.push(e)})),i):n&&n.matches(t)}contains(e,t){let n="object"==typeof e?e:document.querySelectorAll(e);return n&&n.length>0?[].filter.call(n,(function(e){return RegExp(t).test(e.textContent)})):[]}extend(){let e={},t=!1,n=0,i=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],n++);const r=function(n){for(let i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t&&"[object Object]"===Object.prototype.toString.call(n[i])?e[i]=extend(!0,e[i],n[i]):e[i]=n[i])};for(;n<i;n++){r(arguments[n])}return e}url(e){return e=e||("object"==typeof window?window.location.href:""),new URLSearchParams(e)}updateEditorUrl(e){let t=`?action=new&content_subtype=${e.subtype}&content_type=${e.type}&content_icon=${e.content_icon}&react_content=1`;window.history.replaceState(null,"",t)}getUrlVars(){let e,t=[],n=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(let i=0;i<n.length;i++)e=n[i].split("="),t.push(e[0]),t[e[0]]=e[1];return t}setApiKey(e){globalThis.apiAccessToken=e}validateAjaxData(e,t){if(0==t||8==t){if(e&&!this.get("is_proposed")){if(e.content_text){try{e.content_text.answers.forEach(((t,n)=>{e.content_text.answers[n].answer=t.answer.replace(/\n/g,"")}))}catch(e){return{answers:[{is_correct:"0",answer:"Option A.",id:"01"},{is_correct:"0",answer:"Option B.",id:"02"},{is_correct:"0",answer:"Option C.",id:"03"},{is_correct:"0",answer:"Option D.",id:"04"}],correct_ans_str:"D",total_answers:4,correct_answers:1}}return e.content_text}return e}return{answers:[{is_correct:"0",answer:"Option A.",id:"01"},{is_correct:"0",answer:"Option B.",id:"02"},{is_correct:"0",answer:"Option C.",id:"03"},{is_correct:"0",answer:"Option D.",id:"04"}],correct_ans_str:"D",total_answers:4,correct_answers:1}}return e}watchDom(e,t,n={childList:!0}){let i=new MutationObserver((function(e){t&&t(e)}));return i.observe(e,n),i}ignoreEnity(e){return e.replace(/&amp;/g,"&")}cache(e){var t=new Map;return function(n){if(t.has(n))return t.get(n);var i=e(n);return t.set(n,i),i}}set(e,t){"save_item"==e&&this.addInLocalstorage(e,t),"object"==typeof globalThis&&(globalThis.JUITemp[e]=t)}addInLocalstorage(e,t){window.localStorage.setItem(e,t)}get(e){return globalThis.JUITemp[e]}caller(){console.log("called from "+arguments.callee.caller.toString())}showmsg(e,t=1e4){let n=document.querySelector("#showMsgAlert");this.buffer.showmsg&&clearTimeout(this.buffer.showmsg),n?(n.classList.add("show"),this.select("#showMsgBody").innerHTML=e):this.insert(document.body,this.getModalHtml(e,"Alert"),"beforebegin"),setTimeout((()=>{let e=this.getBS(document.querySelector("#showMsgAlert"),"Alert");e.close&&e.close()}),t)}alert(e){document.getElementById("showBSModal")?(this.getBS("#showBSModal","Modal").show(),this.select("#showBSBody").innerHTML=e||"No msg provided..."):(this.insert(document.body,this.getModalHtml(e,"showBSModal"),"beforeend"),this.getBS("#showBSModal","Modal").show())}formatXml(e,t){let n=t||!1,i=n?e.match(/<!--\[CDATA\[[\s\S]*?\]\]-->/gim):"";if(e=e.replace(/\t/g,"").replace(/(>)(<)(\/*)/g,"$1\n$2$3").replace(/ *(.*) +\n/g,"$1\n").replace(/(<.+>)(.+\n)/g,"$1\n$2"),n){let t=e.match(/<!--\[CDATA\[[\s\S]*?\]\]-->/gim);e=e.replace(t,i)}let r="",o=e.split("\n"),s=0,a="other",l={"single->single":0,"single->closing":-1,"single->opening":0,"single->other":0,"closing->single":0,"closing->closing":-1,"closing->opening":0,"closing->other":0,"opening->single":1,"opening->closing":0,"opening->opening":1,"opening->other":1,"other->single":0,"other->closing":-1,"other->opening":0,"other->other":0};for(let e=0;e<o.length;e++){let t=o[e];if(""!=t){let e=Boolean(t.match(/<.+\/>/)),n=Boolean(t.match(/<\/.+>/)),i=Boolean(t.match(/<[^!].*>/)),o=e?"single":n?"closing":i?"opening":"other",c=a+"->"+o;a=o;let d="";s+=l[c];for(let e=0;e<s;e++)d+="\t";"opening->closing"==c?r=r.substr(0,r.length-1)+t+"\n":r+=d+t+"\n"}}return r}getModalHtml(e,t){switch(t){case"Alert":return`\n                    <div id="showMsgAlert" class="alert alert-warning alert-dismissible text-center fade show" role="alert" style="z-index:99999;min-height:50px;position:fixed;width:100%;">\n                        <span id="showMsgBody">${e}</span>\n                        <button type="button" class="btn-close close" style="margin-top: -3px;" data-bs-dismiss="alert" data-dismiss="alert"  aria-label="Close"></button>\n                    </div>\n                `;case"showBSModal":return`\n                    <div class="modal fade" id="showBSModal" tabindex="-1" aria-labelledby="Alert" aria-hidden="true">\n                        <div class="modal-dialog modal-dialog-centered" id="showBSDialog">\n                            <div class="modal-content">\n                                <div class="modal-body text-center fs-5 pt-4" id="showBSBody">\n                                    ${e}\n                                </div>\n                                <div class="modal-footer">\n                                    <button type="button" class="btn bg-light m-auto text-dark border border-secondary" data-bs-dismiss="modal" data-dismiss="modal">OK</button>\n                                </div>\n                            </div>\n                        </div>\n                    </div>`;default:return"<div>Nothing</div>"}}isValid(e,t=!1){return!(!e||null==e||""==e||"undefined"==e||null==e)||!(!t||e==t)}store(e,t){}query(e){var t="item_error_log=1";if("object"==typeof e)for(let n in e)"object"!=typeof e[n]&&(t+="&"+n+"="+e[n]);return t}activate(e){document.querySelector("#activateLoaderContainer")&&document.querySelector("#activateLoaderContainer").remove(),e>0&&this.insert(document.body,'<div id="activateLoaderContainer" class="activateOverlay" style="z-index:9999999;"><center><div class="activator" style="height:100px; width: 100px;"></div></center></div>',"afterend")}onListen(e,t,n,i){let r=i.target,o=r.closest&&r.closest(e);o&&n.contains(o)&&t.call(this,o,i)}isFocus(e){return("object"==typeof e?e:document.querySelector(e))==document.activeElement}innerChild(e){let t="object"==typeof e?e:document.querySelector(e),n=t;if(t&&t.lastChild)for(t=t.lastChild;t;)n=t,t=t.lastChild;return n}templateHtml(e){let t=document.createElement("template");return t.innerHTML=e,t.content.firstElementChild.cloneNode(!0)}selectAction(e,t){switch(t){case"hidden":return Array.prototype.filter.call(document.querySelectorAll(e),(e=>0==e.offsetWidth&&0==e.offsetHeight));case"visible":return Array.prototype.filter.call(document.querySelectorAll(e),(e=>e.offsetWidth>0&&e.offsetHeight>0));case"selected":return Array.prototype.filter.call(document.querySelectorAll(e),(e=>e.selected));case"checked":return Array.prototype.filter.call(document.querySelectorAll(e),(e=>e.checked));case"enabled":return document.querySelectorAll(e+":not([disabled]");case"children":return document.querySelector(e).children;case"childNodes":return document.querySelector(e).childNodes;default:return document.querySelector(e)}}jsAction(e,t){if(e instanceof HTMLElement||e instanceof Node)switch(t.action){case"show":e.style.display=t.actionData||"";break;case"hide":e.style.display="none";break;case"toggleDisplay":e.style.display="none"==e.style.display?"block":"none";break;case"addClass":"object"==typeof t.actionData?e.classList.add(...t.actionData):e.classList.add(t.actionData);break;case"removeClass":"object"==typeof t.actionData?e.classList.remove(...t.actionData):e.classList.remove(t.actionData);break;case"toggleClass":e.classList.toggle(t.actionData);break;case"html":e.innerHTML=t.actionData;break;case"value":e.value=t.actionData;break;case"text":e.textContent=t.actionData;break;case"checked":e.checked=t.actionData;break;case"remove":e.remove();break;case"removeAttr":e.removeAttribute(t.actionData);break;case"css":this.setCss(e,t.actionData);break;case"attr":this.setAttr(e,t.actionData);break;case"data":this.setData(e,t.actionData);break;case"getData":this.getData(e,t.actionData)}}slideUp(e,t=500){e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.boxSizing="border-box",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout((()=>{e.style.display="none",e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property")}),t)}slideDown(e,t=500){e.style.removeProperty("display");let n=window.getComputedStyle(e).display;"none"===n&&(n="block"),e.style.display=n;let i=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.boxSizing="border-box",e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=i+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout((()=>{e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property")}),t)}slideToggle(e,t=500){return"none"===window.getComputedStyle(e).display?this.slideDown(e,t):this.slideUp(e,t)}setCookie(e,t,n){const i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);let r="expires="+i.toUTCString();document.cookie=e+"="+t+";"+r+";path=/"}getCookie(e){let t=e+"=",n=decodeURIComponent(document.cookie).split(";");for(let e=0;e<n.length;e++){let i=n[e];for(;" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return""}}new Z;const ee=new Z;class te{constructor(){this.userAnsXML="<SMANS></SMANS>",this.xaxis=[],this.yaxis=[],this.count=0,this.drawstr="",this.elemId="#hptmain0",this.labBinded=!0,this.result=!1,this.temp=0}readyThis(e,t,n,i){if(e="#"+e,!t){this.labBinded=!0;const t=function(t){if(this.labBinded){let n=t,i="";n.classList.contains("selected")?(n.setAttribute("data-userans",0),n.classList.remove("selected")):(n.setAttribute("data-userans",1),n.classList.add("selected")),ee.find(e,"[type] .textClick.selected","all").forEach((function(e,t){i=0==t?e.textContent:i+"|"+e.textContent})),ee.find(e,"[type]",{action:"attr",actionData:{"data-userans":i}})}},n=function(t){if(this.labBinded){let n="";"SPAN"==t.target?.nodeName?(ee.select(t.target,"removeClass",["selecttext","selected"]),this.removespan(t.target,e,0)):this.highlightText(e),ee.find(e,"[type] .selecttext.selected","all").forEach((function(e,t){n=0==t?e.textContent:n+"|"+e.textContent}));let i=ee.find(e,"[type]");ee.select(i,"attr",{"data-userhtml":i.innerHTML,"data-userans":n})}};ee.listen(e,"touchstart",".textClick",t.bind(this)),ee.listen(e,"touchend",".textClick",t.bind(this)),ee.listen(e,"click",".textClick",t.bind(this)),ee.listen(e,"touchstart",'[type="textselect"]',n.bind(this)),ee.listen(e,"touchend",'[type="textselect"]',n.bind(this)),ee.listen(e,"click",'[type="textselect"]',n.bind(this))}}check_Ans(e){let t={inNativeIsCorrect:!1,userAnswers:""};this.userAnsXML="<smans type='4'>\\n",this.result=!0,this.temp=0;let n=ee.select(e).children;for(let t=0;t<n.length;t++)this.userAnsXML=this.checkChildAnswer(e,n[t],this.userAnsXML);return this.userAnsXML+="</smans>",window.ISSPECIALMODULEUSERXMLCHANGE=1,t.userAnswers=ee.select("#special_module_user_xml").value,"undefined"!=typeof calculatePoint&&calculatePoint(ee.select(e).getAttribute("totalcorrectans"),temp),window.inNative&&(window.getHeight?.(),t.inNativeIsCorrect=this.result,window.postMessage(JSON.stringify(t),"*")),{uXml:this.userAnsXML,ans:this.result}}checkChildAnswer(e,t,n){let i=t.getAttribute("type");switch(i){case"textclick":case"textselect":var r=t.getAttribute("data-correctans").split("|").sort().join("|"),o=t.getAttribute("data-userans").split("|").sort();r!=(o=(o=o.filter((function(e){return e}))).join("|"))&&(this.result=!1),"undefined"!=typeof calculatePoint&&ee.find(t,"p","all").forEach((e=>{e.classList.contains("selected")&&e.getAttribute("data-userans")==e.getAttribute("data-correctans")&&this.temp++})),this.userAnsXML+="textselect"==i?`<div id="${t.getAttribute("id")}" data-userHtml="${escape(t.getAttribute("data-userhtml"))}" data-userAns="${escape(t.getAttribute("data-userans"))}"></div>\\n`:`<div id="${t.getAttribute("id")}" data-userAns="${escape(t.getAttribute("data-userans"))}"></div>\\n`}return this.userAnsXML}showansdrag(e,t,n){void 0===n&&(n=0);let i=ee.select(e).children;if(i)for(let r=0;r<i.length;r++)this.showchilddragans(e,i[r],t,n)}showchilddragans(e,t,n,i){let r=ee.select(t);switch(r.getAttribute("type")){case"textclick":if("c"==n){ee.find(r,".show_correct,.show_incorrect","all").length>0&&(ee.find(r,".show_correct,.show_incorrect",{action:"removeClass",actionData:["show_correct","show_incorrect"]}),ee.find(r,".correct_incorrect_icon",{action:"remove"}),ee.find(r,".correct_incorrect_icon",{action:"removeAttr",actionData:"style"}));let i=t.getAttribute("data-correctans").split("|");t.getAttribute("type");i.forEach((t=>{this.selectText(e,t,n,"selected")}))}else if("u"==n){t.getAttribute("type");try{var o=decodeURIComponent(t.getAttribute("data-userans"))}catch(e){o=decodeURIComponent(unescape(t.getAttribute("data-userans")))}if(o=(o=o.split("|")).filter((function(e){return e})),void 0!==i&&1==i){ee.find(e,".selected",{action:"removeClass",actionData:"selected"});var s=t.getAttribute("data-correctans").split("|");o.forEach((t=>{let i="show_incorrect";ee.findInArray(t,s)?(i="show_correct",this.selectText(e,t,n,i)):this.selectText(e,t,n,i)}))}else o.forEach((t=>{this.selectText(e,t,"c","selected"),ee.select(e+" p span").length&&ee.select(e+" p span").remove(),ee.select(".textClick","removeClass",["show_incorrect","show_correct"])}))}break;case"textselect":if("c"==n){ee.find(r,".show_correct,.show_incorrect").length>0&&(ee.find(r,".show_correct,.show_incorrect",{action:"removeClass",actionData:["show_correct","show_incorrect"]}),ee.find(r,".correct_incorrect_icon",{action:"removeAttr",actionData:"style"}));s=t.getAttribute("data-correctans").split("|"),t.getAttribute("type");ee.select(t,"html",t.getAttribute("data-correcthtml").replace(/<span>/g,"</span>"))}else if("u"==n){t.getAttribute("type");try{o=decodeURIComponent(t.getAttribute("data-userans"))}catch(e){o=decodeURIComponent(unescape(t.getAttribute("data-userans")))}if(o=(o=o.split("|")).filter((function(e){return e})),""!=t.getAttribute("data-userhtml")||"undefined"==t.getAttribute("data-userhtml")){var a=t.getAttribute("data-userhtml");try{a=decodeURIComponent(a);var l=decodeURIComponent(a)}catch(e){console.log(e)}ee.select(t,"html",l)}if(void 0!==i&&1==i){let e='<span class="icomoon-new-24px-checkmark-circle-1 font-weight-bold" style="color:green;vertical-align:super;">',n='<span class="icomoon-new-24px-cancel-circle-1 font-weight-bold red" style="vertical-align: super;">';ee.insert(t.querySelector('span[userans="1"]span[correctans="1"]'),'<span class="correct_incorrect_icon" style="position:absolute;z-index:100;width:18px;height:18px;bottom:17px;background:white;border-radius:12px;font-size: 18px;"> '+e+"</span></span>","beforeend"),ee.insert(t.querySelector('span[userans="1"]span[correctans="0"]'),'<span class="correct_incorrect_icon" style="position:absolute;z-index:100;width:18px;height:18px;bottom:17px;background:white;border-radius:12px;font-size: 18px;"> '+n+"</span></span>","beforeend")}}break;case"imagehighlight":{let t=ee.find(e,"canvas"),i=ee.select("#special_module_parse").value,r=i.substring(i.indexOf("{"),i.lastIndexOf("}")+1);if(""!=r&&(r=JSON.parse(r)),this.drawOnCanvas(t,r,window.color),"c"==n){let e=t.getAttribute("correctans");""!=e&&(e=JSON.parse(e)),this.drawOnCanvas(t,e,"green")}break}}}calculateArea(e,t,n){return{top:Math.min.apply(Math,n),left:Math.min.apply(Math,t),width:Math.max.apply(Math,t)-Math.min.apply(Math,t),height:Math.max.apply(Math,n)-Math.min.apply(Math,n)}}getCoordinate(e,t,n,i){return 0==i?this.drawstr='{"'+ ++i+'":{"x":['+t+'],"y":['+n+"]}}":(this.drawstr=ee.select("#special_module_parse").value,this.drawstr=this.drawstr.substring(this.drawstr.indexOf("{"),this.drawstr.lastIndexOf("}")+1),this.drawstr=this.drawstr.slice(0,-1),this.drawstr+=',"'+ ++i+'":{"x":['+t+'],"y":['+n+"]}}"),ee.selectAll(ee.select(e).children,"attr",{userans:this.drawstr}),this.createUserAnsXMLDraw(this.drawstr),this.userAnsXML}update_HTMLValue(){let e=ee.parseHtml(ee.select("#special_module_xml").value),t="",n="";if(e)for(let i of e.attributes)switch(na_attr.nameme){case"bgimg":t=i.value;break;case"path":n=i.value}let i=ee.children(e,"div"),r=i.getAttribute("top"),o=i.getAttribute("left"),s=i.getAttribute("width"),a=i.getAttribute("height");ee.select("#area","css",{height:a,top:r,width:s,left:o}),t&&n&&ee.select("#im","attr",{src:n+"/"+t})}movetarget(e,t,n){let i;e.style.display="",!window.event&&n.layerX?(e.style.top=n.layerY-e.height/2+"px",e.style.left=n.layerX-e.width/2+"px"):(e.style.top=n.offsetY-e.height/2+"px",e.style.left=n.offsetX-e.width/2+"px"),i=this.checkmodule(e,t),this.createUserAnsXML(e.style.top,e.style.left);let r=document.getElementById("special_module_user_xml");r.value=this.userAnsXML,r=document.getElementById("answer"),r.checked=i>0,"undefined"!=typeof calculatePoint&&(this.temp=1==i,calculatePoint(1,i))}createUserAnsXMLDraw(e){this.userAnsXML='<SMANS type="4"><div userans="'+e+'"></div></SMANS>'}createUserAnsXML(e,t){this.userAnsXML='<SMANS type="4"><div targetTop="'+parseInt(e)+'" targetLeft="'+parseInt(t)+'" /></SMANS>'}checkmodule(e,t){let n=0;return parseInt(e.style.top)+e.height/2>=parseInt(t.style.top)&&parseInt(e.style.top)+e.height/2<=parseInt(t.style.top)+parseInt(t.style.height)&&parseInt(e.style.left)+e.width/2>=parseInt(t.style.left)&&parseInt(e.style.left)+e.width/2<=parseInt(t.style.left)+parseInt(t.style.width)&&(n=1),n}drawOnCanvas(e,t,n){if(e){let i=0!=e.toString().indexOf("d")?document.getElementById(e.getAttribute("id")):document.getElementById(e),r=null!=i?i.getContext("2d"):"",o=Object.keys(t).length;if(""!=t&&""!=r)for(let e=1;e<=o;e++)for(let i=0;i<=t[e].x.length;i++)r.beginPath(),r.lineWidth="4",r.strokeStyle=n,r.moveTo(t[e].x[i],t[e].y[i]),r.lineTo(t[e].x[i+1],t[e].y[i+1]),r.stroke()}}compareDrawing(e,t,n){let i=0,r=this.getAreaVal(e),o=this.getAreaVal(t),s=0,a=0,l=Object.keys(o).length,c=Object.keys(r).length;for(let e=1;e<=l;e++){for(let t=1;t<=c;t++)if(r[t].height<=o[e].height&&r[t].width<=o[e].width&&r[t].top>=o[e].top&&o[e].left+o[e].width-(r[t].left+r[t].width)>=0&&r[t].left>=o[e].left&&o[e].top+o[e].height-(r[t].top+r[t].height)>=0){s++;break}"undefined"!=typeof calculatePoint&&(e==s&&a++,calculatePoint(ee.select(n).getAttribute("totalcorrectans"),a))}return l==s&&l==c&&(i=1),i}getAreaVal(e){let t=Object.keys(e).length;if(""!=e){let n=[];for(let i=1;i<=t;i++)n[i]=this.calculateArea("",e[i].x,e[i].y);return n}}selectText(e,t,n,i){let r=ee.selectAll(e+" p");for(var o=0;o<r.length;o++){let e=r[o];if(e.textContent.trim()==t&&(e.classList.add(i),"u"==n)){let t;t="show_correct"==i?'<span class="icomoon-new-24px-checkmark-circle-1 font-weight-bold" style="color:green;vertical-align:7px">':'<span class="icomoon-new-24px-cancel-circle-1 font-weight-bold red" style="vertical-align:7px">',ee.insert(e,'<span class="correct_incorrect_icon" style="position:absolute;z-index:100;width:18px;height:18px;bottom:16px;background:white;border-radius:12px;font-size: 18px;"> '+t+"</span></span>")}}}highlightText(e){if(0!=this.getSelected().getRangeAt(0).endOffset){this.snapSelectionToWord();let n=this.getSelected().getRangeAt(0),i=(n.startOffset,ee.find(e,"[type]").getAttribute("data-correctans").split("|"));var t=n.toString();if(t=t.trim()){let e=ee.findInArray(t,i)?1:0;this.pasteHtmlAtCaret("<span class='selecttext selected' correctans="+e+" userans='1'>"+t+"</span> ")}}}snapSelectionToWord(){let e;if(window.getSelection&&(e==window.getSelection()).modify){if(e=window.getSelection(),""!=e&&!e.isCollapsed){var t=document.createRange();t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset);var n=t.collapsed;t.detach();var i=e.focusNode,r=e.focusOffset;e.collapse(e.anchorNode,e.anchorOffset),n?(ee.findInArray(e.anchorNode.textContent.charAt(e.anchorOffset-1),[",",".","!","?",";",")","}"])&&(e.modify("move","backward","character"),e.modify("move","forward","word")),e.extend(i,r),e.modify("extend","forward","character"),e.modify("extend","backward","word")):(e.modify("move","forward","character"),e.modify("move","backward","word"),e.extend(i,r),ee.findInArray(e.anchorNode.textContent.charAt(r-1),[",",".","!","?",";",")","}"])&&(e.modify("extend","backward","character"),e.modify("extend","forward","word")))}}else if(e==document.selection&&"Control"!=e.type){let t=e.createRange();if(t.text){for(t.expand("word");/\s$/.test(t.text);)t.moveEnd("character",-1);t.select()}}}pasteHtmlAtCaret(e){let t,n;if(window.getSelection){if(t=window.getSelection(),t.getRangeAt&&t.rangeCount){n=t.getRangeAt(0),n.deleteContents();var i=document.createElement("div");i.innerHTML=e;for(var r,o,s=document.createDocumentFragment();r=i.firstChild;)o=s.appendChild(r);n.insertNode(s),o&&(n=n.cloneRange(),n.setStartAfter(o),n.collapse(!0),t.removeAllRanges(),t.addRange(n))}}else document.selection&&"Control"!=document.selection.type&&document.selection.createRange().pasteHTML(e)}getSelected(){if(window.getSelection)return window.getSelection();if(document.getSelection)return document.getSelection();var e=document.selection&&document.selection.createRange();return!!e.text&&e.text}removespan(e,t,n){let i=e.innerHTML,r=new RegExp("<\\/?span[^>]*>","g");i=i.replace(r,""),e.parentNode.replaceChild(document.createTextNode(i),e),n||ee.find(t,"[type]",{action:"html",actionData:ee.find(t,"[type]").innerHTML})}modeOnHot(e){ee.selectAll(".test, .review","addClass","h"),e?(ee.selectAll(".review","removeClass","h"),this.unBindLab(),this.showansdrag(this.elemId,"u",1)):(ee.selectAll(".test","removeClass","h"),ee.selectAll(".review","addClass","h"),this.bindLab(),this.showansdrag(this.elemId,"u",0))}unBindLab(){this.labBinded=!1,ee.find(this.elemId,".hotArea0.hotArea",{action:"css",actionData:{display:"block"}}),ee.find(this.elemId,".hotSpotImg",{action:"css",actionData:{pointerEvents:"none"}})}bindLab(){this.labBinded=!0,ee.find(this.elemId,".hotArea0.hotArea",{action:"css",actionData:{display:"none"}}),ee.find(this.elemId,".hotSpotImg",{action:"css",actionData:{pointerEvents:"auto"}})}}function ne(e,t){return!0===isNaN(Number(e))?this.x=0:this.x=e,!0===isNaN(Number(t))?this.y=0:this.y=t,{X:this.x,Y:this.y}}const ie=new Z;class re{constructor(e){this.prevPoint=void 0,this.defaultOptions={target:"",penSize:1,width:e.width,height:e.height,cssClass:"",onClick:e=>{},onMove:e=>{},onPaint:e=>{},onRelease:e=>{}},this.penWidth=2,this.drawing=!1,this.cap="round",this.ID="dooScribCanvas"+Math.floor(100*Math.random()+1),this.drawingSurface="",e&&(this.Settings={...this.defaultOptions,...e}),!0===isNaN(this.Settings.height)&&(this.Settings.height=100),!0===isNaN(this.Settings.width)&&(this.Settings.width=100),this.init()}init(){let e=this.Settings.target;e?("hptmain0"==e.getAttribute("id")&&ie.empty(e),ie.insert(e,`<canvas id='${this.ID}' tabindex='0' class='relative ${this.Settings.cssClass}' type='${this.Settings.type}' correctans='${this.Settings.correctans}' userans=''  height='${this.Settings.height}' width='${this.Settings.width}'></canvas>`,"beforeend"),this.penSize(this.Settings.penSize),this.drawingSurface=document.getElementById(this.ID).getContext("2d"),this.drawingSurface.lineWidth=this.penSize(),this.drawingSurface.lineCap=this.cap,!1===this.hasTouch()?(document.getElementById(this.ID).addEventListener("mousedown",this.clickDown.bind(this),!0),document.getElementById(this.ID).addEventListener("mousemove",this.moved.bind(this),!0),document.addEventListener("mouseup",this.clickUp.bind(this),!0)):(document.getElementById(this.ID).addEventListener("touchstart",this.clickDown.bind(this),!0),document.getElementById(this.ID).addEventListener("touchmove",this.moved.bind(this),!0),document.getElementById(this.ID).addEventListener("touchend",this.clickUp.bind(this),!0))):console.error("Target not defined")}normalizeTouch(e){if(!0===this.hasTouch()){let t=window.scrollY;["touchstart","touchmove"].indexOf(e.type)>-1&&(e.clientX=e.targetTouches[0].pageX,e.clientY=e.targetTouches[0].pageY-t),["touchend"].indexOf(e.type)>-1&&(e.clientX=e.changedTouches[0].pageX,e.clientY=e.changedTouches[0].pageY-t)}return e}clickDown(e){if(!0===this.isDrawing())return;e||(e=window.event),!0===this.hasTouch()&&(e.preventDefault(),e=this.normalizeTouch(e));let t=ie.offset(this.Settings.target),n=window.scrollY,i=new ne(e.clientX-t.left,e.clientY-(t.top-n));return this.prevPoint=i,this.drawing=!0,this.Settings.onClick(i),!1}moved(e){e||(e=window.event),!0===this.hasTouch()&&(e.preventDefault(),e=this.normalizeTouch(e));var t=ie.offset(this.Settings.target),n=window.scrollY,i=new ne(e.clientX-t.left,e.clientY-(t.top-n));return!0===this.isDrawing()?(this.drawLine(this.prevPoint.X,this.prevPoint.Y,i.X,i.Y),this.prevPoint=i,this.Settings.onPaint(i)):this.Settings.onMove(i),!1}clickUp(e){if(!1===this.isDrawing())return;!0===this.hasTouch()&&(e.preventDefault(),e=this.normalizeTouch(e));let t=ie.offset(this.Settings.target),n=window.scrollY,i=new ne(e.clientX-t.left,e.clientY-(t.top-n));return this.Settings.onRelease(i),this.drawing=!1,!1}hasTouch(){return"ontouchstart"in window}penSize(e){return void 0!==e&&!1===isNaN(Number(e))&&(this.penWidth=e),this.penWidth}isDrawing(){if(this.Settings.editable)return this.drawing}lineCap(e){if(void 0!==e)switch(e){case"butt":case"round":case"square":this.cap=e}return this.cap}lineColor(e){if(void 0!==e){let t=ie.parseHtml("<div id='stub' style='backgroundColor:white'></div>");t.style.backgroundColor=e;let n=t.style.backgroundColor;void 0!==n&&""!==n&&(window.color=e)}return window.color}context(){return this.drawingSurface}clearSurface(){let e=ie.find(document,"canvas").getAttribute("width").replace("px",""),t=ie.find(document,"canvas").getAttribute("height").replace("px","");this.drawingSurface.clearRect(0,0,e,t)}drawLine(e,t,n,i){void 0!==e&&void 0!==t&&void 0!==n&&void 0!==i&&!1===isNaN(Number(e))&&!1===isNaN(Number(t))&&!1===isNaN(Number(n))&&!1===isNaN(Number(i))&&(this.drawingSurface.lineCap=this.cap,this.drawingSurface.strokeStyle=window.color,this.drawingSurface.lineWidth=this.penWidth,this.drawingSurface.beginPath(),this.drawingSurface.moveTo(e,t),this.drawingSurface.lineTo(n,i),this.drawingSurface.stroke())}}class oe{config={};VERSION="1.2.0";DOMNodeTypes={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};constructor(){this.initConfigDefaults(),this.initRequiredPolyfills()}initConfigDefaults(){void 0===this.config.escapeMode&&(this.config.escapeMode=!0),this.config.attributePrefix=this.config.attributePrefix||"_",this.config.arrayAccessForm=this.config.arrayAccessForm||"none",this.config.emptyNodeForm=this.config.emptyNodeForm||"text",void 0===this.config.enableToStringFunc&&(this.config.enableToStringFunc=!0),this.config.arrayAccessFormPaths=this.config.arrayAccessFormPaths||[],void 0===this.config.skipEmptyTextNodesForObj&&(this.config.skipEmptyTextNodesForObj=!0),void 0===this.config.stripWhitespaces&&(this.config.stripWhitespaces=!0),this.config.datetimeAccessFormPaths=this.config.datetimeAccessFormPaths||[],void 0===this.config.useDoubleQuotes&&(this.config.useDoubleQuotes=!1),this.config.xmlElementsFilter=this.config.xmlElementsFilter||[],this.config.jsonPropertiesFilter=this.config.jsonPropertiesFilter||[],void 0===this.config.keepCData&&(this.config.keepCData=!1)}initRequiredPolyfills(){}getNodeLocalName(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!=t||(t=e.nodeName),t}getNodePrefix(e){return e.prefix}escapeXmlChars(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}unescapeXmlChars(e){return e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&amp;/g,"&")}checkInStdFiltersArrayForm(e,t,n,i){for(var r=0;r<e.length;r++){var o=e[r];if("string"==typeof o){if(o==i)break}else if(o instanceof RegExp){if(o.test(i))break}else if("function"==typeof o&&o(t,n,i))break}return r!=e.length}toArrayAccessForm(e,t,n){switch(this.config.arrayAccessForm){case"property":e[t]instanceof Array?e[t+"_asArray"]=e[t]:e[t+"_asArray"]=[e[t]]}!(e[t]instanceof Array)&&this.config.arrayAccessFormPaths.length>0&&this.checkInStdFiltersArrayForm(this.config.arrayAccessFormPaths,e,t,n)&&(e[t]=[e[t]])}fromXmlDateTime(e){var t=e.split(/[-T:+Z]/g),n=new Date(t[0],t[1]-1,t[2]),i=t[5].split(".");if(n.setHours(t[3],t[4],i[0]),i.length>1&&n.setMilliseconds(i[1]),t[6]&&t[7]){var r=60*t[6]+Number(t[7]);r=0+("-"==(/\d\d-\d\d:\d\d$/.test(e)?"-":"+")?-1*r:r),n.setMinutes(n.getMinutes()-r-n.getTimezoneOffset())}else-1!==e.indexOf("Z",e.length-1)&&(n=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())));return n}checkFromXmlDateTimePaths(e,t,n){if(this.config.datetimeAccessFormPaths.length>0){var i=n.split(".#")[0];return this.checkInStdFiltersArrayForm(this.config.datetimeAccessFormPaths,e,t,i)?this.fromXmlDateTime(e):e}return e}checkXmlElementsFilter(e,t,n,i){return!(t==this.DOMNodeTypes.ELEMENT_NODE&&this.config.xmlElementsFilter.length>0)||this.checkInStdFiltersArrayForm(this.config.xmlElementsFilter,e,n,i)}parseDOMChildren(e,t){if(e.nodeType==this.DOMNodeTypes.DOCUMENT_NODE){for(var n=new Object,i=e.childNodes,r=0;r<i.length;r++){if((o=i.item(r)).nodeType==this.DOMNodeTypes.ELEMENT_NODE)n[s=this.getNodeLocalName(o)]=this.parseDOMChildren(o,s)}return n}if(e.nodeType==this.DOMNodeTypes.ELEMENT_NODE){(n=new Object).__cnt=0;for(i=e.childNodes,r=0;r<i.length;r++){var o=i.item(r),s=this.getNodeLocalName(o);if(o.nodeType!=this.DOMNodeTypes.COMMENT_NODE){var a=t+"."+s;this.checkXmlElementsFilter(n,o.nodeType,s,a)&&(n.__cnt++,null==n[s]?(n[s]=this.parseDOMChildren(o,a),this.toArrayAccessForm(n,s,a)):(null!=n[s]&&(n[s]instanceof Array||(n[s]=[n[s]],this.toArrayAccessForm(n,s,a))),n[s][n[s].length]=this.parseDOMChildren(o,a)))}}for(var l=0;l<e.attributes.length;l++){var c=e.attributes.item(l);n.__cnt++,n[this.config.attributePrefix+c.name]=c.value}var d=this.getNodePrefix(e);return null!=d&&""!=d&&(n.__cnt++,n.__prefix=d),null!=n["#text"]&&(n.__text=n["#text"],n.__text instanceof Array&&(n.__text=n.__text.join("\n")),this.config.stripWhitespaces&&(n.__text=n.__text.trim()),delete n["#text"],"property"==this.config.arrayAccessForm&&delete n["#text_asArray"],n.__text=this.checkFromXmlDateTimePaths(n.__text,s,t+"."+s)),null!=n["#cdata-section"]&&(n.__cdata=n["#cdata-section"],delete n["#cdata-section"],"property"==this.config.arrayAccessForm&&delete n["#cdata-section_asArray"]),0==n.__cnt&&"text"==this.config.emptyNodeForm?n="":1==n.__cnt&&null!=n.__text?n=n.__text:1!=n.__cnt||null==n.__cdata||this.config.keepCData?n.__cnt>1&&null!=n.__text&&this.config.skipEmptyTextNodesForObj&&(this.config.stripWhitespaces&&""==n.__text||""==n.__text.trim())&&delete n.__text:n=n.__cdata,delete n.__cnt,!this.config.enableToStringFunc||null==n.__text&&null==n.__cdata||(n.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),n}if(e.nodeType==this.DOMNodeTypes.TEXT_NODE||e.nodeType==this.DOMNodeTypes.CDATA_SECTION_NODE)return e.nodeValue}startTag(e,t,n,i){var r="<"+(null!=e&&null!=e.__prefix?e.__prefix+":":"")+t;if(null!=n)for(var o=0;o<n.length;o++){var s=n[o],a=e[s];this.config.escapeMode&&(a=this.escapeXmlChars(a)),r+=" "+s.substr(this.config.attributePrefix.length)+"=",this.config.useDoubleQuotes?r+='"'+a+'"':r+="'"+a+"'"}return r+=i?"/>":">"}endTag(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}endsWith(e,t){return-1!==e.indexOf(t,e.length-t.length)}jsonXmlSpecialElem(e,t){return!!("property"==this.config.arrayAccessForm&&this.endsWith(t.toString(),"_asArray")||0==t.toString().indexOf(this.config.attributePrefix)||0==t.toString().indexOf("__")||e[t]instanceof Function)}jsonXmlElemCount(e){var t=0;if(e instanceof Object)for(var n in e)this.jsonXmlSpecialElem(e,n)||t++;return t}checkJsonObjPropertiesFilter(e,t,n){return 0==this.config.jsonPropertiesFilter.length||""==n||this.checkInStdFiltersArrayForm(this.config.jsonPropertiesFilter,e,t,n)}parseJSONAttributes(e){var t=[];if(e instanceof Object)for(var n in e)-1==n.toString().indexOf("__")&&0==n.toString().indexOf(this.config.attributePrefix)&&t.push(n);return t}parseJSONTextAttrs(e){var t="";return null!=e.__cdata&&(t+="<![CDATA["+e.__cdata+"]]>"),null!=e.__text&&(this.config.escapeMode?t+=this.escapeXmlChars(e.__text):t+=e.__text),t}parseJSONTextObject(e){var t="";return e instanceof Object?t+=this.parseJSONTextAttrs(e):null!=e&&(this.config.escapeMode?t+=this.escapeXmlChars(e):t+=e),t}getJsonPropertyPath(e,t){return""===e?t:e+"."+t}parseJSONArray(e,t,n,i){var r="";if(0==e.length)r+=this.startTag(e,t,n,!0);else for(var o=0;o<e.length;o++)r+=this.startTag(e[o],t,this.parseJSONAttributes(e[o]),!1),r+=this.parseJSONObject(e[o],this.getJsonPropertyPath(i,t)),r+=this.endTag(e[o],t);return r}parseJSONObject(e,t){var n="";if(this.jsonXmlElemCount(e)>0)for(var i in e)if(!this.jsonXmlSpecialElem(e,i)&&(""==t||this.checkJsonObjPropertiesFilter(e,i,this.getJsonPropertyPath(t,i)))){var r=e[i],o=this.parseJSONAttributes(r);if(null==r||null==r)n+=this.startTag(r,i,o,!0);else if(r instanceof Object)if(r instanceof Array)n+=this.parseJSONArray(r,i,o,t);else if(r instanceof Date)n+=this.startTag(r,i,o,!1),n+=r.toISOString(),n+=this.endTag(r,i);else{this.jsonXmlElemCount(r)>0||null!=r.__text||null!=r.__cdata?(n+=this.startTag(r,i,o,!1),n+=this.parseJSONObject(r,this.getJsonPropertyPath(t,i)),n+=this.endTag(r,i)):n+=this.startTag(r,i,o,!0)}else n+=this.startTag(r,i,o,!1),n+=this.parseJSONTextObject(r),n+=this.endTag(r,i)}return n+=this.parseJSONTextObject(e)}parseXmlString(e){var t,n=window.ActiveXObject||"ActiveXObject"in window;if(void 0===e)return null;if(window.DOMParser){var i=new window.DOMParser,r=null;if(!n)try{r=i.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI}catch(e){r=null}try{t=i.parseFromString(e,"text/xml"),null!=r&&t.getElementsByTagNameNS(r,"parsererror").length>0&&(t=null)}catch(e){t=null}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),(t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e);return t}asArray(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]}toXmlDateTime(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null}asDateTime(e){return"string"==typeof e?this.fromXmlDateTime(e):e}xml2json(e){return this.parseDOMChildren(e)}xml_str2json(e){var t=this.parseXmlString(e);return null!=t?this.xml2json(t):null}json2xml_str(e){return this.parseJSONObject(e,"")}json2xml(e){var t=this.json2xml_str(e);return this.parseXmlString(t)}getVersion(){return this.VERSION}}function se(e){e=e.replace(/<\!--\[CDATA\[/g,"<![CDATA[").replace(/\]\]-->/g,"]]>");let t=new oe({useDoubleQuotes:!0}),n=JSON.stringify(t.xml_str2json(e));return n=n.replace("SMXML","smxml"),n=JSON.parse(n),n}function ae(e){e&&(le.select("#answer","checked",!!e.ans),le.select("#special_module_user_xml","value",e.uXml),"object"==typeof window&&(window.ISSPECIALMODULEUSERXMLCHANGE=1,"undefined"!=typeof calculatePoint&&calculatePoint(e.correctPoints||1,e.ansPoint||e.ans)),globalThis.saveUserAnswerInSapper?.(e))}const le=new Z;new class{constructor(e={}){this._options=e,this._allowed=!1,this._init()}_init(){"undefined"!=typeof Storage?(this._allowed=!0,window.onstorage=e=>{this._options.onStore&&this._options.onStore(e)}):(this._allowed=!1,console.warn("Sorry! No Web Storage support.."))}key(e){if(this._allowed)return this._options.session?console.warn("Session has not key method."):window.localStorage.key(e)}get(e){if(this._allowed)return this._options.session?window.sessionStorage.getItem(e):window.localStorage.getItem(e)}set(e,t){if(this._allowed)return this._options.session?window.sessionStorage.setItem(e,t):window.localStorage.setItem(e,t)}remove(e){if(this._allowed)return this._options.session?window.sessionStorage.removeItem(e):window.localStorage.removeItem(e)}clearAll(){if(this._allowed)return this._options.session?window.sessionStorage.clear():window.localStorage.clear()}};function ce(e){h(e,"svelte-ri6gyf",".smControlerBtn .btn-light:not([disabled]):not(.disabled).active{color:#fff!important;-webkit-box-shadow:inset 0 2px 0 #1266f1!important;box-shadow:inset 0 2px 0 #1266f1!important;background-color:#2572f2!important;border-color:#2572f2!important;border-top-color:#0c57d3!important}")}function de(t){let n,r,o,s,a,l;return{c(){n=m("div"),r=m("button"),r.textContent="Correct Answer",o=f(),s=m("button"),s.textContent="Your Answer",v(r,"type","button"),v(r,"mode","c"),v(r,"class","btn btn-light correct-ans svelte_items_test"),v(s,"type","button"),v(s,"mode","u"),v(s,"class","btn btn-light your-ans active svelte_items_test"),v(n,"class","smControlerBtn btn-group mb-3"),v(n,"aria-label","Answer buttons")},m(e,i){p(e,n,i),d(n,r),d(n,o),d(n,s),a||(l=[y(r,"click",t[3]),y(s,"click",t[3])],a=!0)},p:e,d(e){e&&u(n),a=!1,i(l)}}}function he(t){let n,r,o,s,a,l,c,h=(t[0]||t[1])&&de(t);return{c(){n=m("center"),r=m("button"),o=f(),s=m("button"),a=f(),h&&h.c(),v(r,"type","button"),v(r,"class","h h-imp svelte_items_test"),v(r,"id","set-review"),v(s,"type","button"),v(s,"class","h h-imp svelte_items_test"),v(s,"id","unset-review")},m(e,i){p(e,n,i),d(n,r),d(n,o),d(n,s),d(n,a),h&&h.m(n,null),l||(c=[y(r,"click",t[5]),y(s,"click",t[6])],l=!0)},p(e,[t]){e[0]||e[1]?h?h.p(e,t):(h=de(e),h.c(),h.m(n,null)):h&&(h.d(1),h=null)},i:e,o:e,d(e){e&&u(n),h&&h.d(),l=!1,i(c)}}}function pe(e,t,n){let{reviewMode:i=!1}=t,{handleReviewClick:r}=t,{customReviewMode:o}=t;le.listen("body","keydown",".smControlerBtn .correct-ans",(function(e,t){13===t.which&&e.click()})),le.listen("body","keydown",".smControlerBtn .your-ans",(function(e,t){13===t.which&&e.click()}));const s=E();return e.$$set=e=>{"reviewMode"in e&&n(0,i=e.reviewMode),"handleReviewClick"in e&&n(4,r=e.handleReviewClick),"customReviewMode"in e&&n(1,o=e.customReviewMode)},[i,o,s,function(e){document.querySelectorAll(".smControlerBtn button").forEach((e=>e.classList.remove("active"))),e.target.classList.add("active"),r&&r(e.target.getAttribute("mode"),e)},r,()=>s("setReview"),()=>s("unsetReview")]}class ue extends Q{constructor(e){super(),V(this,e,pe,he,o,{reviewMode:0,handleReviewClick:4,customReviewMode:1},ce)}}function me(e,t,n,i,r){let o,s,a=13;var l,c;return s={x:e&&e.layerX,y:e&&e.layerY,top:0,left:0,uXml:"",ans:!1,ans_h:t,ans_w:n,ans_left:i,ans_top:r},e&&13!=e.which?e.layerX&&e.layerY?(s.top=e.layerY-a,s.left=e.layerX-a):(s.top=e.offsetY-a,s.left=e.offsetX-a):(s.top=7,s.left=7),o=function(e,t){let n=0,i=e.ans_top+e.ans_h,r=e.ans_left+e.ans_w;return e.top+t+4>e.ans_top&&e.top+parseInt(t/2)<i&&e.left+t>e.ans_left&&e.left+parseInt(t/2)<r&&(n=1),n}(s,a),s.uXml=(l=s.top,c=s.left,'<SMANS type="4"><div targetTop="'+parseInt(l)+'" targetLeft="'+parseInt(c)+'" /></SMANS>'),"undefined"!=typeof calculatePoint&&(temp=1==o?1:0,calculatePoint(1,temp)),s.ans=o>0,s}const ge=[];function fe(e){h(e,"svelte-1mvfo84","main.svelte-1mvfo84{text-align:center !important;padding:1em;max-width:240px;margin:0 auto;font-size:26px}.targetImg.svelte-1mvfo84{display:none;position:absolute;z-index:10;width:24px;height:24px;border-radius:50%;background:#fff;color:#1c3ad4}.showBlock.svelte-1mvfo84{display:block}@media(min-width: 640px){main.svelte-1mvfo84{max-width:none}}")}function we(t){let n;return{c(){n=m("div"),n.innerHTML='<button tabindex="0" type="button" class="h h-imp svelte_items_test" id="set-review"></button> \n\t\t\t\t<button tabindex="0" type="button" class="h h-imp svelte_items_test" id="unset-review"></button>',v(n,"class","h h-imp"),v(n,"id","review_buttons")},m(e,t){p(e,n,t)},p:e,i:e,o:e,d(e){e&&u(n)}}}function ye(e){let t,n;return t=new ue({props:{handleReviewClick:e[24],customReviewMode:e[1],reviewMode:e[0]}}),t.$on("setReview",e[21]),t.$on("unsetReview",e[22]),{c(){U(t.$$.fragment)},m(e,i){W(t,e,i),n=!0},p(e,n){const i={};2&n[0]&&(i.customReviewMode=e[1]),1&n[0]&&(i.reviewMode=e[0]),t.$set(i)},i(e){n||(J(t.$$.fragment,e),n=!0)},o(e){z(t.$$.fragment,e),n=!1},d(e){Y(t,e)}}}function ve(e){let t,n,i=e[23](e[19][e[16]])+"";return{c(){t=new _,n=w(),t.a=n},m(e,r){t.m(i,e,r),p(e,n,r)},p(e,n){65536&n[0]&&i!==(i=e[23](e[19][e[16]])+"")&&t.p(i)},d(e){e&&u(n),e&&t.d()}}}function be(e){let t,n,i,r,o,s,a,l=e[18]&&Ae();return{c(){t=m("center"),n=m("div"),i=m("div"),i.innerHTML='<span class="icomoon-new-24px-reset-1 s3" style="vertical-align: text-top"></span>  \n\t\t\t\t\t\t\t<span class="position-relative bottom1">Reset</span>',r=f(),o=m("div"),a=f(),l&&l.c(),v(i,"id","reset"),x(i,"height","27px"),x(i,"width","90px"),x(i,"top","2px"),v(i,"class","reset btn btn-outline-primary position-relative btn-sm mt-sm2 mr-sm2 float-end"),x(n,"height","34px"),x(n,"width",window.inNative?window.innerWidth:e[4].imgwidth),x(n,"background","#d9e7fd"),x(n,"border-top","2px solid #96bbf6"),v(o,"id","hptmain0"),v(o,"totalcorrectans",e[2]),v(o,"dd",s=e[4].imgwidth),x(o,"width",e[4].imgwidth||"250px"),x(o,"height",e[4].imgheight||"600px"),x(o,"background-image","url('"+(Se+e[15])+"')"),x(o,"background-repeat","no-repeat"),x(o,"position","relative"),x(o,"border",e[5]+"px solid "+e[6]),v(t,"key","imageHeight_3")},m(e,s){p(e,t,s),d(t,n),d(n,i),d(t,r),d(t,o),d(t,a),l&&l.m(t,null)},p(e,i){16&i[0]&&x(n,"width",window.inNative?window.innerWidth:e[4].imgwidth),4&i[0]&&v(o,"totalcorrectans",e[2]),16&i[0]&&s!==(s=e[4].imgwidth)&&v(o,"dd",s),16&i[0]&&x(o,"width",e[4].imgwidth||"250px"),16&i[0]&&x(o,"height",e[4].imgheight||"600px"),32768&i[0]&&x(o,"background-image","url('"+(Se+e[15])+"')"),96&i[0]&&x(o,"border",e[5]+"px solid "+e[6]),e[18]?l||(l=Ae(),l.c(),l.m(t,null)):l&&(l.d(1),l=null)},d(e){e&&u(t),l&&l.d()}}}function xe(e){let t,n,i,r,o,s,a,c,h,w,b,_,S,k,T,E;return{c(){t=m("table"),n=m("tbody"),i=m("tr"),r=m("td"),o=m("div"),s=m("div"),a=m("img"),h=f(),w=m("div"),b=g(""),_=f(),S=m("span"),v(a,"id","im0"),v(a,"tabindex","0"),x(a,"max-width","none"),x(a,"width",e[4].imgwidth),x(a,"height",e[4].imgheight),v(a,"class","hotSpotImg"),l(a.src,c=Se+e[15])||v(a,"src",c),v(a,"alt",e[3]),v(w,"id","hotArea"),v(w,"class","hotArea hotArea hotAreaPreview"),x(w,"display",e[12]),x(w,"left",e[11]+"px"),x(w,"top",e[8]+"px"),x(w,"height",e[9]),x(w,"width",e[10]),v(S,"id","target"),v(S,"class","target targetImg icomoon-plus-circle-2 svelte-1mvfo84"),x(S,"left",e[13]+"px"),x(S,"top",e[14]+"px"),A(S,"showBlock",e[7]),v(s,"id","SM0"),v(s,"class","SM position-relative m-0 p-0"),v(s,"style",k=`\n\t\t\t\t\t\t\t\t\t\t\tposition: relative;\n\t\t\t\t\t\t\t\t\t\t\tmargin: 0px;\n\t\t\t\t\t\t\t\t\t\t\tpadding: 0px;\n\t\t\t\t\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\t\t\t\t\t\tborder: ${e[5]?e[5]+"px solid":""};\n\t\t\t\t\t\t\t\t\t\t\tborder-color: ${e[6]};\n\t\t\t\t\t\t\t\t\t\t`),v(o,"id","SM0"),v(o,"class","relative"),v(r,"class","border"),v(t,"id","hptmain0"),v(t,"class","smbase smhotspot border-0 h-auto w-auto uc-table no_overflow_wrapper")},m(l,c){p(l,t,c),d(t,n),d(n,i),d(i,r),d(r,o),d(o,s),d(s,a),d(s,h),d(s,w),d(w,b),d(s,_),d(s,S),T||(E=y(a,"click",e[20]),T=!0)},p(e,t){16&t[0]&&x(a,"width",e[4].imgwidth),16&t[0]&&x(a,"height",e[4].imgheight),32768&t[0]&&!l(a.src,c=Se+e[15])&&v(a,"src",c),8&t[0]&&v(a,"alt",e[3]),4096&t[0]&&x(w,"display",e[12]),2048&t[0]&&x(w,"left",e[11]+"px"),256&t[0]&&x(w,"top",e[8]+"px"),512&t[0]&&x(w,"height",e[9]),1024&t[0]&&x(w,"width",e[10]),8192&t[0]&&x(S,"left",e[13]+"px"),16384&t[0]&&x(S,"top",e[14]+"px"),128&t[0]&&A(S,"showBlock",e[7]),96&t[0]&&k!==(k=`\n\t\t\t\t\t\t\t\t\t\t\tposition: relative;\n\t\t\t\t\t\t\t\t\t\t\tmargin: 0px;\n\t\t\t\t\t\t\t\t\t\t\tpadding: 0px;\n\t\t\t\t\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\t\t\t\t\t\tborder: ${e[5]?e[5]+"px solid":""};\n\t\t\t\t\t\t\t\t\t\t\tborder-color: ${e[6]};\n\t\t\t\t\t\t\t\t\t\t`)&&v(s,"style",k)},d(e){e&&u(t),T=!1,E()}}}function Ae(e){let t;return{c(){t=m("div"),v(t,"class","position-fixed index0"),x(t,"right","0"),x(t,"top","0"),x(t,"left","0"),x(t,"bottom","0"),x(t,"background","rgba(0,0,0,0.4)")},m(e,n){p(e,t,n)},d(e){e&&u(t)}}}function _e(e){let t,n,i,r,o,s,a,l,c;const h=[ye,we],g=[];function w(e,t){return"1"==e[19][e[16]]||"2"==e[19][e[16]]?0:1}function y(e,t){return"4"==e[19][e[16]]?xe:"3"==e[19][e[16]]?be:ve}i=w(e),r=g[i]=h[i](e);let b=y(e),x=b(e);return{c(){t=m("main"),n=m("center"),r.c(),o=f(),s=m("div"),x.c(),a=f(),l=m("input"),v(s,"id","previewArea"),v(s,"class","relative"),v(l,"type","hidden"),v(l,"id","special_module_parse"),v(l,"name","special_module_parse"),v(l,"userans",""),l.value=e[17],v(t,"class","pt-0 svelte-1mvfo84")},m(e,r){p(e,t,r),d(t,n),g[i].m(n,null),d(n,o),d(n,s),x.m(s,null),d(t,a),d(t,l),c=!0},p(e,t){let a=i;i=w(e),i===a?g[i].p(e,t):(B(),z(g[a],1,1,(()=>{g[a]=null})),F(),r=g[i],r?r.p(e,t):(r=g[i]=h[i](e),r.c()),J(r,1),r.m(n,o)),b===(b=y(e))&&x?x.p(e,t):(x.d(1),x=b(e),x&&(x.c(),x.m(s,null))),(!c||131072&t[0])&&(l.value=e[17])},i(e){c||(J(r),c=!0)},o(e){z(r),c=!1},d(e){e&&u(t),g[i].d(),x.d()}}}!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}('#hptmain .drag-resize{position:absolute;left:90px;top:50px;border:none;z-index:8;text-align:center;font-size:0;line-height:20px;background-color:rgba(244,255,71,.6)!important;box-shadow:0 0 1px #000 inset;cursor:move}.tools{position:absolute;right:5px;z-index:101}.tools .labs-btn{padding:2px 5px}.drag-resize .tools{top:-28px;right:-3px}.elemActive{background:rgba(244,255,71,.6)!important;opacity:1!important}#option-toolbar{margin-bottom:0}.controls{list-style:none;margin:0;padding:0}.controls li{display:inline;padding:11px;float:left;font-size:13px}.controls li:hover,.selected-option{cursor:pointer;background-color:#ccc!important}#hotspot{width:700px;padding:4px;border-top-right-radius:10px;border-top-left-radius:10px;text-align:left;background-color:#ccc}.hotspotTxt{background:#fff;word-wrap:break-word;padding:1em;min-height:180px;text-align:left;overflow-y:scroll;border:1px solid #ccc;font-family:"open sans",Helvetica,Arial,"Times New Roman",sans-serif;font-size:14px}.hotspotTxt p{float:left;margin-bottom:3px}.textClick{border:1px solid transparent;padding:2px 0;margin-right:2px;cursor:pointer;border-radius:2px;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none}.selecttext.selected,.textClick.selected,.textClick.selected:hover{background-color:#ff9;border:1px solid #8a7300;border-radius:2px}.textClick:hover{background-color:#fcfcd3;border-color:#8a7300}.show_correct{background-color:#e7f4e1!important;border-color:#62ae41!important}.show_incorrect{border-color:#da1919!important;background-color:#fbdddd!important}.selecttext{border:1px solid transparent;padding:3px 0;margin-right:2px;position:relative;margin-left:-1px;margin-right:-1px;border-radius:2px}.drawSurface{cursor:crosshair}.h{display:none}.textClick.selected:focus{box-shadow:inset 0 0 0 1px transparent,inset 0 0 0 1px #fff,inset 0 0 0 2px #000;outline:0}.red{color:red}#hptmain0 tr td{border:0!important}');let Se="//s3.amazonaws.com/jigyaasa_content_static/";function ke(e,t,n){let{xml:i}=t,{uxml:r}=t,{ansStatus:o}=t,{isReview:s}=t,{showAns:a}=t,{editorState:l}=t,c=s;const d=new te;let h,p,u="",m=0,g="",f={textclick:"1",textselect:"2",imagehighlight:"3",hotspot:"4"},w={},y=0,v="gray",b=!1,x="",A="",_="",S="",k="none",E=0,C=0,D=0,M=0,N="",I="",O="",j=0,L=0,$="",P="0",R="",H="",q="black",X="",B=0,F=[],J=[],z=0,U=0;var W="textclick",Y="",V="";function Q(){switch(n(16,O=u.smxml.div._type),j=u.smxml._height,L=u.smxml._width,null!=O&&""!=O||n(16,O=u.smxml._name.toLowerCase()),W=O,n(15,I=u.smxml._bgimg),f[O]){case"1":z=u.smxml._height+"px",U=u.smxml._width+"px",function(e){var t="",i=e.match(/%{(.*?)}%/gm);if(i){n(2,p=i.length);for(var r=0;r<i.length;r++)Y=i[r].replace(/\s+/gm,"<uc:space>"),e=e.replace(i[r],Y)}Y="",e=e.split(" ");for(r=0;r<e.length;r++)e[r].match(/%{|%}/gm)?(e[r]=e[r].replace(/<uc:space>/gm," ").replace(/%{|}%/gm,""),t+='<p class="textClick" data-index="'+r+'" data-userans="0" data-correctans="1">'+e[r]+"</p>",Y+=e[r]+"|"):t+='<p class="textClick" data-index="'+r+'" data-userans="0" data-correctans="0">'+e[r]+"</p>";Y=Y.replace(/\|$/gm,""),le.select(" #previewArea  #textID0").innerHTML=t}(u.smxml.div.__cdata),le.select(le.parent("#textID0"),"show","block"),le.selectAll('#drawPreview,table[id="hptmain2"]',"hide");break;case"2":isNaN(u.smxml._height)||(u.smxml._height=u.smxml._height+"px"),z=u.smxml._height,U=u.smxml._width+"px",function(e){Y="";var t=e.match(/%{(.*?)}%/gm);if(t){for(var i=0;i<t.length;i+=1)Y+=t[i].replace(/%{|}%/gm,"")+"|";V=e.replace(/%{/gm,'<span class="selecttext selected">').replace(/}%/gm,"<span>"),n(2,p=t.length),Y=Y.replace(/\|$/gm,"")}var r=e.replace(/%{|}%/gm,""),o=setTimeout(function(){le.select(" #previewArea  #textID0").innerHTML=r,clearTimeout(o)}.bind(self),100)}(u.smxml.div.__cdata),le.select(le.parent("#textID0"),"show","block"),le.selectAll('#drawPreview,table[id="hptmain2"]',"hide");break;case"3":{let e=new Image;e.addEventListener("load",(function(e){n(4,w.imgheight=u.smxml._height>this.height?u.smxml._height+"px":this.height+"px",w),n(4,w.imgwidth=u.smxml._width>this.width?u.smxml._width+"px":this.width+"px",w),n(5,y=u.smxml.div._border),n(6,v=u.smxml.div._bordercolor),le.find("#hptdraw0","canvas",{action:"attr",actionData:{height:w.imgheight,width:w.imgwidth}}),le.empty("#textID0"),ee()}),!1),e.setAttribute("src",Se+u.smxml._bgimg)}break;case"4":{n(15,I=u.smxml._bgimg),n(3,g=u.smxml._alt),n(14,C=parseFloat(u.smxml.div._top)),n(13,E=parseFloat(u.smxml.div._left)+13),D=parseFloat(u.smxml.div._height),M=parseFloat(u.smxml.div._width),n(3,g=u.smxml.div._alt),N=u.smxml.div.type,n(5,y=u.smxml.div._border),n(6,v=u.smxml.div._bordercolor),n(10,_=u.smxml.div._width+"px"),n(9,A=u.smxml.div._height+"px"),n(11,S=parseInt(u.smxml.div._left)+4),n(8,x=parseInt(u.smxml.div._top)+2);let e=new Image;e.onload=function(){let e=this.height+"px",t=this.width+"px";n(4,w.imgheight=u.smxml.div._imgheight?u.smxml.div._imgheight+"px":"auto !important",w),n(4,w.imgwidth=u.smxml.div._imgwidth?u.smxml.div._imgwidth+"px":"auto !important",w),le.select("#hptmain0","css",{height:e,width:t})},e.src=Se+u.smxml._bgimg}}}function K(){s&&n(12,k="block");var e=new Image;if(e.onload=function(){"3"==f[O]?(n(4,w.imgheight=u.smxml._height>this.height?u.smxml._height+"px":this.height+"px",w),n(4,w.imgwidth=u.smxml._width>this.width?u.smxml._width+"px":this.width+"px",w)):(n(4,w.imgheight=u.smxml.div._imgheight?u.smxml.div._imgheight+"px":"auto !important",w),n(4,w.imgwidth=u.smxml.div._imgwidth?u.smxml.div._imgwidth+"px":"auto !important",w))},I&&(e.src=Se+I),r){n(17,R=r);let e=se(r);e.SMANS&&e.SMANS.div&&(n(7,b=!0),n(13,E=e.SMANS.div._targetLeft),n(14,C=e.SMANS.div._targetTop))}}function G(e){let t={};"textclick"==W||"textselect"==W?(t=d.check_Ans("#previewArea #hptmain0"),n(30,h=t.ans)):(t=me(e,D,M,parseInt(S),parseInt(x)),n(7,b=!0),n(13,E=t.left),n(14,C=t.top),n(25,o=t.ans),n(30,h=o),l&&a(o?"Correct":"Incorrect")),ae(t)}function Z(){if(n(0,s=!0),n(12,k="block"),"3"==f[O]){let e=le.find("#previewArea","canvas"),t=e.getAttribute("correctans");""!=t&&(t=JSON.parse(t)),d.drawOnCanvas(e,t,"green")}d.modeOnHot(1),le.select("#hptmain0","css",{pointerEvents:"none"})}function ee(){if(n(0,s=!1),n(12,k="none"),"3"==f[O]){le.find("#previewArea","canvas",{action:"remove"});var e=setTimeout((function(){!function(e,t){let r=le.find(e,"#hptmain0");e=r;let o=new re({target:r,width:+w.imgwidth.replace("px",""),height:+w.imgheight.replace("px",""),correctans:H,cssClass:"drawSurface",penSize:4,type:"imagehighlight",editable:!t,onMove(){},onClick(){},onPaint(e){F.push(e.X),J.push(e.Y)},onRelease(i){!function(e,t,i){let r="",o=!1;if(!i){X="";var s=document.querySelector("#special_module_parse").value;""!=(s=s.substring(s.indexOf("{"),s.lastIndexOf("}")+1))?(s=Object.keys(JSON.parse(s)).length,X=d.getCoordinate(t,F,J,s)):X=d.getCoordinate(t,F,J,B),window.inNative&&window.getHeight&&window.getHeight(),window.ISSPECIALMODULEUSERXMLCHANGE=1,le.select("#special_module_user_xml").value=X,n(17,R=X),F=[],J=[];let e=le.find(t,"canvas").getAttribute("correctans"),i=le.find(t,"canvas").getAttribute("userans");""!=i&&(i=JSON.parse(i)),""!=e&&(e=JSON.parse(e));let c=d.compareDrawing(i,e,t),p="Incorrect";c>0?(o=!0,p="Correct",n(4,w.answerType3=!0,w),l&&a("Correct")):(o=!1,p="Incorrect",n(4,w.answerType3=!1,w)),l&&a(p),r=le.select("#special_module_user_xml").value,c=c>0,n(30,h=c),ae({ans:c,uXml:r}),le.select("#answer").checked=c>0,window.inNative&&window.postMessage(JSON.stringify({inNativeIsCorrect:o,userAnswers:r}),"*")}}(0,e,t)}});q=String(i.match(/linecolor=\"([^\"]+)\"/gm)),q=q.substring("11",q.length-1),t||le.listen("#previewArea","click","#reset",(()=>{o.clearSurface(),X="",B=0,n(17,R=""),le.selectAll(le.select(e).children,"attr",{userans:""}),n(30,h=!1)}));window.surface=o}("#previewArea",0);let t=le.find("#previewArea","canvas"),r=le.select("#special_module_parse").value,o=r.substring(r.indexOf("{"),r.lastIndexOf("}")+1);""!=o&&(o=JSON.parse(o)),d.drawOnCanvas(t,o,q),clearTimeout(e)}),500)}d.modeOnHot(),le.select("#hptmain0","css",{pointerEvents:"auto"})}return T((()=>{u=se(i),P=u.smxml.hotBorder,$=u.smxml.hotBorderColor,Q(),K(),d.readyThis("hptmain0",s),s?d.modeOnHot(1):d.modeOnHot(),le.listen("#previewArea","keydown","#im0",(function(e,t){var i=le.select("#im0").getBoundingClientRect();switch(t.which){case 37:n(13,E=parseInt(E)-2),E<1&&n(13,E=1);break;case 38:n(14,C=parseInt(C)-2),C<1&&n(14,C=1);break;case 39:n(13,E=parseInt(E)+2),E+24>i.width&&n(13,E=i.width-24);break;case 40:n(14,C=parseInt(C)+2),C+24>i.height&&n(14,C=i.height-24);break;case 13:G()}console.log("ans_x",E),console.log("ans_y",C)})),le.listen("#previewArea","click",".textClick",(function(){G()})),le.listen("#previewArea","click",'[type="textselect"]',(function(){G()})),le.listen("#review_buttons","click","#set-review",(function(){Z()})),le.listen("#review_buttons","click","#unset-review",(function(){ee()}))})),e.$$set=e=>{"xml"in e&&n(26,i=e.xml),"uxml"in e&&n(27,r=e.uxml),"ansStatus"in e&&n(25,o=e.ansStatus),"isReview"in e&&n(0,s=e.isReview),"showAns"in e&&n(28,a=e.showAns),"editorState"in e&&n(29,l=e.editorState)},e.$$.update=()=>{if(1879048195&e.$$.dirty[0]|1&e.$$.dirty[1]&&s!=c&&(s?(Z(),l&&0==m&&(a(h?"Correct":"Incorrect"),n(31,m=1))):(n(31,m=0),ee()),n(1,c=s)),67108868&e.$$.dirty[0]|2&e.$$.dirty[1]&&i){let e=i.replace("\x3c!--[CDATA[","<![CDATA[").replace("]]--\x3e","]]>");e.match(/<\!\[CDATA\[{|<\!--\[CDATA\[{/gm)&&(n(32,H=e.toString().match(/{(.*)}/gim)),n(2,p=H.toString().match(/},"\d+"/gm)),n(2,p=p?p.pop():null),n(2,p=p?p.replace(/"|}|,/gm,""):1),e=e.replace(H,""),n(32,H=H[0])),u=se(i),Q(),K()}},[s,c,p,g,w,y,v,b,x,A,_,S,k,E,C,I,O,R,!1,f,G,Z,ee,function(e){switch(e){case"1":case"2":{let e="",t="";if(r){let n=se(r);window.test=r,n?.smans?.div&&(e=n.smans.div["_data-userAns"],t=n.smans.div["_data-userHtml"])}return`\n\t\t\t\t\t\t<div is id="hptmain0" totalCorrectAns=${p}>\n\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\tid="textID0" \n\t\t\t\t\t\t\t\ttype="${W}" \n\t\t\t\t\t\t\t\tdata-correcthtml="${V}" \n\t\t\t\t\t\t\t\tdata-correctans="${Y}"\n\t\t\t\t\t\t\t\tdata-userans="${e}" \n\t\t\t\t\t\t\t\tdata-userhtml="${t}" \n\t\t\t\t\t\t\t\tclass="drag-resize hotspotTxt" \n\t\t\t\t\t\t\t\tstyle="max-width:${U}; height:${z}; line-height: 1.4; font-size:17px!important;"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`}default:return"<div>Incorrect question type</div>"}},function(e,t){"c"==e?d.showansdrag("#hptmain0","c",1):d.showansdrag("#hptmain0","u",1)},o,i,r,a,l,h,m,H]}class Te extends Q{constructor(e){super(),V(this,e,ke,_e,o,{xml:26,uxml:27,ansStatus:25,isReview:0,showAns:28,editorState:29},fe,[-1,-1])}}const Ee="Token Highlight";function Ce(e){h(e,"svelte-4djjpi",".token.svelte-4djjpi.svelte-4djjpi:hover{border:1px solid #000!important}.bla .token:hover{border:1px solid #fff!important}.token_selected.svelte-4djjpi.svelte-4djjpi{background-color:#64bb63;color:#fff}.bla .token_highlight_heading{color:#000!important}.hotspot-token-preview.svelte-4djjpi br.svelte-4djjpi{clear:both}")}function De(e,t,n){const i=e.slice();return i[26]=t[n],i[28]=n,i}function Me(e){let t,n,i,r,o,s,a,l;i=new ue({props:{handleReviewClick:e[5],reviewMode:e[0].isReview}}),i.$on("setReview",e[2]),i.$on("unsetReview",e[3]);let c=e[0].itemLayout&&Ie(e);return{c(){t=m("div"),n=m("center"),U(i.$$.fragment),r=f(),o=m("div"),o.textContent=""+Ee,s=f(),a=m("div"),c&&c.c(),v(o,"class","token_highlight_heading font17 p-2 text-left"),x(o,"max-width","600px"),x(o,"border-top","2px solid #96bbf6"),x(o,"background-color","#d9e7fd"),v(a,"class","p-2"),x(a,"max-width","600px"),x(a,"border","2px solid #d9e7fd"),x(a,"display","flow-root"),x(a,"text-align","left"),x(a,"justify-content","left"),v(t,"class","hotspot-token-preview svelte-4djjpi"),v(t,"tabindex","0")},m(e,h){p(e,t,h),d(t,n),W(i,n,null),d(n,r),d(n,o),d(n,s),d(n,a),c&&c.m(a,null),l=!0},p(e,t){const n={};1&t&&(n.reviewMode=e[0].isReview),i.$set(n),e[0].itemLayout?c?c.p(e,t):(c=Ie(e),c.c(),c.m(a,null)):c&&(c.d(1),c=null)},i(e){l||(J(i.$$.fragment,e),l=!0)},o(e){z(i.$$.fragment,e),l=!1},d(e){e&&u(t),Y(i),c&&c.d()}}}function Ne(t){let n;return{c(){n=m("div"),n.innerHTML="<span>Oops Something went wrong please check your ParseXML Function</span>",v(n,"class","alert alert-danger font-weight-bold")},m(e,t){p(e,n,t)},p:e,i:e,o:e,d(e){e&&u(n)}}}function Ie(e){let t,n=e[0].itemLayout,i=[];for(let t=0;t<n.length;t+=1)i[t]=Re(De(e,n,t));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=w()},m(e,n){for(let t=0;t<i.length;t+=1)i[t].m(e,n);p(e,t,n)},p(e,r){if(17&r){let o;for(n=e[0].itemLayout,o=0;o<n.length;o+=1){const s=De(e,n,o);i[o]?i[o].p(s,r):(i[o]=Re(s),i[o].c(),i[o].m(t.parentNode,t))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}},d(e){!function(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}(i,e),e&&u(t)}}}function Oe(e){let t,n=(e[26].value=e[26].value.replace(/##pt/g,"."))+"";return{c(){t=g(n)},m(e,n){p(e,t,n)},p(e,i){1&i&&n!==(n=(e[26].value=e[26].value.replace(/##pt/g,"."))+"")&&b(t,n)},d(e){e&&u(t)}}}function je(e){let t,n=(e[26].value=e[26].value.replace(/#cm/g,","))+"";return{c(){t=g(n)},m(e,n){p(e,t,n)},p(e,i){1&i&&n!==(n=(e[26].value=e[26].value.replace(/#cm/g,","))+"")&&b(t,n)},d(e){e&&u(t)}}}function Le(e){let t,n,i,r,o,s,a,l,h,g,w,b,A,_,S,k,T,E=e[26].value+"";return{c(){t=m("div"),n=m("span"),l=f(),h=m("span"),g=m("span"),_=f(),v(n,"data-id",i="ID"+e[28]),v(n,"data-correct",r=le.findInArray("ID"+e[28],e[0].correctAns)),v(n,"data-selected",o=e[26].selected),v(n,"tabindex",s="auto"==e[0].pointerEvents?"0":"1"),v(n,"class",a="pointer float-left text-left font14 token "+(e[26].selected?"token_selected":"")+" svelte-4djjpi"),x(n,"margin","1px"),x(n,"user-select","none"),x(n,"border","1px solid transparent"),x(n,"padding","1px 1px"),x(n,"border-radius","3px"),x(n,"pointer-events",e[0].pointerEvents+"\r\n                                "),v(g,"class",w="position-relative "+(le.findInArray("ID"+e[28],e[0].correctAns)?"icomoon-new-24px-checkmark-circle-1":"icomoon-new-24px-cancel-circle-1")),x(g,"color",le.findInArray("ID"+e[28],e[0].correctAns)?"green":"red"),x(g,"bottom","3px"),x(g,"left","0"),v(g,"aria-label",b=le.findInArray("ID"+e[28],e[0].correctAns)?"marked as correct":"marked as incorrect"),v(h,"class",A=c(e[0].iconVisible)+" svelte-4djjpi"),x(h,"position","absolute"),x(h,"width","17px"),x(h,"height","17px"),x(h,"right","-8px"),x(h,"top","-9px"),x(h,"background","white"),x(h,"border-radius","15px 12px 12px"),x(h,"font-size","18px"),x(h,"z-index","1"),x(h,"display",(""==e[0].iconVisible&&e[26].selected?"block":"none")+"\r\n                                "),v(t,"key",S=e[28]),v(t,"class","tokenHeader position-relative float-left d-inline")},m(i,r){p(i,t,r),d(t,n),n.innerHTML=E,d(t,l),d(t,h),d(h,g),d(t,_),k||(T=y(n,"click",e[4].bind(this,e[28])),k=!0)},p(t,i){e=t,1&i&&E!==(E=e[26].value+"")&&(n.innerHTML=E),1&i&&r!==(r=le.findInArray("ID"+e[28],e[0].correctAns))&&v(n,"data-correct",r),1&i&&o!==(o=e[26].selected)&&v(n,"data-selected",o),1&i&&s!==(s="auto"==e[0].pointerEvents?"0":"1")&&v(n,"tabindex",s),1&i&&a!==(a="pointer float-left text-left font14 token "+(e[26].selected?"token_selected":"")+" svelte-4djjpi")&&v(n,"class",a),1&i&&x(n,"pointer-events",e[0].pointerEvents+"\r\n                                "),1&i&&w!==(w="position-relative "+(le.findInArray("ID"+e[28],e[0].correctAns)?"icomoon-new-24px-checkmark-circle-1":"icomoon-new-24px-cancel-circle-1"))&&v(g,"class",w),1&i&&x(g,"color",le.findInArray("ID"+e[28],e[0].correctAns)?"green":"red"),1&i&&b!==(b=le.findInArray("ID"+e[28],e[0].correctAns)?"marked as correct":"marked as incorrect")&&v(g,"aria-label",b),1&i&&A!==(A=c(e[0].iconVisible)+" svelte-4djjpi")&&v(h,"class",A),1&i&&x(h,"display",(""==e[0].iconVisible&&e[26].selected?"block":"none")+"\r\n                                ")},d(e){e&&u(t),k=!1,T()}}}function $e(t){let n;return{c(){n=m("br"),v(n,"class","svelte-4djjpi")},m(e,t){p(e,n,t)},p:e,d(e){e&&u(n)}}}function Pe(e){let t,n,i,r,o=e[26].value+"";return{c(){t=m("div"),n=m("span"),i=g(o),r=f(),v(n,"class","float-left position-absolute"),x(n,"left","-2.5px"),x(n,"top","2px"),v(t,"class","float-left position-relative d-inline"),x(t,"width","1.5px"),x(t,"height","1px")},m(e,o){p(e,t,o),d(t,n),d(n,i),d(t,r)},p(e,t){1&t&&o!==(o=e[26].value+"")&&b(i,o)},d(e){e&&u(t)}}}function Re(e){let t,n,i,r,o=e[26].value.indexOf("##pt")>-1,s=e[26].value.indexOf("#cm")>-1,a=o&&Oe(e),l=s&&je(e);function c(e,t){return","==e[26].value||"."==e[26].value?Pe:"#newline#"==e[26].value?$e:Le}let h=c(e),g=h(e);return{c(){t=m("div"),a&&a.c(),n=f(),l&&l.c(),i=f(),g.c(),r=w(),v(t,"class","h")},m(e,o){p(e,t,o),a&&a.m(t,null),d(t,n),l&&l.m(t,null),p(e,i,o),g.m(e,o),p(e,r,o)},p(e,i){1&i&&(o=e[26].value.indexOf("##pt")>-1),o?a?a.p(e,i):(a=Oe(e),a.c(),a.m(t,n)):a&&(a.d(1),a=null),1&i&&(s=e[26].value.indexOf("#cm")>-1),s?l?l.p(e,i):(l=je(e),l.c(),l.m(t,null)):l&&(l.d(1),l=null),h===(h=c(e))&&g?g.p(e,i):(g.d(1),g=h(e),g&&(g.c(),g.m(r.parentNode,r)))},d(e){e&&u(t),a&&a.d(),l&&l.d(),e&&u(i),g.d(e),e&&u(r)}}}function He(e){let t,n,i,r;const o=[Ne,Me],s=[];function a(e,t){return""!=e[1]?0:1}return t=a(e),n=s[t]=o[t](e),{c(){n.c(),i=w()},m(e,n){s[t].m(e,n),p(e,i,n),r=!0},p(e,[r]){let l=t;t=a(e),t===l?s[t].p(e,r):(B(),z(s[l],1,1,(()=>{s[l]=null})),F(),n=s[t],n?n.p(e,r):(n=s[t]=o[t](e),n.c()),J(n,1),n.m(i.parentNode,i))},i(e){r||(J(n),r=!0)},o(e){z(n),r=!1},d(e){s[t].d(e),e&&u(i)}}}function qe(t,n,i){let{xml:r}=n,{editorState:s}=n,{isReview:a}=n,{showAns:l}=n,{uxml:c}=n,d=!1,h=0,p={},u=function(t,n=e){let i;const r=new Set;function s(e){if(o(t,e)&&(t=e,i)){const e=!ge.length;for(const e of r)e[1](),ge.push(e,t);if(e){for(let e=0;e<ge.length;e+=2)ge[e][0](ge[e+1]);ge.length=0}}}return{set:s,update:function(e){s(e(t))},subscribe:function(o,a=e){const l=[o,a];return r.add(l),1===r.size&&(i=n(s)||e),o(t),()=>{r.delete(l),0===r.size&&(i(),i=null)}}}}({xml:"",itemType:"",cdata:"",correctAns:"",userAns:[],itemLayout:[],smController:"h",pointerEvents:"auto",iconVisible:"h",isReview:!1}),m="";u.subscribe((e=>{i(0,p=e)}));var g;function f(){i(0,p.isReview=!0,p),i(0,p.smController="",p),i(0,p.pointerEvents="none",p),v("yans","showIcon"),le.selectAll(".tokenHeader","attr",{tabIndex:"0"})}function w(){i(0,p.isReview=!1,p),i(0,p.smController="h",p),i(0,p.pointerEvents="auto",p),v("yans","hideIcon"),le.selectAll(".tokenHeader","removeAttr","tabindex")}function y(){ISSPECIALMODULEUSERXMLCHANGE=1;let e=0;const t=p.correctAns.length;p.correctAns.map(((t,n)=>{p.userAns.map(((n,i)=>{t==n&&(e+=1)}))}));let n=t==e&&e==p.userAns.length;ae({ans:n,uXml:c}),l&&l(n?"Correct":"Incorrect")}function v(e,t){i(0,p.iconVisible="showIcon"==t?"":"h",p);let n=[];"cans"==e?n=p.correctAns:"yans"==e&&(n=p.userAns),p.itemLayout.map(((e,t)=>{e.selected=!!le.findInArray(e.id,n)}))}return g=()=>{r!=p.xml&&(i(0,p.xml=r,p),i(0,p.correctAns=[],p),i(0,p.userAns=[],p),async function(e){try{switch(i(0,p.correctAns=e.smxml.div._correctAns.split(","),p),i(0,p.itemType=e.smxml.div._type,p),i(0,p.cdata=e.smxml.div.__cdata,p),await(j(),I),e.smxml.div._type){case"w":!function(e){let t=(e=e.replace(/\n/g," #newline# ")).split(" ").map((e=>e.trim())).filter((e=>""!=e)),n=[],r=[];t.map(((e,t)=>{let n=e.match(/[.,]/g);if(n){let t=e.split(n[0]);r.push(t[0]),r.push(n[0]),t[1].trim()&&r.push(t[1])}else r.push(e)})),r.map(((e,t)=>{n.push({id:"ID"+t,value:e,selected:!1})})),i(0,p.itemLayout=n,p)}(p.cdata);break;case"s":!function(e){let t=e.split(".").map((e=>e.trim())).filter((e=>""!=e)),n=[];t.map(((e,t)=>{n.push({id:"ID"+t,value:e+".",selected:!1})})),i(0,p.itemLayout=n,p)}(p.cdata);break;case"p":!function(e){let t=e.split("\n").map((e=>e.trim())).filter((e=>""!=e)),n=[];t.map(((e,t)=>{n.push({id:"ID"+t,value:e,selected:!1})})),i(0,p.itemLayout=n,p)}(p.cdata);break;default:console.warn("No type found to parse")}c&&function(e){let t=se(e);t.smans&&t.smans.div&&t.smans.div._userAns&&(i(0,p.userAns=t.smans.div._userAns.split(","),p),p.itemLayout.map(((e,t)=>{e.selected=!!le.findInArray(e.id,p.userAns)})))}(c)}catch(e){i(1,m=e),console.warn({error:e.message,"function name":"parseXMLPreview","File name":"HotspotTokenPreview.js"})}}(se(r)))},k().$$.before_update.push(g),T((()=>{le.listen("body","keydown",".token",((e,t)=>{13===t.which&&e.click()})),window.inNative&&window.getHeight&&window.getHeight()})),t.$$set=e=>{"xml"in e&&i(7,r=e.xml),"editorState"in e&&i(8,s=e.editorState),"isReview"in e&&i(9,a=e.isReview),"showAns"in e&&i(10,l=e.showAns),"uxml"in e&&i(6,c=e.uxml)},t.$$.update=()=>{6912&t.$$.dirty&&a!=d&&(a?(f(),s&&0==h&&(i(12,h=1),y())):(i(12,h=0),s&&w()),i(11,d=a))},[p,m,f,w,function(e){i(0,p.itemLayout[e].selected=!p.itemLayout[e].selected,p),function(e,t){let n=p.userAns;if(1==t)n.push("ID"+e),i(0,p.userAns=n,p);else if(0==t){let t=n.indexOf("ID"+e);t>-1&&n.splice(t,1),i(0,p.userAns=n,p)}window.inNative&&window.getHeight&&window.getHeight();i(6,c="<smans><div userAns='"+p.userAns.join()+"'></div></smans>"),y()}(e,p.itemLayout[e].selected)},function(e,t){"c"==e?v("cans","hideIcon"):v("yans","showIcon")},c,r,s,a,l,d,h]}class Xe extends Q{constructor(e){super(),V(this,e,qe,He,o,{xml:7,editorState:8,isReview:9,showAns:10,uxml:6},Ce)}}const Be='<smxml type="4" name="HotSpot" bgimg="star_topology_000dlj.jpg" path="" alt="" width="600" height="250">\n<div id="ID0" type="hotspot" top="172" left="220" width="112" height="80"  imgheight="" imgwidth="">\n\t\x3c!--[CDATA[]]--\x3e\n</div>\n</smxml>';let Fe,Je=XMLToJSON(window.QXML);return Fe=["w","s","p"].includes(Je.smxml.div._type)?new Xe({target:document.getElementById(window.moduleContainer)||document.body,props:{xml:window.QXML||Be,uxml:window.uaXML,ansStatus:0,isReview:window.isReviewMode||!1}}):new Te({target:document.getElementById(window.moduleContainer)||document.body,props:{xml:window.QXML||Be,uxml:window.uaXML,ansStatus:0,isReview:window.isReviewMode||!1}}),Fe}();
//# sourceMappingURL=bundle_q4.js.map
