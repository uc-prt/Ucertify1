import{S as SvelteComponent,i as init,s as safe_not_equal,F as globals,e as element,j as append,c as create_component,b as space,C as language,f as attr,A as AH,h as insert,m as mount_component,l as listen,o as detach,t as transition_in,a as transition_out,d as destroy_component,k as group_outros,n as check_outros,D as destroy_each,E as beforeUpdate,X as XMLToJSON,p as onMount,_ as jquery,w as writable}from"./main-a1cb066e.js";import{I as ItemHelper}from"./ItemHelper-4ba8e744.js";import{F as FillInTheBlanksToolbar}from"./FillInTheBlanksToolbar-bb7016cb.js";var ALGO=ALGO||{mathtype:""};ALGO.init=function(e,t){let a="";try{a=ALGO.util.generateVariables(e,t)}catch(e){swal({html:!0,title:"",text:"<b>"+e+"<br/><br/>Variables are not correctly defined!</b>",type:"error"})}return console.log("var llist",a),a},ALGO.util={generateVariables:function(algostr,genereted_str){const regex_mathtype=/is_advance[\s]*=([\s"'\d]*)/;let fnName="",var_list={};var xml=algostr.split("\n");try{ALGO.mathtype=+xml[0].match(regex_mathtype)[1].match(/[\d]+/)}catch(e){ALGO.mathtype=""}for(let i=0;i<xml.length;i++){let xml_id=xml[i],xml_arr=xml_id.split("=");switch(fnName=xml_arr[1].substr(0,xml_arr[1].indexOf("(")).trim(),fnName){case"rand_int":fnName="randInt";break;case"rand_float":fnName="randFloat";break;case"uc_sqrt":fnName="ucSqrt";break;case"rand_obj":fnName="randObj"}if("object"!=typeof ALGO.math[fnName]&&(fnName=""),""!=fnName){const e=/\(([^)]+)\)/;let t=[],a=e.exec(xml_arr[1]),n,i,l;switch(fnName.trim()){case"randInt":t=a[1].split(","),n=parseInt(t[0]),i=parseInt(t[1]),l=parseInt(t[2]),var_list[xml_arr[0].trim()]=ALGO.math[fnName].f(n,i,l);break;case"randFloat":t=a[1].split(","),n=parseFloat(t[0]),i=parseFloat(t[1]),l=parseInt(t[2]),var_list[xml_arr[0].trim()]=ALGO.math[fnName].f(n,i,l);break;case"ucSqrt":t=a[1].split(","),n=parseInt(t[0]),i=parseInt(t[1]),var_list[xml_arr[0].trim()]=ALGO.math[fnName].f(n,i);break;case"ucPow":t=a[1].split(","),n=parseInt(t[0]),i=parseInt(t[1]),l=parseInt(t[2]),var_list[xml_arr[0].trim()]=ALGO.math[fnName].f(n,i,l);break;default:let e=JSON.stringify(a[1]);e=e.trim().replace(/"|\\/g,""),var_list[xml_arr[0].trim()]=ALGO.math[fnName].f(e)}}if(""==fnName){const regExp_arth=/(\*|\+|\-|\/|\^|\%|\(|\)|\,|\[|\]|\#)/g,regExp_semicolon=/;|\\/g;let test=xml_arr[1].split(regExp_arth),expression="";var iscartesian=!1;for(let e=0;e<test.length;e++)if(test[e]=test[e].trim(),";"!=test[e]&&""!=test[e]){test[e]=test[e].replace(regExp_semicolon,""),"#"==test[e]?test[e]="'":test[e]=var_list.hasOwnProperty(test[e])?var_list[test[e]]:isNaN(+test[e])?test[e]:+test[e];let t=test[e];t="string"==typeof t?t.trim():t,"math.setCartesian"==t&&(iscartesian=!0),expression+=test[e]}if(2==ALGO.mathtype){if(1==iscartesian){for(var testing=eval(expression),str="",k=0;k<testing.length;k++)testing[k]="("+testing[k]+") ",str+=testing[k];var_list[xml_arr[0].trim()]=str}iscartesian||(var_list[xml_arr[0].trim()]=eval(expression).toString()),""==var_list[xml_arr[0].trim()]&&(var_list[xml_arr[0].trim()]="None of these")}""==ALGO.mathtype&&(var_list[xml_arr[0].trim()]=eval(expression.trim()))}}return var_list}},ALGO.init.replaceVariables=function(e,t){for(let n in t){var a=new RegExp("<{"+n+"}>","g");e=e.replace(a,t[n])}return e},ALGO.math={randObj:{text:"Randomize Object",description:"Find the random string or character",param:"(javascript,java,C,react,php)",use:"randObj(javascript,php,java,c)",f:function(e){let t=e.split(",");return t[ALGO.math.randInt.f(0,t.length-1)]}},randInt:{text:"Randomize Integer",description:"Find the random integer value (min-value, max-value, no. of values after decimal)",param:"minimunvalue,maximumvalue",agrlength:2,use:"randInt(1,4,2)",f:function(e,t,a){return(Math.floor(Math.random()*(t-e+1))+e).toFixed(a)}},randFloat:{text:"Randomize Float",description:"Find the random float/decimal value (min-value, max-value, no. of values after decimal)",param:"minimunvalue,maximumvalue",agrlength:2,use:"randFloat(1,4,2)",f:function(e,t,a){return(Math.random()*(t-e)+e).toFixed(a)}},ucSqrt:{text:"Square root",description:"Find the square root (value, no. of values after decimal)",param:"minimunvalue,maximumvalue",agrlength:2,use:"ucSqrt(9,2)",f:function(e,t){return Math.sqrt(e).toFixed(t)}},ucPow:{text:"Power",description:"Return the value of the number 4 to the power of 3(value, power, no. of values after decimal)",param:"minimunvalue,maximumvalue",agrlength:2,use:"ucPow(4,3,2)",f:function(e,t,a){return Math.pow(e,t).toFixed(a)}}};var Step=ALGO;const{document:document_1}=globals;function add_css(){var e=element("style");e.id="svelte-142veau-style",e.textContent='.darkgrey_border{border:1px solid #ccc!important}.p-lg{padding:15px}.true-hover{outline:0;border:2px solid #14ca14!important}.false-hover{outline:0;border:2px solid #e45252!important}.default-hover{border-color:transparent!important;-webkit-box-shadow:inset 0 1px 0px 0px rgba(0,0,0,.075), 0 0 1px rgba(2, 2, 2, 0.9)!important;-moz-box-shadow:inset 0 1px 0px 0px rgba(0,0,0,.075), 0 0 1px rgba(2, 2, 2, 0.9)!important;box-shadow:inset 0 1px 0px 0px rgba(0,0,0,.075), 0 0 1px rgba(2, 2, 2, 0.9)!important}.blocked{display:block !important}.border_green{border:3px solid green!important}.border_red{border:3px solid red!important}.sticky{z-index:800;position:sticky;top:0\r\n\t}.corr_div{position:absolute!important;width:60px;line-height:30px;background-color:#21a81d;color:#ffffff;z-index:1;display:inline-block;vertical-align:middle;cursor:default}[id^="fillmain"]{overflow:hidden;text-align:left}[id^="fillmain"] pre{background:none;border:none;font-size:14px!important}[id^="fillmain"] .string{min-height:50px;margin-top:10px;margin-right:10px}[id^="fillmain"] .footerstr{position:relative;margin-top:10px;background-color:#ccc;padding:15px;min-height:60px}[id^="fillmain"] .footerstr .arrow-up{position:absolute;top:-10px;right:50%;width:0;height:0;border-left:10px solid transparent;border-right:10px solid transparent;border-bottom:10px solid #ccc}[id^="fillmain"] .fill-row{padding:6px}[id^="fillmain"] .fillelement, [id^="fillmain"] .drag-resize{height:30px;display:inline-block;position:relative;min-height:30px;margin:1px}[id^="fillmain"] input[type="text"], [id^="fillmain"] select{height:99%!important;resize:none;font-size:12px;color:#000;max-width:800px}[id^="fillmain"] .drag-resize{vertical-align:middle;border:1px solid #31B731;text-align:center;padding:3px;font-size:14px}[id^="fillmain"] .drag-resize.ui-draggable{cursor:move}[id^="fillmain"] .drop-hover{border:1px dashed red!important;box-shadow:0 0 0 2px yellow inset;outline:1px solid blue}[id^="fillmain"] .fillcheck ul{width:220px}[id^="fillmain"] .fillcheck li.selected{background-color:#E5E5E5}.fillcheck .selected .icomoon-checkmark-3:before{float:left;color:blue;padding:3px;position:relative;right:14px}.fillcheck .icomoon-close-2:before{float:left;color:blue;position:relative;right:14px;font-size:20px}.MathJax_Display{display:inline!important}[id^="fillmain"] .select{font-size:15px}[id^="fillmain"] .textarea{vertical-align:middle;border-radius:3px;background:#ffe;border:1px solid #ccc;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);box-shadow:inset 0 1px 1px rgba(0,0,0,0.075)}.ui-draggable-disabled{cursor:no-drop!important;opacity:0.5!important}',append(document_1.head,e)}function get_each_context(e,t,a){const n=e.slice();return n[68]=t[a],n[70]=a,n}function get_each_context_1(e,t,a){const n=e.slice();return n[68]=t[a],n[70]=a,n}function create_if_block(e){let t,a,n,i,l,s,r,o,c,d,m,p,u,f,h,_,g,v,x;a=new ItemHelper({props:{handleReviewClick:e[11],reviewMode:e[0]}}),a.$on("setReview",e[9]),a.$on("unsetReview",e[10]);let b=e[5].itemArray,w=[];for(let t=0;t<b.length;t+=1)w[t]=create_each_block_1(get_each_context_1(e,b,t));let A=e[2],y=[];for(let t=0;t<A.length;t+=1)y[t]=create_each_block(get_each_context(e,A,t));let k=e[5].showToolbar&&create_if_block_1(e);return{c(){t=element("center"),create_component(a.$$.fragment),n=space(),i=element("div");for(let e=0;e<w.length;e+=1)w[e].c();r=space(),o=element("div");for(let e=0;e<y.length;e+=1)y[e].c();m=space(),k&&k.c(),p=space(),u=element("div"),f=element("button"),f.textContent=""+language.next,attr(i,"class",l=e[5].main_steps?"h-imp":"inNativeStyle"),attr(i,"style",s="width:"+(AH.isValid(window.inNative)?"100%":"700px")),attr(o,"class",c=e[5].correct_answer?"h-imp":""),attr(o,"style",d="width:"+(AH.isValid(window.inNative)?"100%":"700px")),attr(f,"type","button"),attr(f,"style",h="width:auto;font-size:15px;margin:15px 0;"),attr(f,"class","btn btn-sm btn-outline-primary imgcenter next_step px-md-5 px-sm-3"),attr(u,"class",_=e[5].hideNext?"h-imp":null)},m(l,s){insert(l,t,s),mount_component(a,t,null),append(t,n),append(t,i);for(let e=0;e<w.length;e+=1)w[e].m(i,null);append(t,r),append(t,o);for(let e=0;e<y.length;e+=1)y[e].m(o,null);append(t,m),k&&k.m(t,null),append(t,p),append(t,u),append(u,f),g=!0,v||(x=listen(f,"click",e[17]),v=!0)},p(e,n){const s={};if(1&n[0]&&(s.reviewMode=e[0]),a.$set(s),104&n[0]){let t;for(b=e[5].itemArray,t=0;t<b.length;t+=1){const a=get_each_context_1(e,b,t);w[t]?w[t].p(a,n):(w[t]=create_each_block_1(a),w[t].c(),w[t].m(i,null))}for(;t<w.length;t+=1)w[t].d(1);w.length=b.length}if((!g||32&n[0]&&l!==(l=e[5].main_steps?"h-imp":"inNativeStyle"))&&attr(i,"class",l),108&n[0]){let t;for(A=e[2],t=0;t<A.length;t+=1){const a=get_each_context(e,A,t);y[t]?y[t].p(a,n):(y[t]=create_each_block(a),y[t].c(),y[t].m(o,null))}for(;t<y.length;t+=1)y[t].d(1);y.length=A.length}(!g||32&n[0]&&c!==(c=e[5].correct_answer?"h-imp":""))&&attr(o,"class",c),e[5].showToolbar?k?(k.p(e,n),32&n[0]&&transition_in(k,1)):(k=create_if_block_1(e),k.c(),transition_in(k,1),k.m(t,p)):k&&(group_outros(),transition_out(k,1,1,(()=>{k=null})),check_outros()),(!g||32&n[0]&&_!==(_=e[5].hideNext?"h-imp":null))&&attr(u,"class",_)},i(e){g||(transition_in(a.$$.fragment,e),transition_in(k),g=!0)},o(e){transition_out(a.$$.fragment,e),transition_out(k),g=!1},d(e){e&&detach(t),destroy_component(a),destroy_each(w,e),destroy_each(y,e),k&&k.d(),v=!1,x()}}}function create_each_block_1(e){let t,a,n,i,l,s,r,o,c,d,m,p,u=e[68].cdata+"";return{c(){t=element("div"),a=element("div"),n=element("div"),i=element("div"),m=space(),attr(i,"seq",l="s"+e[70]),attr(n,"id",s="data-block_"+e[70]),attr(n,"class",r="main_item darkgrey_border secure-icon p-lg jqsfield spanlink_nav "+(e[70]==e[5].classChange?e[5].isColor?"border_green":"border_red":"")),attr(n,"key",o=e[70]),attr(a,"id",c="s"+e[70]),attr(a,"class",d="bg-white "+(1==e[5].display&&null!=e[3].smans&&null!=e[3].smans["s"+e[70]]?1==e[3].smans["s"+e[70]].overall?"border_green":"border_red":"")),attr(t,"data-sticky",p=e[6](e[70])),attr(t,"class","bt-pd bg-white mt-3")},m(e,l){insert(e,t,l),append(t,a),append(a,n),append(n,i),i.innerHTML=u,append(t,m)},p(e,t){32&t[0]&&u!==(u=e[68].cdata+"")&&(i.innerHTML=u),32&t[0]&&r!==(r="main_item darkgrey_border secure-icon p-lg jqsfield spanlink_nav "+(e[70]==e[5].classChange?e[5].isColor?"border_green":"border_red":""))&&attr(n,"class",r),40&t[0]&&d!==(d="bg-white "+(1==e[5].display&&null!=e[3].smans&&null!=e[3].smans["s"+e[70]]?1==e[3].smans["s"+e[70]].overall?"border_green":"border_red":""))&&attr(a,"class",d)},d(e){e&&detach(t)}}}function create_each_block(e){let t,a,n,i,l,s,r,o,c,d,m,p,u=e[68].__cdata+"";return{c(){t=element("div"),a=element("div"),n=element("div"),i=element("div"),m=space(),attr(i,"seq",l="s"+e[70]),attr(n,"id",s="data-block_"+e[70]),attr(n,"class",r="main_item darkgrey_border secure-icon p-lg jqsfield spanlink_nav "+(e[70]==e[5].classChange?e[5].isColor?"border_green":"border_red":"")),attr(n,"key",o=e[70]),attr(a,"id",c="s"+e[70]),attr(a,"class",d="bg-white "+(1==e[5].display&&null!=e[3].smans&&null!=e[3].smans["s"+e[70]]?1==e[3].smans["s"+e[70]].overall?"border_green":"border_red":"")),attr(t,"data-sticky",p=e[6](e[70])),attr(t,"class","bt-pd bg-white mt-3")},m(e,l){insert(e,t,l),append(t,a),append(a,n),append(n,i),i.innerHTML=u,append(t,m)},p(e,t){4&t[0]&&u!==(u=e[68].__cdata+"")&&(i.innerHTML=u),32&t[0]&&r!==(r="main_item darkgrey_border secure-icon p-lg jqsfield spanlink_nav "+(e[70]==e[5].classChange?e[5].isColor?"border_green":"border_red":""))&&attr(n,"class",r),40&t[0]&&d!==(d="bg-white "+(1==e[5].display&&null!=e[3].smans&&null!=e[3].smans["s"+e[70]]?1==e[3].smans["s"+e[70]].overall?"border_green":"border_red":""))&&attr(a,"class",d)},d(e){e&&detach(t)}}}function create_if_block_1(e){let t,a;return t=new FillInTheBlanksToolbar({props:{spanId:e[5].spanId,divId:e[5].divId,action:e[1][e[4]],show:e[16]}}),{c(){create_component(t.$$.fragment)},m(e,n){mount_component(t,e,n),a=!0},p(e,a){const n={};32&a[0]&&(n.spanId=e[5].spanId),32&a[0]&&(n.divId=e[5].divId),18&a[0]&&(n.action=e[1][e[4]]),t.$set(n)},i(e){a||(transition_in(t.$$.fragment,e),a=!0)},o(e){transition_out(t.$$.fragment,e),a=!1},d(e){destroy_component(t,e)}}}function create_fragment(e){let t,a,n=0==e[5].blank&&create_if_block(e);return{c(){t=element("main"),n&&n.c()},m(e,i){insert(e,t,i),n&&n.m(t,null),a=!0},p(e,a){0==e[5].blank?n?(n.p(e,a),32&a[0]&&transition_in(n,1)):(n=create_if_block(e),n.c(),transition_in(n,1),n.m(t,null)):n&&(group_outros(),transition_out(n,1,1,(()=>{n=null})),check_outros())},i(e){a||(transition_in(n),a=!0)},o(e){transition_out(n),a=!1},d(e){e&&detach(t),n&&n.d()}}}function createAns(e,t,a,n){return void 0!==e[a]&&void 0!==e[a][t]||(void 0===e[a]&&(e[a]={}),e[a][t]={}),e[a][t].value=n,e}function instance(e,t,a){let n,i,l={},s={},r="",o="",c=[];var d=[];let m,p="",u={},f="",h="",_=0,g=0,v=0,x=!1,b={},{xml:w}=t,{stopPreviewUpdate:A}=t,{isReview:y}=t,{editorState:k}=t,{uxml:S}=t;writable({blank:!0,hideNext:!1,itemArray:[],classChange:-1,isColor:!0,smController:"h",display:-1,showToolbar:!0,isMathquill:!1,correct_answer:!0,main_steps:!1,your_answer:[]}).subscribe((e=>{a(5,b=e)}));function H(e){if(e.nodeName)if(e.classList.contains("mathquill"))B(e,!1);else{let t=e.getAttribute("id"),a=e.closest("div").getAttribute("seq"),n=e.value;s=createAns(s,t,a,n),L(s)}}function N(){if(s)for(let e in s)for(let t in s[e]){let a=s[e][t].value;if(""!=a){let e=a.match(/MathQuillMathField\{(.*?)\}/g);e?e.map((function(e){""==e.toString().replace(/MathQuillMathField\{|\}/g,"")?AH.select("#"+t,"removeClass","answer_input"):AH.select("#"+t,"addClass","answer_input")})):AH.select("#"+t,"addClass","answer_input")}else AH.select("#"+t,"removeClass","answer_input")}}function M(e){x&&a(3,u.var_list=p,u),a(3,u.cuurentStep=_,u),v=0;const t=b.itemArray;var i,l;if(i=n,(l=e)<=h?(o=i.smxml.step[l].__cdata,q(l,o)):null!=i.smxml.step[_]&&(o=i.smxml.step[_].__cdata,q(l,o)),t.push({cdata:o}),a(5,b.itemArray=t,b),e<=h)var s=e;else s=_;var r=setTimeout((function(){null==n.smxml.step[s+1]&&"1"==n.smxml.step[s]._attempt||null==n.smxml.step[s+1]&&n.smxml.step[s]._viewonly,clearTimeout(r)}),500)}function q(e,t,n){let i=t.match(/%{[\s\S]*?}%/gm),l="";if(!i)return"";i.forEach((function(t,s){if(null!=n)var r=d[n].__cdata;let o=i[s];l=i[s].match(/\|(.*?)}%$/gm),l=l?l[0].replace(/\||}%/gm,""):"",l=l.trim(),""==l||"c"==l||"n"==l?null!=n?$(o,s,e,n,r):$(o,s,e):"e"==l&&(a(5,b.isMathquill=!0,b),null!=n?z(o,s,e,n,r):z(o,s,e))}))}function I(e){a(5,b.showToolbar=e,b)}function C(){if("undefined"!=typeof QUIZPLAYERID)var e=setTimeout((function(){window.parentElement.autoResize(QUIZPLAYERID),clearTimeout(e)}),0);null!=n.smxml.step[_+1]||"1"==n.smxml.step[_]._attempt?(1==n.smxml._gonext?function(){let e="s"+_;AH.find("#"+e,".edit_step","all").forEach((function(t,a){if(t.classList.contains("mathquill"))B(t,!1);else{let a=t.getAttribute("id"),n=t.value;s=createAns(s,a,e,n)}})),1==n.smxml.step[_]._attempt?j():(O(),E())}():1==n.smxml.step[_]._attempt?AH.selectAll(".edit_step").length==AH.selectAll(".answer_input").length?j():AH.selectAll(".edit_step").forEach((e=>{if(!e.classList.contains("answer_input")){e.style.border="2px solid #ff0000";var t=setTimeout((function(){e.style.border="1px solid #ccc",clearTimeout(t)}),500)}})):(O(),E()),n.smxml.step.length<=n.smxml.step[_]._seq&&1!=n.smxml.step[_]._attempt&&a(5,b.hideNext=!0,b)):a(5,b.hideNext=!0,b)}function O(){if(AH.selectAll(".edit_step").forEach((e=>{e.classList.contains("mathquill")?e.previousElementSibling.classList.contains("disable_div")&&AH.select(e.previousElementSibling,"removeClass","h"):e.disabled=!0,e.classList.add("data-check")})),v=0,null==n.smxml.step[_+1]&&"1"==n.smxml.step[_]._attempt)return a(5,b.hideNext=!0,b),L(s),void T();_!=n.smxml.step.length-1?(_+=1,M(),L(s),T()):console.log("All steps are attempted")}function L(e){window.inNative&&window.getHeight&&window.getHeight(),ISSPECIALMODULEUSERXMLCHANGE=1;var t=x?"lists="+JSON.stringify(u.var_list):" ";AH.select("#special_module_user_xml").value="<smans><div "+t+" currStep='"+_+"' userAns='"+JSON.stringify(e)+"'></div></smans>"}function T(){let e=!1,t=null,a=!1;if(n.smxml.step.length==b.itemArray.length){let t=!0;for(let n in l)null!=l[n].overall&&(e=1==l[n].overall,t=t&&e),0==t?(AH.select("#answer").checked=!1,a=!1):null!=document.querySelector("#answer")&&(document.querySelector("#answer").checked=!0,a=!0)}null!=document.querySelector("#special_module_user_xml")&&(t=document.querySelector("#special_module_user_xml").value),window.inNative&&(window.postMessage("height___"+document.getElementsByClassName("inNativeStyle")[0].offsetHeight,"*"),window.postMessage(JSON.stringify({userAnswers:t,inNativeIsCorrect:a}),"*"))}function E(){AH.select("[data-sticky]","addClass","sticky")}function $(e,t,a,n,i){let l=e,s=((e=(e=e.replace(/%{|}%/g,"")).split("|"))[1]&&e[1].trim(),e[0].trim()),r="";if(-1!=s.indexOf("#style#")){let e=s.split("#style#");s=e[0],r=e[1]}let o=[],c=s.split(",");c.forEach((function(e,t){o[t]=10*c[t].length+30})),null!=n?F(e,o,r,l,a,s,t,n,i):F(e,o,r,l,a,s,t)}function F(e,t,n,s,c,m,p,f,g){if(null!=f){i="s"+f+"_t"+p,r="s"+f;let l='<input type="text" id="'+i+'" class="fillintheblank ks nmb text-center span0 edit_st" defaultans="" haskeywords=""  hasnotkeywords="" keywordtype="" autocomplete="off" data-role="none" style="width:'+(Math.max(...t)+20)+"px;"+n+'" />',o='<span id="'+r+'" class="text-center filter fillelement inline-block"><span class="remed_disable fh fwidth absolute h"></span><span id="text" class="corr_div">'+e[0]+"</span>"+l+"</span>",c=g.replace(s,o);a(2,d[f].__cdata=c,d)}else{if(c<=h)var v=c;else v=_;i="s"+v+"_t"+p,r="s"+v;let d='<input type="text" id="'+i+'" class="fillintheblank ks nmb text-center span0 edit_step" defaultans="" haskeywords=""  hasnotkeywords="" keywordtype="" autocomplete="off" data-role="none"  style="width:'+(Math.max(...t)+20)+"px;"+n+'" />',f='<span id="'+r+'" class="text-center filter fillelement inline-block"><span class="remed_disable fh fwidth absolute h"></span><span id="" class="corr_div h-imp">'+e[0]+"</span>"+d+"</span>";o=o.replace(s,f),l=createAns(l,i,r,m),a(3,u.smans=l,u)}}function j(e){g=0,v+=1;for(let a in l)for(let n in l[a]){if(e<h)var t=e;else t=_;if(s["s"+t]&&null!=s["s"+t][n])if(l["s"+t][n].value==s["s"+t][n].value)R("correct",n);else if(/\,/g.test(l["s"+t][n].value)){let e=l["s"+t][n].value.split(","),a=s["s"+t][n].value;e.indexOf(a)>-1?R("correct",n):(g=1,R("wrong",n))}else g=1,R("wrong",n)}1==n.smxml.step[_]._mode?function(e,t){var a=0;g>0?(a=0,e<=h?l[t].overall=a:l[r].overall=a):(a=1,e<=h?l[t].overall=a:l[r].overall=a);O()}(e,"s"+e):function(e,t){var n=0;g>0?(a(5,b.classChange=b.itemArray.length-1,b),a(5,b.isColor=!1,b),n=0,e<=h?l[t].overall=n:(l[r].overall=n,T())):(a(5,b.classChange=b.itemArray.length-1,b),a(5,b.isColor=!0,b),n=1,e<=h?l[t].overall=n:(l[r].overall=n,O()));v>1&&O();s[r]&&null!=s[i]&&(s[r].optry=v);var o=setTimeout((function(){a(5,b.classChange=-1,b),clearTimeout(o)}),2500)}(e,"s"+e)}function R(e,t){if(1!=n.smxml.step[_]._mode&&("correct"==e?(AH.select("#"+t,"removeClass","false-hover"),AH.select("#"+t,"addClass","true-hover")):"wrong"==e&&(AH.select("#"+t,"removeClass","true-hover"),AH.select("#"+t,"addClass","false-hover")),v>1&&AH.select(AI.select("#"+t).previousElementSibling,"removeClass","h-imp"),1!=n.smxml._fixed))var a=setTimeout((function(){AH.select(AI.select("#"+t).previousElementSibling,"addClass","h-imp"),clearTimeout(a)}),2e3);S&&AH.selectAll(".edit_step").forEach((function(e,a){e.classList.contains("mathquill")?AH.select("#"+t).previousElementSibling.classList.contains("disable_div")&&AH.select(AH.select("#"+t).previousElementSibling,"removeClass","h"):e.classList.contains("answer_input")&&(e.disabled=!0),e.classList.add("data-check")}))}function P(){a(0,y=!0),T(),U(),document.querySelectorAll(".fillintheblank").disabled=!0}function Q(){a(0,y=!1),a(5,b.display=-1,b),a(5,b.smController=" h",b),AH.selectAll(".fillintheblank","removeClass","default-hover"),AH.selectAll(".fillintheblank").disabled=!1,a(5,b.main_steps=!1,b),a(5,b.correct_answer=!0,b),AH.selectAll(".remed_disable","css",{display:"none"}),(null==n.smxml.step[_+1]&&"1"==n.smxml.step[_]._attempt||null==n.smxml.step[_+1]&&"1"==n.smxml.step[_]._viewonly)&&AH.selectAll(".edit_step").length==AH.selectAll(".data-check").length?a(5,b.hideNext=!0,b):a(5,b.hideNext=!1,b),window.inNative&&window.getHeight&&window.getHeight()}function G(){a(5,b.display=-1,b),AH.selectAll(".fillintheblank","addClass","default-hover"),n.smxml.step.map((function(e,t){q("corr_ans",e.__cdata,t)})),a(5,b.main_steps=!0,b),a(5,b.correct_answer=!1,b),window.inNative&&window.getHeight&&window.getHeight()}function U(){a(5,b.display=1,b),a(5,b.hideNext=!0,b),a(5,b.smController="",b),AH.selectAll(".fillintheblank","removeClass","default-hover"),a(5,b.main_steps=!1,b),a(5,b.correct_answer=!0,b),AH.selectAll(".remed_disable","css",{display:"block"}),window.inNative&&window.getHeight&&window.getHeight()}function z(e,t,a,n,i){let l=e;(e=(e=e.replace(/%{|}%/g,"")).split("|"))[0]=e[0].replace(/user Response/g,"\\MathQuillMathField");let s=e[0].split("##"),r=Math.floor(Math.random()*s.length),o=s[r],c=o.replace(/MathQuillMathField{(.*?)}/g,"MathQuillMathField{}"),d=0,m=o,p=m.replace(/\\MathQuillMathField/g,"");o.indexOf("MathQuillMathField")>-1&&(m=o,d=1),null!=n?J(c,e,l,a,t,r,d,m,p,n,i):J(c,e,l,a,t,r,d,m,p)}function J(e,t,n,s,m,p,f,g,v,x,b){let w=t[0].trim();if(s<=h)var A=s;else A=_;if(null!=x){i="s0"+x+"_t"+m,r="s0"+x;let t='<span id="'+r+'" class="text-center filter fillelement inline-block"><span class="disable_div fh fwidth absolute h"></span><span class="remed_disable fh fwidth absolute h"></span><span  id="'+("m0"+x+"_t"+m)+'" class="corr_div fillmathelement mathquill mq'+A+'" userAnsSeq="'+p+'" anskey="'+g+'" defaultans="'+f+'" mathtype="1">'+v+"</span>"+('<span  id="'+i+'" class="auto_height edit_st fillmathelement mathquill mq'+A+'" userAnsSeq="'+p+'" userans="'+e+'" anskey="'+g+'" defaultans="'+f+'" mathtype="1">s</span>')+"</span>",l=b.replace(n,t);a(2,d[x].__cdata=l,d)}else{i="s"+A+"_t"+m,r="s"+A;let t='<span id="'+r+'" class="text-center filter fillelement inline-block"><span class="disable_div fh fwidth absolute h"></span><span class="remed_disable fh fwidth absolute h"></span><span  id="'+("m"+A+"_t"+m)+'" class="corr_div h-imp fillmathelement mathquill mq'+A+'" userAnsSeq="'+p+'" anskey="'+g+'" defaultans="'+f+'" mathtype="1">'+v+"</span>"+('<span  id="'+i+'" class="auto_height edit_step fillmathelement mathquill mq'+A+'" userAnsSeq="'+p+'" userans="'+e+'" anskey="'+g+'" defaultans="'+f+'" mathtype="1">s</span>')+"</span>";o=o.replace(n,t),l=createAns(l,i,r,w),a(3,u.smans=l,u)}let y=setInterval(function(){if("function"==typeof MathQuill){clearInterval(y);let e=MathQuill.getInterface(2);AH.selectAll(".mathquill.mq"+A).forEach((t=>{let n=t.getAttribute("id");if(1==t.getAttribute("defaultans")){let e=t.getAttribute("userans");AH.select("#"+n).innerText=e}else AH.select("#"+n).innerText=t.getAttribute("userans");try{a(1,c[n]=e.StaticMath(document.getElementById(n)),c)}catch(e){console.log(e)}}))}}.bind(this),100)}function B(e,t){let a,n=[],i=jQuery(e).closest("div").find("span.fillelement").attr("id"),l=jQuery(e).attr("id"),r=jQuery(e).attr("userans").trim();if("math_user"==t)a=r;else{let e=MathQuill.getInterface(2).StaticMath(document.getElementById(l));for(let t=0;t<=e.innerFields.length-1;t++)n[t]=e.innerFields[t].latex();let t=r,i=r.match(/\\MathQuillMathField{(.*?)\}/g);for(let e in i){const a="\\MathQuillMathField{"+n[e]+"}",l=i[e].replace(/\\MathQuillMathField{(.*?)\}/g,a);let s=i[e];t=t.replace(s,l)}r=t,a=r}s=createAns(s,l,i,a),L(s)}beforeUpdate((()=>{if(b.isMathquill&&function(){let e={preload:!0,type:"stylesheet",as:"style"};AH.createLink(baseUrlTheme+"css/mathquill.css",e)}(),S){let e=XMLToJSON(S);e.smans&&e.smans.div&&e.smans.div._userAns&&function(e){let t=XMLToJSON(e);x&&(f=JSON.parse(t.smans.div._lists));h=JSON.parse(t.smans.div._currStep)}(S)}if(w!=b.xml){if(a(5,b.xml=w,b),1==A)return!1;S||(_=0,a(5,b.itemArray=[],b),s={},a(5,b.hideNext=!1,b),AH.find(document,".sticky",{action:"removeClass",actionData:"sticky"}),AH.selectAll(".edit_step","removeAttr","disabled"),AH.selectAll(".edit_step").value=""),a(5,b.blank=!1,b),function(e){x=!1,"undefined"!=e.smxml.algo&&e.smxml.algo&&(x=!0);x&&(p=Step.init(e.smxml.algo));let t=JSON.stringify(e);if(x){if(S){let e=XMLToJSON(S);e.smans&&e.smans.div&&e.smans.div._lists&&(p=f)}n=Step.init.replaceVariables(t,p),n=JSON.parse(n)}else n=e;let i=n.smxml.step;a(2,d=i.slice()),"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");e=Object(e);for(var t=1;t<arguments.length;t++){var a=arguments[t];if(null!=a)for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e});if(i.map((function(e,t){a(2,d[t]=Object.assign({},e),d)})),""!=h){_=h;for(let e=0;e<=h;e++)M(e)}else M();if(S){let e=XMLToJSON(S);if(e.smans&&e.smans.div&&e.smans.div._userAns)var l=setTimeout((function(){!function(e){let t=XMLToJSON(e);if(t.smans&&t.smans.div&&t.smans.div._userAns){t=JSON.parse(t.smans.div._userAns);for(let e in t)for(let a in t[e]){let n=e.split("")[1],i=t[e][a].value;AH.select("#"+a).classList.contains("mathquill")?(AH.select("#"+a,"userans",i),B("#"+a,"math_user")):(AH.select("#"+a).value=i,H(AH.select("#"+a))),v=0,N(),j(n)}}}(S),clearTimeout(l)}),50)}}(XMLToJSON(b.xml))}})),onMount((()=>{window.J=jquery,AI.set("stepAlgo",this),window.inNative&&window.getHeight&&window.getHeight(),setTimeout((function(){AH.selectAll(".toolbar_container_one","addClass","h-imp")}),100),AH.listen(document,"click",".edit_step",(e=>{H(e)})),AH.listen(document,"keyup",".edit_step",(e=>{H(e)})),AH.listen(document,"change",".edit_step",(e=>{H(e)})),AH.listen(document,"click","span.mq-editable-field.mq-focused",(e=>{let t,n=e,i=!0;for(;i;)n=n.parentElement,n.getAttribute("id")&&(i=!1,t=n.getAttribute("id"),a(4,m=t));let l=[];AH.selectAll("#"+t+" span.mq-editable-field").forEach((e=>{let t=e.getAttribute("mathquill-command-id");l.push(t)}));let s=e.getAttribute("mathquill-command-id"),r=l.indexOf(s);a(5,b.spanId=r,b),a(5,b.divId=t,b),AH.selectAll(".toolbar_container_one","removeClass","h-imp"),a(5,b.showToolbar=!0,b)})),AH.listen(document,"click",".next_step",(function(e,t){"undefined"!=typeof QUIZPLAYERID&&window.parentElement.autoResize(QUIZPLAYERID),t.preventDefault(),N()})),setTimeout((function(){AH.listen(document,"click","#set-review",(function(){P()})),AH.listen(document,"click","#unset-review",(function(){Q()}))}),1e3),window.inNative&&setTimeout((function(){window.postMessage("height___"+document.getElementsByClassName("inNativeStyle")[0].offsetHeight,"*")}),200),window.inNative?(window.checkReview=e=>e?self.setReview():self.unsetReview(),AH.addScript("https://ucertify.com/themes/bootstrap4/prepengine/mathquill.js")):AH.addScript("",editor.baseUrlTheme+"clsSMStepAlgo/libs/mathQuill_new.js",{callback(){}})}));return e.$$set=e=>{"xml"in e&&a(12,w=e.xml),"stopPreviewUpdate"in e&&a(13,A=e.stopPreviewUpdate),"isReview"in e&&a(0,y=e.isReview),"editorState"in e&&a(14,k=e.editorState),"uxml"in e&&a(15,S=e.uxml)},e.$$.update=()=>{if(1&e.$$.dirty[0])if(y)var t=setTimeout((function(){P(),clearTimeout(t)}),500);else var a=setTimeout((function(){Q(),clearTimeout(a)}),200)},[y,c,d,u,m,b,function(e){if(null!=n.smxml.step[e]&&1==n.smxml.step[e]._sticky)return"sticky"},I,C,P,Q,function(e,t){"c"==e?G():U()},w,A,k,S,e=>{I(e)},()=>setTimeout((function(){C()}),100)]}class StepAlgoPreview extends SvelteComponent{constructor(e){super(),document_1.getElementById("svelte-142veau-style")||add_css(),init(this,e,instance,create_fragment,safe_not_equal,{xml:12,stopPreviewUpdate:13,isReview:0,editorState:14,uxml:15},[-1,-1,-1])}}function create_if_block$1(e){let t,a;return t=new StepAlgoPreview({props:{xml:e[0],remedStatus:e[1],showAns:e[2],stopPreviewUpdate:e[3],isReview:e[5]}}),{c(){create_component(t.$$.fragment)},m(e,n){mount_component(t,e,n),a=!0},p(e,a){const n={};1&a&&(n.xml=e[0]),2&a&&(n.remedStatus=e[1]),4&a&&(n.showAns=e[2]),8&a&&(n.stopPreviewUpdate=e[3]),32&a&&(n.isReview=e[5]),t.$set(n)},i(e){a||(transition_in(t.$$.fragment,e),a=!0)},o(e){transition_out(t.$$.fragment,e),a=!1},d(e){destroy_component(t,e)}}}function create_fragment$1(e){let t,a,n=2==e[4].content_icon&&create_if_block$1(e);return{c(){t=element("main"),n&&n.c()},m(e,i){insert(e,t,i),n&&n.m(t,null),a=!0},p(e,[a]){2==e[4].content_icon?n?(n.p(e,a),16&a&&transition_in(n,1)):(n=create_if_block$1(e),n.c(),transition_in(n,1),n.m(t,null)):n&&(group_outros(),transition_out(n,1,1,(()=>{n=null})),check_outros())},i(e){a||(transition_in(n),a=!0)},o(e){transition_out(n),a=!1},d(e){e&&detach(t),n&&n.d()}}}function instance$1(e,t,a){let{xml:n}=t,{remedStatus:i}=t,{showAns:l}=t,{stopPreviewUpdate:s}=t,{editorState:r}=t,{isReview:o}=t;return e.$$set=e=>{"xml"in e&&a(0,n=e.xml),"remedStatus"in e&&a(1,i=e.remedStatus),"showAns"in e&&a(2,l=e.showAns),"stopPreviewUpdate"in e&&a(3,s=e.stopPreviewUpdate),"editorState"in e&&a(4,r=e.editorState),"isReview"in e&&a(5,o=e.isReview)},[n,i,l,s,r,o]}class ItemPluginPreview extends SvelteComponent{constructor(e){super(),init(this,e,instance$1,create_fragment$1,safe_not_equal,{xml:0,remedStatus:1,showAns:2,stopPreviewUpdate:3,editorState:4,isReview:5})}}export default ItemPluginPreview;
//# sourceMappingURL=ItemPluginPreview-e11566e9.js.map
