import{S as e,i as t,s as c,D as l,q as o,h as r,e as a,u as m,f as s,Y as n,j as i,x as h,o as d,z as u,b as _,g,l as f,c as p,m as b,t as x,a as A,d as E,C as F,a4 as v,p as y,X as D,A as w,w as C,W as k}from"./main-3dc144e7.js";import{I as B}from"./ItemHelper-d211ce1e.js";import{l as q}from"./parseCSV-929be628.js";function N(e){l(e,"svelte-1tugc6q",".fa-close{margin-left:20px;font-size:18px;position:absolute;top:10px;color:#A80000}.fa-check{margin-left:20px;font-size:18px;position:absolute;top:10px;color:#46A546}.fa-close,.fa-check.svelte-1tugc6q,.middle_align.svelte-1tugc6q{vertical-align:middle!important}.middle_align{width:164px;min-width:164px}.topic_input{min-width:257px}.preview_header{font-size:16pt;font-weight:bold;vertical-align:middle}.adjust_width{width:10%;text-align:center}.theme_color_theme1.svelte-1tugc6q{background-color:#5B9BD5!important}.theme_color_theme2.svelte-1tugc6q{background-color:#3B67BC!important}.theme_color_theme3.svelte-1tugc6q{background-color:#F6C3A2!important}.theme_color_theme4.svelte-1tugc6q{background-color:#70AD47!important}.theme_color_theme5.svelte-1tugc6q{background-color:#745998!important}.theme_color_terms_theme1.svelte-1tugc6q{background-color:#DEEAF6}.theme_color_terms_theme2.svelte-1tugc6q{background-color:#D4DEF1}.theme_color_terms_theme3.svelte-1tugc6q{background-color:#FAE0CF}.theme_color_terms_theme4.svelte-1tugc6q{background-color:#E2EFD9}.theme_color_terms_theme5.svelte-1tugc6q{background-color:#E1DAE9}")}function S(e,t,c){const l=e.slice();return l[30]=t[c],l[32]=c,l}function $(e,t,c){const l=e.slice();return l[33]=t[c],l[35]=c,l}function M(e,t,c){const l=e.slice();return l[30]=t[c],l[32]=c,l}function R(e){let t,c=e[2].cdata.option,l=[];for(let t=0;t<c.length;t+=1)l[t]=j(M(e,c,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=o()},m(e,c){for(let t=0;t<l.length;t+=1)l[t].m(e,c);r(e,t,c)},p(e,o){if(36&o[0]){let r;for(c=e[2].cdata.option,r=0;r<c.length;r+=1){const a=M(e,c,r);l[r]?l[r].p(a,o):(l[r]=j(a),l[r].c(),l[r].m(t.parentNode,t))}for(;r<l.length;r+=1)l[r].d(1);l.length=c.length}},d(e){u(l,e),e&&d(t)}}}function j(e){let t,c,l,o,u,_=e[30].text.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"";return{c(){t=a("th"),c=m(_),s(t,"key",l=e[32]),s(t,"class",o=n(("#5B9BD5"==e[5][e[2].theme]?"theme_color_theme1":"#3B67BC"==e[5][e[2].theme]?"theme_color_theme2":"#F6C3A2"==e[5][e[2].theme]?"theme_color_theme3":"#70AD47"==e[5][e[2].theme]?"theme_color_theme4":"#745998"==e[5][e[2].theme]?"theme_color_theme5":"")+" preview_header adjust_width "+("theme3"!==e[2].theme?e[30].id+"text-center text-white":e[30].id+"text-center"))+" svelte-1tugc6q"),s(t,"tabindex",u=0)},m(e,l){r(e,t,l),i(t,c)},p(e,l){4&l[0]&&_!==(_=e[30].text.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"")&&h(c,_),4&l[0]&&o!==(o=n(("#5B9BD5"==e[5][e[2].theme]?"theme_color_theme1":"#3B67BC"==e[5][e[2].theme]?"theme_color_theme2":"#F6C3A2"==e[5][e[2].theme]?"theme_color_theme3":"#70AD47"==e[5][e[2].theme]?"theme_color_theme4":"#745998"==e[5][e[2].theme]?"theme_color_theme5":"")+" preview_header adjust_width "+("theme3"!==e[2].theme?e[30].id+"text-center text-white":e[30].id+"text-center"))+" svelte-1tugc6q")&&s(t,"class",o)},d(e){e&&d(t)}}}function J(e){let t,c=e[1].cdata.term,l=[];for(let t=0;t<c.length;t+=1)l[t]=z(S(e,c,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=o()},m(e,c){for(let t=0;t<l.length;t+=1)l[t].m(e,c);r(e,t,c)},p(e,o){if(598&o[0]){let r;for(c=e[1].cdata.term,r=0;r<c.length;r+=1){const a=S(e,c,r);l[r]?l[r].p(a,o):(l[r]=z(a),l[r].c(),l[r].m(t.parentNode,t))}for(;r<l.length;r+=1)l[r].d(1);l.length=c.length}},d(e){u(l,e),e&&d(t)}}}function O(e){let t,c,l,o,m,h,u,g,p,b,x,A,E,F,v,y,D,w,C,k,B,q,N,S,$;return{c(){t=a("td"),c=a("i"),o=_(),m=a("i"),u=_(),g=a("input"),y=_(),D=a("label"),s(c,"class","fa fa-check svelte-1tugc6q"),s(c,"aria-hidden","true"),s(c,"style",l=H(e[4])),s(m,"class","fa fa-close"),s(m,"aria-hidden","true"),s(m,"style",h=H(e[4])),s(g,"type","radio"),s(g,"class","test_radio CMRad"),s(g,"style",p="vertical-align:middle;"),g.value=b=e[33].id,s(g,"name",x="tm"+(e[32]+1)),s(g,"id",A="t"+e[32]+e[35]),s(g,"data-termid",E=e[30].id),s(g,"data-correct",F=e[30].correct),s(g,"data-userans",""),s(g,"data-role","none"),s(g,"tabindex",v=-1),s(D,"tabindex",w=0),s(D,"class",C="label_choice customRadCM "+(e[35]%2==0?"tureitemColorCM":"falseitemColorCM")),s(D,"for",k="t"+e[32]+e[35]),s(t,"key",B=e[35]),s(t,"id",q="tb"+e[32]+e[35]),s(t,"class",N=n((e[32]%2==0?"#DEEAF6"==e[6][e[2].theme]?"theme_color_terms_theme1":"#D4DEF1"==e[6][e[2].theme]?"theme_color_terms_theme2":"#FAE0CF"==e[6][e[2].theme]?"theme_color_terms_theme3":"#E2EFD9"==e[6][e[2].theme]?"theme_color_terms_theme4":"#E1DAE9"==e[6][e[2].theme]?"theme_color_terms_theme5":"#FFF":"#FFF")+" text-center test_area"+(e[33].id==e[30].correct?" dbg-success":" dbg-danger")+" position-relative")+" svelte-1tugc6q")},m(l,a){r(l,t,a),i(t,c),i(t,o),i(t,m),i(t,u),i(t,g),i(t,y),i(t,D),S||($=f(g,"click",e[9]),S=!0)},p(e,c){2&c[0]&&b!==(b=e[33].id)&&(g.value=b),2&c[0]&&E!==(E=e[30].id)&&s(g,"data-termid",E),2&c[0]&&F!==(F=e[30].correct)&&s(g,"data-correct",F),6&c[0]&&N!==(N=n((e[32]%2==0?"#DEEAF6"==e[6][e[2].theme]?"theme_color_terms_theme1":"#D4DEF1"==e[6][e[2].theme]?"theme_color_terms_theme2":"#FAE0CF"==e[6][e[2].theme]?"theme_color_terms_theme3":"#E2EFD9"==e[6][e[2].theme]?"theme_color_terms_theme4":"#E1DAE9"==e[6][e[2].theme]?"theme_color_terms_theme5":"#FFF":"#FFF")+" text-center test_area"+(e[33].id==e[30].correct?" dbg-success":" dbg-danger")+" position-relative")+" svelte-1tugc6q")&&s(t,"class",N)},d(e){e&&d(t),S=!1,$()}}}function z(e){let t,c,l,o,m,h,f,p=e[30].text.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"",b=e[1].cdata.option,x=[];for(let t=0;t<b.length;t+=1)x[t]=O($(e,b,t));return{c(){t=a("tr"),c=a("td"),m=_();for(let e=0;e<x.length;e+=1)x[e].c();h=_(),s(c,"class",l=n((e[32]%2==0?"#DEEAF6"==e[6][e[2].theme]?"theme_color_terms_theme1":"#D4DEF1"==e[6][e[2].theme]?"theme_color_terms_theme2":"#FAE0CF"==e[6][e[2].theme]?"theme_color_terms_theme3":"#E2EFD9"==e[6][e[2].theme]?"theme_color_terms_theme4":"#E1DAE9"==e[6][e[2].theme]?"theme_color_terms_theme5":"#FFF":"#FFF")+" "+e[30].id+" position-relative")+" svelte-1tugc6q"),s(c,"tabindex",o=0),g(c,"font-size","14pt"),g(c,"vertical-align","middle"),g(c,"font-family",e[2].font),s(t,"key",f=e[32])},m(e,l){r(e,t,l),i(t,c),c.innerHTML=p,i(t,m);for(let e=0;e<x.length;e+=1)x[e].m(t,null);i(t,h)},p(e,o){if(2&o[0]&&p!==(p=e[30].text.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"")&&(c.innerHTML=p),6&o[0]&&l!==(l=n((e[32]%2==0?"#DEEAF6"==e[6][e[2].theme]?"theme_color_terms_theme1":"#D4DEF1"==e[6][e[2].theme]?"theme_color_terms_theme2":"#FAE0CF"==e[6][e[2].theme]?"theme_color_terms_theme3":"#E2EFD9"==e[6][e[2].theme]?"theme_color_terms_theme4":"#E1DAE9"==e[6][e[2].theme]?"theme_color_terms_theme5":"#FFF":"#FFF")+" "+e[30].id+" position-relative")+" svelte-1tugc6q")&&s(c,"class",l),4&o[0]&&g(c,"font-family",e[2].font),598&o[0]){let c;for(b=e[1].cdata.option,c=0;c<b.length;c+=1){const l=$(e,b,c);x[c]?x[c].p(l,o):(x[c]=O(l),x[c].c(),x[c].m(t,h))}for(;c<x.length;c+=1)x[c].d(1);x.length=b.length}},d(e){e&&d(t),u(x,e)}}}function W(e){let t,c,l,o,u,g,f,F,v,y,D,w,C,k,q,N,S,$,M=e[2].stem.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"";c=new B({props:{handleReviewClick:e[10],reviewMode:e[0],customReviewMode:e[3]}}),c.$on("setReview",e[7]),c.$on("unsetReview",e[8]);let j=e[2].cdata&&R(e),O=e[1].cdata&&J(e);return{c(){t=a("div"),p(c.$$.fragment),l=_(),o=a("center"),u=a("table"),g=a("thead"),f=a("tr"),F=a("th"),v=m(M),w=_(),j&&j.c(),C=_(),k=a("tbody"),O&&O.c(),s(F,"class",y=n(("#5B9BD5"==e[5][e[2].theme]?"theme_color_theme1":"#3B67BC"==e[5][e[2].theme]?"theme_color_theme2":"#F6C3A2"==e[5][e[2].theme]?"theme_color_theme3":"#70AD47"==e[5][e[2].theme]?"theme_color_theme4":"#745998"==e[5][e[2].theme]?"theme_color_theme5":"")+" preview_header "+("theme3"!==e[2].theme?"text-center text-white":" text-center"))+" svelte-1tugc6q"),s(F,"tabindex",D=0),s(f,"class","table-head"),s(u,"class",q="table testmode_table "),s(u,"id","test_table"),s(u,"style",N="position:relative; margin-top:20px;width:"+e[2].maxWidth+"px;font-family: Georgia;"),s(t,"class","mainAdaArea"),s(t,"id","choicemain"),s(t,"style",S="margin-bottom:20px")},m(e,a){r(e,t,a),b(c,t,null),i(t,l),i(t,o),i(o,u),i(u,g),i(g,f),i(f,F),i(F,v),i(f,w),j&&j.m(f,null),i(u,C),i(u,k),O&&O.m(k,null),$=!0},p(e,t){const l={};1&t[0]&&(l.reviewMode=e[0]),c.$set(l),(!$||4&t[0])&&M!==(M=e[2].stem.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"")&&h(v,M),(!$||4&t[0]&&y!==(y=n(("#5B9BD5"==e[5][e[2].theme]?"theme_color_theme1":"#3B67BC"==e[5][e[2].theme]?"theme_color_theme2":"#F6C3A2"==e[5][e[2].theme]?"theme_color_theme3":"#70AD47"==e[5][e[2].theme]?"theme_color_theme4":"#745998"==e[5][e[2].theme]?"theme_color_theme5":"")+" preview_header "+("theme3"!==e[2].theme?"text-center text-white":" text-center"))+" svelte-1tugc6q"))&&s(F,"class",y),e[2].cdata?j?j.p(e,t):(j=R(e),j.c(),j.m(f,null)):j&&(j.d(1),j=null),e[1].cdata?O?O.p(e,t):(O=J(e),O.c(),O.m(k,null)):O&&(O.d(1),O=null),(!$||4&t[0]&&N!==(N="position:relative; margin-top:20px;width:"+e[2].maxWidth+"px;font-family: Georgia;"))&&s(u,"style",N)},i(e){$||(x(c.$$.fragment,e),$=!0)},o(e){A(c.$$.fragment,e),$=!1},d(e){e&&d(t),E(c),j&&j.d(),O&&O.d()}}}function I(){let e=document.getElementsByClassName("test_radio");for(let t=0;t<e.length;t++)e[t].getAttribute("id")==e[t].getAttribute("data-userans")?e[t].checked=!0:e[t].checked=!1}function L(){!function(){let e=document.querySelectorAll(" .test_radio");for(let t=0;t<e.length;t++)e[t].getAttribute("value")==e[t].getAttribute("data-correct")?e[t].checked=!0:e[t].checked=!1}(),T()}function T(){let e=document.getElementsByClassName("fa-check"),t=document.getElementsByClassName("fa-close");for(let c=0;c<e.length;c++)e[c].style.display="none",t[c].style.display="none"}function H(e){return 1==e?{paddingLeft:"14px",display:"inline-flex",position:"absolute"}:{paddingLeft:"15px",display:"none",position:"absolute"}}function G(e,t,c){let l,{showAns:o}=t,{editorState:r}=t,{xml:a}=t,{uxml:m}=t,{isReview:s}=t,{CM:n}=t,i=s,h=s,d={cdata:""},u={},_=0;C({cdata:"",stem:"",xml:"",theme:"",font:"",maxWidth:"",totalcorrectans:""}).subscribe((e=>{c(2,u=e)}));function g(){let e=function(){let e=0,t=0,c=document.getElementsByClassName("test_radio");for(let t=0;t<c.length;t++)if(c[t].getAttribute("value")==c[t].getAttribute("data-correct")){if(1!=c[t].checked)return e=0,c[t].setAttribute("as",0),!1;c[t].setAttribute("as",1),e=1}for(let e=0;e<c.length;e++)c[e].getAttribute("value")==c[e].getAttribute("data-correct")&&1==c[e].checked&&t++,"undefined"!=typeof calculatePoint&&calculatePoint(u.totalcorrectans,t);return e}();e=1==e,m?w.select("#answer").checked=e:r&&o(e?"Correct":"Incorrect"),k({uXml:l,ans:e})}function f(){I(),A()}function p(){c(0,s=!0),x(s),f()}function b(){c(0,s=!1);let e=document.getElementsByClassName("test_radio");for(let t=0;t<e.length;t++)e[t].disabled=!1;T()}function x(e){if(e){let e="#main-"+n,t=w.selectAll(e+" .test_radio");for(let e=0;e<t.length;e++)t[e].disabled=!0}}function A(){w.select(".dbg-success input","checked").forEach((e=>{w.siblings(e,".fa-check").forEach((e=>{e.style.display="inline-flex"}))})),w.select(".dbg-danger input","checked").forEach((e=>{w.siblings(e,".fa-close").forEach((e=>{e.style.display="inline-flex"}))})),w.selectAll(".dbg-success input, .dbg-danger input","removeAttr","as"),w.select(".dbg-success input","checked").forEach((e=>{e.setAttribute("as",1)})),w.select(".dbg-success input","checked").forEach((e=>{e.setAttribute("as",0)})),w.select(".dbg-success input","checked").forEach((e=>{w.siblings(e,".label_choice").forEach((e=>{e.setAttribute("title","is marked as correct")}))})),w.select(".dbg-danger input","checked").forEach((e=>{w.siblings(e,".label_choice").forEach((e=>{e.setAttribute("title","is marked as incorrect")}))}))}return F((()=>{var e;a!=u.xml&&(c(2,u.xml=a,u),e=m,function(e,t){c(2,u.theme=e.smxml._theme,u),c(2,u.font=e.smxml._font,u),c(2,u.maxWidth=e.smxml._maxwidth?e.smxml._maxwidth:800,u);let l=q.parseCSVFormat(e.smxml.__cdata),o=[];o=JSON.parse(JSON.stringify(l)),c(2,u.cdata=o,u),c(2,u.stem=o.stem,u),c(1,d.cdata=o,d);let r=d.cdata.term.length;if(c(2,u.totalcorrectans=r,u),b(),t)try{t=JSON.parse(t);let e=[];e=JSON.parse(JSON.stringify(t)),setTimeout((function(){e.ans.map((function(e,t){w.selectAll(".test_area #"+e.userAns,"attr",{"data-userans":e.userAns})})),I()}),100)}catch(e){}else{let e=document.getElementsByClassName("test_radio");for(let t=0;t<e.length;t++)e[t].checked=!1,e[t].setAttribute("data-userans","")}}(D(a),e))})),v((()=>{x(i),s||T(),i&&setTimeout((function(){A()}),300)})),y((()=>{AI.listen("body","keydown",".label_choice",(function(e,t){13===t.which&&e.click()}))})),e.$$set=e=>{"showAns"in e&&c(11,o=e.showAns),"editorState"in e&&c(12,r=e.editorState),"xml"in e&&c(13,a=e.xml),"uxml"in e&&c(14,m=e.uxml),"isReview"in e&&c(0,s=e.isReview),"CM"in e&&c(15,n=e.CM)},e.$$.update=()=>{200705&e.$$.dirty[0]&&h!=s&&(s?(p(),r&&0==_&&(c(17,_=1),g())):(c(17,_=0),I(),b()),c(16,h=s))},[s,d,u,i,undefined,{theme1:"#5B9BD5",theme2:"#3B67BC",theme3:"#F6C3A2",theme4:"#70AD47",theme5:"#745998"},{theme1:"#DEEAF6",theme2:"#D4DEF1",theme3:"#FAE0CF",theme4:"#E2EFD9",theme5:"#E1DAE9"},function(){p()},function(){I(),b()},function(e){let t=e.target.id,c=e.target.name,o=document.querySelectorAll(" .test_area input[name="+c+"]");for(let e=0;e<o.length;e++)o[e].setAttribute("data-userans","");w.selectAll(" .test_area #"+t,"attr",{"data-userans":t});let r={type:"34",ans:[]},a=document.getElementsByClassName("test_radio");for(let e=0;e<a.length;e++)1==a[e].checked&&r.ans.push({id:a[e].getAttribute("data-termid"),userAns:a[e].getAttribute("id")});l=JSON.stringify(r),g()},function(e,t){"c"==e?L():f()},o,r,a,m,n,h,_]}export default class extends e{constructor(e){super(),t(this,e,G,W,c,{showAns:11,editorState:12,xml:13,uxml:14,isReview:0,CM:15},N,[-1,-1])}}
//# sourceMappingURL=ChoiceMatrixPreview-b8bb5360.js.map
