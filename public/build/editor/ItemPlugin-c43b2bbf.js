import{S as t,i as e,s as n,F as l,_ as o,e as s,u as c,b as a,C as r,f as d,h as p,j as u,l as m,k as f,a as x,n as g,t as h,o as b,y as $,Q as _,H as v,I as k,K as y,c as w,m as C,N as A,d as S,D as q,p as T,X as I,A as E,E as z,r as M,w as B,U}from"./main-61075ca2.js";function X(t){l(t,"svelte-174lt90",'.font18.svelte-174lt90{font-size:16px}.fwidth.svelte-174lt90{width:100%}.light-cyan-bg.svelte-174lt90{background-color:#d4e4ff;color:#333}.top2.svelte-174lt90{top:2px}.right5.svelte-174lt90{right:5px}.right35.svelte-174lt90{right:35px}.step_checkbox.svelte-174lt90{width:22%;border:1px solid black;margin-left:10px;position:relative;bottom:1px;cursor:pointer;padding:3px 2px 0}.fixed_ans.svelte-174lt90{top:10px;position:relative;float:right;border:1px solid #e0e0e0;background-color:#f5f5f5;border-radius:4px;padding:5px;font-size:15px;font-weight:700}.check_box.svelte-174lt90{right:24px;position:relative;width:40px}.inner_inputs.svelte-174lt90{margin:0 12px!important}.pointer.svelte-174lt90{cursor:pointer !important}.width100.svelte-174lt90{width:100px}[id^="fillmain"]{overflow:hidden;text-align:left}[id^="fillmain"] pre{background:none;border:none;font-size:14px!important}[id^="fillmain"] .string{min-height:50px;margin-top:10px;margin-right:10px}[id^="fillmain"] .footerstr{position:relative;margin-top:10px;background-color:#ccc;padding:15px;min-height:60px}[id^="fillmain"] .footerstr .arrow-up{position:absolute;top:-10px;right:50%;width:0;height:0;border-left:10px solid transparent;border-right:10px solid transparent;border-bottom:10px solid #ccc}[id^="fillmain"] .fill-row{padding:6px}[id^="fillmain"] .fillelement, [id^="fillmain"] .drag-resize{height:30px;display:inline-block;position:relative;min-height:30px;margin:1px}#fillmain .drag-resize{height:30px;display:inline-block;position:relative;min-height:30px;margin:1px}#fillmain input[type="text"]{height:99%!important;resize:none;font-size:12px;color:#000;max-width:800px}#fillmain select{height:99%!important;resize:none;font-size:12px;color:#000;max-width:800px}[id^="fillmain"] .drag-resize{vertical-align:middle;border:1px solid #31B731;text-align:center;padding:3px;font-size:14px}[id^="fillmain"] .drag-resize.ui-draggable{cursor:move}[id^="fillmain"] .drop-hover{border:1px dashed red!important;box-shadow:0 0 0 2px yellow inset;outline:1px solid blue}[id^="fillmain"] .fillcheck ul{width:220px}[id^="fillmain"] .fillcheck li.selected{background-color:#E5E5E5}.fillcheck .selected .icomoon-checkmark-3:before{float:left;color:blue;padding:3px;position:relative;right:14px}.fillcheck .icomoon-close-2:before{float:left;color:blue;position:relative;right:14px;font-size:20px}.MathJax_Display{display:inline!important}[id^="fillmain"] .select{font-size:15px}[id^="fillmain"] .textarea{vertical-align:middle;border-radius:3px;background:#ffe;border:1px solid #ccc;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);box-shadow:inset 0 1px 1px rgba(0,0,0,0.075)}.ui-draggable-disabled{cursor:no-drop!important;opacity:0.5!important}')}function D(t,e,n){const l=t.slice();return l[38]=e[n],l[40]=n,l}function F(t){let e;return{c(){e=c("Go Next")},m(t,n){p(t,e,n)},p:M,d(t){t&&b(e)}}}function N(t){let e;return{c(){e=c("Fix Answer")},m(t,n){p(t,e,n)},p:M,d(t){t&&b(e)}}}function H(t){let e,n;return e=new o({props:{"data-seq":t[40],class:"inner_inputs option_checkbox",type:"checkbox",value:"mode",name:"mode_checkbox_",id:"mode_checkbox_"+t[40],checked:!1}}),e.$on("click",(function(...e){return t[23](t[40],...e)})),{c(){w(e.$$.fragment)},m(t,l){C(e,t,l),n=!0},p(e,n){t=e},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){x(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function K(t){let e,n;return e=new o({props:{"data-seq":t[40],class:"inner_inputs option_checkbox",type:"checkbox",value:"mode",name:"mode_checkbox_",id:"mode_checkbox_"+t[40],checked:!0}}),e.$on("click",(function(...e){return t[22](t[40],...e)})),{c(){w(e.$$.fragment)},m(t,l){C(e,t,l),n=!0},p(e,n){t=e},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){x(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function L(t){let e,n;return e=new o({props:{"data-seq":t[40],checked:!1,class:"inner_inputs option_checkbox",type:"checkbox",value:"sticky",name:"sticky_checkbox_",id:"sticky_checkbox_"+t[40]}}),e.$on("click",t[4].bind(this,t[40],"fillAuthor_"+t[40])),{c(){w(e.$$.fragment)},m(t,l){C(e,t,l),n=!0},p:M,i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){x(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function O(t){let e,n;return e=new o({props:{"data-seq":t[40],checked:!0,class:"inner_inputs option_checkbox",type:"checkbox",value:"sticky",name:"sticky_checkbox_",id:"sticky_checkbox_"+t[40]}}),e.$on("click",t[4].bind(this,t[40],"fillAuthor_"+t[40])),{c(){w(e.$$.fragment)},m(t,l){C(e,t,l),n=!0},p:M,i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){x(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function j(t){let e,n,l,i,o,_,v,k,y,w,C,A,S,q,T,I,E,z,M,B,U,X,D,F,N,j,R,P,G,J,Q,Y,V,W,Z,tt,et,nt,lt,it,ot,st,ct,at,rt,dt,pt,ut,mt,ft,xt,gt,ht,bt,$t=t[40]+1+"",_t=t[38].__cdata+"";function vt(...e){return t[20](t[40],...e)}function kt(...e){return t[21](t[40],...e)}const yt=[K,H],wt=[];function Ct(t,e){return"1"==t[38]._mode?0:1}Y=Ct(t),V=wt[Y]=yt[Y](t);let At=0==t[40]&&function(t){let e,n,l,i,o,c,m,$;const _=[O,L],v=[];function k(t,e){return"1"==t[38]._sticky?0:1}return l=k(t),i=v[l]=_[l](t),{c(){e=s("div"),n=s("span"),i.c(),o=a(),c=s("label"),c.textContent=""+r.sticky,d(n,"class","check_box d-inline-block svelte-174lt90"),d(c,"class","font-weight-normal me-1 position-relative top2 right35 svelte-174lt90"),d(c,"for",m="sticky_checkbox_"+t[40]),d(e,"class","stick_checkbox d-inline-block")},m(t,i){p(t,e,i),u(e,n),v[l].m(n,null),u(e,o),u(e,c),$=!0},p(t,e){let o=l;l=k(t),l===o?v[l].p(t,e):(f(),x(v[o],1,1,(()=>{v[o]=null})),g(),i=v[l],i?i.p(t,e):(i=v[l]=_[l](t),i.c()),h(i,1),i.m(n,null))},i(t){$||(h(i),$=!0)},o(t){x(i),$=!1},d(t){t&&b(e),v[l].d()}}}(t);function St(...e){return t[24](t[40],...e)}function qt(...e){return t[25](t[40],...e)}return{c(){e=s("fieldset"),n=s("legend"),l=c($t),o=a(),_=s("div"),v=s("div"),S=a(),q=s("div"),T=s("div"),I=s("span"),I.textContent=""+r.plain_text,z=a(),M=s("span"),B=s("span"),U=s("input"),F=a(),N=s("label"),N.textContent=""+r.interactive,P=a(),G=s("div"),J=s("div"),Q=s("span"),V.c(),W=a(),Z=s("label"),Z.textContent=""+r.no_validation,et=a(),At&&At.c(),nt=a(),lt=s("div"),it=s("div"),ot=s("button"),ot.textContent=""+r.delete,ct=a(),at=s("div"),rt=s("button"),rt.textContent=""+r.save,xt=a(),d(n,"class","font18 mb ms-2 pl-1 svelte-174lt90"),d(n,"style",i="width:1em;float:none;"),d(v,"data-seq",k=t[40]),d(v,"class","tinymce-editor-res steps_edit p-1 border fillAuthor"),d(v,"id",y="fillAuthor_"+t[40]),d(v,"style",w="padding:0 8px;overflow:auto;outline:none"),d(v,"contenteditable",C=!0),d(v,"data-text","Enter text here"),d(_,"class","d-inline-block table_width ms-2 pl-1 pb-2 mb-1"),d(_,"style",A="width:97%;"),d(I,"class","pointer d-inline-block plain_text svelte-174lt90"),d(I,"data-toggle","tooltip"),d(I,"title","Don't use any interactive item!"),d(I,"for",E="viewonly_radio_"+t[40]),d(U,"type","checkbox"),d(U,"class","form-check-input"),d(U,"id",X="switchElement"+t[40]),U.checked=D="1"!=t[38].toggle,d(U,"color","primary"),d(N,"for",j="switchElement"+t[40]),d(B,"class","form-check form-switch"),d(M,"class","stat-percent ms-4"),d(M,"style",R="display:inline-block;position:relative;"),d(T,"class","test d-inline-block"),d(Q,"class","check_box d-inline-block svelte-174lt90"),d(Z,"class","font-weight-normal me-1 position-relative top2 right35 svelte-174lt90"),d(Z,"for",tt="mode_checkbox_"+t[40]),d(J,"class","modes_checkbox d-inline-block ms-2"),d(G,"class","d-inline-block plain_text ms-3"),d(ot,"type","button"),d(ot,"class","btn btn-light font12"),d(it,"class","d-inline-block mr"),d(it,"style",st="display:inline-block;"),d(rt,"id",dt="save_step_"+t[40]),d(rt,"type","button"),d(rt,"class","btn btn-primary font12 save_button_steps"),d(at,"class","d-inline-block"),d(at,"style",pt="text-align:right;margin-top:6px;"),d(lt,"style",ut="display:inline-block;float:right;"),d(lt,"class","buttons edit_steps"),d(q,"class","view_checkbox d-inline-block light-cyan-bg px-2 p-1 full-width fwidth svelte-174lt90"),d(e,"key",mt=t[40]),d(e,"style",ft="border:1px solid grey"),d(e,"class","new_steps seq_inbox fw shadow-sm mb-2")},m(t,i){p(t,e,i),u(e,n),u(n,l),u(e,o),u(e,_),u(_,v),v.innerHTML=_t,u(e,S),u(e,q),u(q,T),u(T,I),u(T,z),u(T,M),u(M,B),u(B,U),u(B,F),u(B,N),u(q,P),u(q,G),u(G,J),u(J,Q),wt[Y].m(Q,null),u(J,W),u(J,Z),u(G,et),At&&At.m(G,null),u(q,nt),u(q,lt),u(lt,it),u(it,ot),u(lt,ct),u(lt,at),u(at,rt),p(t,xt,i),gt=!0,ht||(bt=[m(v,"keyup",vt),m(U,"change",kt),m(it,"click",St),m(rt,"click",qt)],ht=!0)},p(e,n){t=e,(!gt||2&n[0])&&_t!==(_t=t[38].__cdata+"")&&(v.innerHTML=_t),(!gt||2&n[0]&&D!==(D="1"!=t[38].toggle))&&(U.checked=D);let l=Y;Y=Ct(t),Y===l?wt[Y].p(t,n):(f(),x(wt[l],1,1,(()=>{wt[l]=null})),g(),V=wt[Y],V?V.p(t,n):(V=wt[Y]=yt[Y](t),V.c()),h(V,1),V.m(Q,null)),0==t[40]&&At.p(t,n)},i(t){gt||(h(V),h(At),gt=!0)},o(t){x(V),x(At),gt=!1},d(t){t&&b(e),wt[Y].d(),At&&At.d(),t&&b(xt),ht=!1,$(bt)}}}function R(t){let e,n;return{c(){e=s("span"),e.textContent="+ Â ",n=c(" Add Step"),d(e,"class","font18 svelte-174lt90")},m(t,l){p(t,e,l),p(t,n,l)},d(t){t&&b(e),t&&b(n)}}}function P(t){let e,n,l,i,o,c,m,f,g,$,v,k,y,A,q,T,I,E,z,M;return f=new _({props:{variant:"contained",color:"primary",style:"border:1px solid #4285f4;color:#4285f4;text-transform:none;",class:"btn btn-outline-primary height30 bg-white shadow-sm mt-1 top1 ml-1",$$slots:{default:[J]},$$scope:{ctx:t}}}),f.$on("click",nt),v=new _({props:{id:"latexEdit",variant:"contained",color:"primary",style:"margin:5px;display:none;",$$slots:{default:[Q]},$$scope:{ctx:t}}}),v.$on("click",t[12]),{c(){e=s("div"),n=s("div"),l=s("input"),m=a(),w(f.$$.fragment),g=a(),$=s("div"),w(v.$$.fragment),k=a(),y=s("div"),y.textContent="* Note:",A=a(),q=s("div"),q.textContent=""+r.fill_math_help1,I=a(),E=s("div"),E.textContent=""+r.fill_math_help2,d(l,"type","text"),d(l,"id",i="input"),d(l,"class","latexInp form-control"),d(l,"style",o="margin:5px;width:71%;"),d(l,"auto:focus",c=!0),d($,"class","latexEditButton d-inline-block"),d(n,"class","d-flex"),d(y,"class","text-danger font-weight-bold ml-1"),d(q,"class","text-danger ml-1"),d(q,"style",T="text-indent: 15px;"),d(E,"class","text-danger ml-1"),d(E,"style",z="text-indent: 15px;")},m(t,i){p(t,e,i),u(e,n),u(n,l),u(n,m),C(f,n,null),u(n,g),u(n,$),C(v,$,null),u(e,k),u(e,y),u(e,A),u(e,q),u(e,I),u(e,E),M=!0},p(t,e){const n={};1024&e[1]&&(n.$$scope={dirty:e,ctx:t}),f.$set(n);const l={};1024&e[1]&&(l.$$scope={dirty:e,ctx:t}),v.$set(l)},i(t){M||(h(f.$$.fragment,t),h(v.$$.fragment,t),M=!0)},o(t){x(f.$$.fragment,t),x(v.$$.fragment,t),M=!1},d(t){t&&b(e),S(f),S(v)}}}function G(t){let e,n,l,i,c,m,f,g,$,_,v,k,y,A,q,T,I,z,M;return i=new o({props:{id:"numeric",checked:t[0].numeric,$$slots:{default:[Y]},$$scope:{ctx:t}}}),{c(){e=s("div"),n=s("div"),l=s("div"),w(i.$$.fragment),c=a(),m=s("input"),v=a(),k=s("div"),k.textContent="* Note:",y=a(),A=s("div"),A.textContent=""+r.fill_text_help1,T=a(),I=s("div"),I.textContent="2. Please do not include space.",d(l,"class","width100 svelte-174lt90"),d(m,"type","text"),d(m,"id","input1"),m.value=f=t[0].input_ans,d(m,"class","form-control mr-4 ml-3"),d(m,"style",g="margin:5px"),d(m,"auto:focus",$=!0),d(m,"placeholder",_=""!=E.select("#input1").innerHTML?r.fill_text_placeholder:""),d(n,"class","d-flex mr-2"),d(k,"class","text-danger font-weight-bold ml-2 mt-3"),d(A,"class","text-danger ml-2"),d(A,"style",q="text-indent:15px"),d(I,"class","text-danger ml-2"),d(I,"style",z="text-indent:15px")},m(t,o){p(t,e,o),u(e,n),u(n,l),C(i,l,null),u(n,c),u(n,m),u(e,v),u(e,k),u(e,y),u(e,A),u(e,T),u(e,I),M=!0},p(t,e){const n={};1&e[0]&&(n.checked=t[0].numeric),1024&e[1]&&(n.$$scope={dirty:e,ctx:t}),i.$set(n),(!M||1&e[0]&&f!==(f=t[0].input_ans)&&m.value!==f)&&(m.value=f)},i(t){M||(h(i.$$.fragment,t),M=!0)},o(t){x(i.$$.fragment,t),M=!1},d(t){t&&b(e),S(i)}}}function J(t){let e;return{c(){e=c("Add Response")},m(t,n){p(t,e,n)},d(t){t&&b(e)}}}function Q(t){let e;return{c(){e=c("Edit")},m(t,n){p(t,e,n)},d(t){t&&b(e)}}}function Y(t){let e;return{c(){e=c("Numeric")},m(t,n){p(t,e,n)},p:M,d(t){t&&b(e)}}}function V(t){let e,n,l=r.cancel+"";return{c(){e=c(l),n=a()},m(t,l){p(t,e,l),p(t,n,l)},p:M,d(t){t&&b(e),t&&b(n)}}}function W(t){let e,n=r.done+"";return{c(){e=c(n)},m(t,n){p(t,e,n)},p:M,d(t){t&&b(e)}}}function Z(t){let e,n,l,i,o,r,m,$,v,k;const y=[G,P],A=[];function q(t,e){return 1==t[0].fillInTheBlanksChoice?0:1}return l=q(t),i=A[l]=y[l](t),m=new _({props:{variant:"contained",$$slots:{default:[V]},$$scope:{ctx:t}}}),m.$on("click",t[10]),v=new _({props:{variant:"contained",class:"bg-primary text-white",$$slots:{default:[W]},$$scope:{ctx:t}}}),v.$on("click",t[13]),{c(){e=s("div"),n=s("div"),i.c(),o=a(),r=s("div"),w(m.$$.fragment),$=c(",\r\n                        "),w(v.$$.fragment),d(n,"id","responseDialog"),d(r,"class","svelteFooter")},m(t,i){p(t,e,i),u(e,n),A[l].m(n,null),p(t,o,i),p(t,r,i),C(m,r,null),u(r,$),C(v,r,null),k=!0},p(t,e){let o=l;l=q(t),l===o?A[l].p(t,e):(f(),x(A[o],1,1,(()=>{A[o]=null})),g(),i=A[l],i?i.p(t,e):(i=A[l]=y[l](t),i.c()),h(i,1),i.m(n,null));const s={};1024&e[1]&&(s.$$scope={dirty:e,ctx:t}),m.$set(s);const c={};1024&e[1]&&(c.$$scope={dirty:e,ctx:t}),v.$set(c)},i(t){k||(h(i),h(m.$$.fragment,t),h(v.$$.fragment,t),k=!0)},o(t){x(i),x(m.$$.fragment,t),x(v.$$.fragment,t),k=!1},d(t){t&&b(e),A[l].d(),t&&b(o),t&&b(r),S(m),S(v)}}}function tt(t){let e,n,l,i,o,f,x,g,h,_,v,k,y,w,C,A,S;return{c(){e=s("div"),n=s("div"),n.textContent=""+r.fill_header,i=a(),o=s("div"),f=s("div"),x=s("button"),g=c("Text"),v=a(),k=s("button"),y=c("Mathematical Equation"),d(n,"class","mr-lg float-left"),d(n,"style",l="padding-top:10px;padding-left:13px;font-size:18px;"),d(x,"type","button"),d(x,"class",h=U("btn btn-light col-3"+(1==t[0].fillInTheBlanksChoice?" active":""))+" svelte-174lt90"),x.value=_=1,d(k,"type","button"),d(k,"class",w=U("btn btn-light col-9"+(2==t[0].fillInTheBlanksChoice?" active":""))+" svelte-174lt90"),k.value=C=2,d(f,"class","btn-group mt-1 row ml-0"),d(o,"class","float-right mr-4"),d(e,"slot","title")},m(l,s){p(l,e,s),u(e,n),u(e,i),u(e,o),u(o,f),u(f,x),u(x,g),u(f,v),u(f,k),u(k,y),A||(S=[m(x,"click",t[11].bind(this,1)),m(k,"click",t[11].bind(this,2))],A=!0)},p(t,e){1&e[0]&&h!==(h=U("btn btn-light col-3"+(1==t[0].fillInTheBlanksChoice?" active":""))+" svelte-174lt90")&&d(x,"class",h),1&e[0]&&w!==(w=U("btn btn-light col-9"+(2==t[0].fillInTheBlanksChoice?" active":""))+" svelte-174lt90")&&d(k,"class",w)},d(t){t&&b(e),A=!1,$(S)}}}function et(t){let e,n,l,i,c,m,$,T,I,E,z,M,B,U,X,H,K,L,O,P,G,J;I=new o({props:{id:"go_next",defaultChecked:!!t[0].gonext,$$slots:{default:[F]},$$scope:{ctx:t}}}),I.$on("click",t[18]),M=new o({props:{id:"fixedans_checkbox",defaultChecked:!!t[0].variable_button,$$slots:{default:[N]},$$scope:{ctx:t}}}),M.$on("click",t[19]);let Q=t[1],Y=[];for(let e=0;e<Q.length;e+=1)Y[e]=j(D(t,Q,e));const V=t=>x(Y[t],1,1,(()=>{Y[t]=null}));function W(e){t[26](e)}L=new _({props:{variant:"fab",color:"primary",mini:!0,"aria-label":"Add",class:"btn btn-outline-primary rounded position-relative bottom0 bg-white shadow-sm height30",style:"float:left;width:120px;height:30px;border:1px solid #4285f4;color:#4285f4;text-transform:none;",$$slots:{default:[R]},$$scope:{ctx:t}}}),L.$on("click",t[9].bind(this,"steps"));let et={overlayClass:"materialOverlay",disableEnforceFocus:!0,width:"650",class:"row",style:"background-color: #fff;",$$slots:{title:[tt],default:[Z]},$$scope:{ctx:t}};return void 0!==t[0].open&&(et.visible=t[0].open),P=new v({props:et}),k.push((()=>y(P,"visible",W))),P.$on("close",t[10].bind(this)),{c(){e=s("main"),n=s("div"),l=s("div"),i=s("div"),i.textContent=""+r.create_steps,m=a(),$=s("div"),T=s("div"),w(I.$$.fragment),E=a(),z=s("div"),w(M.$$.fragment),U=a(),X=s("div");for(let t=0;t<Y.length;t+=1)Y[t].c();H=a(),K=s("div"),w(L.$$.fragment),O=a(),w(P.$$.fragment),d(i,"class","d-inline-block pt-1 float-start cr_step"),d(i,"style",c="font-size:20px;position:relative;"),d(T,"class","modes_checkbox d-inline-block top-checkbox_gonext position-relative top2 svelte-174lt90"),d(z,"class","modes_checkbox d-inline-block m-l top-checkbox_fix position-relative top2 svelte-174lt90"),d($,"style",B={}),d(l,"class","border-bottom d-flex justify-content-between px-2 pt-1"),d(X,"class","outer_steps mt-3 mx-3 clear-both"),d(K,"class","row mx-3 mt-3 pb-3"),d(n,"class","mt-imp border")},m(t,o){p(t,e,o),u(e,n),u(n,l),u(l,i),u(l,m),u(l,$),u($,T),C(I,T,null),u($,E),u($,z),C(M,z,null),u(n,U),u(n,X);for(let t=0;t<Y.length;t+=1)Y[t].m(X,null);u(n,H),u(n,K),C(L,K,null),u(n,O),C(P,n,null),J=!0},p(t,e){const n={};1&e[0]&&(n.defaultChecked=!!t[0].gonext),1024&e[1]&&(n.$$scope={dirty:e,ctx:t}),I.$set(n);const l={};if(1&e[0]&&(l.defaultChecked=!!t[0].variable_button),1024&e[1]&&(l.$$scope={dirty:e,ctx:t}),M.$set(l),498&e[0]){let n;for(Q=t[1],n=0;n<Q.length;n+=1){const l=D(t,Q,n);Y[n]?(Y[n].p(l,e),h(Y[n],1)):(Y[n]=j(l),Y[n].c(),h(Y[n],1),Y[n].m(X,null))}for(f(),n=Q.length;n<Y.length;n+=1)V(n);g()}const i={};1024&e[1]&&(i.$$scope={dirty:e,ctx:t}),L.$set(i);const o={};1&e[0]|1024&e[1]&&(o.$$scope={dirty:e,ctx:t}),!G&&1&e[0]&&(G=!0,o.visible=t[0].open,A((()=>G=!1))),P.$set(o)},i(t){if(!J){h(I.$$.fragment,t),h(M.$$.fragment,t);for(let t=0;t<Q.length;t+=1)h(Y[t]);h(L.$$.fragment,t),h(P.$$.fragment,t),J=!0}},o(t){x(I.$$.fragment,t),x(M.$$.fragment,t),Y=Y.filter(Boolean);for(let t=0;t<Y.length;t+=1)x(Y[t]);x(L.$$.fragment,t),x(P.$$.fragment,t),J=!1},d(t){t&&b(e),S(I),S(M),q(Y,t),S(L),S(P)}}}function nt(){let t=document.querySelector("#input"),e=t.selectionStart,n=t.value;t.value=n.substring(0,e)+"user Response"+n.substring(e)}function lt(t,e,n){window.spanCounter=0;let l={},o={};var s=[];let{stopAuthoringUpdate:c}=e,{xml:a}=e,{editorState:r}=e,{getChildXml:d}=e;B({xml:"",fillInTheBlanksChoice:1,opened:!1,deleteIndex:"",remediationToggle:!1,snackback:!1,input_ans:"",spanCounter:0,currentId:"",currentInp:""}).subscribe((t=>{n(0,l=t)}));function p(t){let e=(t=(t=t.replace(/%{|}%/g,"")).split("|"))[0].trim(),i=t[1]?t[1].trim():"";if(n(0,l.numeric="n"==i,l),n(0,l.fillInTheBlanksChoice=1,l),n(0,l.open=!0,l),-1!=e.indexOf("#style#")){let t=e.split("#style#");E.select("#responseDialog #customStyleText").value=t[1],n(0,l.input_ans=t[0],l)}else n(0,l.input_ans=e,l)}function u(t){let e=(t=(t=t.replace(/%{|}%/g,"")).split("|"))[0].trim();t[1]&&t[1].trim();if(n(0,l.customStyle=-1!=e.indexOf("#style#"),l),n(0,l.fillInTheBlanksChoice=2,l),n(0,l.open=!0,l),-1!=e.indexOf("#style#")){let t=e.split("#style#");E.select("#responseDialog").value=t[1],E.select("#customStyleText").value=t[1],E.select("#input"+i).value=t[0]}else E.select("#input").value=e}function m(t){t=function(t){let e=[],n=t;return null==n.length&&""!=n?e.push(n):e=n,e.map((function(t,n){let l=t.__cdata,i=l.match(/<{[\s\S]*?}>/gm);i&&i.map((function(t){let e=t.match(/<\{(.*?)\}>/g);e=e.toString().replace(/<\{|\}>/g,""),e="var:"+e,e=e.trim(),l=l.replace(t,e)})),e[n].__cdata=l})),e}(t),n(1,s=t),function(t){t.map((function(t,e){1==t._viewonly?n(1,s[e].toggle=1,s):n(1,s[e].toggle=0,s)}))}(s),function(t){t.map((function(t,e){let i=t.__cdata,o=i.match(/%{[\s\S]*?}%/gm),c="";o&&o.forEach((function(t,e){let s=o[e],a="",r="";c=o[e].match(/\|(.*?)}%$/gm),c=c?c[0].replace(/\||}%/gm,""):"t";let d="",p="",u="";"t"==c?(u=c,d="Textbox",p="icomoon-insert-template"):"n"==c?(u="t",d="Numeric",p="icomoon-insert-template"):"e"==c&&(u=c,d="Math",a=s.replace(/\%\{|\|e\}\%/g,""),a='latex="'+a+'"',r="editMath",p="icomoon-insert-template");var m=new RegExp(RegExp.quote(s));i=i.replace(m,'<span id="latexSpan'+n(0,l.spanCounter=n(0,++l.spanCounter,l),l)+'" '+a+" type='"+u+"' class='alert alert-info editFill "+r+"' originalkey='"+s+"' style='padding: 5px;outline: none;line-height:40px;cursor:move;color:#000' contentEditable='false'><i style='padding-right:4px' class='"+p+"'></i>"+d+"</span>")})),n(1,s[e].__cdata=i,s)}))}(t)}function f(t){document.querySelector("#"+t).checked?(n(0,l.gonext=!0,l),o.smxml._gonext="1"):(n(0,l.gonext=!1,l),o.smxml._gonext="0"),v()}function x(t){document.querySelector("#"+t).checked?(n(0,l.variable_button=!0,l),o.smxml._fixed="1"):(n(0,l.variable_button=!1,l),o.smxml._fixed="0"),v()}function g(t,e,n){let l=n.target.name,i=document.querySelector("#"+l+t),s="_"+n.target.value,c=t;i.checked?o.smxml.step[c][s]="1":o.smxml.step[c][s]="0";document.querySelector("#"+e).innerHTML;v()}function h(t){console.log("handle click"),E.select("#save_step_"+t,"removeAttr","disabled")}function b(t,e,l){1==s[t].toggle?(n(1,s[t].toggle=0,s),o.smxml.step[t]._viewonly="0",o.smxml.step[t]._attempt="1"):(s[t].toggle,o.smxml.step[t]._viewonly="1",o.smxml.step[t]._attempt="0");document.querySelector("#"+e).innerHTML;v()}function $(t,e){let i;if("steps"==e){if(i=s,i.length>2){i.splice(t,1)}else E.alert("You have atleast 2 steps.");n(1,s=i),v()}else"algo"==e&&(n(0,l.opened=!0,l),n(0,l.deleteIndex=t,l))}function _(t,e){let l=document.querySelector("#"+e).innerHTML;l=l.replace(/&amp;/g,"&"),n(1,s[t].__cdata=l,s),E.select("#save_step_"+t,"attr",{disabled:"disabled"}),v()}function v(){let t='<smxml type="37" fixed="'+o.smxml._fixed+'" gonext="'+o.smxml._gonext+'">';s.map((function(e,n){let l=n+1,i=e._viewonly,o=e._mode,s=e._attempt,c=e._sticky,a=e.__cdata;a=function(t){let e=t.match(/&lt;(.*?)&gt;/gm),n="";if(e)for(var l=0;l<e.length;l++)n=e[l],e[l]=e[l].replace(/&lt;/g,"<").replace(/&gt;/g,">"),t=t.replace(n,e[l]);return t}(a),a=function(t){let e,n=t.match(/var:var\d+\s+\s+/g);return n&&n.map((function(n,l){e=n.trim(),t=t.replace(n,e)})),t}(a),a=a.replace(/&quot;/g,'"').replace(/&nbsp;/g," "),a=a.replace(/'/g,'"').replace(/\n/g,"");let r=a.match(/<span(.*?)>(.*?)<\/span>/gi);if(r)for(n=0;n<r.length;n++){let t=r[n].match(/originalkey="%(.*?)%"/g);t&&(t=t.toString().replace(/originalkey=/g,"").replace(/"%|%"/g,"%"),a=a.replace(r[n],t))}t=t+"<step seq='"+l+"'"+(null!=s?" attempt ='"+s+"'":" ")+(null!=i?" viewonly ='"+i+"'":" ")+(null!=o?" mode ='"+o+"'":" ")+(null!=c?" sticky ='"+c+"'":" ")+">\x3c!--[CDATA["+a+"]]--\x3e</step>"})),t+="</smxml>",d(t)}function k(){E.listen(document,"click",".editMath",(function(t,e){n(0,l.currentId=t.getAttribute("id"),l)})),E.listen(document,"click",".materialOverlay",(function(t){n(0,l.currentId=null,l),n(0,l.currentInp=null,l)})),tinyMCE.PluginManager.add("res",(function(t,e){t.addMenuItem("resp",{text:"Add response",id:"addToken",onclick(){n(0,l.open=!0,l),n(0,l.codetype=!1,l),n(0,l.numeric=!1,l)},context:"insert",prependToContext:!0})})),tinymce.PluginManager.load("equationeditor",themeUrl+"svelte_items/tinymce/plugins/equationeditor/plugin.min.js"),tinymce.init({selector:".tinymce-editor-res",inline:!0,theme:"modern",skin:"skin02",min_width:100,resize:!0,menubar:!1,toolbar:!0,elementpath:!1,statusbar:!1,force_br_newlines:!0,remove_trailing_brs:!0,forced_root_block:!1,extended_valid_elements:"span[onClick|contentEditable]",valid_elements:"*[*]",fixed_toolbar_container:"#toolbar_container",extended_valid_elements:"uc:syntax,uc:ref",custom_elements:"uc:syntax,~uc:ref",plugins:["lists link image charmap print preview anchor","searchreplace code fullscreen","insertdatetime media table contextmenu paste res equationeditor "],content_css:themeUrl+"svelte_items/src/libs/mathquill.css",toolbar:[" bold italic underline | equationeditor"],contextmenu:"resp",paste_as_text:!0})}function y(){2==l.fillInTheBlanksChoice&&n(0,l.currentInp=null,l),n(0,l.open=!1,l)}T((()=>{a&&(o=I(a),m(o.smxml.step),E.select("#sticky_checkbox_0").click(),E.select("#sticky_checkbox_0").click()),setTimeout((function(){E.selectAll(".save_button_steps","attr",{disabled:"disabled"}),k()}),500),E.listen(document,"click",".editFill",(function(t,e){"t"==t.getAttribute("type")?p(t.getAttribute("originalKey")):"e"==t.getAttribute("type")&&u(t.getAttribute("originalKey"))})),E.listen(document,"touchstart",".editFill",(function(t,e){"t"==t.getAttribute("type")?p(t.getAttribute("originalKey")):"e"==t.getAttribute("type")&&u(t.getAttribute("originalKey"))}))})),z((()=>{if(a!=l.xml){if(n(0,l.xml=a,l),!0===c)return;o=I(l.xml),m(o.smxml.step)}}));return t.$$set=t=>{"stopAuthoringUpdate"in t&&n(14,c=t.stopAuthoringUpdate),"xml"in t&&n(15,a=t.xml),"editorState"in t&&n(16,r=t.editorState),"getChildXml"in t&&n(17,d=t.getChildXml)},[l,s,f,x,g,h,b,$,_,function(t){let e={};e._seq=s.length+1,e._viewonly="1",e._attempt="0",e._mode="0",e.__cdata="New Step",s.push(e),v(),n(0,l.snackback=!0,l);var i=setTimeout((function(){k(),clearTimeout(i)}),500)},y,function(t){n(0,l.fillInTheBlanksChoice=t,l)},function(){n(0,l.open=!0,l)},function(){var t=0;if(1==l.fillInTheBlanksChoice){let e=document.querySelector("#input1").value,n=document.querySelector("#responseDialog #numeric").checked;1==n&&(e+=" |n"),""==e.trim()?(t=1)("All fields are required"):tinyMCE.activeEditor.insertContent("<span type='t' class='alert alert-info editFill' originalKey='%{"+e.trim()+"}%' style='padding: 5px;outline: none;line-height:40px;cursor:move;color:#000' contentEditable='false'><i style='padding-right:4px' class='icomoon-insert-template'></i>"+(1==n?"Numeric":"Textbox")+"</span>")}if(2==l.fillInTheBlanksChoice){let e=document.querySelector("#input").value;0==t?(document.querySelector("#"+l.currentId).setAttribute("latex",e),document.querySelector("#"+l.currentId).setAttribute("originalKey","%{"+e+"|e}%"),n(0,l.currentId=null,l),n(0,l.currentInp=null,l)):t("All fields are required")}0==t&&y()},c,a,r,d,t=>{f("go_next")},t=>{x("fixedans_checkbox")},(t,e)=>{h(t)},(t,e)=>{b(t,"fillAuthor_"+t)},(t,e)=>{g(t,"fillAuthor_"+t,e)},(t,e)=>{g(t,"fillAuthor_"+t,e)},(t,e)=>{$(t,"steps")},(t,e)=>{_(t,"fillAuthor_"+t)},function(e){t.$$.not_equal(l.open,e)&&(l.open=e,n(0,l))}]}class it extends t{constructor(t){super(),e(this,t,lt,et,n,{stopAuthoringUpdate:14,xml:15,editorState:16,getChildXml:17},X,[-1,-1])}}function ot(t){let e,n;return e=new it({props:{xml:t[0],getChildXml:t[2],stopAuthoringUpdate:t[3],uxml:t[4]}}),{c(){w(e.$$.fragment)},m(t,l){C(e,t,l),n=!0},p(t,n){const l={};1&n&&(l.xml=t[0]),4&n&&(l.getChildXml=t[2]),8&n&&(l.stopAuthoringUpdate=t[3]),16&n&&(l.uxml=t[4]),e.$set(l)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){x(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function st(t){let e,n,l=2==parseInt(t[1].content_icon),i=l&&ot(t);return{c(){e=s("main"),i&&i.c()},m(t,l){p(t,e,l),i&&i.m(e,null),n=!0},p(t,[n]){2&n&&(l=2==parseInt(t[1].content_icon)),l?i?(i.p(t,n),2&n&&h(i,1)):(i=ot(t),i.c(),h(i,1),i.m(e,null)):i&&(f(),x(i,1,1,(()=>{i=null})),g())},i(t){n||(h(i),n=!0)},o(t){x(i),n=!1},d(t){t&&b(e),i&&i.d()}}}function ct(t,e,n){let{xml:l}=e,{editorState:i}=e,{getChildXml:o}=e,{stopAuthoringUpdate:s}=e,{uxml:c}=e;return t.$$set=t=>{"xml"in t&&n(0,l=t.xml),"editorState"in t&&n(1,i=t.editorState),"getChildXml"in t&&n(2,o=t.getChildXml),"stopAuthoringUpdate"in t&&n(3,s=t.stopAuthoringUpdate),"uxml"in t&&n(4,c=t.uxml)},[l,i,o,s,c]}export default class extends t{constructor(t){super(),e(this,t,ct,st,n,{xml:0,editorState:1,getChildXml:2,stopAuthoringUpdate:3,uxml:4})}}
//# sourceMappingURL=ItemPlugin-c43b2bbf.js.map
