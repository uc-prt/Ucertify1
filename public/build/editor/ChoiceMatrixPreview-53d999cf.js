import{S as e,i as t,s as a,F as n,q as l,h as i,e as s,u as c,f as r,_ as o,g as d,j as m,x as u,o as f,D as h,b as g,l as p,c as b,m as x,t as v,a as y,d as A,E as w,a6 as k,p as _,X as E,A as C,w as F,Z as N}from"./main-05e2d249.js";import{I as S}from"./ItemHelper-3580c7f3.js";import{l as $}from"./parseCSV-929be628.js";function B(e){n(e,"svelte-i5n91f",".fa-check{color:#46A546;position:relative;left:50px}.fa-close{color:#A80000;left:50px}.fa-close{margin-left:20px;font-size:18px;position:absolute;top:10px}.fa-check{margin-left:20px;font-size:18px;position:absolute;top:10px}.fa-close,.fa-check.svelte-i5n91f,.middle_align.svelte-i5n91f{vertical-align:middle!important}.middle_align{width:164px;min-width:164px}.topic_input{min-width:257px}.preview_header{font-size:16pt;font-weight:bold;vertical-align:middle}.adjust_width{width:10%;text-align:center}")}function R(e,t,a){const n=e.slice();return n[26]=t[a],n[28]=a,n}function D(e,t,a){const n=e.slice();return n[29]=t[a],n[31]=a,n}function j(e,t,a){const n=e.slice();return n[26]=t[a],n[28]=a,n}function J(e){let t,a=e[2].cdata.option,n=[];for(let t=0;t<a.length;t+=1)n[t]=M(j(e,a,t));return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=l()},m(e,a){for(let t=0;t<n.length;t+=1)n[t].m(e,a);i(e,t,a)},p(e,l){if(20&l[0]){let i;for(a=e[2].cdata.option,i=0;i<a.length;i+=1){const s=j(e,a,i);n[i]?n[i].p(s,l):(n[i]=M(s),n[i].c(),n[i].m(t.parentNode,t))}for(;i<n.length;i+=1)n[i].d(1);n.length=a.length}},d(e){h(n,e),e&&f(t)}}}function M(e){let t,a,n,l,h,g=e[26].text.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"";return{c(){t=s("th"),a=c(g),r(t,"key",n=e[28]),r(t,"class",l=o("preview_header adjust_width "+("theme3"!==e[2].theme?e[26].id+"text-center text-white":e[26].id+"text-center"))+" svelte-i5n91f"),r(t,"tabindex",h=0),d(t,"background-color",e[4][e[2].theme],1)},m(e,n){i(e,t,n),m(t,a)},p(e,n){4&n[0]&&g!==(g=e[26].text.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"")&&u(a,g),4&n[0]&&l!==(l=o("preview_header adjust_width "+("theme3"!==e[2].theme?e[26].id+"text-center text-white":e[26].id+"text-center"))+" svelte-i5n91f")&&r(t,"class",l),4&n[0]&&d(t,"background-color",e[4][e[2].theme],1)},d(e){e&&f(t)}}}function O(e){let t,a=e[1].cdata.term,n=[];for(let t=0;t<a.length;t+=1)n[t]=I(R(e,a,t));return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=l()},m(e,a){for(let t=0;t<n.length;t+=1)n[t].m(e,a);i(e,t,a)},p(e,l){if(302&l[0]){let i;for(a=e[1].cdata.term,i=0;i<a.length;i+=1){const s=R(e,a,i);n[i]?n[i].p(s,l):(n[i]=I(s),n[i].c(),n[i].m(t.parentNode,t))}for(;i<n.length;i+=1)n[i].d(1);n.length=a.length}},d(e){h(n,e),e&&f(t)}}}function z(e){let t,a,n,l,c,o,u,h,b,x,v,y,A,w,k,_,E,C,F,N,S,$,B,R,D;return{c(){t=s("td"),a=s("i"),l=g(),c=s("i"),u=g(),h=s("input"),_=g(),E=s("label"),r(a,"class","fa fa-check svelte-i5n91f"),r(a,"aria-hidden","true"),r(a,"style",n=P(e[3])),r(c,"class","fa fa-close"),r(c,"aria-hidden","true"),r(c,"style",o=P(e[3])),r(h,"type","radio"),r(h,"class","test_radio CMRad"),r(h,"style",b="vertical-align:middle;"),h.value=x=e[29].id,r(h,"name",v="tm"+(e[28]+1)),r(h,"id",y="t"+e[28]+e[31]),r(h,"data-termid",A=e[26].id),r(h,"data-correct",w=e[26].correct),r(h,"data-userans",""),r(h,"data-role","none"),r(h,"tabindex",k=-1),r(E,"tabindex",C=0),r(E,"class",F="label_choice customRadCM "+(e[31]%2==0?"tureitemColorCM":"falseitemColorCM")),r(E,"for",N="t"+e[28]+e[31]),r(t,"key",S=e[31]),r(t,"id",$="tb"+e[28]+e[31]),r(t,"class",B="text-center test_area "+(e[29].id==e[26].correct?"dbg-success":"dbg-danger")+"  position-relative svelte-i5n91f"),d(t,"background-color",e[28]%2==0?e[5][e[2].theme]:"#FFF")},m(n,s){i(n,t,s),m(t,a),m(t,l),m(t,c),m(t,u),m(t,h),m(t,_),m(t,E),R||(D=p(h,"click",e[8]),R=!0)},p(e,a){2&a[0]&&x!==(x=e[29].id)&&(h.value=x),2&a[0]&&A!==(A=e[26].id)&&r(h,"data-termid",A),2&a[0]&&w!==(w=e[26].correct)&&r(h,"data-correct",w),2&a[0]&&B!==(B="text-center test_area "+(e[29].id==e[26].correct?"dbg-success":"dbg-danger")+"  position-relative svelte-i5n91f")&&r(t,"class",B),4&a[0]&&d(t,"background-color",e[28]%2==0?e[5][e[2].theme]:"#FFF")},d(e){e&&f(t),R=!1,D()}}}function I(e){let t,a,n,l,o,p,b,x,v=e[26].text.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"",y=e[1].cdata.option,A=[];for(let t=0;t<y.length;t+=1)A[t]=z(D(e,y,t));return{c(){t=s("tr"),a=s("td"),n=c(v),p=g();for(let e=0;e<A.length;e+=1)A[e].c();b=g(),r(a,"class",l=e[26].id+" position-relative svelte-i5n91f"),r(a,"tabindex",o=0),d(a,"background-color",e[28]%2==0?e[5][e[2].theme]:"#FFF",1),d(a,"font-size","14pt"),d(a,"vertical-align","middle"),d(a,"font-family",e[2].font),r(t,"key",x=e[28])},m(e,l){i(e,t,l),m(t,a),m(a,n),m(t,p);for(let e=0;e<A.length;e+=1)A[e].m(t,null);m(t,b)},p(e,i){if(2&i[0]&&v!==(v=e[26].text.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"")&&u(n,v),2&i[0]&&l!==(l=e[26].id+" position-relative svelte-i5n91f")&&r(a,"class",l),4&i[0]&&d(a,"background-color",e[28]%2==0?e[5][e[2].theme]:"#FFF",1),4&i[0]&&d(a,"font-family",e[2].font),302&i[0]){let a;for(y=e[1].cdata.option,a=0;a<y.length;a+=1){const n=D(e,y,a);A[a]?A[a].p(n,i):(A[a]=z(n),A[a].c(),A[a].m(t,b))}for(;a<A.length;a+=1)A[a].d(1);A.length=y.length}},d(e){e&&f(t),h(A,e)}}}function W(e){let t,a,n,l,h,p,w,k,_,E,C,F,N,$,B,R,D,j,M,z=e[2].stem.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"";n=new S({props:{handleReviewClick:e[9],reviewMode:e[0]}}),n.$on("setReview",e[6]),n.$on("unsetReview",e[7]);let I=e[2].cdata&&J(e),W=e[1].cdata&&O(e);return{c(){t=s("main"),a=s("div"),b(n.$$.fragment),l=g(),h=s("center"),p=s("table"),w=s("thead"),k=s("tr"),_=s("th"),E=c(z),N=g(),I&&I.c(),$=g(),B=s("tbody"),W&&W.c(),r(_,"class",C=o("preview_header "+("theme3"!==e[2].theme?"text-center text-white":"text-center"))+" svelte-i5n91f"),r(_,"tabindex",F=0),d(_,"background-color",e[4][e[2].theme],1),r(k,"class","table-head"),r(p,"class",R="table testmode_table "),r(p,"id","test_table"),r(p,"style",D="position:relative; margin-top:20px;width:"+e[2].maxWidth+"px;font-family: Georgia;"),r(a,"id","choicemain"),r(a,"style",j="margin-bottom:20px")},m(e,s){i(e,t,s),m(t,a),x(n,a,null),m(a,l),m(a,h),m(h,p),m(p,w),m(w,k),m(k,_),m(_,E),m(k,N),I&&I.m(k,null),m(p,$),m(p,B),W&&W.m(B,null),M=!0},p(e,t){const a={};1&t[0]&&(a.reviewMode=e[0]),n.$set(a),(!M||4&t[0])&&z!==(z=e[2].stem.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"")&&u(E,z),(!M||4&t[0]&&C!==(C=o("preview_header "+("theme3"!==e[2].theme?"text-center text-white":"text-center"))+" svelte-i5n91f"))&&r(_,"class",C),(!M||4&t[0])&&d(_,"background-color",e[4][e[2].theme],1),e[2].cdata?I?I.p(e,t):(I=J(e),I.c(),I.m(k,null)):I&&(I.d(1),I=null),e[1].cdata?W?W.p(e,t):(W=O(e),W.c(),W.m(B,null)):W&&(W.d(1),W=null),(!M||4&t[0]&&D!==(D="position:relative; margin-top:20px;width:"+e[2].maxWidth+"px;font-family: Georgia;"))&&r(p,"style",D)},i(e){M||(v(n.$$.fragment,e),M=!0)},o(e){y(n.$$.fragment,e),M=!1},d(e){e&&f(t),A(n),I&&I.d(),W&&W.d()}}}function q(){let e=document.getElementsByClassName("test_radio");for(let t=0;t<e.length;t++)e[t].getAttribute("id")==e[t].getAttribute("data-userans")?e[t].checked=!0:e[t].checked=!1}function G(){!function(){let e=document.querySelectorAll(" .test_radio");for(let t=0;t<e.length;t++)e[t].getAttribute("value")==e[t].getAttribute("data-correct")?e[t].checked=!0:e[t].checked=!1}(),L()}function L(){let e=document.getElementsByClassName("fa-check"),t=document.getElementsByClassName("fa-close");for(let a=0;a<e.length;a++)e[a].style.display="none",t[a].style.display="none"}function P(e){return 1==e?{paddingLeft:"14px",display:"inline-flex",position:"absolute"}:{paddingLeft:"15px",display:"none",position:"absolute"}}function V(e,t,a){let n,{showAns:l}=t,{editorState:i}=t,{xml:s}=t,{uxml:c}=t,{isReview:r}=t,o={cdata:""},d={},m=0;F({cdata:"",stem:"",xml:"",theme:"",font:"",maxWidth:"",totalcorrectans:""}).subscribe((e=>{a(2,d=e)}));function u(){let e=function(){let e=0,t=0,a=document.getElementsByClassName("test_radio");for(let t=0;t<a.length;t++)if(a[t].getAttribute("value")==a[t].getAttribute("data-correct")){if(1!=a[t].checked)return e=0,a[t].setAttribute("as",0),!1;a[t].setAttribute("as",1),e=1}for(let e=0;e<a.length;e++)a[e].getAttribute("value")==a[e].getAttribute("data-correct")&&1==a[e].checked&&t++,"undefined"!=typeof calculatePoint&&calculatePoint(d.totalcorrectans,t);return e}();e=1==e,c?C.select("#answer").checked=e:i&&l(e?"Correct":"Incorrect"),N({uXml:n,ans:e})}function f(){q(),C.select(".dbg-success input","checked").forEach((e=>{C.siblings(e,".fa-check").forEach((e=>{e.style.display="inline-flex"}))})),C.select(".dbg-danger input","checked").forEach((e=>{C.siblings(e,".fa-close").forEach((e=>{e.style.display="inline-flex"}))})),C.selectAll(".dbg-success input, .dbg-danger input","removeAttr","as"),C.select(".dbg-success input","checked").forEach((e=>{e.setAttribute("as",1)})),C.select(".dbg-success input","checked").forEach((e=>{e.setAttribute("as",0)})),C.select(".dbg-success input","checked").forEach((e=>{C.siblings(e,".label_choice").forEach((e=>{e.setAttribute("title","is marked as correct")}))})),C.select(".dbg-danger input","checked").forEach((e=>{C.siblings(e,".label_choice").forEach((e=>{e.setAttribute("title","is marked as incorrect")}))}))}function h(){a(0,r=!0);let e=C.selectAll(" .test_radio");for(let t=0;t<e.length;t++)e[t].disabled=!0;f()}function g(){a(0,r=!1);let e=document.getElementsByClassName("test_radio");for(let t=0;t<e.length;t++)e[t].disabled=!1;L()}return w((()=>{var e;s!=d.xml&&(a(2,d.xml=s,d),e=c,function(e,t){a(2,d.theme=e.smxml._theme,d),a(2,d.font=e.smxml._font,d),a(2,d.maxWidth=e.smxml._maxwidth?e.smxml._maxwidth:800,d);let n=$.parseCSVFormat(e.smxml.__cdata),l=[];l=JSON.parse(JSON.stringify(n)),a(2,d.cdata=l,d),a(2,d.stem=l.stem,d),a(1,o.cdata=l,o);let i=o.cdata.term.length;if(a(2,d.totalcorrectans=i,d),g(),t)try{t=JSON.parse(t);let e=[];e=JSON.parse(JSON.stringify(t)),setTimeout((function(){e.ans.map((function(e,t){C.selectAll(".test_area #"+e.userAns,"attr",{"data-userans":e.userAns})})),q()}),100)}catch(e){}else{let e=document.getElementsByClassName("test_radio");for(let t=0;t<e.length;t++)e[t].checked=!1,e[t].setAttribute("data-userans","")}}(E(s),e))})),k((()=>{r||L()})),_((()=>{AI.listen("body","keydown",".label_choice",(function(e,t){13===t.which&&e.click()}))})),e.$$set=e=>{"showAns"in e&&a(10,l=e.showAns),"editorState"in e&&a(11,i=e.editorState),"xml"in e&&a(12,s=e.xml),"uxml"in e&&a(13,c=e.uxml),"isReview"in e&&a(0,r=e.isReview)},e.$$.update=()=>{18433&e.$$.dirty[0]&&(r?(h(),i&&0==m&&(a(14,m=1),u())):(a(14,m=0),q(),g()))},[r,o,d,undefined,{theme1:"#5B9BD5",theme2:"#3B67BC",theme3:"#F6C3A2",theme4:"#70AD47",theme5:"#745998"},{theme1:"#DEEAF6",theme2:"#D4DEF1",theme3:"#FAE0CF",theme4:"#E2EFD9",theme5:"#E1DAE9"},function(){h()},function(){q(),g()},function(e){let t=e.target.id,a=e.target.name,l=document.querySelectorAll(" .test_area input[name="+a+"]");for(let e=0;e<l.length;e++)l[e].setAttribute("data-userans","");C.selectAll(" .test_area #"+t,"attr",{"data-userans":t});let i={type:"34",ans:[]},s=document.getElementsByClassName("test_radio");for(let e=0;e<s.length;e++)1==s[e].checked&&i.ans.push({id:s[e].getAttribute("data-termid"),userAns:s[e].getAttribute("id")});n=JSON.stringify(i),u()},function(e,t){"c"==e?G():f()},l,i,s,c,m]}export default class extends e{constructor(e){super(),t(this,e,V,W,a,{showAns:10,editorState:11,xml:12,uxml:13,isReview:0},B,[-1,-1])}}
//# sourceMappingURL=ChoiceMatrixPreview-53d999cf.js.map
