{"version":3,"file":"parseCSV-66f989c1.js","sources":["../../../clsSMChoiceMatrix/parseCSV.js"],"sourcesContent":["export default {\r\n    parseCSVFormat: function(data) {\r\n\t\tlet newJSON = {stem:\"\",term:[],option:[]};\r\n\t\tlet arr = data.split(\"\\n\");\r\n\t\tlet newArr = [];\r\n\t\tarr.map((val)=>{\r\n\t\t\tif(val.trim()) {\r\n\t\t\t\tnewArr.push(val);\r\n\t\t\t}\r\n\t\t});\r\n\t\tnewArr.map(function(value,i){\r\n\t\t\tlet innerValue =  value.replace(/,$/gm,\"\");\r\n\t\t\tinnerValue = innerValue.split(\",\");\r\n\t\t\tif (i == 0) {\r\n\t\t\t\tinnerValue.map((value2,j)=>{\r\n\t\t\t\t\tif(j == 0) {\r\n\t\t\t\t\t\tnewJSON.stem = value2;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnewJSON.option.push({\r\n\t\t\t\t\t\t\tid:'o'+j,\r\n\t\t\t\t\t\t\ttext:value2.replace(/^\\s+/g, \"\")\r\n\t\t\t\t\t\t});0\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tlet termText = \"\";\r\n\t\t\t\tlet termCorrect = \"\"\r\n\t\t\t\tinnerValue.map((termValue,k)=>{\r\n\t\t\t\t\tif(k == 0) {\r\n\t\t\t\t\t\ttermText = termValue.replace(/^\\s+/g, \"\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif(termValue.trim() == \"1\") {\r\n\t\t\t\t\t\t\ttermCorrect = \"o\"+k;\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tnewJSON.term.push({\r\n\t\t\t\t\tid:'t'+i,\r\n\t\t\t\t\ttext:termText,\r\n\t\t\t\t\tcorrect:termCorrect\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn newJSON;\r\n    },\r\n\tCSVToArray: function (strData, strDelimiter) {\r\n\t\t// Check to see if the delimiter is defined. If not,\r\n\t\t// then default to comma.\r\n\t\tstrDelimiter = (strDelimiter || \",\");\r\n\t\t// Create a regular expression to parse the CSV values.\r\n\t\tvar objPattern = new RegExp((\r\n\t\t// Delimiters.\r\n\t\t\"(\\\\\" + strDelimiter + \"|\\\\r?\\\\n|\\\\r|^)\" +\r\n\t\t// Quoted fields.\r\n\t\t\"(?:\\\"([^\\\"]*(?:\\\"\\\"[^\\\"]*)*)\\\"|\" +\r\n\t\t// Standard fields.\r\n\t\t\"([^\\\"\\\\\" + strDelimiter + \"\\\\r\\\\n]*))\"), \"gi\");\r\n\t\t// Create an array to hold our data. Give the array\r\n\t\t// a default empty first row.\r\n\t\tvar arrData = [[]];\r\n\t\t// Create an array to hold our individual pattern\r\n\t\t// matching groups.\r\n\t\tvar arrMatches = null;\r\n\t\t// Keep looping over the regular expression matches\r\n\t\t// until we can no longer find a match.\r\n\t\twhile (arrMatches = objPattern.exec(strData)) {\r\n\t\t\t// Get the delimiter that was found.\r\n\t\t\tvar strMatchedDelimiter = arrMatches[1];\r\n\t\t\t// Check to see if the given delimiter has a length\r\n\t\t\t// (is not the start of string) and if it matches\r\n\t\t\t// field delimiter. If id does not, then we know\r\n\t\t\t// that this delimiter is a row delimiter.\r\n\t\t\tif (strMatchedDelimiter.length && (strMatchedDelimiter != strDelimiter)) {\r\n\t\t\t\t// Since we have reached a new row of data,\r\n\t\t\t\t// add an empty row to our data array.\r\n\t\t\t\tarrData.push([]);\r\n\t\t\t}\r\n\t\t\t// Now that we have our delimiter out of the way,\r\n\t\t\t// let's check to see which kind of value we\r\n\t\t\t// captured (quoted or unquoted).\r\n\t\t\tif (arrMatches[2]) {\r\n\t\t\t\t// We found a quoted value. When we capture\r\n\t\t\t\t// this value, unescape any double quotes.\r\n\t\t\t\tvar strMatchedValue = arrMatches[2].replace(\r\n\t\t\t\tnew RegExp(\"\\\"\\\"\", \"g\"), \"\\\"\");\r\n\t\t\t} else {\r\n\t\t\t\t// We found a non-quoted value.\r\n\t\t\t\tvar strMatchedValue = arrMatches[3];\r\n\t\t\t}\r\n\t\t\t// Now that we have our value string, let's add\r\n\t\t\t// it to the data array.\r\n\t\t\tarrData[arrData.length - 1].push(strMatchedValue);\r\n\t\t}\r\n\t\t// Return the parsed data.\r\n\t\treturn (arrData);\r\n\t},\r\n\tCSV2JSON: function (csv) {\r\n\t\tvar array = this.CSVToArray(csv);\r\n\t\tvar objArray = [];\r\n\t\tfor (var i = 1; i < array.length; i++) {\r\n\t\t\tobjArray[i - 1] = {};\r\n\t\t\tfor (var k = 0; k < array[0].length && k < array[i].length; k++) {\r\n\t\t\t\tvar key = array[0][k];\r\n\t\t\t\tobjArray[i - 1][key] = array[i][k]\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar json = JSON.stringify(objArray);\r\n\t\tvar str = json.replace(/},/g, \"},\\r\\n\");\r\n\r\n\t\treturn str;\r\n\t}\r\n}"],"names":[],"mappings":"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"}