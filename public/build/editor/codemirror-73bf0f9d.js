window.CodeMirror=function(){var t=/gecko\/\d/i.test(navigator.userAgent),e=/MSIE \d/.test(navigator.userAgent),r=e&&(null==document.documentMode||document.documentMode<8),n=e&&(null==document.documentMode||document.documentMode<9),i=/Trident\/([7-9]|\d{2,})\./.test(navigator.userAgent),o=/WebKit\//.test(navigator.userAgent),l=o&&/Qt\/\d+\.\d+/.test(navigator.userAgent),s=/Chrome\//.test(navigator.userAgent),a=/Opera\//.test(navigator.userAgent),u=/Apple Computer/.test(navigator.vendor),c=/KHTML\//.test(navigator.userAgent),f=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),h=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),d=/PhantomJS/.test(navigator.userAgent),p=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),g=p||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),m=p||/Mac/.test(navigator.platform),v=/win/i.test(navigator.platform),y=a&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);y&&(y=Number(y[1])),y&&y>=15&&(a=!1,o=!0);var b,x=m&&(l||a&&(null==y||y<12.11)),C=t||e&&!n,w=!1,L=!1;function S(t,i){if(!(this instanceof S))return new S(t,i);for(var l in this.options=i=i||{},Ne)!i.hasOwnProperty(l)&&Ne.hasOwnProperty(l)&&(i[l]=Ne[l]);E(i);var s="string"==typeof i.value?0:i.value.first,f=this.display=function(t,e){var n={},i=n.input=Wn("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none; font-size: 4px;");o?i.style.width="1000px":i.setAttribute("wrap","off");p&&(i.style.border="1px solid black");i.setAttribute("autocorrect","off"),i.setAttribute("autocapitalize","off"),i.setAttribute("spellcheck","false"),n.inputDiv=Wn("div",[i],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),n.scrollbarH=Wn("div",[Wn("div",null,null,"height: 1px")],"CodeMirror-hscrollbar"),n.scrollbarV=Wn("div",[Wn("div",null,null,"width: 1px")],"CodeMirror-vscrollbar"),n.scrollbarFiller=Wn("div",null,"CodeMirror-scrollbar-filler"),n.gutterFiller=Wn("div",null,"CodeMirror-gutter-filler"),n.lineDiv=Wn("div",null,"CodeMirror-code"),n.selectionDiv=Wn("div",null,null,"position: relative; z-index: 1"),n.cursor=Wn("div"," ","CodeMirror-cursor"),n.otherCursor=Wn("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"),n.measure=Wn("div",null,"CodeMirror-measure"),n.lineSpace=Wn("div",[n.measure,n.selectionDiv,n.lineDiv,n.cursor,n.otherCursor],null,"position: relative; outline: none"),n.mover=Wn("div",[Wn("div",[n.lineSpace],"CodeMirror-lines")],null,"position: relative"),n.sizer=Wn("div",[n.mover],"CodeMirror-sizer"),n.heightForcer=Wn("div",null,null,"position: absolute; height: "+gn+"px; width: 1px;"),n.gutters=Wn("div",null,"CodeMirror-gutters"),n.lineGutter=null,n.scroller=Wn("div",[n.sizer,n.heightForcer,n.gutters],"CodeMirror-scroll"),n.scroller.setAttribute("tabIndex","-1"),n.wrapper=Wn("div",[n.inputDiv,n.scrollbarH,n.scrollbarV,n.scrollbarFiller,n.gutterFiller,n.scroller],"CodeMirror"),r&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0);t.appendChild?t.appendChild(n.wrapper):t(n.wrapper);p&&(i.style.width="0px");o||(n.scroller.draggable=!0);c?(n.inputDiv.style.height="1px",n.inputDiv.style.position="absolute"):r&&(n.scrollbarH.style.minWidth=n.scrollbarV.style.minWidth="18px");return n.viewOffset=n.lastSizeC=0,n.showingFrom=n.showingTo=e,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.prevInput="",n.alignWidgets=!1,n.pollingFast=!1,n.poll=new vn,n.cachedCharWidth=n.cachedTextHeight=null,n.measureLineCache=[],n.measureLineCachePos=0,n.inaccurateSelection=!1,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n}(t,s);f.wrapper.CodeMirror=this,D(this),i.autofocus&&!g&&Mt(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,draggingText:!1,highlight:new vn},N(this),i.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");var h,d=i.value;"string"==typeof d&&(d=new Ar(i.value,i.mode)),yt(this,Wr)(this,d),e&&setTimeout(Tn(kt,this,!0),20),function(t){var r,i=t.display;on(i.scroller,"mousedown",yt(t,Ht)),on(i.scroller,"dblclick",e?yt(t,(function(e){if(!fn(t,e)){var r=Nt(t,e);if(r&&!Wt(t,e)&&!At(t.display,e)){Qr(e);var n=Te(Or(t.doc,r.line).text,r);ge(t.doc,n.from,n.to)}}})):function(e){fn(t,e)||Qr(e)});on(i.lineSpace,"selectstart",(function(t){At(i,t)||Qr(t)})),C||on(i.scroller,"contextmenu",(function(e){Zt(t,e)}));function l(){t.state.focused&&setTimeout(Tn(Mt,t),0)}function s(){null==r&&(r=setTimeout((function(){r=null,i.cachedCharWidth=i.cachedTextHeight=Fn=null,et(t),xt(t,Tn(Ct,t))}),100))}function f(){for(var t=i.wrapper.parentNode;t&&t!=document.body;t=t.parentNode);t?setTimeout(f,5e3):ln(window,"resize",s)}function h(e){fn(t,e)||t.options.onDragEvent&&t.options.onDragEvent(t,qr(e))||en(e)}on(i.scroller,"scroll",(function(){i.scroller.clientHeight&&(zt(t,i.scroller.scrollTop),It(t,i.scroller.scrollLeft,!0),sn(t,"scroll",t))})),on(i.scrollbarV,"scroll",(function(){i.scroller.clientHeight&&zt(t,i.scrollbarV.scrollTop)})),on(i.scrollbarH,"scroll",(function(){i.scroller.clientHeight&&It(t,i.scrollbarH.scrollLeft)})),on(i.scroller,"mousewheel",(function(e){Bt(t,e)})),on(i.scroller,"DOMMouseScroll",(function(e){Bt(t,e)})),on(i.scrollbarH,"mousedown",l),on(i.scrollbarV,"mousedown",l),on(i.wrapper,"scroll",(function(){i.wrapper.scrollTop=i.wrapper.scrollLeft=0})),on(window,"resize",s),setTimeout(f,5e3),on(i.input,"keyup",yt(t,(function(e){fn(t,e)||t.options.onKeyEvent&&t.options.onKeyEvent(t,qr(e))||16==e.keyCode&&(t.doc.sel.shift=!1)}))),on(i.input,"input",(function(){e&&!n&&t.display.inputHasSelection&&(t.display.inputHasSelection=null),Lt(t)})),on(i.input,"keydown",yt(t,Xt)),on(i.input,"keypress",yt(t,Yt)),on(i.input,"focus",Tn(jt,t)),on(i.input,"blur",Tn($t,t)),t.options.dragDrop&&(on(i.scroller,"dragstart",(function(r){!function(t,r){if(e&&(!t.state.draggingText||+new Date-Ot<100))return void en(r);if(fn(t,r)||At(t.display,r))return;var n=t.getSelection();if(r.dataTransfer.setData("Text",n),r.dataTransfer.setDragImage&&!u){var i=Wn("img",null,null,"position: fixed; left: 0; top: 0;");i.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",a&&(i.width=i.height=1,t.display.wrapper.appendChild(i),i._top=i.offsetTop),r.dataTransfer.setDragImage(i,0,0),a&&i.parentNode.removeChild(i)}}(t,r)})),on(i.scroller,"dragenter",h),on(i.scroller,"dragover",h),on(i.scroller,"drop",yt(t,Et)));function d(){i.inaccurateSelection&&(i.prevInput="",i.inaccurateSelection=!1,i.input.value=t.getSelection(),wn(i.input))}on(i.scroller,"paste",(function(e){At(i,e)||(Mt(t),Lt(t))})),on(i.input,"paste",(function(){if(o&&!t.state.fakedLastChar&&!(new Date-t.state.lastMiddleDown<200)){var e=i.input.selectionStart,r=i.input.selectionEnd;i.input.value+="$",i.input.selectionStart=e,i.input.selectionEnd=r,t.state.fakedLastChar=!0}t.state.pasteIncoming=!0,Lt(t)})),on(i.input,"cut",d),on(i.input,"copy",d),c&&on(i.sizer,"mouseup",(function(){document.activeElement==i.input&&i.input.blur(),Mt(t)}))}(this);try{h=document.activeElement==f.input}catch(t){}h||i.autofocus&&!g?setTimeout(Tn(jt,this),20):$t(this),yt(this,(function(){for(var t in Ae)Ae.propertyIsEnumerable(t)&&Ae[t](this,i[t],De);for(var e=0;e<ze.length;++e)ze[e](this)}))()}function k(t){t.doc.mode=S.getMode(t.options,t.doc.modeOption),t.doc.iter((function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)})),t.doc.frontier=t.doc.first,X(t,100),t.state.modeGen++,t.curOp&&Ct(t)}function M(t){var e=ft(t.display),r=t.options.lineWrapping,n=r&&Math.max(5,t.display.scroller.clientWidth/ht(t.display)-3);return function(i){return nr(t.doc,i)?0:r?(Math.ceil(i.text.length/n)||1)*e:e}}function T(t){var e=t.doc,r=M(t);e.iter((function(t){var e=r(t);e!=t.height&&Ir(t,e)}))}function A(t){var e=Be[t.options.keyMap],r=e.style;t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(r?" cm-keymap-"+r:""),t.state.disableInput=e.disableInput}function N(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),et(t)}function H(t){D(t),Ct(t),setTimeout((function(){F(t)}),20)}function D(t){var e=t.display.gutters,r=t.options.gutters;On(e);for(var n=0;n<r.length;++n){var i=r[n],o=e.appendChild(Wn("div",null,"CodeMirror-gutter "+i));"CodeMirror-linenumbers"==i&&(t.display.lineGutter=o,o.style.width=(t.display.lineNumWidth||1)+"px")}e.style.display=n?"":"none"}function W(t,e){if(0==e.height)return 0;for(var r,n=e.text.length,i=e;r=tr(i);){i=Or(t,(o=r.find()).from.line),n+=o.from.ch-o.to.ch}for(i=e;r=er(i);){var o=r.find();n-=i.text.length-o.from.ch,n+=(i=Or(t,o.to.line)).text.length-o.to.ch}return n}function O(t){var e=t.display,r=t.doc;e.maxLine=Or(r,r.first),e.maxLineLength=W(r,e.maxLine),e.maxLineChanged=!0,r.iter((function(t){var n=W(r,t);n>e.maxLineLength&&(e.maxLineLength=n,e.maxLine=t)}))}function E(t){var e=Ln(t.gutters,"CodeMirror-linenumbers");-1==e&&t.lineNumbers?t.gutters=t.gutters.concat(["CodeMirror-linenumbers"]):e>-1&&!t.lineNumbers&&(t.gutters=t.gutters.slice(0),t.gutters.splice(e,1))}function z(t){var e=t.display,r=t.doc.height+Z(e);e.sizer.style.minHeight=e.heightForcer.style.top=r+"px",e.gutters.style.height=Math.max(r,e.scroller.clientHeight-gn)+"px";var n=Math.max(r,e.scroller.scrollHeight),i=e.scroller.scrollWidth>e.scroller.clientWidth+1,o=n>e.scroller.clientHeight+1;o?(e.scrollbarV.style.display="block",e.scrollbarV.style.bottom=i?Gn(e.measure)+"px":"0",e.scrollbarV.firstChild.style.height=n-e.scroller.clientHeight+e.scrollbarV.clientHeight+"px"):(e.scrollbarV.style.display="",e.scrollbarV.firstChild.style.height="0"),i?(e.scrollbarH.style.display="block",e.scrollbarH.style.right=o?Gn(e.measure)+"px":"0",e.scrollbarH.firstChild.style.width=e.scroller.scrollWidth-e.scroller.clientWidth+e.scrollbarH.clientWidth+"px"):(e.scrollbarH.style.display="",e.scrollbarH.firstChild.style.width="0"),i&&o?(e.scrollbarFiller.style.display="block",e.scrollbarFiller.style.height=e.scrollbarFiller.style.width=Gn(e.measure)+"px"):e.scrollbarFiller.style.display="",i&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(e.gutterFiller.style.display="block",e.gutterFiller.style.height=Gn(e.measure)+"px",e.gutterFiller.style.width=e.gutters.offsetWidth+"px"):e.gutterFiller.style.display="",f&&0===Gn(e.measure)&&(e.scrollbarV.style.minWidth=e.scrollbarH.style.minHeight=h?"18px":"12px",e.scrollbarV.style.pointerEvents=e.scrollbarH.style.pointerEvents="none")}function I(t,e,r){var n=t.scroller.scrollTop,i=t.wrapper.clientHeight;"number"==typeof r?n=r:r&&(n=r.top,i=r.bottom-r.top),n=Math.floor(n-$(t));var o=Math.ceil(n+i);return{from:Pr(e,n),to:Pr(e,o)}}function F(t){var e=t.display;if(e.alignWidgets||e.gutters.firstChild&&t.options.fixedGutter){for(var r=R(e)-e.scroller.scrollLeft+t.doc.scrollLeft,n=e.gutters.offsetWidth,i=r+"px",o=e.lineDiv.firstChild;o;o=o.nextSibling)if(o.alignable)for(var l=0,s=o.alignable;l<s.length;++l)s[l].style.left=i;t.options.fixedGutter&&(e.gutters.style.left=r+n+"px")}}function P(t,e){return String(t.lineNumberFormatter(e+t.firstLineNumber))}function R(t){return In(t.scroller).left-In(t.sizer).left}function B(t,e,r,n){for(var i,o=t.display.showingFrom,l=t.display.showingTo,s=I(t.display,t.doc,r),a=!0;;a=!1){var u=t.display.scroller.clientWidth;if(!G(t,e,s,n))break;if(i=!0,e=[],U(t),z(t),a&&t.options.lineWrapping&&u!=t.display.scroller.clientWidth)n=!0;else if(n=!1,r&&(r=Math.min(t.display.scroller.scrollHeight-t.display.scroller.clientHeight,"number"==typeof r?r:r.top)),(s=I(t.display,t.doc,r)).from>=t.display.showingFrom&&s.to<=t.display.showingTo)break}return i&&(cn(t,"update",t),t.display.showingFrom==o&&t.display.showingTo==l||cn(t,"viewportChange",t,t.display.showingFrom,t.display.showingTo)),i}function G(t,e,n,i){var l=t.display,s=t.doc;if(!l.wrapper.clientWidth)return l.showingFrom=l.showingTo=s.first,void(l.viewOffset=0);if(!(!i&&0==e.length&&n.from>l.showingFrom&&n.to<l.showingTo)){(function(t){if(!t.options.lineNumbers)return!1;var e=t.doc,r=P(t.options,e.first+e.size-1),n=t.display;if(r.length!=n.lineNumChars){var i=n.measure.appendChild(Wn("div",[Wn("div",r)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,l=i.offsetWidth-o;return n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(o,n.lineGutter.offsetWidth-l),n.lineNumWidth=n.lineNumInnerWidth+l,n.lineNumChars=n.lineNumInnerWidth?r.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",!0}return!1})(t)&&(e=[{from:s.first,to:s.first+s.size}]);var a=l.sizer.style.marginLeft=l.gutters.offsetWidth+"px";l.scrollbarH.style.left=t.options.fixedGutter?a:"0";var u=1/0;if(t.options.lineNumbers)for(var c=0;c<e.length;++c)e[c].diff&&e[c].from<u&&(u=e[c].from);var f=s.first+s.size,h=Math.max(n.from-t.options.viewportMargin,s.first),d=Math.min(f,n.to+t.options.viewportMargin);if(l.showingFrom<h&&h-l.showingFrom<20&&(h=Math.max(s.first,l.showingFrom)),l.showingTo>d&&l.showingTo-d<20&&(d=Math.min(f,l.showingTo)),L)for(h=Fr(rr(s,Or(s,h)));d<f&&nr(s,Or(s,d));)++d;var p=[{from:Math.max(l.showingFrom,s.first),to:Math.min(l.showingTo,f)}];if(p=p[0].from>=p[0].to?[]:function(t,e){for(var r=0,n=e.length||0;r<n;++r){for(var i=e[r],o=[],l=i.diff||0,s=0,a=t.length;s<a;++s){var u=t[s];i.to<=u.from&&i.diff?o.push({from:u.from+l,to:u.to+l}):i.to<=u.from||i.from>=u.to?o.push(u):(i.from>u.from&&o.push({from:u.from,to:i.from}),i.to<u.to&&o.push({from:i.to+l,to:u.to+l}))}t=o}return t}(p,e),L)for(c=0;c<p.length;++c)for(var g,v=p[c];g=er(Or(s,v.to-1));){var y=g.find().from.line;if(!(y>v.from)){p.splice(c--,1);break}v.to=y}var b=0;for(c=0;c<p.length;++c){(v=p[c]).from<h&&(v.from=h),v.to>d&&(v.to=d),v.from>=v.to?p.splice(c--,1):b+=v.to-v.from}if(i||b!=d-h||h!=l.showingFrom||d!=l.showingTo){p.sort((function(t,e){return t.from-e.from}));try{var x=document.activeElement}catch(t){}return b<.7*(d-h)&&(l.lineDiv.style.display="none"),function(t,e,n,i,l){var s=function(t){for(var e=t.display,r={},n={},i=e.gutters.firstChild,o=0;i;i=i.nextSibling,++o)r[t.options.gutters[o]]=i.offsetLeft,n[t.options.gutters[o]]=i.offsetWidth;return{fixedPos:R(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:r,gutterWidth:n,wrapperWidth:e.wrapper.clientWidth}}(t),a=t.display,u=t.options.lineNumbers;i.length||o&&t.display.currentWheelTarget||On(a.lineDiv);var c=a.lineDiv,f=c.firstChild;function h(e){var r=e.nextSibling;return o&&m&&t.display.currentWheelTarget==e?(e.style.display="none",e.lineObj=null):e.parentNode.removeChild(e),r}var d=i.shift(),p=e;t.doc.iter(e,n,(function(e){if(d&&d.to==p&&(d=i.shift()),nr(t.doc,e)){if(0!=e.height&&Ir(e,0),e.widgets&&f&&f.previousSibling)for(var n=0;n<e.widgets.length;++n){var o=e.widgets[n];if(o.showIfHidden){var a=f.previousSibling;if(/pre/i.test(a.nodeName)){var g=Wn("div",null,null,"position: relative");a.parentNode.replaceChild(g,a),g.appendChild(a),a=g}var m=a.appendChild(Wn("div",[o.node],"CodeMirror-linewidget"));o.handleMouseEvents||(m.ignoreEvents=!0),K(o,m,a,s)}}}else if(d&&d.from<=p&&d.to>p){for(;f.lineObj!=e;)f=h(f);u&&l<=p&&f.lineNumber&&zn(f.lineNumber,P(t.options,p)),f=f.nextSibling}else{if(e.widgets)for(var v,y=0,b=f;b&&y<20;++y,b=b.nextSibling)if(b.lineObj==e&&/div/i.test(b.nodeName)){v=b;break}var x=function(t,e,n,i,o){var l,s=yr(t,e),a=s.pre,u=e.gutterMarkers,c=t.display,f=s.bgClass?s.bgClass+" "+(e.bgClass||""):e.bgClass;if(!(t.options.lineNumbers||u||f||e.wrapClass||e.widgets))return a;if(o){o.alignable=null;for(var h,d=!0,p=0,g=null,m=o.firstChild;m;m=h)if(h=m.nextSibling,/\bCodeMirror-linewidget\b/.test(m.className)){for(var v=0;v<e.widgets.length;++v){if((L=e.widgets[v]).node==m.firstChild){L.above||g||(g=m),K(L,m,o,i),++p;break}}if(v==e.widgets.length){d=!1;break}}else o.removeChild(m);o.insertBefore(a,g),d&&p==e.widgets.length&&(l=o,o.className=e.wrapClass||"")}l||(l=Wn("div",null,e.wrapClass,"position: relative")).appendChild(a);f&&l.insertBefore(Wn("div",null,f+" CodeMirror-linebackground"),l.firstChild);if(t.options.lineNumbers||u){var y=l.insertBefore(Wn("div",null,null,"position: absolute; left: "+(t.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px"),l.firstChild);if(t.options.fixedGutter&&(l.alignable||(l.alignable=[])).push(y),!t.options.lineNumbers||u&&u["CodeMirror-linenumbers"]||(l.lineNumber=y.appendChild(Wn("div",P(t.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+c.lineNumInnerWidth+"px"))),u)for(var b=0;b<t.options.gutters.length;++b){var x=t.options.gutters[b],C=u.hasOwnProperty(x)&&u[x];C&&y.appendChild(Wn("div",[C],"CodeMirror-gutter-elt","left: "+i.gutterLeft[x]+"px; width: "+i.gutterWidth[x]+"px"))}}r&&(l.style.zIndex=2);if(e.widgets&&l!=o){v=0;for(var w=e.widgets;v<w.length;++v){var L,S=Wn("div",[(L=w[v]).node],"CodeMirror-linewidget");L.handleMouseEvents||(S.ignoreEvents=!0),K(L,S,l,i),L.above?l.insertBefore(S,t.options.lineNumbers&&0!=e.height?y:a):l.appendChild(S),cn(L,"redraw")}}return l}(t,e,p,s,v);if(x!=v)c.insertBefore(x,f);else{for(;f!=v;)f=h(f);f=f.nextSibling}x.lineObj=e}++p}));for(;f;)f=h(f)}(t,h,d,p,u),l.lineDiv.style.display="",x&&document.activeElement!=x&&x.offsetHeight&&x.focus(),(h!=l.showingFrom||d!=l.showingTo||l.lastSizeC!=l.wrapper.clientHeight)&&(l.lastSizeC=l.wrapper.clientHeight,X(t,400)),l.showingFrom=h,l.showingTo=d,function(t){for(var e,n=t.display,i=n.lineDiv.offsetTop,o=n.lineDiv.firstChild;o;o=o.nextSibling)if(o.lineObj){if(r){var l=o.offsetTop+o.offsetHeight;e=l-i,i=l}else{var s=In(o);e=s.bottom-s.top}var a=o.lineObj.height-e;if(e<2&&(e=ft(n)),a>.001||a<-.001){Ir(o.lineObj,e);var u=o.lineObj.widgets;if(u)for(var c=0;c<u.length;++c)u[c].height=u[c].node.offsetHeight}}}(t),V(t),!0}V(t)}}function V(t){var e=t.display.viewOffset=Rr(t,Or(t.doc,t.display.showingFrom));t.display.mover.style.top=e+"px"}function K(t,e,r,n){if(t.noHScroll){(r.alignable||(r.alignable=[])).push(e);var i=n.wrapperWidth;e.style.left=n.fixedPos+"px",t.coverGutter||(i-=n.gutterTotalWidth,e.style.paddingLeft=n.gutterTotalWidth+"px"),e.style.width=i+"px"}t.coverGutter&&(e.style.zIndex=5,e.style.position="relative",t.noHScroll||(e.style.marginLeft=-n.gutterTotalWidth+"px"))}function U(t){var e=t.display,r=ae(t.doc.sel.from,t.doc.sel.to);if(r||t.options.showCursorWhenSelecting?function(t){var e=t.display,r=st(t,t.doc.sel.head,"div");e.cursor.style.left=r.left+"px",e.cursor.style.top=r.top+"px",e.cursor.style.height=Math.max(0,r.bottom-r.top)*t.options.cursorHeight+"px",e.cursor.style.display="",r.other?(e.otherCursor.style.display="",e.otherCursor.style.left=r.other.left+"px",e.otherCursor.style.top=r.other.top+"px",e.otherCursor.style.height=.85*(r.other.bottom-r.other.top)+"px"):e.otherCursor.style.display="none"}(t):e.cursor.style.display=e.otherCursor.style.display="none",r?e.selectionDiv.style.display="none":function(t){var e=t.display,r=t.doc,n=t.doc.sel,i=document.createDocumentFragment(),o=e.lineSpace.offsetWidth,l=function(t){return En(t.measure,Wn("pre",null,null,"text-align: left")).appendChild(Wn("span","x")).offsetLeft}(t.display);function s(t,e,r,n){e<0&&(e=0),i.appendChild(Wn("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px; top: "+e+"px; width: "+(null==r?o-t:r)+"px; height: "+(n-e)+"px"))}function a(e,n,i){var a,u,c=Or(r,e),f=c.text.length;function h(r,n){return lt(t,se(e,r),"div",c,n)}return function(t,e,r,n){if(!t)return n(e,r,"ltr");for(var i=!1,o=0;o<t.length;++o){var l=t[o];(l.from<r&&l.to>e||e==r&&l.to==e)&&(n(Math.max(l.from,e),Math.min(l.to,r),1==l.level?"rtl":"ltr"),i=!0)}i||n(e,r,"ltr")}(Br(c),n||0,null==i?f:i,(function(t,e,r){var c,d,p,g=h(t,"left");if(t==e)c=g,d=p=g.left;else{if(c=h(e-1,"right"),"rtl"==r){var m=g;g=c,c=m}d=g.left,p=c.right}null==n&&0==t&&(d=l),c.top-g.top>3&&(s(d,g.top,null,g.bottom),d=l,g.bottom<c.top&&s(d,g.bottom,null,c.top)),null==i&&e==f&&(p=o),(!a||g.top<a.top||g.top==a.top&&g.left<a.left)&&(a=g),(!u||c.bottom>u.bottom||c.bottom==u.bottom&&c.right>u.right)&&(u=c),d<l+1&&(d=l),s(d,c.top,p-d,c.bottom)})),{start:a,end:u}}if(n.from.line==n.to.line)a(n.from.line,n.from.ch,n.to.ch);else{var u=Or(r,n.from.line),c=Or(r,n.to.line),f=rr(r,u)==rr(r,c),h=a(n.from.line,n.from.ch,f?u.text.length:null).end,d=a(n.to.line,f?0:null,n.to.ch).start;f&&(h.top<d.top-2?(s(h.right,h.top,null,h.bottom),s(l,d.top,d.left,d.bottom)):s(h.right,h.top,d.left-h.right,h.bottom)),h.bottom<d.top&&s(l,h.bottom,null,d.top)}En(e.selectionDiv,i),e.selectionDiv.style.display=""}(t),t.options.moveInputWithCursor){var n=st(t,t.doc.sel.head,"div"),i=In(e.wrapper),o=In(e.lineDiv);e.inputDiv.style.top=Math.max(0,Math.min(e.wrapper.clientHeight-10,n.top+o.top-i.top))+"px",e.inputDiv.style.left=Math.max(0,Math.min(e.wrapper.clientWidth-10,n.left+o.left-i.left))+"px"}}function _(t){if(t.state.focused){var e=t.display;clearInterval(e.blinker);var r=!0;e.cursor.style.visibility=e.otherCursor.style.visibility="",t.options.cursorBlinkRate>0&&(e.blinker=setInterval((function(){e.cursor.style.visibility=e.otherCursor.style.visibility=(r=!r)?"":"hidden"}),t.options.cursorBlinkRate))}}function X(t,e){t.doc.mode.startState&&t.doc.frontier<t.display.showingTo&&t.state.highlight.set(e,Tn(Y,t))}function Y(t){var e=t.doc;if(e.frontier<e.first&&(e.frontier=e.first),!(e.frontier>=t.display.showingTo)){var r,n=+new Date+t.options.workTime,i=Fe(e.mode,j(t,e.frontier)),o=[];e.iter(e.frontier,Math.min(e.first+e.size,t.display.showingTo+500),(function(l){if(e.frontier>=t.display.showingFrom){var s=l.styles;l.styles=dr(t,l,i,!0);for(var a=!s||s.length!=l.styles.length,u=0;!a&&u<s.length;++u)a=s[u]!=l.styles[u];a&&(r&&r.end==e.frontier?r.end++:o.push(r={start:e.frontier,end:e.frontier+1})),l.stateAfter=Fe(e.mode,i)}else gr(t,l.text,i),l.stateAfter=e.frontier%5==0?Fe(e.mode,i):null;if(++e.frontier,+new Date>n)return X(t,t.options.workDelay),!0})),o.length&&yt(t,(function(){for(var t=0;t<o.length;++t)Ct(this,o[t].start,o[t].end)}))()}}function j(t,e,r){var n=t.doc,i=t.display;if(!n.mode.startState)return!0;var o=function(t,e,r){for(var n,i,o=t.doc,l=r?-1:e-(t.doc.mode.innerMode?1e3:100),s=e;s>l;--s){if(s<=o.first)return o.first;var a=Or(o,s-1);if(a.stateAfter&&(!r||s<=o.frontier))return s;var u=yn(a.text,null,t.options.tabSize);(null==i||n>u)&&(i=s-1,n=u)}return i}(t,e,r),l=o>n.first&&Or(n,o-1).stateAfter;return l=l?Fe(n.mode,l):Pe(n.mode),n.iter(o,e,(function(r){gr(t,r.text,l);var s=o==e-1||o%5==0||o>=i.showingFrom&&o<i.showingTo;r.stateAfter=s?Fe(n.mode,l):null,++o})),r&&(n.frontier=o),l}function $(t){return t.lineSpace.offsetTop}function Z(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function q(t,e,r,n,i){var o=-1;if((n=n||J(t,e)).crude){var l=n.left+r*n.width;return{left:l,right:l+n.width,top:n.top,bottom:n.bottom}}for(var s=r;;s+=o){var a=n[s];if(a)break;o<0&&0==s&&(o=1)}return"left"==(i=s>r?"left":s<r?"right":i)&&a.leftSide?a=a.leftSide:"right"==i&&a.rightSide&&(a=a.rightSide),{left:s<r?a.right:a.left,right:s>r?a.left:a.right,top:a.top,bottom:a.bottom}}function Q(t,e){for(var r=t.display.measureLineCache,n=0;n<r.length;++n){var i=r[n];if(i.text==e.text&&i.markedSpans==e.markedSpans&&t.display.scroller.clientWidth==i.width&&i.classes==e.textClass+"|"+e.wrapClass)return i}}function J(t,e){var r=Q(t,e);if(r)return r.measure;var n=tt(t,e),i=t.display.measureLineCache,o={text:e.text,width:t.display.scroller.clientWidth,markedSpans:e.markedSpans,measure:n,classes:e.textClass+"|"+e.wrapClass};return 16==i.length?i[++t.display.measureLineCachePos%16]=o:i.push(o),n}function tt(t,i){if(!t.options.lineWrapping&&i.text.length>=t.options.crudeMeasuringFrom)return function(t,e){var r=new cr(e.text.slice(0,100),null);e.textClass&&(r.textClass=e.textClass);var n=tt(t,r),i=q(t,r,0,n,"left"),o=q(t,r,99,n,"right");return{crude:!0,top:i.top,left:i.left,bottom:i.bottom,width:(o.right-i.left)/100}}(t,i);var o=t.display,l=Mn(i.text.length),s=yr(t,i,l,!0).pre;if(e&&!r&&!t.options.lineWrapping&&s.childNodes.length>100){for(var a=document.createDocumentFragment(),u=s.childNodes.length,c=0,f=Math.ceil(u/10);c<f;++c){for(var h=Wn("div",null,null,"display: inline-block"),d=0;d<10&&u;++d)h.appendChild(s.firstChild),--u;a.appendChild(h)}s.appendChild(a)}En(o.measure,s);var p=In(o.lineDiv),g=[],m=Mn(i.text.length),v=s.offsetHeight;function y(t){var e=t.top-p.top,r=t.bottom-p.top;r>v&&(r=v),e<0&&(e=0);for(var n=g.length-2;n>=0;n-=2){var i=g[n],o=g[n+1];if(!(i>r||o<e)&&(i<=e&&o>=r||e<=i&&r>=o||Math.min(r,o)-Math.max(e,i)>=r-e>>1)){g[n]=Math.min(e,i),g[n+1]=Math.max(r,o);break}}return n<0&&(n=g.length,g.push(e,r)),{left:t.left-p.left,right:t.right-p.left,top:n,bottom:null}}function b(t){t.bottom=g[t.top+1],t.top=g[t.top]}n&&o.measure.first!=s&&En(o.measure,s);for(c=0;c<l.length;++c)if(L=l[c]){var x=L,C=null;if(/\bCodeMirror-widget\b/.test(L.className)&&L.getClientRects){1==L.firstChild.nodeType&&(x=L.firstChild);var w=x.getClientRects();w.length>1&&((C=m[c]=y(w[0])).rightSide=y(w[w.length-1]))}C||(C=m[c]=y(In(x))),L.measureRight&&(C.right=In(L.measureRight).left),L.leftSide&&(C.leftSide=y(In(L.leftSide)))}On(t.display.measure);var L;for(c=0;c<m.length;++c)(L=m[c])&&(b(L),L.leftSide&&b(L.leftSide),L.rightSide&&b(L.rightSide));return m}function et(t){t.display.measureLineCache.length=t.display.measureLineCachePos=0,t.display.cachedCharWidth=t.display.cachedTextHeight=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function rt(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function nt(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function it(t,e,r,n){if(e.widgets)for(var i=0;i<e.widgets.length;++i)if(e.widgets[i].above){var o=ur(e.widgets[i]);r.top+=o,r.bottom+=o}if("line"==n)return r;n||(n="local");var l=Rr(t,e);if("local"==n?l+=$(t.display):l-=t.display.viewOffset,"page"==n||"window"==n){var s=In(t.display.lineSpace);l+=s.top+("window"==n?0:nt());var a=s.left+("window"==n?0:rt());r.left+=a,r.right+=a}return r.top+=l,r.bottom+=l,r}function ot(t,e,r){if("div"==r)return e;var n=e.left,i=e.top;if("page"==r)n-=rt(),i-=nt();else if("local"==r||!r){var o=In(t.display.sizer);n+=o.left,i+=o.top}var l=In(t.display.lineSpace);return{left:n-l.left,top:i-l.top}}function lt(t,e,r,n,i){return n||(n=Or(t.doc,e.line)),it(t,n,q(t,n,e.ch,null,i),r)}function st(t,e,r,n,i){function o(e,o){var l=q(t,n,e,i,o?"right":"left");return o?l.left=l.right:l.right=l.left,it(t,n,l,r)}function l(t,e){var r=s[e],n=r.level%2;return t==$n(r)&&e&&r.level<s[e-1].level?(t=Zn(r=s[--e])-(r.level%2?0:1),n=!0):t==Zn(r)&&e<s.length-1&&r.level<s[e+1].level&&(t=$n(r=s[++e])-r.level%2,n=!1),n&&t==r.to&&t>r.from?o(t-1):o(t,n)}n=n||Or(t.doc,e.line),i||(i=J(t,n));var s=Br(n),a=e.ch;if(!s)return o(a);var u=l(a,ei(s,a));return null!=_n&&(u.other=l(a,_n)),u}function at(t,e,r,n){var i=new se(t,e);return i.xRel=n,r&&(i.outside=!0),i}function ut(t,e,r){var n=t.doc;if((r+=t.display.viewOffset)<0)return at(n.first,0,!0,-1);var i=Pr(n,r),o=n.first+n.size-1;if(i>o)return at(n.first+n.size-1,Or(n,o).text.length,!0,1);for(e<0&&(e=0);;){var l=Or(n,i),s=ct(t,l,i,e,r),a=er(l),u=a&&a.find();if(!a||!(s.ch>u.from.ch||s.ch==u.from.ch&&s.xRel>0))return s;i=u.to.line}}function ct(t,e,r,n,i){var o=i-Rr(t,e),l=!1,s=2*t.display.wrapper.clientWidth,a=J(t,e);function u(n){var i=st(t,se(r,n),"line",e,a);return l=!0,o>i.bottom?i.left-s:o<i.top?i.left+s:(l=!1,i.left)}var c=Br(e),f=e.text.length,h=qn(e),d=Qn(e),p=u(h),g=l,m=u(d),v=l;if(n>m)return at(r,d,v,1);for(;;){if(c?d==h||d==ni(e,h,1):d-h<=1){for(var y=n<p||n-p<=m-n?h:d,b=n-(y==h?p:m);Dn.test(e.text.charAt(y));)++y;return at(r,y,y==h?g:v,b<0?-1:b?1:0)}var x=Math.ceil(f/2),C=h+x;if(c){C=h;for(var w=0;w<x;++w)C=ni(e,C,1)}var L=u(C);L>n?(d=C,m=L,(v=l)&&(m+=1e3),f=x):(h=C,p=L,g=l,f-=x)}}function ft(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==b){b=Wn("pre");for(var e=0;e<49;++e)b.appendChild(document.createTextNode("x")),b.appendChild(Wn("br"));b.appendChild(document.createTextNode("x"))}En(t.measure,b);var r=b.offsetHeight/50;return r>3&&(t.cachedTextHeight=r),On(t.measure),r||1}function ht(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var e=Wn("span","x"),r=Wn("pre",[e]);En(t.measure,r);var n=e.offsetWidth;return n>2&&(t.cachedCharWidth=n),n||10}var dt,pt,gt=0;function mt(t){t.curOp={changes:[],forceUpdate:!1,updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,cursorActivity:!1,updateMaxLine:!1,updateScrollPos:!1,id:++gt},un++||(an=[])}function vt(t){var e,r,n=t.curOp,i=t.doc,o=t.display;if(t.curOp=null,n.updateMaxLine&&O(t),o.maxLineChanged&&!t.options.lineWrapping&&o.maxLine){var l=function(t,e){var r=!1;if(e.markedSpans)for(var n=0;n<e.markedSpans;++n){var i=e.markedSpans[n];!i.collapsed||null!=i.to&&i.to!=e.text.length||(r=!0)}var o=!r&&Q(t,e);if(o||e.text.length>=t.options.crudeMeasuringFrom)return q(t,e,e.text.length,o&&o.measure,"right").right;var l=yr(t,e,null,!0).pre,s=l.appendChild(Vn(t.display.measure));return En(t.display.measure,l),In(s).right-In(t.display.lineDiv).left}(t,o.maxLine);o.sizer.style.minWidth=Math.max(0,l+3+gn)+"px",o.maxLineChanged=!1;var s=Math.max(0,o.sizer.offsetLeft+o.sizer.offsetWidth-o.scroller.clientWidth);s<i.scrollLeft&&!n.updateScrollPos&&It(t,Math.min(o.scroller.scrollLeft,s),!0)}if(n.updateScrollPos)e=n.updateScrollPos;else if(n.selectionChanged&&o.scroller.clientHeight){var a=st(t,i.sel.head);e=xe(t,a.left,a.top,a.left,a.bottom)}if((n.changes.length||n.forceUpdate||e&&null!=e.scrollTop)&&(r=B(t,n.changes,e&&e.scrollTop,n.forceUpdate),t.display.scroller.offsetHeight&&(t.doc.scrollTop=t.display.scroller.scrollTop)),!r&&n.selectionChanged&&U(t),n.updateScrollPos){var u=Math.max(0,Math.min(o.scroller.scrollHeight-o.scroller.clientHeight,e.scrollTop)),c=Math.max(0,Math.min(o.scroller.scrollWidth-o.scroller.clientWidth,e.scrollLeft));o.scroller.scrollTop=o.scrollbarV.scrollTop=i.scrollTop=u,o.scroller.scrollLeft=o.scrollbarH.scrollLeft=i.scrollLeft=c,F(t),n.scrollToPos&&be(t,he(t.doc,n.scrollToPos.from),he(t.doc,n.scrollToPos.to),n.scrollToPos.margin)}else e&&function(t){var e=be(t,t.doc.sel.head,null,t.options.cursorScrollMargin);if(!t.state.focused)return;var r=t.display,n=In(r.sizer),i=null;e.top+n.top<0?i=!0:e.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1);if(null!=i&&!d){var o="none"==r.cursor.style.display;o&&(r.cursor.style.display="",r.cursor.style.left=e.left+"px",r.cursor.style.top=e.top-r.viewOffset+"px"),r.cursor.scrollIntoView(i),o&&(r.cursor.style.display="none")}}(t);n.selectionChanged&&_(t),t.state.focused&&n.updateInput&&kt(t,n.userSelChange);var f,h=n.maybeHiddenMarkers,p=n.maybeUnhiddenMarkers;if(h)for(var g=0;g<h.length;++g)h[g].lines.length||sn(h[g],"hide");if(p)for(g=0;g<p.length;++g)p[g].lines.length&&sn(p[g],"unhide");if(--un||(f=an,an=null),n.textChanged&&sn(t,"change",t,n.textChanged),n.cursorActivity&&sn(t,"cursorActivity",t),f)for(g=0;g<f.length;++g)f[g]()}function yt(t,e){return function(){var r=t||this,n=!r.curOp;n&&mt(r);try{var i=e.apply(r,arguments)}finally{n&&vt(r)}return i}}function bt(t){return function(){var e,r=this.cm&&!this.cm.curOp;r&&mt(this.cm);try{e=t.apply(this,arguments)}finally{r&&vt(this.cm)}return e}}function xt(t,e){var r,n=!t.curOp;n&&mt(t);try{r=e()}finally{n&&vt(t)}return r}function Ct(t,e,r,n){null==e&&(e=t.doc.first),null==r&&(r=t.doc.first+t.doc.size),t.curOp.changes.push({from:e,to:r,diff:n})}function wt(t){t.display.pollingFast||t.display.poll.set(t.options.pollInterval,(function(){St(t),t.state.focused&&wt(t)}))}function Lt(t){var e=!1;t.display.pollingFast=!0,t.display.poll.set(20,(function r(){St(t)||e?(t.display.pollingFast=!1,wt(t)):(e=!0,t.display.poll.set(60,r))}))}function St(t){var r=t.display.input,i=t.display.prevInput,o=t.doc,l=o.sel;if(!t.state.focused||Xn(r)||Tt(t)||t.state.disableInput)return!1;t.state.pasteIncoming&&t.state.fakedLastChar&&(r.value=r.value.substring(0,r.value.length-1),t.state.fakedLastChar=!1);var s=r.value;if(s==i&&ae(l.from,l.to))return!1;if(e&&!n&&t.display.inputHasSelection===s)return kt(t,!0),!1;var a=!t.curOp;a&&mt(t),l.shift=!1;for(var u=0,c=Math.min(i.length,s.length);u<c&&i.charCodeAt(u)==s.charCodeAt(u);)++u;var f=l.from,h=l.to;u<i.length?f=se(f.line,f.ch-(i.length-u)):t.state.overwrite&&ae(f,h)&&!t.state.pasteIncoming&&(h=se(h.line,Math.min(Or(o,h.line).text.length,h.ch+(s.length-u))));var d=t.curOp.updateInput,p={from:f,to:h,text:Kn(s.slice(u)),origin:t.state.pasteIncoming?"paste":"+input"};return ee(t.doc,p,"end"),t.curOp.updateInput=d,cn(t,"inputRead",t,p),s.length>1e3||s.indexOf("\n")>-1?r.value=t.display.prevInput="":t.display.prevInput=s,a&&vt(t),t.state.pasteIncoming=!1,!0}function kt(t,r){var i,o,l=t.doc;if(ae(l.sel.from,l.sel.to))r&&(t.display.prevInput=t.display.input.value="",e&&!n&&(t.display.inputHasSelection=null));else{t.display.prevInput="";var s=(i=Yn&&(l.sel.to.line-l.sel.from.line>100||(o=t.getSelection()).length>1e3))?"-":o||t.getSelection();t.display.input.value=s,t.state.focused&&wn(t.display.input),e&&!n&&(t.display.inputHasSelection=s)}t.display.inaccurateSelection=i}function Mt(t){"nocursor"==t.options.readOnly||g&&document.activeElement==t.display.input||t.display.input.focus()}function Tt(t){return t.options.readOnly||t.doc.cantEdit}function At(t,e){for(var r=rn(e);r!=t.wrapper;r=r.parentNode)if(!r||r.ignoreEvents||r.parentNode==t.sizer&&r!=t.mover)return!0}function Nt(t,e,r){var n=t.display;if(!r){var i=rn(e);if(i==n.scrollbarH||i==n.scrollbarH.firstChild||i==n.scrollbarV||i==n.scrollbarV.firstChild||i==n.scrollbarFiller||i==n.gutterFiller)return null}var o,l,s=In(n.lineSpace);try{o=e.clientX,l=e.clientY}catch(e){return null}return ut(t,o-s.left,l-s.top)}function Ht(t){if(!fn(this,t)){var r=this,n=r.display,i=r.doc,l=i.sel;if(l.shift=t.shiftKey,At(n,t))o||(n.scroller.draggable=!1,setTimeout((function(){n.scroller.draggable=!0}),100));else if(!Wt(r,t)){var s=Nt(r,t);switch(nn(t)){case 3:return void(C&&Zt.call(r,r,t));case 2:return o&&(r.state.lastMiddleDown=+new Date),s&&ge(r.doc,s),setTimeout(Tn(Mt,r),20),void Qr(t)}if(s){r.state.focused||jt(r);var a=+new Date,u="single";if(pt&&pt.time>a-400&&ae(pt.pos,s))u="triple",Qr(t),setTimeout(Tn(Mt,r),20),function(t,e){ge(t.doc,se(e,0),he(t.doc,se(e+1,0)))}(r,s.line);else if(dt&&dt.time>a-400&&ae(dt.pos,s)){u="double",pt={time:a,pos:s},Qr(t);var c=Te(Or(i,s.line).text,s);ge(r.doc,c.from,c.to)}else dt={time:a,pos:s};var f=s;if(r.options.dragDrop&&Rn&&!Tt(r)&&!ae(l.from,l.to)&&!ue(s,l.from)&&!ue(l.to,s)&&"single"==u){var h=yt(r,(function(e){o&&(n.scroller.draggable=!1),r.state.draggingText=!1,ln(document,"mouseup",h),ln(n.scroller,"drop",h),Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)<10&&(Qr(e),ge(r.doc,s),Mt(r))}));return o&&(n.scroller.draggable=!0),r.state.draggingText=h,n.scroller.dragDrop&&n.scroller.dragDrop(),on(document,"mouseup",h),void on(n.scroller,"drop",h)}Qr(t),"single"==u&&ge(r.doc,he(i,s));var d=l.from,p=l.to,g=s,m=In(n.wrapper),v=0,y=yt(r,(function(t){e||nn(t)?x(t):w(t)})),b=yt(r,w);on(document,"mousemove",y),on(document,"mouseup",b)}else rn(t)==n.scroller&&Qr(t)}}function x(t){var e=++v,o=Nt(r,t,!0);if(o)if(ae(o,f)){var l=t.clientY<m.top?-20:t.clientY>m.bottom?20:0;l&&setTimeout(yt(r,(function(){v==e&&(n.scroller.scrollTop+=l,x(t))})),50)}else{r.state.focused||jt(r),f=o,function(t){if(!ae(g,t))if(g=t,"single"!=u)if(d=he(i,d),p=he(i,p),"double"==u){var e=Te(Or(i,t.line).text,t);ue(t,d)?ge(r.doc,e.from,p):ge(r.doc,d,e.to)}else"triple"==u&&(ue(t,d)?ge(r.doc,p,he(i,se(t.line,0))):ge(r.doc,d,he(i,se(t.line+1,0))));else ge(r.doc,he(i,s),t)}(o);var a=I(n,i);(o.line>=a.to||o.line<a.from)&&setTimeout(yt(r,(function(){v==e&&x(t)})),150)}}function w(t){v=1/0,Qr(t),Mt(r),ln(document,"mousemove",y),ln(document,"mouseup",b)}}function Dt(t,e,r,n,i){try{var o=e.clientX,l=e.clientY}catch(e){return!1}if(o>=Math.floor(In(t.display.gutters).right))return!1;n&&Qr(e);var s=t.display,a=In(s.lineDiv);if(l>a.bottom||!dn(t,r))return tn(e);l-=a.top-s.viewOffset;for(var u=0;u<t.options.gutters.length;++u){var c=s.gutters.childNodes[u];if(c&&In(c).right>=o)return i(t,r,t,Pr(t.doc,l),t.options.gutters[u],e),tn(e)}}function Wt(t,e){return Dt(t,e,"gutterClick",!0,cn)}var Ot=0;function Et(t){var r=this;if(!(fn(r,t)||At(r.display,t)||r.options.onDragEvent&&r.options.onDragEvent(r,qr(t)))){Qr(t),e&&(Ot=+new Date);var n=Nt(r,t,!0),i=t.dataTransfer.files;if(n&&!Tt(r))if(i&&i.length&&window.FileReader&&window.File)for(var o=i.length,l=Array(o),s=0,a=function(t,e){var i=new FileReader;i.onload=function(){l[e]=i.result,++s==o&&(n=he(r.doc,n),ee(r.doc,{from:n,to:n,text:Kn(l.join("\n")),origin:"paste"},"around"))},i.readAsText(t)},u=0;u<o;++u)a(i[u],u);else{if(r.state.draggingText&&!ue(n,r.doc.sel.from)&&!ue(r.doc.sel.to,n))return r.state.draggingText(t),void setTimeout(Tn(Mt,r),20);try{if(l=t.dataTransfer.getData("Text")){var c=r.doc.sel.from,f=r.doc.sel.to;me(r.doc,n,n),r.state.draggingText&&le(r.doc,"",c,f,"paste"),r.replaceSelection(l,null,"paste"),Mt(r)}}catch(t){}}}}function zt(e,r){Math.abs(e.doc.scrollTop-r)<2||(e.doc.scrollTop=r,t||B(e,[],r),e.display.scroller.scrollTop!=r&&(e.display.scroller.scrollTop=r),e.display.scrollbarV.scrollTop!=r&&(e.display.scrollbarV.scrollTop=r),t&&B(e,[]),X(e,100))}function It(t,e,r){(r?e==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-e)<2)||(e=Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth),t.doc.scrollLeft=e,F(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbarH.scrollLeft!=e&&(t.display.scrollbarH.scrollLeft=e))}var Ft,Pt=0,Rt=null;function Bt(e,r){var n=r.wheelDeltaX,i=r.wheelDeltaY;null==n&&r.detail&&r.axis==r.HORIZONTAL_AXIS&&(n=r.detail),null==i&&r.detail&&r.axis==r.VERTICAL_AXIS?i=r.detail:null==i&&(i=r.wheelDelta);var l=e.display,s=l.scroller;if(n&&s.scrollWidth>s.clientWidth||i&&s.scrollHeight>s.clientHeight){if(i&&m&&o)for(var u=r.target;u!=s;u=u.parentNode)if(u.lineObj){e.display.currentWheelTarget=u;break}if(n&&!t&&!a&&null!=Rt)return i&&zt(e,Math.max(0,Math.min(s.scrollTop+i*Rt,s.scrollHeight-s.clientHeight))),It(e,Math.max(0,Math.min(s.scrollLeft+n*Rt,s.scrollWidth-s.clientWidth))),Qr(r),void(l.wheelStartX=null);if(i&&null!=Rt){var c=i*Rt,f=e.doc.scrollTop,h=f+l.wrapper.clientHeight;c<0?f=Math.max(0,f+c-50):h=Math.min(e.doc.height,h+c+50),B(e,[],{top:f,bottom:h})}Pt<20&&(null==l.wheelStartX?(l.wheelStartX=s.scrollLeft,l.wheelStartY=s.scrollTop,l.wheelDX=n,l.wheelDY=i,setTimeout((function(){if(null!=l.wheelStartX){var t=s.scrollLeft-l.wheelStartX,e=s.scrollTop-l.wheelStartY,r=e&&l.wheelDY&&e/l.wheelDY||t&&l.wheelDX&&t/l.wheelDX;l.wheelStartX=l.wheelStartY=null,r&&(Rt=(Rt*Pt+r)/(Pt+1),++Pt)}}),200)):(l.wheelDX+=n,l.wheelDY+=i))}}function Gt(t,e,r){if("string"==typeof e&&!(e=Re[e]))return!1;t.display.pollingFast&&St(t)&&(t.display.pollingFast=!1);var n=t.doc,i=n.sel.shift,o=!1;try{Tt(t)&&(t.state.suppressEdits=!0),r&&(n.sel.shift=!1),o=e(t)!=mn}finally{n.sel.shift=i,t.state.suppressEdits=!1}return o}function Vt(t){var e=t.state.keyMaps.slice(0);return t.options.extraKeys&&e.push(t.options.extraKeys),e.push(t.options.keyMap),e}function Kt(t,e){var r=Ge(t.options.keyMap),i=r.auto;clearTimeout(Ft),i&&!Ke(e)&&(Ft=setTimeout((function(){Ge(t.options.keyMap)==r&&(t.options.keyMap=i.call?i.call(null,t):i,A(t))}),50));var o=Ue(e,!0),l=!1;if(!o)return!1;var s=Vt(t);return(l=e.shiftKey?Ve("Shift-"+o,s,(function(e){return Gt(t,e,!0)}))||Ve(o,s,(function(e){if("string"==typeof e?/^go[A-Z]/.test(e):e.motion)return Gt(t,e)})):Ve(o,s,(function(e){return Gt(t,e)})))&&(Qr(e),_(t),n&&(e.oldKeyCode=e.keyCode,e.keyCode=0),cn(t,"keyHandled",t,o,e)),l}e?Rt=-.53:t?Rt=15:s?Rt=-.7:u&&(Rt=-1/3);var Ut,_t=null;function Xt(t){var r=this;if(r.state.focused||jt(r),!(fn(r,t)||r.options.onKeyEvent&&r.options.onKeyEvent(r,qr(t)))){e&&27==t.keyCode&&(t.returnValue=!1);var n=t.keyCode;r.doc.sel.shift=16==n||t.shiftKey;var i=Kt(r,t);a&&(_t=i?n:null,i||88!=n||Yn||!(m?t.metaKey:t.ctrlKey)||r.replaceSelection(""))}}function Yt(t){var r=this;if(!(fn(r,t)||r.options.onKeyEvent&&r.options.onKeyEvent(r,qr(t)))){var i=t.keyCode,o=t.charCode;if(a&&i==_t)return _t=null,void Qr(t);if(!(a&&(!t.which||t.which<10)||c)||!Kt(r,t)){var l=String.fromCharCode(null==o?i:o);this.options.electricChars&&this.doc.mode.electricChars&&this.options.smartIndent&&!Tt(this)&&this.doc.mode.electricChars.indexOf(l)>-1&&setTimeout(yt(r,(function(){Le(r,r.doc.sel.to.line,"smart")})),75),function(t,e,r){var n=Ve("'"+r+"'",Vt(t),(function(e){return Gt(t,e,!0)}));return n&&(Qr(e),_(t),cn(t,"keyHandled",t,"'"+r+"'",e)),n}(r,t,l)||(e&&!n&&(r.display.inputHasSelection=null),Lt(r))}}}function jt(t){"nocursor"!=t.options.readOnly&&(t.state.focused||(sn(t,"focus",t),t.state.focused=!0,-1==t.display.wrapper.className.search(/\bCodeMirror-focused\b/)&&(t.display.wrapper.className+=" CodeMirror-focused"),t.curOp||(kt(t,!0),o&&setTimeout(Tn(kt,t,!0),0))),wt(t),_(t))}function $t(t){t.state.focused&&(sn(t,"blur",t),t.state.focused=!1,t.display.wrapper.className=t.display.wrapper.className.replace(" CodeMirror-focused","")),clearInterval(t.display.blinker),setTimeout((function(){t.state.focused||(t.doc.sel.shift=!1)}),150)}function Zt(t,r){if(!fn(t,r,"contextmenu")){var i=t.display,o=t.doc.sel;if(!At(i,r)&&!function(t,e){return!!dn(t,"gutterContextMenu")&&Dt(t,e,"gutterContextMenu",!1,sn)}(t,r)){var l=Nt(t,r),s=i.scroller.scrollTop;if(l&&!a){t.options.resetSelectionOnContextMenu&&(ae(o.from,o.to)||ue(l,o.from)||!ue(l,o.to))&&yt(t,me)(t.doc,l,l);var u=i.input.style.cssText;if(i.inputDiv.style.position="absolute",i.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(r.clientY-5)+"px; left: "+(r.clientX-5)+"px; z-index: 1000; background: white; outline: none;border-width: 0; outline: none; overflow: hidden; opacity: .05; -ms-opacity: .05; filter: alpha(opacity=5);",Mt(t),kt(t,!0),ae(o.from,o.to)&&(i.input.value=i.prevInput=" "),e&&!n&&f(),C){en(r);var c=function(){ln(window,"mouseup",c),setTimeout(h,20)};on(window,"mouseup",c)}else setTimeout(h,50)}}}function f(){if(null!=i.input.selectionStart){var t=i.input.value="​"+(ae(o.from,o.to)?"":i.input.value);i.prevInput="​",i.input.selectionStart=1,i.input.selectionEnd=t.length}}function h(){if(i.inputDiv.style.position="relative",i.input.style.cssText=u,n&&(i.scrollbarV.scrollTop=i.scroller.scrollTop=s),wt(t),null!=i.input.selectionStart){e&&!n||f(),clearTimeout(Ut);var r=0,o=function(){" "==i.prevInput&&0==i.input.selectionStart?yt(t,Re.selectAll)(t):r++<10?Ut=setTimeout(o,500):kt(t)};Ut=setTimeout(o,200)}}}var qt=S.changeEnd=function(t){return t.text?se(t.from.line+t.text.length-1,Cn(t.text).length+(1==t.text.length?t.from.ch:0)):t.to};function Qt(t,e,r){if(!ue(e.from,r))return he(t,r);var n=e.text.length-1-(e.to.line-e.from.line);if(r.line>e.to.line+n){var i=r.line-n,o=t.first+t.size-1;return i>o?se(o,Or(t,o).text.length):de(r,Or(t,i).text.length)}if(r.line==e.to.line+n)return de(r,Cn(e.text).length+(1==e.text.length?e.from.ch:0)+Or(t,e.to.line).text.length-e.to.ch);var l=r.line-e.from.line;return de(r,e.text[l].length+(l?0:e.from.ch))}function Jt(t,e,r){if(r&&"object"==typeof r)return{anchor:Qt(t,e,r.anchor),head:Qt(t,e,r.head)};if("start"==r)return{anchor:e.from,head:e.from};var n=qt(e);if("around"==r)return{anchor:e.from,head:n};if("end"==r)return{anchor:n,head:n};var i=function(t){if(ue(t,e.from))return t;if(!ue(e.to,t))return n;var r=t.line+e.text.length-(e.to.line-e.from.line)-1,i=t.ch;return t.line==e.to.line&&(i+=n.ch-e.to.ch),se(r,i)};return{anchor:i(t.sel.anchor),head:i(t.sel.head)}}function te(t,e,r){var n={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){this.canceled=!0}};return r&&(n.update=function(e,r,n,i){e&&(this.from=he(t,e)),r&&(this.to=he(t,r)),n&&(this.text=n),void 0!==i&&(this.origin=i)}),sn(t,"beforeChange",t,n),t.cm&&sn(t.cm,"beforeChange",t.cm,n),n.canceled?null:{from:n.from,to:n.to,text:n.text,origin:n.origin}}function ee(t,e,r,n){if(t.cm){if(!t.cm.curOp)return yt(t.cm,ee)(t,e,r,n);if(t.cm.state.suppressEdits)return}if(!(dn(t,"beforeChange")||t.cm&&dn(t.cm,"beforeChange"))||(e=te(t,e,!0))){var i=w&&!n&&function(t,e,r){var n=null;if(t.iter(e.line,r.line+1,(function(t){if(t.markedSpans)for(var e=0;e<t.markedSpans.length;++e){var r=t.markedSpans[e].marker;!r.readOnly||n&&-1!=Ln(n,r)||(n||(n=[])).push(r)}})),!n)return null;for(var i=[{from:e,to:r}],o=0;o<n.length;++o)for(var l=n[o],s=l.find(),a=0;a<i.length;++a){var u=i[a];if(!ue(u.to,s.from)&&!ue(s.to,u.from)){var c=[a,1];(ue(u.from,s.from)||!l.inclusiveLeft&&ae(u.from,s.from))&&c.push({from:u.from,to:s.from}),(ue(s.to,u.to)||!l.inclusiveRight&&ae(u.to,s.to))&&c.push({from:s.to,to:u.to}),i.splice.apply(i,c),a+=c.length-1}}return i}(t,e.from,e.to);if(i){for(var o=i.length-1;o>=1;--o)re(t,{from:i[o].from,to:i[o].to,text:[""]});i.length&&re(t,{from:i[0].from,to:i[0].to,text:e.text},r)}else re(t,e,r)}}function re(t,e,r){if(1!=e.text.length||""!=e.text[0]||!ae(e.from,e.to)){var n=Jt(t,e,r);Ur(t,e,n,t.cm?t.cm.curOp.id:NaN),oe(t,e,n,qe(t,e));var i=[];Dr(t,(function(t,r){r||-1!=Ln(i,t.history)||($r(t.history,e),i.push(t.history)),oe(t,e,null,qe(t,e))}))}}function ne(t,e){if(!t.cm||!t.cm.state.suppressEdits){var r=t.history,n=("undo"==e?r.done:r.undone).pop();if(n){var i={changes:[],anchorBefore:n.anchorAfter,headBefore:n.headAfter,anchorAfter:n.anchorBefore,headAfter:n.headBefore,generation:r.generation};("undo"==e?r.undone:r.done).push(i),r.generation=n.generation||++r.maxGeneration;for(var o=dn(t,"beforeChange")||t.cm&&dn(t.cm,"beforeChange"),l=n.changes.length-1;l>=0;--l){var s=n.changes[l];if(s.origin=e,o&&!te(t,s,!1))return void(("undo"==e?r.done:r.undone).length=0);i.changes.push(Kr(t,s));var a=l?Jt(t,s,null):{anchor:n.anchorBefore,head:n.headBefore};oe(t,s,a,Qe(t,s));var u=[];Dr(t,(function(t,e){e||-1!=Ln(u,t.history)||($r(t.history,s),u.push(t.history)),oe(t,s,null,Qe(t,s))}))}}}}function ie(t,e){function r(t){return se(t.line+e,t.ch)}t.first+=e,t.cm&&Ct(t.cm,t.first,t.first,e),t.sel.head=r(t.sel.head),t.sel.anchor=r(t.sel.anchor),t.sel.from=r(t.sel.from),t.sel.to=r(t.sel.to)}function oe(t,e,r,n){if(t.cm&&!t.cm.curOp)return yt(t.cm,oe)(t,e,r,n);if(e.to.line<t.first)ie(t,e.text.length-1-(e.to.line-e.from.line));else if(!(e.from.line>t.lastLine())){if(e.from.line<t.first){var i=e.text.length-1-(t.first-e.from.line);ie(t,i),e={from:se(t.first,0),to:se(e.to.line+i,e.to.ch),text:[Cn(e.text)],origin:e.origin}}var o=t.lastLine();e.to.line>o&&(e={from:e.from,to:se(o,Or(t,o).text.length),text:[e.text[0]],origin:e.origin}),e.removed=Er(t,e.from,e.to),r||(r=Jt(t,e,null)),t.cm?function(t,e,r,n){var i=t.doc,o=t.display,l=e.from,s=e.to,a=!1,u=l.line;t.options.lineWrapping||(u=Fr(rr(i,Or(i,l.line))),i.iter(u,s.line+1,(function(t){if(t==o.maxLine)return a=!0,!0})));ue(i.sel.head,e.from)||ue(e.to,i.sel.head)||(t.curOp.cursorActivity=!0);Sr(i,e,r,n,M(t)),t.options.lineWrapping||(i.iter(u,l.line+e.text.length,(function(t){var e=W(i,t);e>o.maxLineLength&&(o.maxLine=t,o.maxLineLength=e,o.maxLineChanged=!0,a=!1)})),a&&(t.curOp.updateMaxLine=!0));i.frontier=Math.min(i.frontier,l.line),X(t,400);var c=e.text.length-(s.line-l.line)-1;if(Ct(t,l.line,s.line+1,c),dn(t,"change")){var f={from:l,to:s,text:e.text,removed:e.removed,origin:e.origin};if(t.curOp.textChanged){for(var h=t.curOp.textChanged;h.next;h=h.next);h.next=f}else t.curOp.textChanged=f}}(t.cm,e,n,r):Sr(t,e,n,r)}}function le(t,e,r,n,i){if(n||(n=r),ue(n,r)){var o=n;n=r,r=o}"string"==typeof e&&(e=Kn(e)),ee(t,{from:r,to:n,text:e,origin:i},null)}function se(t,e){if(!(this instanceof se))return new se(t,e);this.line=t,this.ch=e}function ae(t,e){return t.line==e.line&&t.ch==e.ch}function ue(t,e){return t.line<e.line||t.line==e.line&&t.ch<e.ch}function ce(t){return se(t.line,t.ch)}function fe(t,e){return Math.max(t.first,Math.min(e,t.first+t.size-1))}function he(t,e){if(e.line<t.first)return se(t.first,0);var r=t.first+t.size-1;return e.line>r?se(r,Or(t,r).text.length):de(e,Or(t,e.line).text.length)}function de(t,e){var r=t.ch;return null==r||r>e?se(t.line,e):r<0?se(t.line,0):t}function pe(t,e){return e>=t.first&&e<t.first+t.size}function ge(t,e,r,n){if(t.sel.shift||t.sel.extend){var i=t.sel.anchor;if(r){var o=ue(e,i);o!=ue(r,i)?(i=e,e=r):o!=ue(e,r)&&(e=r)}me(t,i,e,n)}else me(t,e,r||e,n);t.cm&&(t.cm.curOp.userSelChange=!0)}function me(t,e,r,n,i){if(!i&&dn(t,"beforeSelectionChange")||t.cm&&dn(t.cm,"beforeSelectionChange")){var o=function(t,e,r){var n={anchor:e,head:r};return sn(t,"beforeSelectionChange",t,n),t.cm&&sn(t.cm,"beforeSelectionChange",t.cm,n),n.anchor=he(t,n.anchor),n.head=he(t,n.head),n}(t,e,r);r=o.head,e=o.anchor}var l=t.sel;if(l.goalColumn=null,null==n&&(n=ue(r,l.head)?-1:1),!i&&ae(e,l.anchor)||(e=ye(t,e,n,"push"!=i)),!i&&ae(r,l.head)||(r=ye(t,r,n,"push"!=i)),!ae(l.anchor,e)||!ae(l.head,r)){l.anchor=e,l.head=r;var s=ue(r,e);l.from=s?r:e,l.to=s?e:r,t.cm&&(t.cm.curOp.updateInput=t.cm.curOp.selectionChanged=t.cm.curOp.cursorActivity=!0),cn(t,"cursorActivity",t)}}function ve(t){me(t.doc,t.doc.sel.from,t.doc.sel.to,null,"push")}function ye(t,e,r,n){var i=!1,o=e,l=r||1;t.cantEdit=!1;t:for(;;){var s=Or(t,o.line);if(s.markedSpans)for(var a=0;a<s.markedSpans.length;++a){var u=s.markedSpans[a],c=u.marker;if((null==u.from||(c.inclusiveLeft?u.from<=o.ch:u.from<o.ch))&&(null==u.to||(c.inclusiveRight?u.to>=o.ch:u.to>o.ch))){if(n&&(sn(c,"beforeCursorEnter"),c.explicitlyCleared)){if(s.markedSpans){--a;continue}break}if(!c.atomic)continue;var f=c.find()[l<0?"from":"to"];if(ae(f,o)&&(f.ch+=l,f.ch<0?f=f.line>t.first?he(t,se(f.line-1)):null:f.ch>s.text.length&&(f=f.line<t.first+t.size-1?se(f.line+1,0):null),!f)){if(i)return n?(t.cantEdit=!0,se(t.first,0)):ye(t,e,r,!0);i=!0,f=e,l=-l}o=f;continue t}}return o}}function be(t,e,r,n){for(null==n&&(n=0);;){var i=!1,o=st(t,e),l=r&&r!=e?st(t,r):o,s=xe(t,Math.min(o.left,l.left),Math.min(o.top,l.top)-n,Math.max(o.left,l.left),Math.max(o.bottom,l.bottom)+n),a=t.doc.scrollTop,u=t.doc.scrollLeft;if(null!=s.scrollTop&&(zt(t,s.scrollTop),Math.abs(t.doc.scrollTop-a)>1&&(i=!0)),null!=s.scrollLeft&&(It(t,s.scrollLeft),Math.abs(t.doc.scrollLeft-u)>1&&(i=!0)),!i)return o}}function xe(t,e,r,n,i){var o=t.display,l=ft(t.display);r<0&&(r=0);var s=o.scroller.clientHeight-gn,a=o.scroller.scrollTop,u={},c=t.doc.height+Z(o),f=r<l,h=i>c-l;if(r<a)u.scrollTop=f?0:r;else if(i>a+s){var d=Math.min(r,(h?c:i)-s);d!=a&&(u.scrollTop=d)}var p=o.scroller.clientWidth-gn,g=o.scroller.scrollLeft;e+=o.gutters.offsetWidth,n+=o.gutters.offsetWidth;var m=o.gutters.offsetWidth,v=e<m+10;return e<g+m||v?(v&&(e=0),u.scrollLeft=Math.max(0,e-10-m)):n>p+g-3&&(u.scrollLeft=n+10-p),u}function Ce(t,e,r){t.curOp.updateScrollPos={scrollLeft:null==e?t.doc.scrollLeft:e,scrollTop:null==r?t.doc.scrollTop:r}}function we(t,e,r){var n=t.curOp.updateScrollPos||(t.curOp.updateScrollPos={scrollLeft:t.doc.scrollLeft,scrollTop:t.doc.scrollTop}),i=t.display.scroller;n.scrollTop=Math.max(0,Math.min(i.scrollHeight-i.clientHeight,n.scrollTop+r)),n.scrollLeft=Math.max(0,Math.min(i.scrollWidth-i.clientWidth,n.scrollLeft+e))}function Le(t,e,r,n){var i=t.doc;if(null==r&&(r="add"),"smart"==r)if(t.doc.mode.indent)var o=j(t,e);else r="prev";var l,s=t.options.tabSize,a=Or(i,e),u=yn(a.text,null,s),c=a.text.match(/^\s*/)[0];if("smart"==r&&(l=t.doc.mode.indent(o,a.text.slice(c.length),a.text))==mn){if(!n)return;r="prev"}"prev"==r?l=e>i.first?yn(Or(i,e-1).text,null,s):0:"add"==r?l=u+t.options.indentUnit:"subtract"==r?l=u-t.options.indentUnit:"number"==typeof r&&(l=u+r),l=Math.max(0,l);var f="",h=0;if(t.options.indentWithTabs)for(var d=Math.floor(l/s);d;--d)h+=s,f+="\t";h<l&&(f+=xn(l-h)),f!=c?le(t.doc,f,se(e,0),se(e,c.length),"+input"):i.sel.head.line==e&&i.sel.head.ch<c.length&&me(i,se(e,c.length),se(e,c.length),1),a.stateAfter=null}function Se(t,e,r){var n=e,i=e,o=t.doc;return"number"==typeof e?i=Or(o,fe(o,e)):n=Fr(e),null==n?null:r(i,n)?(Ct(t,n,n+1),i):null}function ke(t,e,r,n,i){var o=e.line,l=e.ch,s=r,a=Or(t,o),u=!0;function c(e){var n,s=(i?ni:ii)(a,l,r,!0);if(null==s){if(e||!((n=o+r)<t.first||n>=t.first+t.size?u=!1:(o=n,a=Or(t,n))))return u=!1;l=i?(r<0?Qn:qn)(a):r<0?a.text.length:0}else l=s;return!0}if("char"==n)c();else if("column"==n)c(!0);else if("word"==n||"group"==n)for(var f=null,h="group"==n,d=!0;!(r<0)||c(!d);d=!1){var p=a.text.charAt(l)||"\n",g=Nn(p)?"w":h?/\s/.test(p)?null:"p":null;if(f&&f!=g){r<0&&(r=1,c());break}if(g&&(f=g),r>0&&!c(!d))break}var m=ye(t,se(o,l),s,!0);return u||(m.hitSide=!0),m}function Me(t,e,r,n){var i,o=t.doc,l=e.left;if("page"==n){var s=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);i=e.top+r*(s-(r<0?1.5:.5)*ft(t.display))}else"line"==n&&(i=r>0?e.bottom+3:e.top-3);for(;;){var a=ut(t,l,i);if(!a.outside)break;if(r<0?i<=0:i>=o.height){a.hitSide=!0;break}i+=5*r}return a}function Te(t,e){var r=e.ch,n=e.ch;if(t){(e.xRel<0||n==t.length)&&r?--r:++n;for(var i=t.charAt(r),o=Nn(i)?Nn:/\s/.test(i)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&!Nn(t)};r>0&&o(t.charAt(r-1));)--r;for(;n<t.length&&o(t.charAt(n));)++n}return{from:se(e.line,r),to:se(e.line,n)}}S.Pos=se,S.prototype={constructor:S,focus:function(){window.focus(),Mt(this),Lt(this)},setOption:function(t,e){var r=this.options,n=r[t];r[t]==e&&"mode"!=t||(r[t]=e,Ae.hasOwnProperty(t)&&yt(this,Ae[t])(this,e,n))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,e){this.state.keyMaps[e?"push":"unshift"](t)},removeKeyMap:function(t){for(var e=this.state.keyMaps,r=0;r<e.length;++r)if(e[r]==t||"string"!=typeof e[r]&&e[r].name==t)return e.splice(r,1),!0},addOverlay:yt(null,(function(t,e){var r=t.token?t:S.getMode(this.options,t);if(r.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:r,modeSpec:t,opaque:e&&e.opaque}),this.state.modeGen++,Ct(this)})),removeOverlay:yt(null,(function(t){for(var e=this.state.overlays,r=0;r<e.length;++r){var n=e[r].modeSpec;if(n==t||"string"==typeof t&&n.name==t)return e.splice(r,1),this.state.modeGen++,void Ct(this)}})),indentLine:yt(null,(function(t,e,r){"string"!=typeof e&&"number"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),pe(this.doc,t)&&Le(this,t,e,r)})),indentSelection:yt(null,(function(t){var e=this.doc.sel;if(ae(e.from,e.to))return Le(this,e.from.line,t);for(var r=e.to.line-(e.to.ch?0:1),n=e.from.line;n<=r;++n)Le(this,n,t)})),getTokenAt:function(t,e){for(var r=this.doc,n=j(this,(t=he(r,t)).line,e),i=this.doc.mode,o=new _e(Or(r,t.line).text,this.options.tabSize);o.pos<t.ch&&!o.eol();){o.start=o.pos;var l=i.token(o,n)}return{start:o.start,end:o.pos,string:o.current(),className:l||null,type:l||null,state:n}},getTokenTypeAt:function(t){t=he(this.doc,t);var e=pr(this,Or(this.doc,t.line)),r=0,n=(e.length-1)/2,i=t.ch;if(0==i)return e[2];for(;;){var o=r+n>>1;if((o?e[2*o-1]:0)>=i)n=o;else{if(!(e[2*o+1]<i))return e[2*o+2];r=o+1}}},getModeAt:function(t){var e=this.doc.mode;return e.innerMode?S.innerMode(e,this.getTokenAt(t).state).mode:e},getHelper:function(t,e){if(Ie.hasOwnProperty(e)){var r=Ie[e],n=this.getModeAt(t);return n[e]&&r[n[e]]||n.helperType&&r[n.helperType]||r[n.name]}},getStateAfter:function(t,e){var r=this.doc;return j(this,(t=fe(r,null==t?r.first+r.size-1:t))+1,e)},cursorCoords:function(t,e){var r=this.doc.sel;return st(this,null==t?r.head:"object"==typeof t?he(this.doc,t):t?r.from:r.to,e||"page")},charCoords:function(t,e){return lt(this,he(this.doc,t),e||"page")},coordsChar:function(t,e){return ut(this,(t=ot(this,t,e||"page")).left,t.top)},lineAtHeight:function(t,e){return t=ot(this,{top:t,left:0},e||"page").top,Pr(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,e){var r=!1,n=this.doc.first+this.doc.size-1;t<this.doc.first?t=this.doc.first:t>n&&(t=n,r=!0);var i=Or(this.doc,t);return it(this,Or(this.doc,t),{top:0,left:0},e||"page").top+(r?i.height:0)},defaultTextHeight:function(){return ft(this.display)},defaultCharWidth:function(){return ht(this.display)},setGutterMarker:yt(null,(function(t,e,r){return Se(this,t,(function(t){var n=t.gutterMarkers||(t.gutterMarkers={});return n[e]=r,!r&&Hn(n)&&(t.gutterMarkers=null),!0}))})),clearGutter:yt(null,(function(t){var e=this,r=e.doc,n=r.first;r.iter((function(r){r.gutterMarkers&&r.gutterMarkers[t]&&(r.gutterMarkers[t]=null,Ct(e,n,n+1),Hn(r.gutterMarkers)&&(r.gutterMarkers=null)),++n}))})),addLineClass:yt(null,(function(t,e,r){return Se(this,t,(function(t){var n="text"==e?"textClass":"background"==e?"bgClass":"wrapClass";if(t[n]){if(new RegExp("(?:^|\\s)"+r+"(?:$|\\s)").test(t[n]))return!1;t[n]+=" "+r}else t[n]=r;return!0}))})),removeLineClass:yt(null,(function(t,e,r){return Se(this,t,(function(t){var n="text"==e?"textClass":"background"==e?"bgClass":"wrapClass",i=t[n];if(!i)return!1;if(null==r)t[n]=null;else{var o=i.match(new RegExp("(?:^|\\s+)"+r+"(?:$|\\s+)"));if(!o)return!1;var l=o.index+o[0].length;t[n]=i.slice(0,o.index)+(o.index&&l!=i.length?" ":"")+i.slice(l)||null}return!0}))})),addLineWidget:yt(null,(function(t,e,r){return function(t,e,r,n){var i=new sr(t,r,n);i.noHScroll&&(t.display.alignWidgets=!0);return Se(t,e,(function(e){var r=e.widgets||(e.widgets=[]);if(null==i.insertAt?r.push(i):r.splice(Math.min(r.length-1,Math.max(0,i.insertAt)),0,i),i.line=e,!nr(t.doc,e)||i.showIfHidden){var n=Rr(t,e)<t.doc.scrollTop;Ir(e,e.height+ur(i)),n&&we(t,0,i.height)}return!0})),i}(this,t,e,r)})),removeLineWidget:function(t){t.clear()},lineInfo:function(t){if("number"==typeof t){if(!pe(this.doc,t))return null;var e=t;if(!(t=Or(this.doc,t)))return null}else{if(null==(e=Fr(t)))return null}return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(t,e,r,n,i){var o,l,s,a,u,c,f=this.display,h=(t=st(this,he(this.doc,t))).bottom,d=t.left;if(e.style.position="absolute",f.sizer.appendChild(e),"over"==n)h=t.top;else if("above"==n||"near"==n){var p=Math.max(f.wrapper.clientHeight,this.doc.height),g=Math.max(f.sizer.clientWidth,f.lineSpace.clientWidth);("above"==n||t.bottom+e.offsetHeight>p)&&t.top>e.offsetHeight?h=t.top-e.offsetHeight:t.bottom+e.offsetHeight<=p&&(h=t.bottom),d+e.offsetWidth>g&&(d=g-e.offsetWidth)}e.style.top=h+"px",e.style.left=e.style.right="","right"==i?(d=f.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==i?d=0:"middle"==i&&(d=(f.sizer.clientWidth-e.offsetWidth)/2),e.style.left=d+"px"),r&&(o=this,l=d,s=h,a=d+e.offsetWidth,u=h+e.offsetHeight,null!=(c=xe(o,l,s,a,u)).scrollTop&&zt(o,c.scrollTop),null!=c.scrollLeft&&It(o,c.scrollLeft))},triggerOnKeyDown:yt(null,Xt),execCommand:function(t){return Re[t](this)},findPosH:function(t,e,r,n){var i=1;e<0&&(i=-1,e=-e);for(var o=0,l=he(this.doc,t);o<e&&!(l=ke(this.doc,l,i,r,n)).hitSide;++o);return l},moveH:yt(null,(function(t,e){var r,n=this.doc.sel;r=n.shift||n.extend||ae(n.from,n.to)?ke(this.doc,n.head,t,e,this.options.rtlMoveVisually):t<0?n.from:n.to,ge(this.doc,r,r,t)})),deleteH:yt(null,(function(t,e){var r=this.doc.sel;ae(r.from,r.to)?le(this.doc,"",r.from,ke(this.doc,r.head,t,e,!1),"+delete"):le(this.doc,"",r.from,r.to,"+delete"),this.curOp.userSelChange=!0})),findPosV:function(t,e,r,n){var i=1,o=n;e<0&&(i=-1,e=-e);for(var l=0,s=he(this.doc,t);l<e;++l){var a=st(this,s,"div");if(null==o?o=a.left:a.left=o,(s=Me(this,a,i,r)).hitSide)break}return s},moveV:yt(null,(function(t,e){var r=this.doc.sel,n=st(this,r.head,"div");null!=r.goalColumn&&(n.left=r.goalColumn);var i=Me(this,n,t,e);"page"==e&&we(this,0,lt(this,i,"div").top-n.top),ge(this.doc,i,i,t),r.goalColumn=n.left})),toggleOverwrite:function(t){null!=t&&t==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?this.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite",""))},hasFocus:function(){return this.state.focused},scrollTo:yt(null,(function(t,e){Ce(this,t,e)})),getScrollInfo:function(){var t=this.display.scroller,e=gn;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-e,width:t.scrollWidth-e,clientHeight:t.clientHeight-e,clientWidth:t.clientWidth-e}},scrollIntoView:yt(null,(function(t,e){null==t?t={from:this.doc.sel.head,to:null}:"number"==typeof t?t={from:se(t,0),to:null}:null==t.from&&(t={from:t,to:null}),t.to||(t.to=t.from),e||(e=0);var r=t;null!=t.from.line&&(this.curOp.scrollToPos={from:t.from,to:t.to,margin:e},r={from:st(this,t.from),to:st(this,t.to)});var n=xe(this,Math.min(r.from.left,r.to.left),Math.min(r.from.top,r.to.top)-e,Math.max(r.from.right,r.to.right),Math.max(r.from.bottom,r.to.bottom)+e);Ce(this,n.scrollLeft,n.scrollTop)})),setSize:yt(null,(function(t,e){function r(t){return"number"==typeof t||/^\d+$/.test(String(t))?t+"px":t}null!=t&&(this.display.wrapper.style.width=r(t)),null!=e&&(this.display.wrapper.style.height=r(e)),this.options.lineWrapping&&(this.display.measureLineCache.length=this.display.measureLineCachePos=0),this.curOp.forceUpdate=!0})),operation:function(t){return xt(this,t)},refresh:yt(null,(function(){var t=null==this.display.cachedTextHeight;et(this),Ce(this,this.doc.scrollLeft,this.doc.scrollTop),Ct(this),t&&T(this)})),swapDoc:yt(null,(function(t){var e=this.doc;return e.cm=null,Wr(this,t),et(this),kt(this,!0),Ce(this,t.scrollLeft,t.scrollTop),cn(this,"swapDoc",this,e),e})),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},pn(S);var Ae=S.optionHandlers={},Ne=S.defaults={};function He(t,e,r,n){S.defaults[t]=e,r&&(Ae[t]=n?function(t,e,n){n!=De&&r(t,e,n)}:r)}var De=S.Init={toString:function(){return"CodeMirror.Init"}};He("value","",(function(t,e){t.setValue(e)}),!0),He("mode",null,(function(t,e){t.doc.modeOption=e,k(t)}),!0),He("indentUnit",2,k,!0),He("indentWithTabs",!1),He("smartIndent",!0),He("tabSize",4,(function(t){k(t),et(t),Ct(t)}),!0),He("specialChars",/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\ufeff]/g,(function(t,e){t.options.specialChars=new RegExp(e.source+(e.test("\t")?"":"|\t"),"g"),t.refresh()}),!0),He("specialCharPlaceholder",(function(t){var e=Wn("span","•","cm-invalidchar");return e.title="\\u"+t.charCodeAt(0).toString(16),e}),(function(t){t.refresh()}),!0),He("electricChars",!0),He("rtlMoveVisually",!v),He("wholeLineUpdateBefore",!0),He("theme","default",(function(t){N(t),H(t)}),!0),He("keyMap","default",A),He("extraKeys",null),He("onKeyEvent",null),He("onDragEvent",null),He("lineWrapping",!1,(function(t){t.options.lineWrapping?(t.display.wrapper.className+=" CodeMirror-wrap",t.display.sizer.style.minWidth=""):(t.display.wrapper.className=t.display.wrapper.className.replace(" CodeMirror-wrap",""),O(t)),T(t),Ct(t),et(t),setTimeout((function(){z(t)}),100)}),!0),He("gutters",[],(function(t){E(t.options),H(t)}),!0),He("fixedGutter",!0,(function(t,e){t.display.gutters.style.left=e?R(t.display)+"px":"0",t.refresh()}),!0),He("coverGutterNextToScrollbar",!1,z,!0),He("lineNumbers",!1,(function(t){E(t.options),H(t)}),!0),He("firstLineNumber",1,H,!0),He("lineNumberFormatter",(function(t){return t}),H,!0),He("showCursorWhenSelecting",!1,U,!0),He("resetSelectionOnContextMenu",!0),He("readOnly",!1,(function(t,e){"nocursor"==e?($t(t),t.display.input.blur(),t.display.disabled=!0):(t.display.disabled=!1,e||kt(t,!0))})),He("dragDrop",!0),He("cursorBlinkRate",530),He("cursorScrollMargin",0),He("cursorHeight",1),He("workTime",100),He("workDelay",100),He("flattenSpans",!0),He("pollInterval",100),He("undoDepth",40,(function(t,e){t.doc.history.undoDepth=e})),He("historyEventDelay",500),He("viewportMargin",10,(function(t){t.refresh()}),!0),He("maxHighlightLength",1e4,(function(t){k(t),t.refresh()}),!0),He("crudeMeasuringFrom",1e4),He("moveInputWithCursor",!0,(function(t,e){e||(t.display.inputDiv.style.top=t.display.inputDiv.style.left=0)})),He("tabindex",null,(function(t,e){t.display.input.tabIndex=e||""})),He("autofocus",null);var We=S.modes={},Oe=S.mimeModes={};S.defineMode=function(t,e){if(S.defaults.mode||"null"==t||(S.defaults.mode=t),arguments.length>2){e.dependencies=[];for(var r=2;r<arguments.length;++r)e.dependencies.push(arguments[r])}We[t]=e},S.defineMIME=function(t,e){Oe[t]=e},S.resolveMode=function(t){if("string"==typeof t&&Oe.hasOwnProperty(t))t=Oe[t];else if(t&&"string"==typeof t.name&&Oe.hasOwnProperty(t.name)){var e=Oe[t.name];(t=Sn(e,t)).name=e.name}else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return S.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},S.getMode=function(t,e){e=S.resolveMode(e);var r=We[e.name];if(!r)return S.getMode(t,"text/plain");var n=r(t,e);if(Ee.hasOwnProperty(e.name)){var i=Ee[e.name];for(var o in i)i.hasOwnProperty(o)&&(n.hasOwnProperty(o)&&(n["_"+o]=n[o]),n[o]=i[o])}return n.name=e.name,n},S.defineMode("null",(function(){return{token:function(t){t.skipToEnd()}}})),S.defineMIME("text/plain","null");var Ee=S.modeExtensions={};S.extendMode=function(t,e){kn(e,Ee.hasOwnProperty(t)?Ee[t]:Ee[t]={})},S.defineExtension=function(t,e){S.prototype[t]=e},S.defineDocExtension=function(t,e){Ar.prototype[t]=e},S.defineOption=He;var ze=[];S.defineInitHook=function(t){ze.push(t)};var Ie=S.helpers={};function Fe(t,e){if(!0===e)return e;if(t.copyState)return t.copyState(e);var r={};for(var n in e){var i=e[n];i instanceof Array&&(i=i.concat([])),r[n]=i}return r}function Pe(t,e,r){return!t.startState||t.startState(e,r)}S.registerHelper=function(t,e,r){Ie.hasOwnProperty(t)||(Ie[t]=S[t]={}),Ie[t][e]=r},S.isWordChar=Nn,S.copyState=Fe,S.startState=Pe,S.innerMode=function(t,e){for(;t.innerMode;){var r=t.innerMode(e);if(!r||r.mode==t)break;e=r.state,t=r.mode}return r||{mode:t,state:e}};var Re=S.commands={selectAll:function(t){t.setSelection(se(t.firstLine(),0),se(t.lastLine()))},killLine:function(t){var e=t.getCursor(!0),r=t.getCursor(!1),n=!ae(e,r);n||t.getLine(e.line).length!=e.ch?t.replaceRange("",e,n?r:se(e.line),"+delete"):t.replaceRange("",e,se(e.line+1,0),"+delete")},deleteLine:function(t){var e=t.getCursor().line;t.replaceRange("",se(e,0),se(e),"+delete")},delLineLeft:function(t){var e=t.getCursor();t.replaceRange("",se(e.line,0),e,"+delete")},undo:function(t){t.undo()},redo:function(t){t.redo()},goDocStart:function(t){t.extendSelection(se(t.firstLine(),0))},goDocEnd:function(t){t.extendSelection(se(t.lastLine()))},goLineStart:function(t){t.extendSelection(Jn(t,t.getCursor().line))},goLineStartSmart:function(t){var e=t.getCursor(),r=Jn(t,e.line),n=t.getLineHandle(r.line),i=Br(n);if(i&&0!=i[0].level)t.extendSelection(r);else{var o=Math.max(0,n.text.search(/\S/)),l=e.line==r.line&&e.ch<=o&&e.ch;t.extendSelection(se(r.line,l?0:o))}},goLineEnd:function(t){t.extendSelection(function(t,e){var r,n;for(;r=er(n=Or(t.doc,e));)e=r.find().to.line;var i=Br(n),o=i?i[0].level%2?qn(n):Qn(n):n.text.length;return se(e,o)}(t,t.getCursor().line))},goLineRight:function(t){var e=t.charCoords(t.getCursor(),"div").top+5;t.extendSelection(t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:e},"div"))},goLineLeft:function(t){var e=t.charCoords(t.getCursor(),"div").top+5;t.extendSelection(t.coordsChar({left:0,top:e},"div"))},goLineUp:function(t){t.moveV(-1,"line")},goLineDown:function(t){t.moveV(1,"line")},goPageUp:function(t){t.moveV(-1,"page")},goPageDown:function(t){t.moveV(1,"page")},goCharLeft:function(t){t.moveH(-1,"char")},goCharRight:function(t){t.moveH(1,"char")},goColumnLeft:function(t){t.moveH(-1,"column")},goColumnRight:function(t){t.moveH(1,"column")},goWordLeft:function(t){t.moveH(-1,"word")},goGroupRight:function(t){t.moveH(1,"group")},goGroupLeft:function(t){t.moveH(-1,"group")},goWordRight:function(t){t.moveH(1,"word")},delCharBefore:function(t){t.deleteH(-1,"char")},delCharAfter:function(t){t.deleteH(1,"char")},delWordBefore:function(t){t.deleteH(-1,"word")},delWordAfter:function(t){t.deleteH(1,"word")},delGroupBefore:function(t){t.deleteH(-1,"group")},delGroupAfter:function(t){t.deleteH(1,"group")},indentAuto:function(t){t.indentSelection("smart")},indentMore:function(t){t.indentSelection("add")},indentLess:function(t){t.indentSelection("subtract")},insertTab:function(t){t.replaceSelection("\t","end","+input")},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.replaceSelection("\t","end","+input")},transposeChars:function(t){var e=t.getCursor(),r=t.getLine(e.line);e.ch>0&&e.ch<r.length-1&&t.replaceRange(r.charAt(e.ch)+r.charAt(e.ch-1),se(e.line,e.ch-1),se(e.line,e.ch+1))},newlineAndIndent:function(t){yt(t,(function(){t.replaceSelection("\n","end","+input"),t.indentLine(t.getCursor().line,null,!0)}))()},toggleOverwrite:function(t){t.toggleOverwrite()}},Be=S.keyMap={};function Ge(t){return"string"==typeof t?Be[t]:t}function Ve(t,e,r){function n(e){var i=(e=Ge(e))[t];if(!1===i)return"stop";if(null!=i&&r(i))return!0;if(e.nofallthrough)return"stop";var o=e.fallthrough;if(null==o)return!1;if("[object Array]"!=Object.prototype.toString.call(o))return n(o);for(var l=0,s=o.length;l<s;++l){var a=n(o[l]);if(a)return a}return!1}for(var i=0;i<e.length;++i){var o=n(e[i]);if(o)return"stop"!=o}}function Ke(t){var e=jn[t.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e}function Ue(t,e){if(a&&34==t.keyCode&&t.char)return!1;var r=jn[t.keyCode];return null!=r&&!t.altGraphKey&&(t.altKey&&(r="Alt-"+r),(x?t.metaKey:t.ctrlKey)&&(r="Ctrl-"+r),(x?t.ctrlKey:t.metaKey)&&(r="Cmd-"+r),!e&&t.shiftKey&&(r="Shift-"+r),r)}function _e(t,e){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lastColumnPos=this.lastColumnValue=0}function Xe(t,e){this.lines=[],this.type=e,this.doc=t}function Ye(t,e,r,n,i){if(n&&n.shared)return function(t,e,r,n,i){(n=kn(n)).shared=!1;var o=[Ye(t,e,r,n,i)],l=o[0],s=n.replacedWith;return Dr(t,(function(t){s&&(n.replacedWith=s.cloneNode(!0)),o.push(Ye(t,he(t,e),he(t,r),n,i));for(var a=0;a<t.linked.length;++a)if(t.linked[a].isParent)return;l=Cn(o)})),new je(o,l)}(t,e,r,n,i);if(t.cm&&!t.cm.curOp)return yt(t.cm,Ye)(t,e,r,n,i);var o=new Xe(t,i);if(ue(r,e)||ae(e,r)&&"range"==i&&(!n.inclusiveLeft||!n.inclusiveRight))return o;n&&kn(n,o),o.replacedWith&&(o.collapsed=!0,o.replacedWith=Wn("span",[o.replacedWith],"CodeMirror-widget"),n.handleMouseEvents||(o.replacedWith.ignoreEvents=!0)),o.collapsed&&(L=!0),o.addToHistory&&Ur(t,{from:e,to:r,origin:"markText"},{head:t.sel.head,anchor:t.sel.anchor},NaN);var l,s,a,u=e.line,c=0,f=t.cm;if(t.iter(u,r.line+1,(function(n){f&&o.collapsed&&!f.options.lineWrapping&&rr(t,n)==f.display.maxLine&&(a=!0);var i={from:null,to:null,marker:o};c+=n.text.length,u==e.line&&(i.from=e.ch,c-=e.ch),u==r.line&&(i.to=r.ch,c-=n.text.length-r.ch),o.collapsed&&(u==r.line&&(s=Je(n,r.ch)),u==e.line?l=Je(n,e.ch):Ir(n,0)),function(t,e){t.markedSpans=t.markedSpans?t.markedSpans.concat([e]):[e],e.marker.attachLine(t)}(n,i),++u})),o.collapsed&&t.iter(e.line,r.line+1,(function(e){nr(t,e)&&Ir(e,0)})),o.clearOnEnter&&on(o,"beforeCursorEnter",(function(){o.clear()})),o.readOnly&&(w=!0,(t.history.done.length||t.history.undone.length)&&t.clearHistory()),o.collapsed){if(l!=s)throw new Error("Inserting collapsed marker overlapping an existing one");o.size=c,o.atomic=!0}return f&&(a&&(f.curOp.updateMaxLine=!0),(o.className||o.title||o.startStyle||o.endStyle||o.collapsed)&&Ct(f,e.line,r.line+1),o.atomic&&ve(f)),o}function je(t,e){this.markers=t,this.primary=e;for(var r=0,n=this;r<t.length;++r)t[r].parent=this,on(t[r],"clear",(function(){n.clear()}))}function $e(t,e){if(t)for(var r=0;r<t.length;++r){var n=t[r];if(n.marker==e)return n}}function Ze(t,e){for(var r,n=0;n<t.length;++n)t[n]!=e&&(r||(r=[])).push(t[n]);return r}function qe(t,e){var r=pe(t,e.from.line)&&Or(t,e.from.line).markedSpans,n=pe(t,e.to.line)&&Or(t,e.to.line).markedSpans;if(!r&&!n)return null;var i=e.from.ch,o=e.to.ch,l=ae(e.from,e.to),s=function(t,e,r){if(t)for(var n,i=0;i<t.length;++i){var o=t[i],l=o.marker;if(null==o.from||(l.inclusiveLeft?o.from<=e:o.from<e)||(l.inclusiveLeft&&l.inclusiveRight||"bookmark"==l.type)&&o.from==e&&(!r||!o.marker.insertLeft)){var s=null==o.to||(l.inclusiveRight?o.to>=e:o.to>e);(n||(n=[])).push({from:o.from,to:s?null:o.to,marker:l})}}return n}(r,i,l),a=function(t,e,r){if(t)for(var n,i=0;i<t.length;++i){var o=t[i],l=o.marker;if(null==o.to||(l.inclusiveRight?o.to>=e:o.to>e)||"bookmark"==l.type&&o.from==e&&(!r||o.marker.insertLeft)){var s=null==o.from||(l.inclusiveLeft?o.from<=e:o.from<e);(n||(n=[])).push({from:s?null:o.from-e,to:null==o.to?null:o.to-e,marker:l})}}return n}(n,o,l),u=1==e.text.length,c=Cn(e.text).length+(u?i:0);if(s)for(var f=0;f<s.length;++f){if(null==(h=s[f]).to)(d=$e(a,h.marker))?u&&(h.to=null==d.to?null:d.to+c):h.to=i}if(a)for(f=0;f<a.length;++f){var h,d;if(null!=(h=a[f]).to&&(h.to+=c),null==h.from)(d=$e(s,h.marker))||(h.from=c,u&&(s||(s=[])).push(h));else h.from+=c,u&&(s||(s=[])).push(h)}if(u&&s){for(f=0;f<s.length;++f)null!=s[f].from&&s[f].from==s[f].to&&"bookmark"!=s[f].marker.type&&s.splice(f--,1);s.length||(s=null)}var p=[s];if(!u){var g,m=e.text.length-2;if(m>0&&s)for(f=0;f<s.length;++f)null==s[f].to&&(g||(g=[])).push({from:null,to:null,marker:s[f].marker});for(f=0;f<m;++f)p.push(g);p.push(a)}return p}function Qe(t,e){var r=function(t,e){var r=e["spans_"+t.id];if(!r)return null;for(var n=0,i=[];n<e.text.length;++n)i.push(_r(r[n]));return i}(t,e),n=qe(t,e);if(!r)return n;if(!n)return r;for(var i=0;i<r.length;++i){var o=r[i],l=n[i];if(o&&l)t:for(var s=0;s<l.length;++s){for(var a=l[s],u=0;u<o.length;++u)if(o[u].marker==a.marker)continue t;o.push(a)}else l&&(r[i]=l)}return r}function Je(t,e){var r,n=L&&t.markedSpans;if(n)for(var i,o=0;o<n.length;++o)(i=n[o]).marker.collapsed&&(null==i.from||i.from<e)&&(null==i.to||i.to>e)&&(!r||r.width<i.marker.width)&&(r=i.marker);return r}function tr(t){return Je(t,-1)}function er(t){return Je(t,t.text.length+1)}function rr(t,e){for(var r;r=tr(e);)e=Or(t,r.find().from.line);return e}function nr(t,e){var r=L&&e.markedSpans;if(r)for(var n,i=0;i<r.length;++i)if((n=r[i]).marker.collapsed){if(null==n.from)return!0;if(!n.marker.replacedWith&&0==n.from&&n.marker.inclusiveLeft&&ir(t,e,n))return!0}}function ir(t,e,r){if(null==r.to){var n=Or(t,r.marker.find().to.line);return ir(t,n,$e(n.markedSpans,r.marker))}if(r.marker.inclusiveRight&&r.to==e.text.length)return!0;for(var i,o=0;o<e.markedSpans.length;++o)if((i=e.markedSpans[o]).marker.collapsed&&!i.marker.replacedWith&&i.from==r.to&&(i.marker.inclusiveLeft||r.marker.inclusiveRight)&&ir(t,e,i))return!0}function or(t){var e=t.markedSpans;if(e){for(var r=0;r<e.length;++r)e[r].marker.detachLine(t);t.markedSpans=null}}function lr(t,e){if(e){for(var r=0;r<e.length;++r)e[r].marker.attachLine(t);t.markedSpans=e}}Be.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},Be.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},Be.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delLineLeft",fallthrough:["basic","emacsy"]},Be.default=m?Be.macDefault:Be.pcDefault,Be.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},S.lookupKey=Ve,S.isModifierKey=Ke,S.keyName=Ue,S.fromTextArea=function(t,e){if(e||(e={}),e.value=t.value,!e.tabindex&&t.tabindex&&(e.tabindex=t.tabindex),!e.placeholder&&t.placeholder&&(e.placeholder=t.placeholder),null==e.autofocus){var r=document.body;try{r=document.activeElement}catch(t){}e.autofocus=r==t||null!=t.getAttribute("autofocus")&&r==document.body}function n(){t.value=s.getValue()}if(t.form&&(on(t.form,"submit",n),!e.leaveSubmitMethodAlone)){var i=t.form,o=i.submit;try{var l=i.submit=function(){n(),i.submit=o,i.submit(),i.submit=l}}catch(t){}}t.style.display="none";var s=S((function(e){t.parentNode.insertBefore(e,t.nextSibling)}),e);return s.save=n,s.getTextArea=function(){return t},s.toTextArea=function(){n(),t.parentNode.removeChild(s.getWrapperElement()),t.style.display="",t.form&&(ln(t.form,"submit",n),"function"==typeof t.form.submit&&(t.form.submit=o))},s},_e.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(t){var e=this.string.charAt(this.pos);if("string"==typeof t)var r=e==t;else r=e&&(t.test?t.test(e):t(e));if(r)return++this.pos,e},eatWhile:function(t){for(var e=this.pos;this.eat(t););return this.pos>e},eatSpace:function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},skipToEnd:function(){this.pos=this.string.length},skipTo:function(t){var e=this.string.indexOf(t,this.pos);if(e>-1)return this.pos=e,!0},backUp:function(t){this.pos-=t},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=yn(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue},indentation:function(){return yn(this.string,null,this.tabSize)},match:function(t,e,r){if("string"!=typeof t){var n=this.string.slice(this.pos).match(t);return n&&n.index>0?null:(n&&!1!==e&&(this.pos+=n[0].length),n)}var i=function(t){return r?t.toLowerCase():t};if(i(this.string.substr(this.pos,t.length))==i(t))return!1!==e&&(this.pos+=t.length),!0},current:function(){return this.string.slice(this.start,this.pos)}},S.StringStream=_e,S.TextMarker=Xe,pn(Xe),Xe.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,e=t&&!t.curOp;if(e&&mt(t),dn(this,"clear")){var r=this.find();r&&cn(this,"clear",r.from,r.to)}for(var n=null,i=null,o=0;o<this.lines.length;++o){var l=this.lines[o],s=$e(l.markedSpans,this);null!=s.to&&(i=Fr(l)),l.markedSpans=Ze(l.markedSpans,s),null!=s.from?n=Fr(l):this.collapsed&&!nr(this.doc,l)&&t&&Ir(l,ft(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(o=0;o<this.lines.length;++o){var a=rr(t.doc,this.lines[o]),u=W(t.doc,a);u>t.display.maxLineLength&&(t.display.maxLine=a,t.display.maxLineLength=u,t.display.maxLineChanged=!0)}null!=n&&t&&Ct(t,n,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&ve(t)),e&&vt(t)}},Xe.prototype.find=function(){for(var t,e,r=0;r<this.lines.length;++r){var n=this.lines[r],i=$e(n.markedSpans,this);if(null!=i.from||null!=i.to){var o=Fr(n);null!=i.from&&(t=se(o,i.from)),null!=i.to&&(e=se(o,i.to))}}return"bookmark"==this.type?t:t&&{from:t,to:e}},Xe.prototype.changed=function(){var t=this.find(),e=this.doc.cm;if(t&&e){"bookmark"!=this.type&&(t=t.from);var r=Or(this.doc,t.line);if(function(t,e){var r=Q(t,e);r&&(r.text=r.measure=r.markedSpans=null)}(e,r),t.line>=e.display.showingFrom&&t.line<e.display.showingTo){for(var n=e.display.lineDiv.firstChild;n;n=n.nextSibling)if(n.lineObj==r){n.offsetHeight!=r.height&&Ir(r,n.offsetHeight);break}xt(e,(function(){e.curOp.selectionChanged=e.curOp.forceUpdate=e.curOp.updateMaxLine=!0}))}}},Xe.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;e.maybeHiddenMarkers&&-1!=Ln(e.maybeHiddenMarkers,this)||(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},Xe.prototype.detachLine=function(t){if(this.lines.splice(Ln(this.lines,t),1),!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)}},S.SharedTextMarker=je,pn(je),je.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();cn(this,"clear")}},je.prototype.find=function(){return this.primary.find()};var sr=S.LineWidget=function(t,e,r){if(r)for(var n in r)r.hasOwnProperty(n)&&(this[n]=r[n]);this.cm=t,this.node=e};function ar(t){return function(){var e=!this.cm.curOp;e&&mt(this.cm);try{var r=t.apply(this,arguments)}finally{e&&vt(this.cm)}return r}}function ur(t){return null!=t.height?t.height:(t.node.parentNode&&1==t.node.parentNode.nodeType||En(t.cm.display.measure,Wn("div",[t.node],null,"position: relative")),t.height=t.node.offsetHeight)}pn(sr),sr.prototype.clear=ar((function(){var t=this.line.widgets,e=Fr(this.line);if(null!=e&&t){for(var r=0;r<t.length;++r)t[r]==this&&t.splice(r--,1);t.length||(this.line.widgets=null);var n=Rr(this.cm,this.line)<this.cm.doc.scrollTop;Ir(this.line,Math.max(0,this.line.height-ur(this))),n&&we(this.cm,0,-this.height),Ct(this.cm,e,e+1)}})),sr.prototype.changed=ar((function(){var t=this.height;this.height=null;var e=ur(this)-t;if(e){Ir(this.line,this.line.height+e);var r=Fr(this.line);Ct(this.cm,r,r+1)}}));var cr=S.Line=function(t,e,r){this.text=t,lr(this,e),this.height=r?r(this):1};function fr(t){t.parent=null,or(t)}function hr(t,e,r,n,i,o){var l=r.flattenSpans;null==l&&(l=t.options.flattenSpans);var s,a=0,u=null,c=new _e(e,t.options.tabSize);for(""==e&&r.blankLine&&r.blankLine(n);!c.eol();)c.pos>t.options.maxHighlightLength?(l=!1,o&&gr(t,e,n,c.pos),c.pos=e.length,s=null):s=r.token(c,n),l&&u==s||(a<c.start&&i(c.start,u),a=c.start,u=s),c.start=c.pos;for(;a<c.pos;){var f=Math.min(c.pos,a+5e4);i(f,u),a=f}}function dr(t,e,r,n){var i=[t.state.modeGen];hr(t,e.text,t.doc.mode,r,(function(t,e){i.push(t,e)}),n);for(var o=0;o<t.state.overlays.length;++o){var l=t.state.overlays[o],s=1,a=0;hr(t,e.text,l.mode,!0,(function(t,e){for(var r=s;a<t;){var n=i[s];n>t&&i.splice(s,1,t,i[s+1],n),s+=2,a=Math.min(t,n)}if(e)if(l.opaque)i.splice(r,s-r,t,e),s=r+2;else for(;r<s;r+=2){var o=i[r+1];i[r+1]=o?o+" "+e:e}}))}return i}function pr(t,e){return e.styles&&e.styles[0]==t.state.modeGen||(e.styles=dr(t,e,e.stateAfter=j(t,Fr(e)))),e.styles}function gr(t,e,r,n){var i=t.doc.mode,o=new _e(e,t.options.tabSize);for(o.start=o.pos=n||0,""==e&&i.blankLine&&i.blankLine(r);!o.eol()&&o.pos<=t.options.maxHighlightLength;)i.token(o,r),o.start=o.pos}pn(cr),cr.prototype.lineNo=function(){return Fr(this)};var mr={};function vr(t,e){if(!t)return null;for(;;){var r=t.match(/(?:^|\s)line-(background-)?(\S+)/);if(!r)break;t=t.slice(0,r.index)+t.slice(r.index+r[0].length);var n=r[1]?"bgClass":"textClass";null==e[n]?e[n]=r[2]:new RegExp("(?:^|s)"+r[2]+"(?:$|s)").test(e[n])||(e[n]+=" "+r[2])}return mr[t]||(mr[t]="cm-"+t.replace(/ +/g," cm-"))}function yr(t,r,n,l){for(var s,a=r,u=!0;s=tr(a);)a=Or(t.doc,s.find().from.line);var c,f={pre:Wn("pre"),col:0,pos:0,measure:null,measuredSomething:!1,cm:t,copyWidgets:l};do{a.text&&(u=!1),f.measure=a==r&&n,f.pos=0,f.addToken=f.measure?xr:br,(e||o)&&t.getOption("lineWrapping")&&(f.addToken=Cr(f.addToken));var h=Lr(a,f,pr(t,a));n&&a==r&&!f.measuredSomething&&(n[0]=f.pre.appendChild(Vn(t.display.measure)),f.measuredSomething=!0),h&&(a=Or(t.doc,h.to.line))}while(h);if(!n||f.measuredSomething||n[0]||(n[0]=f.pre.appendChild(u?Wn("span"," "):Vn(t.display.measure))),f.pre.firstChild||nr(t.doc,r)||f.pre.appendChild(document.createTextNode(" ")),n&&(e||i)&&(c=Br(a))){var d=c.length-1;c[d].from==c[d].to&&--d;var p=c[d],g=c[d-1];if(p.from+1==p.to&&g&&p.level<g.level){var m=n[f.pos-1];m&&m.parentNode.insertBefore(m.measureRight=Vn(t.display.measure),m.nextSibling)}}var v=f.textClass?f.textClass+" "+(r.textClass||""):r.textClass;return v&&(f.pre.className=v),sn(t,"renderLine",t,r,f.pre),f}function br(t,e,r,n,i,o){if(e){var l=t.cm.options.specialChars;if(l.test(e)){d=document.createDocumentFragment();for(var s=0;;){l.lastIndex=s;var a=l.exec(e),u=a?a.index-s:e.length-s;if(u&&(d.appendChild(document.createTextNode(e.slice(s,s+u))),t.col+=u),!a)break;if(s+=u+1,"\t"==a[0]){var c=t.cm.options.tabSize,f=c-t.col%c;d.appendChild(Wn("span",xn(f),"cm-tab")),t.col+=f}else{var h=t.cm.options.specialCharPlaceholder(a[0]);d.appendChild(h),t.col+=1}}}else{t.col+=e.length;var d=document.createTextNode(e)}if(r||n||i||t.measure){var p=r||"";n&&(p+=n),i&&(p+=i);h=Wn("span",[d],p);return o&&(h.title=o),t.pre.appendChild(h)}t.pre.appendChild(d)}}function xr(t,r,n,i,o){for(var l=t.cm.options.lineWrapping,s=0;s<r.length;++s){var a=r.charAt(s),u=0==s;a>="\ud800"&&a<"\udbff"&&s<r.length-1?(a=r.slice(s,s+2),++s):s&&l&&Bn(r,s)&&t.pre.appendChild(Wn("wbr"));var c=t.measure[t.pos],f=t.measure[t.pos]=br(t,a,n,u&&i,s==r.length-1&&o);c&&(f.leftSide=c.leftSide||c),e&&l&&" "==a&&s&&!/\s/.test(r.charAt(s-1))&&s<r.length-1&&!/\s/.test(r.charAt(s+1))&&(f.style.whiteSpace="normal"),t.pos+=a.length}r.length&&(t.measuredSomething=!0)}function Cr(t){function e(t){for(var e=" ",r=0;r<t.length-2;++r)e+=r%2?" ":" ";return e+=" "}return function(r,n,i,o,l,s){return t(r,n.replace(/ {3,}/g,e),i,o,l,s)}}function wr(t,e,r,n){var i=!n&&r.replacedWith;if(i&&(t.copyWidgets&&(i=i.cloneNode(!0)),t.pre.appendChild(i),t.measure)){if(e)t.measure[t.pos]=i;else{var o=Vn(t.cm.display.measure);if("bookmark"!=r.type||r.insertLeft){if(t.measure[t.pos])return;t.measure[t.pos]=t.pre.insertBefore(o,i)}else t.measure[t.pos]=t.pre.appendChild(o)}t.measuredSomething=!0}t.pos+=e}function Lr(t,e,r){var n=t.markedSpans,i=t.text,o=0;if(n)for(var l,s,a,u,c,f,h=i.length,d=0,p=(L=1,""),g=0;;){if(g==d){s=a=u=c="",f=null,g=1/0;for(var m=[],v=0;v<n.length;++v){var y=n[v],b=y.marker;y.from<=d&&(null==y.to||y.to>d)?(null!=y.to&&g>y.to&&(g=y.to,a=""),b.className&&(s+=" "+b.className),b.startStyle&&y.from==d&&(u+=" "+b.startStyle),b.endStyle&&y.to==g&&(a+=" "+b.endStyle),b.title&&!c&&(c=b.title),b.collapsed&&(!f||f.marker.size<b.size)&&(f=y)):y.from>d&&g>y.from&&(g=y.from),"bookmark"==b.type&&y.from==d&&b.replacedWith&&m.push(b)}if(f&&(f.from||0)==d&&(wr(e,(null==f.to?h:f.to)-d,f.marker,null==f.from),null==f.to))return f.marker.find();if(!f&&m.length)for(v=0;v<m.length;++v)wr(e,0,m[v])}if(d>=h)break;for(var x=Math.min(h,g);;){if(p){var C=d+p.length;if(!f){var w=C>x?p.slice(0,x-d):p;e.addToken(e,w,l?l+s:s,u,d+w.length==g?a:"",c)}if(C>=x){p=p.slice(x-d),d=x;break}d=C,u=""}p=i.slice(o,o=r[L++]),l=vr(r[L++],e)}}else for(var L=1;L<r.length;L+=2)e.addToken(e,i.slice(o,o=r[L]),vr(r[L+1],e))}function Sr(t,e,r,n,i){function o(t){return r?r[t]:null}function l(t,r,n){!function(t,e,r,n){t.text=e,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),or(t),lr(t,r);var i=n?n(t):1;i!=t.height&&Ir(t,i)}(t,r,n,i),cn(t,"change",t,e)}var s=e.from,a=e.to,u=e.text,c=Or(t,s.line),f=Or(t,a.line),h=Cn(u),d=o(u.length-1),p=a.line-s.line;if(0!=s.ch||0!=a.ch||""!=h||t.cm&&!t.cm.options.wholeLineUpdateBefore)if(c==f)if(1==u.length)l(c,c.text.slice(0,s.ch)+h+c.text.slice(a.ch),d);else{for(v=[],g=1,m=u.length-1;g<m;++g)v.push(new cr(u[g],o(g),i));v.push(new cr(h+c.text.slice(a.ch),d,i)),l(c,c.text.slice(0,s.ch)+u[0],o(0)),t.insert(s.line+1,v)}else if(1==u.length)l(c,c.text.slice(0,s.ch)+u[0]+f.text.slice(a.ch),o(0)),t.remove(s.line+1,p);else{l(c,c.text.slice(0,s.ch)+u[0],o(0)),l(f,h+f.text.slice(a.ch),d);for(g=1,m=u.length-1,v=[];g<m;++g)v.push(new cr(u[g],o(g),i));p>1&&t.remove(s.line+1,p-1),t.insert(s.line+1,v)}else{for(var g=0,m=u.length-1,v=[];g<m;++g)v.push(new cr(u[g],o(g),i));l(f,f.text,d),p&&t.remove(s.line,p),v.length&&t.insert(s.line,v)}cn(t,"change",t,e),me(t,n.anchor,n.head,null,!0)}function kr(t){this.lines=t,this.parent=null;for(var e=0,r=t.length,n=0;e<r;++e)t[e].parent=this,n+=t[e].height;this.height=n}function Mr(t){this.children=t;for(var e=0,r=0,n=0,i=t.length;n<i;++n){var o=t[n];e+=o.chunkSize(),r+=o.height,o.parent=this}this.size=e,this.height=r,this.parent=null}kr.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,e){for(var r=t,n=t+e;r<n;++r){var i=this.lines[r];this.height-=i.height,fr(i),cn(i,"delete")}this.lines.splice(t,e)},collapse:function(t){t.splice.apply(t,[t.length,0].concat(this.lines))},insertInner:function(t,e,r){this.height+=r,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var n=0,i=e.length;n<i;++n)e[n].parent=this},iterN:function(t,e,r){for(var n=t+e;t<n;++t)if(r(this.lines[t]))return!0}},Mr.prototype={chunkSize:function(){return this.size},removeInner:function(t,e){this.size-=e;for(var r=0;r<this.children.length;++r){var n=this.children[r],i=n.chunkSize();if(t<i){var o=Math.min(e,i-t),l=n.height;if(n.removeInner(t,o),this.height-=l-n.height,i==o&&(this.children.splice(r--,1),n.parent=null),0==(e-=o))break;t=0}else t-=i}if(this.size-e<25){var s=[];this.collapse(s),this.children=[new kr(s)],this.children[0].parent=this}},collapse:function(t){for(var e=0,r=this.children.length;e<r;++e)this.children[e].collapse(t)},insertInner:function(t,e,r){this.size+=e.length,this.height+=r;for(var n=0,i=this.children.length;n<i;++n){var o=this.children[n],l=o.chunkSize();if(t<=l){if(o.insertInner(t,e,r),o.lines&&o.lines.length>50){for(;o.lines.length>50;){var s=new kr(o.lines.splice(o.lines.length-25,25));o.height-=s.height,this.children.splice(n+1,0,s),s.parent=this}this.maybeSpill()}break}t-=l}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var e=new Mr(t.children.splice(t.children.length-5,5));if(t.parent){t.size-=e.size,t.height-=e.height;var r=Ln(t.parent.children,t);t.parent.children.splice(r+1,0,e)}else{var n=new Mr(t.children);n.parent=t,t.children=[n,e],t=n}e.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,e,r){for(var n=0,i=this.children.length;n<i;++n){var o=this.children[n],l=o.chunkSize();if(t<l){var s=Math.min(e,l-t);if(o.iterN(t,s,r))return!0;if(0==(e-=s))break;t=0}else t-=l}}};var Tr=0,Ar=S.Doc=function(t,e,r){if(!(this instanceof Ar))return new Ar(t,e,r);null==r&&(r=0),Mr.call(this,[new kr([new cr("",null)])]),this.first=r,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.history=Gr(),this.cleanGeneration=1,this.frontier=r;var n=se(r,0);this.sel={from:n,to:n,head:n,anchor:n,shift:!1,extend:!1,goalColumn:null},this.id=++Tr,this.modeOption=e,"string"==typeof t&&(t=Kn(t)),Sr(this,{from:n,to:n,text:t},null,{head:n,anchor:n})};Ar.prototype=Sn(Mr.prototype,{constructor:Ar,iter:function(t,e,r){r?this.iterN(t-this.first,e-t,r):this.iterN(this.first,this.first+this.size,t)},insert:function(t,e){for(var r=0,n=0,i=e.length;n<i;++n)r+=e[n].height;this.insertInner(t-this.first,e,r)},remove:function(t,e){this.removeInner(t-this.first,e)},getValue:function(t){var e=zr(this,this.first,this.first+this.size);return!1===t?e:e.join(t||"\n")},setValue:function(t){var e=se(this.first,0),r=this.first+this.size-1;ee(this,{from:e,to:se(r,Or(this,r).text.length),text:Kn(t),origin:"setValue"},{head:e,anchor:e},!0)},replaceRange:function(t,e,r,n){le(this,t,e=he(this,e),r=r?he(this,r):e,n)},getRange:function(t,e,r){var n=Er(this,he(this,t),he(this,e));return!1===r?n:n.join(r||"\n")},getLine:function(t){var e=this.getLineHandle(t);return e&&e.text},setLine:function(t,e){pe(this,t)&&le(this,e,se(t,0),he(this,se(t)))},removeLine:function(t){t?le(this,"",he(this,se(t-1)),he(this,se(t))):le(this,"",se(0,0),he(this,se(1,0)))},getLineHandle:function(t){if(pe(this,t))return Or(this,t)},getLineNumber:function(t){return Fr(t)},getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=Or(this,t)),rr(this,t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return he(this,t)},getCursor:function(t){var e=this.sel;return ce(null==t||"head"==t?e.head:"anchor"==t?e.anchor:"end"==t||!1===t?e.to:e.from)},somethingSelected:function(){return!ae(this.sel.head,this.sel.anchor)},setCursor:bt((function(t,e,r){var n=he(this,"number"==typeof t?se(t,e||0):t);r?ge(this,n):me(this,n,n)})),setSelection:bt((function(t,e,r){me(this,he(this,t),he(this,e||t),r)})),extendSelection:bt((function(t,e,r){ge(this,he(this,t),e&&he(this,e),r)})),getSelection:function(t){return this.getRange(this.sel.from,this.sel.to,t)},replaceSelection:function(t,e,r){ee(this,{from:this.sel.from,to:this.sel.to,text:Kn(t),origin:r},e||"around")},undo:bt((function(){ne(this,"undo")})),redo:bt((function(){ne(this,"redo")})),setExtending:function(t){this.sel.extend=t},historySize:function(){var t=this.history;return{undo:t.done.length,redo:t.undone.length}},clearHistory:function(){this.history=Gr(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration()},changeGeneration:function(){return this.history.lastOp=this.history.lastOrigin=null,this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:Xr(this.history.done),undone:Xr(this.history.undone)}},setHistory:function(t){var e=this.history=Gr(this.history.maxGeneration);e.done=t.done.slice(0),e.undone=t.undone.slice(0)},markText:function(t,e,r){return Ye(this,he(this,t),he(this,e),r,"range")},setBookmark:function(t,e){var r={replacedWith:e&&(null==e.nodeType?e.widget:e),insertLeft:e&&e.insertLeft};return Ye(this,t=he(this,t),t,r,"bookmark")},findMarksAt:function(t){var e=[],r=Or(this,(t=he(this,t)).line).markedSpans;if(r)for(var n=0;n<r.length;++n){var i=r[n];(null==i.from||i.from<=t.ch)&&(null==i.to||i.to>=t.ch)&&e.push(i.marker.parent||i.marker)}return e},getAllMarks:function(){var t=[];return this.iter((function(e){var r=e.markedSpans;if(r)for(var n=0;n<r.length;++n)null!=r[n].from&&t.push(r[n].marker)})),t},posFromIndex:function(t){var e,r=this.first;return this.iter((function(n){var i=n.text.length+1;if(i>t)return e=t,!0;t-=i,++r})),he(this,se(r,e))},indexFromPos:function(t){var e=(t=he(this,t)).ch;return t.line<this.first||t.ch<0?0:(this.iter(this.first,t.line,(function(t){e+=t.text.length+1})),e)},copy:function(t){var e=new Ar(zr(this,this.first,this.first+this.size),this.modeOption,this.first);return e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,e.sel={from:this.sel.from,to:this.sel.to,head:this.sel.head,anchor:this.sel.anchor,shift:this.sel.shift,extend:!1,goalColumn:this.sel.goalColumn},t&&(e.history.undoDepth=this.history.undoDepth,e.setHistory(this.getHistory())),e},linkedDoc:function(t){t||(t={});var e=this.first,r=this.first+this.size;null!=t.from&&t.from>e&&(e=t.from),null!=t.to&&t.to<r&&(r=t.to);var n=new Ar(zr(this,e,r),t.mode||this.modeOption,e);return t.sharedHist&&(n.history=this.history),(this.linked||(this.linked=[])).push({doc:n,sharedHist:t.sharedHist}),n.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],n},unlinkDoc:function(t){if(t instanceof S&&(t=t.doc),this.linked)for(var e=0;e<this.linked.length;++e){if(this.linked[e].doc==t){this.linked.splice(e,1),t.unlinkDoc(this);break}}if(t.history==this.history){var r=[t.id];Dr(t,(function(t){r.push(t.id)}),!0),t.history=Gr(),t.history.done=Xr(this.history.done,r),t.history.undone=Xr(this.history.undone,r)}},iterLinkedDocs:function(t){Dr(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),Ar.prototype.eachLine=Ar.prototype.iter;var Nr="iter insert remove copy getEditor".split(" ");for(var Hr in Ar.prototype)Ar.prototype.hasOwnProperty(Hr)&&Ln(Nr,Hr)<0&&(S.prototype[Hr]=function(t){return function(){return t.apply(this.doc,arguments)}}(Ar.prototype[Hr]));function Dr(t,e,r){!function t(n,i,o){if(n.linked)for(var l=0;l<n.linked.length;++l){var s=n.linked[l];if(s.doc!=i){var a=o&&s.sharedHist;r&&!a||(e(s.doc,a),t(s.doc,n,a))}}}(t,null,!0)}function Wr(t,e){if(e.cm)throw new Error("This document is already in use.");t.doc=e,e.cm=t,T(t),k(t),t.options.lineWrapping||O(t),t.options.mode=e.modeOption,Ct(t)}function Or(t,e){for(e-=t.first;!t.lines;)for(var r=0;;++r){var n=t.children[r],i=n.chunkSize();if(e<i){t=n;break}e-=i}return t.lines[e]}function Er(t,e,r){var n=[],i=e.line;return t.iter(e.line,r.line+1,(function(t){var o=t.text;i==r.line&&(o=o.slice(0,r.ch)),i==e.line&&(o=o.slice(e.ch)),n.push(o),++i})),n}function zr(t,e,r){var n=[];return t.iter(e,r,(function(t){n.push(t.text)})),n}function Ir(t,e){for(var r=e-t.height,n=t;n;n=n.parent)n.height+=r}function Fr(t){if(null==t.parent)return null;for(var e=t.parent,r=Ln(e.lines,t),n=e.parent;n;e=n,n=n.parent)for(var i=0;n.children[i]!=e;++i)r+=n.children[i].chunkSize();return r+e.first}function Pr(t,e){var r=t.first;t:do{for(var n=0,i=t.children.length;n<i;++n){var o=t.children[n],l=o.height;if(e<l){t=o;continue t}e-=l,r+=o.chunkSize()}return r}while(!t.lines);for(n=0,i=t.lines.length;n<i;++n){var s=t.lines[n].height;if(e<s)break;e-=s}return r+n}function Rr(t,e){for(var r=0,n=(e=rr(t.doc,e)).parent,i=0;i<n.lines.length;++i){var o=n.lines[i];if(o==e)break;r+=o.height}for(var l=n.parent;l;l=(n=l).parent)for(i=0;i<l.children.length;++i){var s=l.children[i];if(s==n)break;r+=s.height}return r}function Br(t){var e=t.order;return null==e&&(e=t.order=fi(t.text)),e}function Gr(t){return{done:[],undone:[],undoDepth:1/0,lastTime:0,lastOp:null,lastOrigin:null,generation:t||1,maxGeneration:t||1}}function Vr(t,e,r,n){var i=e["spans_"+t.id],o=0;t.iter(Math.max(t.first,r),Math.min(t.first+t.size,n),(function(r){r.markedSpans&&((i||(i=e["spans_"+t.id]={}))[o]=r.markedSpans),++o}))}function Kr(t,e){var r={from:{line:e.from.line,ch:e.from.ch},to:qt(e),text:Er(t,e.from,e.to)};return Vr(t,r,e.from.line,e.to.line+1),Dr(t,(function(t){Vr(t,r,e.from.line,e.to.line+1)}),!0),r}function Ur(t,e,r,n){var i=t.history;i.undone.length=0;var o=+new Date,l=Cn(i.done);if(l&&(i.lastOp==n||i.lastOrigin==e.origin&&e.origin&&("+"==e.origin.charAt(0)&&t.cm&&i.lastTime>o-t.cm.options.historyEventDelay||"*"==e.origin.charAt(0)))){var s=Cn(l.changes);ae(e.from,e.to)&&ae(e.from,s.to)?s.to=qt(e):l.changes.push(Kr(t,e)),l.anchorAfter=r.anchor,l.headAfter=r.head}else for(l={changes:[Kr(t,e)],generation:i.generation,anchorBefore:t.sel.anchor,headBefore:t.sel.head,anchorAfter:r.anchor,headAfter:r.head},i.done.push(l),i.generation=++i.maxGeneration;i.done.length>i.undoDepth;)i.done.shift();i.lastTime=o,i.lastOp=n,i.lastOrigin=e.origin}function _r(t){if(!t)return null;for(var e,r=0;r<t.length;++r)t[r].marker.explicitlyCleared?e||(e=t.slice(0,r)):e&&e.push(t[r]);return e?e.length?e:null:t}function Xr(t,e){for(var r=0,n=[];r<t.length;++r){var i=t[r],o=i.changes,l=[];n.push({changes:l,anchorBefore:i.anchorBefore,headBefore:i.headBefore,anchorAfter:i.anchorAfter,headAfter:i.headAfter});for(var s=0;s<o.length;++s){var a,u=o[s];if(l.push({from:u.from,to:u.to,text:u.text}),e)for(var c in u)(a=c.match(/^spans_(\d+)$/))&&Ln(e,Number(a[1]))>-1&&(Cn(l)[c]=u[c],delete u[c])}}return n}function Yr(t,e,r,n){r<t.line?t.line+=n:e<t.line&&(t.line=e,t.ch=0)}function jr(t,e,r,n){for(var i=0;i<t.length;++i){for(var o=t[i],l=!0,s=0;s<o.changes.length;++s){var a=o.changes[s];if(o.copied||(a.from=ce(a.from),a.to=ce(a.to)),r<a.from.line)a.from.line+=n,a.to.line+=n;else if(e<=a.to.line){l=!1;break}}o.copied||(o.anchorBefore=ce(o.anchorBefore),o.headBefore=ce(o.headBefore),o.anchorAfter=ce(o.anchorAfter),o.readAfter=ce(o.headAfter),o.copied=!0),l?(Yr(o.anchorBefore),Yr(o.headBefore),Yr(o.anchorAfter),Yr(o.headAfter)):(t.splice(0,i+1),i=0)}}function $r(t,e){var r=e.from.line,n=e.to.line,i=e.text.length-(n-r)-1;jr(t.done,r,n,i),jr(t.undone,r,n,i)}function Zr(){en(this)}function qr(t){return t.stop||(t.stop=Zr),t}function Qr(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function Jr(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function tn(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}function en(t){Qr(t),Jr(t)}function rn(t){return t.target||t.srcElement}function nn(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),m&&t.ctrlKey&&1==e&&(e=3),e}function on(t,e,r){if(t.addEventListener)t.addEventListener(e,r,!1);else if(t.attachEvent)t.attachEvent("on"+e,r);else{var n=t._handlers||(t._handlers={});(n[e]||(n[e]=[])).push(r)}}function ln(t,e,r){if(t.removeEventListener)t.removeEventListener(e,r,!1);else if(t.detachEvent)t.detachEvent("on"+e,r);else{var n=t._handlers&&t._handlers[e];if(!n)return;for(var i=0;i<n.length;++i)if(n[i]==r){n.splice(i,1);break}}}function sn(t,e){var r=t._handlers&&t._handlers[e];if(r)for(var n=Array.prototype.slice.call(arguments,2),i=0;i<r.length;++i)r[i].apply(null,n)}pn(Ar),S.e_stop=en,S.e_preventDefault=Qr,S.e_stopPropagation=Jr;var an,un=0;function cn(t,e){var r=t._handlers&&t._handlers[e];if(r){var n=Array.prototype.slice.call(arguments,2);an||(++un,an=[],setTimeout(hn,0));for(var i=0;i<r.length;++i)an.push(o(r[i]))}function o(t){return function(){t.apply(null,n)}}}function fn(t,e,r){return sn(t,r||e.type,t,e),tn(e)||e.codemirrorIgnore}function hn(){--un;var t=an;an=null;for(var e=0;e<t.length;++e)t[e]()}function dn(t,e){var r=t._handlers&&t._handlers[e];return r&&r.length>0}function pn(t){t.prototype.on=function(t,e){on(this,t,e)},t.prototype.off=function(t,e){ln(this,t,e)}}S.on=on,S.off=ln,S.signal=sn;var gn=30,mn=S.Pass={toString:function(){return"CodeMirror.Pass"}};function vn(){this.id=null}function yn(t,e,r,n,i){null==e&&-1==(e=t.search(/[^\s\u00a0]/))&&(e=t.length);for(var o=n||0,l=i||0;o<e;++o)"\t"==t.charAt(o)?l+=r-l%r:++l;return l}vn.prototype={set:function(t,e){clearTimeout(this.id),this.id=setTimeout(e,t)}},S.countColumn=yn;var bn=[""];function xn(t){for(;bn.length<=t;)bn.push(Cn(bn)+" ");return bn[t]}function Cn(t){return t[t.length-1]}function wn(t){if(p)t.selectionStart=0,t.selectionEnd=t.value.length;else try{t.select()}catch(t){}}function Ln(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;++r)if(t[r]==e)return r;return-1}function Sn(t,e){function r(){}r.prototype=t;var n=new r;return e&&kn(e,n),n}function kn(t,e){for(var r in e||(e={}),t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}function Mn(t){for(var e=[],r=0;r<t;++r)e.push(void 0);return e}function Tn(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}var An=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Nn(t){return/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||An.test(t))}function Hn(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!1;return!0}var Dn=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\u1DC0–\u1DFF\u20D0–\u20FF\uA670-\uA672\uA674-\uA67D\uA69F\udc00-\udfff\uFE20–\uFE2F]/;function Wn(t,e,r,n){var i=document.createElement(t);if(r&&(i.className=r),n&&(i.style.cssText=n),"string"==typeof e)zn(i,e);else if(e)for(var o=0;o<e.length;++o)i.appendChild(e[o]);return i}function On(t){for(var e=t.childNodes.length;e>0;--e)t.removeChild(t.firstChild);return t}function En(t,e){return On(t).appendChild(e)}function zn(t,e){n?(t.innerHTML="",t.appendChild(document.createTextNode(e))):t.textContent=e}function In(t){return t.getBoundingClientRect()}S.replaceGetRect=function(t){In=t};var Fn,Pn,Rn=function(){if(n)return!1;var t=Wn("div");return"draggable"in t||"dragDrop"in t}();function Bn(){return!1}function Gn(t){if(null!=Fn)return Fn;var e=Wn("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return En(t,e),e.offsetWidth&&(Fn=e.offsetHeight-e.clientHeight),Fn||0}function Vn(t){if(null==Pn){var e=Wn("span","​");En(t,Wn("span",[e,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(Pn=e.offsetWidth<=1&&e.offsetHeight>2&&!r)}return Pn?Wn("span","​"):Wn("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")}t?Bn=function(t,e){return 36==t.charCodeAt(e-1)&&39==t.charCodeAt(e)}:u&&!/Version\/([6-9]|\d\d)\b/.test(navigator.userAgent)?Bn=function(t,e){return/\-[^ \-?]|\?[^ !\'\"\),.\-\/:;\?\]\}]/.test(t.slice(e-1,e+1))}:o&&/Chrome\/(?:29|[3-9]\d|\d\d\d)\./.test(navigator.userAgent)?Bn=function(t,e){var r=t.charCodeAt(e-1);return r>=8208&&r<=8212}:o&&(Bn=function(t,e){if(e>1&&45==t.charCodeAt(e-1)){if(/\w/.test(t.charAt(e-2))&&/[^\-?\.]/.test(t.charAt(e)))return!0;if(e>2&&/[\d\.,]/.test(t.charAt(e-2))&&/[\d\.,]/.test(t.charAt(e)))return!1}return/[~!#%&*)=+}\]\\|\"\.>,:;][({[<]|-[^\-?\.\u2010-\u201f\u2026]|\?[\w~`@#$%\^&*(_=+{[|><]|…[\w~`@#$%\^&*(_=+{[><]/.test(t.slice(e-1,e+1))});var Kn=3!="\n\nb".split(/\n/).length?function(t){for(var e=0,r=[],n=t.length;e<=n;){var i=t.indexOf("\n",e);-1==i&&(i=t.length);var o=t.slice(e,"\r"==t.charAt(i-1)?i-1:i),l=o.indexOf("\r");-1!=l?(r.push(o.slice(0,l)),e+=l+1):(r.push(o),e=i+1)}return r}:function(t){return t.split(/\r\n?|\n/)};S.splitLines=Kn;var Un,_n,Xn=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(t){return!1}}:function(t){try{var e=t.ownerDocument.selection.createRange()}catch(t){}return!(!e||e.parentElement()!=t)&&0!=e.compareEndPoints("StartToEnd",e)},Yn="oncopy"in(Un=Wn("div"))||(Un.setAttribute("oncopy","return;"),"function"==typeof Un.oncopy),jn={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};function $n(t){return t.level%2?t.to:t.from}function Zn(t){return t.level%2?t.from:t.to}function qn(t){var e=Br(t);return e?$n(e[0]):0}function Qn(t){var e=Br(t);return e?Zn(Cn(e)):t.text.length}function Jn(t,e){var r=Or(t.doc,e),n=rr(t.doc,r);n!=r&&(e=Fr(n));var i=Br(n);return se(e,i?i[0].level%2?Qn(n):qn(n):0)}function ti(t,e,r){var n=t[0].level;return e==n||r!=n&&e<r}function ei(t,e){for(var r,n=0;n<t.length;++n){var i=t[n];if(i.from<e&&i.to>e)return _n=null,n;if(i.from==e||i.to==e){if(null!=r)return ti(t,i.level,t[r].level)?(_n=r,n):(_n=n,r);r=n}}return _n=null,r}function ri(t,e,r,n){if(!n)return e+r;do{e+=r}while(e>0&&Dn.test(t.text.charAt(e)));return e}function ni(t,e,r,n){var i=Br(t);if(!i)return ii(t,e,r,n);for(var o=ei(i,e),l=i[o],s=ri(t,e,l.level%2?-r:r,n);;){if(s>l.from&&s<l.to)return s;if(s==l.from||s==l.to)return ei(i,s)==o?s:r>0==(l=i[o+=r]).level%2?l.to:l.from;if(!(l=i[o+=r]))return null;s=r>0==l.level%2?ri(t,l.to,-1,n):ri(t,l.from,1,n)}}function ii(t,e,r,n){var i=e+r;if(n)for(;i>0&&Dn.test(t.text.charAt(i));)i+=r;return i<0||i>t.text.length?null:i}S.keyNames=jn,function(){for(var t=0;t<10;t++)jn[t+48]=String(t);for(t=65;t<=90;t++)jn[t]=String.fromCharCode(t);for(t=1;t<=12;t++)jn[t+111]=jn[t+63235]="F"+t}();var oi,li,si,ai,ui,ci,fi=(oi=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,li=/[stwN]/,si=/[LRr]/,ai=/[Lb1n]/,ui=/[1n]/,ci="L",function(t){if(!oi.test(t))return!1;for(var e,r=t.length,n=[],i=0;i<r;++i)n.push(c=(e=t.charCodeAt(i))<=255?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL".charAt(e):1424<=e&&e<=1524?"R":1536<=e&&e<=1791?"rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr".charAt(e-1536):1792<=e&&e<=2220?"r":"L");i=0;for(var o=ci;i<r;++i)"m"==(c=n[i])?n[i]=o:o=c;i=0;for(var l=ci;i<r;++i)"1"==(c=n[i])&&"r"==l?n[i]="n":si.test(c)&&(l=c,"r"==c&&(n[i]="R"));for(i=1,o=n[0];i<r-1;++i)"+"==(c=n[i])&&"1"==o&&"1"==n[i+1]?n[i]="1":","!=c||o!=n[i+1]||"1"!=o&&"n"!=o||(n[i]=o),o=c;for(i=0;i<r;++i)if(","==(c=n[i]))n[i]="N";else if("%"==c){for(var s=i+1;s<r&&"%"==n[s];++s);for(var a=i&&"!"==n[i-1]||s<r-1&&"1"==n[s]?"1":"N",u=i;u<s;++u)n[u]=a;i=s-1}for(i=0,l=ci;i<r;++i){var c=n[i];"L"==l&&"1"==c?n[i]="L":si.test(c)&&(l=c)}for(i=0;i<r;++i)if(li.test(n[i])){for(s=i+1;s<r&&li.test(n[s]);++s);var f="L"==(i?n[i-1]:ci),h="L"==(s<r-1?n[s]:ci);for(a=f||h?"L":"R",u=i;u<s;++u)n[u]=a;i=s-1}var d,p=[];for(i=0;i<r;)if(ai.test(n[i])){var g=i;for(++i;i<r&&ai.test(n[i]);++i);p.push({from:g,to:i,level:0})}else{var m=i,v=p.length;for(++i;i<r&&"L"!=n[i];++i);for(u=m;u<i;)if(ui.test(n[u])){m<u&&p.splice(v,0,{from:m,to:u,level:1});var y=u;for(++u;u<i&&ui.test(n[u]);++u);p.splice(v,0,{from:y,to:u,level:2}),m=u}else++u;m<i&&p.splice(v,0,{from:m,to:i,level:1})}return 1==p[0].level&&(d=t.match(/^\s+/))&&(p[0].from=d[0].length,p.unshift({from:0,to:d[0].length,level:0})),1==Cn(p).level&&(d=t.match(/\s+$/))&&(Cn(p).to-=d[0].length,p.push({from:r-d[0].length,to:r,level:0})),p[0].level!=Cn(p).level&&p.push({from:r,to:r,level:p[0].level}),p});return S.version="3.20.0",S}();var t=Object.freeze({__proto__:null});export{t as C};
//# sourceMappingURL=codemirror-73bf0f9d.js.map
