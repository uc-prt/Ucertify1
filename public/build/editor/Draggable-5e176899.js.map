{"version":3,"file":"Draggable-5e176899.js","sources":["../../../clsSMDragNDrop/libs/plugins/Draggable.js"],"sourcesContent":["\"use strict\";\r\nwindow.isDraggableAdded = (window.isDraggableAdded) ? window.isDraggableAdded : false;\r\nwindow.isDraggable = (window.isDraggable) ? window.isDraggable :false;\r\n\r\nexport default class Draggable {\r\n    /* \r\n        DragNDrop class fire following events \r\n            onDragStart(event, element) // when dragging is just started\r\n            onDrag(event, ui) // when element is dragging\r\n            onDrop(source, target) // when element is dropped\r\n            onRemove(source, target) // whene drop element is removed\r\n            onOver(element) // when draggable is over the doppable area\r\n            onOut(element) // when draggble leave the droppable area\r\n            isRevert() // when element is started dragging but not droppped at proper place\r\n            changeContainment(element) // if defined set the return element as container\r\n\r\n        Dragging:\r\n            onDragStart(event, element) // when dragging is just started\r\n            onDrag(event, ui)  // when element is dragging\r\n            onDragStop(event, position , ui) // when element is dropped\r\n            changeContainment(element) // if defined set the return element as container\r\n\r\n\r\n    */\r\n    constructor(container, drag, drop, draglist) {\r\n        if (typeof (container) == 'object') {\r\n            this.container = container.containment;\r\n            this.drag =  container.classes;\r\n            this.ignore = container.ignore;\r\n            this.initDraggable();\r\n        } else {\r\n            this.drag = drag;\r\n            this.drop = drop;\r\n            this.container = container;\r\n            this.initDnd();\r\n        }\r\n        this.lastPosition = [0, 0];\r\n        window.draglist = draglist;\r\n        this.isStart = false;\r\n        this.isMoving = false;\r\n        this.node = null;\r\n        this.target = null;\r\n        this.prenode = null;\r\n    }\r\n\r\n    checkPosition(event, node) {\r\n        let boundry = document.querySelector(this.container).getBoundingClientRect()\r\n        let x = event.clientX - boundry.left;\r\n        let y = event.clientY - boundry.top;\r\n        let dimension = {\r\n            width : node.offsetWidth / 2,\r\n            height: node.offsetHeight / 2,\r\n        }\r\n        if (x < dimension.width) {\r\n            x = dimension.width;\r\n        } else if (x > (boundry.width -  dimension.width) ) {\r\n            x = (boundry.width -  dimension.width);\r\n        } \r\n\r\n        if (y < dimension.height) {\r\n            y = dimension.height;\r\n        } else if (y > (boundry.height -  dimension.height)) {\r\n            y = (boundry.height -  dimension.height);\r\n        }\r\n\r\n        if (x < 0) {\r\n            x = dimension.width + 10;\r\n        } \r\n        if (y < 0) {\r\n            y = dimension.height + 10;\r\n        }\r\n\r\n        return [x, y];\r\n    };\r\n\r\n    binddndEvents(drag, drop) {\r\n        if (drag) {\r\n            AI.listen('body', 'mousedown', drag, (current, event) => {\r\n                if (this.changeContainment) {\r\n                    this.container = this.changeContainment(current);\r\n                }\r\n                if (!(current.classList.contains('uc_drag_disable') || current.classList.contains('lab_disable') )) {\r\n                    if (drop) {\r\n                        AI.selectAll(drop).forEach(element => {\r\n                            if (element.getAttribute('droping') == '2') {\r\n                                element.style.zIndex = 5;\r\n                            } else {\r\n                                element.style.zIndex = 2;\r\n                            }\r\n                        })\r\n                    }\r\n\r\n                    this.prenode = current;\r\n                    this.isStart = false;\r\n                    this.node = null;\r\n\r\n                    if (this.onDragStart) {\r\n                        let clone_node = this.onDragStart(event, this.prenode);\r\n                        this.node = clone_node;\r\n                        this.lastPosition = this.checkPosition(event, this.prenode)\r\n                        clone_node.style.top = this.lastPosition[1] - this.prenode.offsetHeight / 2 + 'px';\r\n                        clone_node.style.left = this.lastPosition[0]  - this.prenode.offsetWidth / 2 + 'px';\r\n                        document.querySelector(this.container).appendChild(clone_node);\r\n                        this.isStart = true;\r\n                    }\r\n                }\r\n            });\r\n\r\n            AI.listen('body', 'dragstart', drag, (current, event) => {\r\n                event.preventDefault();\r\n            });\r\n\r\n            AI.listenAll('body', 'mousemove', (event) => {\r\n                if (this.isStart && this.node) {\r\n                    this.isMoving = true;\r\n                    this.lastPosition = this.checkPosition(event, this.node)\r\n                    this.node.style.top = this.lastPosition[1] - this.node.offsetHeight / 2 + 'px';\r\n                    this.node.style.left = this.lastPosition[0]  - this.node.offsetWidth / 2 + 'px';\r\n                    this.onDrag && this.onDrag(event, {node: this.node, top: (this.lastPosition[1] - this.node.offsetHeight / 2), left : (this.lastPosition[0]  - this.node.offsetWidth / 2 )})\r\n                }\r\n            });\r\n\r\n            AI.listenAll('body', 'mouseup', () => {\r\n                if (this.isStart && this.node && this.isMoving) {\r\n                    this.isMoving = false;\r\n                    this.isStart = false;\r\n                    if (this.target) {\r\n                        if (this.target.getAttribute('droping') == '1' && this.prenode.getAttribute('droping') == '2') {\r\n                            this.onDropChange(this.prenode, this.target, window.draglist[this.prenode.id][0]);\r\n                            this.saveDetail(window.draglist[this.prenode.id][0], this.target);\r\n                            delete window.draglist[this.prenode.id];\r\n                        } else if (this.target.getAttribute('droping') == '2' && this.prenode.getAttribute('droping') == '2') {\r\n                            this.onDropInterchange(this.prenode, this.target, window.draglist[this.prenode.id][0], window.draglist[this.target.id][0]);\r\n                            let clone_draglist = Object.assign({}, window.draglist);\r\n                            this.saveDetail(clone_draglist[this.prenode.id][0], this.target);\r\n                            this.saveDetail(clone_draglist[this.target.id][0], this.prenode);\r\n                        } else if (this.target.getAttribute('droping') == '2' && this.prenode.getAttribute('draging') == '1') {\r\n                            this.onDragInterchange(this.prenode, this.target, window.draglist[this.target.id][0]);\r\n                            this.saveDetail(this.prenode, this.target)\r\n                        } else if (this.prenode.id != this.target.id) { //  if data is drop from source to target\r\n                            this.saveDetail(this.prenode, this.target)\r\n                            this.onDrop(this.prenode, this.target)\r\n                        } else if (this.prenode.id == this.target.id) { // if both the drop and drag are same target\r\n                            this.target.classList.remove('drop-hover');\r\n                            this.target.style.opacity = '';\r\n                        }\r\n                    } else if (this.node.getAttribute('draging') == '2') { // when element is remove from target -> source \r\n                        let target =  window.draglist[this.prenode.id];\r\n                        this.onRemove(this.prenode, target[0])\r\n                        delete window.draglist[this.prenode.id];\r\n                    } else {\r\n                        this.isRevert && this.isRevert();\r\n                    }\r\n\r\n                    this.node.remove();\r\n                } else if (!this.isMoving && this.node) {\r\n                    this.node.remove();\r\n                }\r\n        \r\n                if (drop) {\r\n                    AI.selectAll(drop).forEach(element => {\r\n                        element.style.zIndex = '';\r\n                        // element.style.position = '';\r\n                    });\r\n                }\r\n        \r\n                this.node = null;\r\n                this.target = null;\r\n                this.prenode = null;\r\n            });\r\n        }\r\n        if (drop) {\r\n            AI.listen('body', 'mousemove', drop, (current) => {\r\n                if (this.isStart && this.node && this.isMoving) {\r\n                    this.target = current;\r\n                    this.target.classList.add('drop-hover');\r\n                    this.target.style.opacity = '0.7';\r\n                    this.onOver && this.onOver(current);\r\n                }\r\n            });\r\n            \r\n            AI.listen('body', 'mouseover', drop, (current) => {\r\n                this.target = current;\r\n                this.target.classList.add('drop-hover');\r\n            });\r\n\r\n            AI.listen('body','mouseout', drop, () => {\r\n                if (this.isStart && this.node && this.isMoving && this.target) {\r\n                    this.onOut && this.onOut(this.target);\r\n                    this.target.style.opacity = '1';\r\n                    this.target = null;\r\n                } \r\n                if (this.target != null || this.target != undefined) {\r\n                    this.target.classList.remove('drop-hover');\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    bindDraggable(drag) {\r\n        AI.listen('body', 'mousedown', drag, (current, event) => {\r\n            if (this.changeContainment) {\r\n                this.container = this.changeContainment(current);\r\n            }\r\n\r\n            if (this.ignore && Array.isArray(this.ignore) && event.target) {\r\n                let revert = false;\r\n                for (let index = 0; index < this.ignore.length; index++) {\r\n                    if (event.target.closest(this.ignore[index]) || event.target.classList.contains(this.ignore[index])) {\r\n                        revert = true;\r\n                        break;\r\n                    }\r\n                }\r\n                if (revert) {\r\n                    return false;\r\n                }\r\n            }\r\n            this.isStart = true;\r\n            this.node = current;\r\n            this.lastPosition = this.checkPosition(event, current)\r\n            current.style.top = this.lastPosition[1] - current.offsetHeight / 2 + 'px';\r\n            current.style.left = this.lastPosition[0]  - current.offsetWidth / 2 + 'px';\r\n            this.onDragStart && this.onDragStart(event, current);\r\n        });\r\n\r\n        AI.listen('body', 'dragstart', drag, (current, event) => {\r\n            event.preventDefault();\r\n        });\r\n\r\n        AI.listenAll('body', 'mousemove', (event) => {\r\n            if (this.isStart && this.node) {\r\n                this.isMoving = true;\r\n                this.lastPosition = this.checkPosition(event, this.node)\r\n                this.node.style.top = this.lastPosition[1] - this.node.offsetHeight / 2 + 'px';\r\n                this.node.style.left = this.lastPosition[0]  - this.node.offsetWidth / 2 + 'px';\r\n                this.onDrag && this.onDrag(event, {top: (this.lastPosition[1] - this.node.offsetHeight / 2), left : (this.lastPosition[0]  - this.node.offsetWidth / 2 )})\r\n            }\r\n        });\r\n\r\n        AI.listenAll('body', 'mouseup', (event) => {\r\n            if (this.isStart && this.node && this.isMoving) {\r\n                this.isMoving = false;\r\n                this.isStart = false;\r\n                this.lastPosition = this.checkPosition(event, this.node)\r\n                this.node.style.top = this.lastPosition[1] - this.node.offsetHeight / 2 + 'px';\r\n                this.node.style.left = this.lastPosition[0]  - this.node.offsetWidth / 2 + 'px';\r\n                this.onDragStop && this.onDragStop(event, {top: (this.lastPosition[1] - this.node.offsetHeight / 2), left : (this.lastPosition[0]  - this.node.offsetWidth / 2 )}, this.node)\r\n            }\r\n            this.node = null;\r\n        });\r\n    }\r\n\r\n    initDnd() {\r\n        if (!window.isDraggableAdded) {\r\n            this.binddndEvents(this.drag, this.drop);\r\n            window.isDraggableAdded = true;\r\n        }\r\n    };\r\n\r\n    initDraggable() {\r\n        if (!window.isDraggable) {\r\n            this.bindDraggable(this.drag);\r\n            window.isDraggable = true;\r\n        }\r\n    };\r\n\r\n    saveDetail(source, target) {\r\n        window.draglist[target.id] = [source, target];\r\n        window.draglist = window.draglist;\r\n    };\r\n\r\n    onDrop(source, target) {\r\n        let copied = source.cloneNode(true);\r\n        target.style.backgroundColor = copied.getAttribute('data-bgcolor');\r\n        target.setAttribute('draging', 2);\r\n        target.setAttribute('droping', 2); \r\n    \r\n        // for disabling the dragable\r\n        if (! (source.getAttribute(\"data-multi_drag\") == \"1\") ) {\r\n            source.classList.add('uc_drag_disable');\r\n            source.style.setProperty(\"cursor\", \"no-drop\", \"important\");\r\n            source.style.setProperty(\"opacity\", \"0.5\", \"important\");\r\n        }\r\n    \r\n        target.classList.remove('drop-hover');\r\n        target.style.opacity = '1';\r\n        AI.find(target, 'p').innerText = AI.find(copied, 'p').innerText;\r\n    } \r\n    \r\n    onRemove(source, target) {\r\n    \r\n        source.removeAttribute('draging');\r\n        source.style.backgroundColor = source.getAttribute('data-bgcolor');\r\n        source.setAttribute('droping', 1);\r\n    \r\n        // for disabling the dragable\r\n        if (target) {\r\n            target.classList.remove('uc_drag_disable');\r\n            target.style.cursor = '';\r\n            target.style.opacity = '';\r\n        }\r\n    \r\n        source.classList.remove('drop-hover');\r\n        source.style.opacity = '1';\r\n        AI.find(source, 'p').innerText = source.getAttribute('data-caption');\r\n    } \r\n    \r\n    onDropChange(source, target, originalSource) {\r\n        this.onDrop(originalSource, target);\r\n        this.onRemove(source);\r\n    }\r\n    \r\n    onDropInterchange(source, target, originalSource, originalTarget) {\r\n        this.onDrop(originalSource, target);\r\n        this.onDrop(originalTarget, source);\r\n    }\r\n    \r\n    onDragInterchange(source, target, originalSource) {\r\n        this.onRemove(target, originalSource);\r\n        this.onDrop(source, target);\r\n    }\r\n}\r\n\r\n"],"names":["window","isDraggableAdded","isDraggable","Draggable","[object Object]","container","drag","drop","draglist","this","containment","classes","ignore","initDraggable","initDnd","lastPosition","isStart","isMoving","node","target","prenode","event","boundry","document","querySelector","getBoundingClientRect","x","clientX","left","y","clientY","top","dimension","width","offsetWidth","height","offsetHeight","AI","listen","current","changeContainment","classList","contains","selectAll","forEach","element","getAttribute","style","zIndex","onDragStart","clone_node","checkPosition","appendChild","preventDefault","listenAll","onDrag","onDropChange","id","saveDetail","onDropInterchange","clone_draglist","Object","assign","onDragInterchange","onDrop","remove","opacity","onRemove","isRevert","add","onOver","onOut","undefined","Array","isArray","revert","index","length","closest","onDragStop","binddndEvents","bindDraggable","source","copied","cloneNode","backgroundColor","setAttribute","setProperty","find","innerText","removeAttribute","cursor","originalSource","originalTarget"],"mappings":"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"}