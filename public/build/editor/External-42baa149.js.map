{"version":3,"file":"External-42baa149.js","sources":["../../../clsSMExternal/External.svelte"],"sourcesContent":["<script>\r\n\timport { onMount, beforeUpdate, onDestroy } from 'svelte';\r\n\timport { Button, Dialog, Checkbox, Snackbar, Textfield } from 'svelte-mui/src';\r\n\timport {tag_player} from '../helper/PrepengineFooter.svelte';\r\n\timport { writable } from 'svelte/store';\r\n\timport { AH } from '../helper/HelperAI.svelte';\r\n\timport Loader from '../helper/Loader.svelte';\r\n\timport UCLIB from '../src/libs/editorLib/UCLIB';\r\n\timport l from '../src/libs/editorLib/language';\r\n\texport let setInlineEditor = ()=>{};\r\n\texport let editorState;\r\n\texport let getChildXml = ()=>{};\r\n\tlet _module='', type='', version='', user_filter_ans='', qxml='', message=\"\";\r\n\tlet state = {};\r\n\tlet hdd = writable({\r\n\t\t\txml: '',\r\n\t\t\tuxml: '',\r\n\t\t\ttitle: \"\",\r\n\t\t\tdefaultValue: \"\",\r\n\t\t\ttoggle: false,\r\n\t\t\tsnackback: false,\r\n\t\t\tsequence: '0',\r\n\t\t\tmulticheck: false,\r\n\t\t\tremediationToggle: false,\r\n\t\t\ttitleData: \"\",\r\n\t\t\tstemData: \"\",\r\n\t\t\tremediationData : \"\",\r\n\t\t\ttoggleMode: \"\",\r\n\t\t});\r\n\tlet unsubscribe = hdd.subscribe((item)=> {\r\n\t\tstate = item;\r\n\t});\r\n\r\n\tonMount(async()=> {\r\n\t\tdidMount();\r\n\t})\r\n\r\n\tbeforeUpdate(async()=> {\r\n\t\t// check for toggle mode\r\n\t\tif (state.toggleMode != editorState.toggleMode) { \r\n\t\t\tstate.toggleMode = editorState.toggleMode;\r\n\t\t\tqxml = (state.xml) ? document.getElementById(\"authoringFrame\").contentWindow.save_data(1, 0, true) : '';\r\n\t\t\tif (editorState.toggleMode == true) { //Test mode on\r\n\t\t\t\t// check for the xml\r\n\t\t\t\tif(state.xml) {\r\n\t\t\t\t\tqxml = qxml.toString().replace(/'/gm,\"\\\\x27\");\r\n\t\t\t\t\tqxml = qxml.toString().match(/<correct>[\\s\\S]*?<\\/correct>/img);\r\n\t\t\t\t\tqxml = qxml.toString().replace(/\\$/g, \"#dollar\");\r\n\t\t\t\t\t// replace the special corrector in the xml inside the correct tag\r\n\t\t\t\t\tqxml  = state.xml.toString().replace(/<correct>[\\s\\S]*?<\\/correct>/img,qxml.toString());\r\n\t\t\t\t\tqxml = qxml.toString().replace(/#dollar/g, \"$\");\r\n\r\n\t\t\t\t\tif(qxml.match(/<correct>\\s*<!\\[CDATA\\[\\s*\\]\\]>\\s*<\\/correct>/gmi) && (!state.xml.match(/<correct>\\s*<!\\[CDATA\\[\\s*\\]\\]>\\s*<\\/correct>/gmi))) {\r\n\t\t\t\t\t\tqxml = \tstate.xml;\r\n\t\t\t\t\t} \r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tstate.xml = qxml;\r\n\t\t\t\t\t\tgetChildXml(qxml);\t\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twindow.is_review = 0;\r\n\t\t\t\t}\r\n\t\t\t\tAH.select(\"#authoringFrame\", 'attr', {'data-authoring': '0'});\r\n\t\t\t\tAH.select('#headerTitle').innerHTML = l.preview;\r\n\t\t\t\tAH.find('#authoringArea', 'form', {action: 'remove'});\r\n\t\t\t\trenderPlayer();\r\n\t\t\t\tAH.empty('#authoringFrame');\r\n\t\t\t\t// updating the qxml \r\n\t\t\t\tlet testHtml = '<form method=\"post\" target=\"authoringFrame\" action=\"'+baseUrl+'sim/?in_editor=1\"><input type=\"hidden\" name=\"first_time\" value=\"1\"/><input type=\"hidden\" name=\"testmode\" value=\"1\"/><input type=\"hidden\" name=\"qxml\" value=\\''+qxml+'\\'/><input type=\"hidden\" name=\"content_guid\" value=\"0\" /></form>';\r\n\t\t\t\tAH.insert('#authoringArea',testHtml, 'beforeend');\r\n\t\t\t\tstate.titleData = AH.select('#title').innerHTML;\r\n\t\t\t\tstate.stemData = AH.select('#stem').innerHTML;\r\n\t\t\t\tstate.remediationData = AH.select('#remediation').innerHTML;\r\n\t\t\t\tAH.insert(AH.select(AH.empty('#title'), 'hide'), `<div id=\"tilteShow\">${state.titleData}</div>`, 'afterend');\r\n\t\t\t\tAH.insert(AH.select(AH.empty('#stem'), 'hide'),`<div id=\"stemShow\">${state.stemData}</div>`, 'afterend');\r\n\t\t\t\tAH.insert(AH.select(AH.empty('#remediation'), 'hide'), `<div id=\"remediationShow\">${state.remediationData}</div>`, 'afterend');\r\n\t\t\t\tAH.select('#externalInputs', 'hide');\r\n\t\t\t\t// submit the form  and send data to sim/index.php\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tAH.find(document, 'form[target=\"authoringFrame\"]').submit();\r\n\t\t\t\t\teditorState.activator = true;\r\n\t\t\t\t}, 200);\r\n\t\t\t} else { //Authoring Mode.\r\n\t\t\t\tif(state.xml) {\r\n\t\t\t\t\tlet uxml = document.getElementById(\"authoringFrame\").contentWindow.save_data(0, 0, true);\r\n\t\t\t\t\tif (!uxml.match(/<!\\[CDATA\\[\\s*html=dW5kZWZpbmVk\\s*\\]\\]>/gmi)) {\r\n\t\t\t  \t\t\tstate.uxml = uxml;\r\n\t\t\t  \t\t}\r\n\t\t\t\t\tgetChildXml(state.xml);\r\n\t\t\t\t\t// get all the details according to th current xml\r\n\t\t\t\t\tvar windowHtml = getAuthoringForm(state.xml);\r\n\t\t\t\t\tAH.empty('#authoringFrame');\r\n\t\t\t\t\tAH.find('#authoringArea', 'form', {action: 'remove'});\r\n\t\t\t\t\tAH.insert('#authoringArea', windowHtml,'beforeend');\r\n\t\t\t\t\t// submit the form  and send data to sim/index.php\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\tAH.find(document, 'form[target=\"authoringFrame\"]').submit();\r\n\t\t\t\t\t\teditorState.activator=true;\r\n\t\t\t\t\t}, 200);\r\n\t\t  \t\t}\r\n\t\t  \t\tAH.select('#headerTitle', 'html', l.authoring);\r\n\t\t\t\tAH.select(\"#authoringFrame\", 'attr', {'data-authoring': '1'});\r\n\t\t\t\tAH.find(document, '#tilteShow,#stemShow,#remediationShow', {action: 'remove'});\r\n\t\t\t\tAH.select('#title', 'html', state.titleData);\r\n\t\t\t\tAH.select('#stem', 'html', state.stemData);\r\n\t\t\t\tAH.select('#remediation', 'html', state.remediationData);\r\n\t\t\t\tAH.selectAll('#title,#stem,#remediation,#externalInputs', 'show');\r\n\t\t\t\tunRenderPlayer();\r\n                setInlineEditor(\"#stem\");\r\n                setInlineEditor(\"#remediation\");\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\t// calls after unmount\r\n\tonDestroy(() => {\r\n\t\tAH.select('#preview', 'show');\r\n\t\teditorState.activator = false;\r\n\t});\r\n\r\n\t// calls just after rendering of the function\r\n\tfunction didMount() {\r\n\t\tif (window.inNative) {\r\n\t\t\t// for getting height in Native\r\n            window.getHeight && window.getHeight();\r\n        }\r\n\t\tsetTimeout(function() {\r\n\t\t\tAH.select('#preview', 'hide');\r\n\t\t\tstate.xml = editorState.xml;\r\n\t\t\tif(editorState.xml) {\r\n\t\t\t\t// get all the details according to th current xml\r\n\t\t\t\tvar windowHtml = getAuthoringForm(editorState.xml);\r\n\t\t\t\tAH.insert('#authoringArea', windowHtml, 'beforeend');\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t// submit the form getting by getAuthoringForm function\r\n\t\t\t\t\tAH.find(document, 'form[target=\"authoringFrame\"]').submit();\r\n\t\t\t\t\teditorState.activator = true;\r\n\t\t\t\t}, 200);\r\n\t\t\t} else {\r\n\t\t\t\tAH.select('#authoringArea', 'hide');\t\r\n\t\t\t\teditorState.activator = false;\r\n\t\t\t}\r\n\t\t}, 100);\r\n\t\tAH.listen(document, \"click\", \"#your_ans_filter li\", function(_this) {\r\n\t\t\tif(user_filter_ans == \"\") {\r\n\t\t\t\tuser_filter_ans = AH.select('#user_answer').innerHTML;\r\n\t\t\t}\r\n\t\t\tfilterUserAnswer(_this.textContent.trim().toLowerCase().replace(\" \",\"_\"));\r\n\t\t});\r\n\t\tAH.listen(document, 'click', '#answerCheck', remediationMode);\r\n\t\tsetTimeout(function() {\r\n\t\t\tAH.bind('#authoringFrame','load', function() { \r\n\t\t\t\teditorState.activator = false;\r\n\t    \t});\r\n\t\t}, 200);\r\n\t\tsetTimeout(function() {\r\n\t\t\tlet frameHeight =   window.innerHeight - 60;\r\n\t\t\tif (in_frame == 1) {\r\n\t\t\t\tframeHeight = window.innerHeight;\r\n\t\t\t} \r\n\t\t\tAH.select(\"#authoringFrame\", 'attr', {height: frameHeight});\r\n\t\t}, 500);\r\n\t}\r\n\r\n\t// this function returns the form conaining all the details in xml\r\n\tfunction getAuthoringForm(xml) {\r\n\t\ttry {\r\n\t\t\tlet _qxml = `<textarea class=\"h hidden\" name=\"qxml\" id=\"qxml\">${xml}</textarea>`;\r\n\t\t\tlet defaultValues = _qxml.match(/<default>[\\s\\S]*?<\\/default>/gmi);\r\n\t\t\tdefaultValues = (defaultValues.toString()) ? defaultValues.toString().replace(/<!\\[CDATA\\[|\\]\\]>|<default>|<\\/default>/gmi,'').trim() : '';\r\n  \t\t\tAH.select('#defaultValues').value = defaultValues;\r\n  \t\t\txml = xml.match(/<smxml([\\s\\S]*?)<(.*?)>/gmi);\r\n\t\t\txml = xml.toString().replace(/<smxml(.*?)>/img,'');\r\n\t\t\t_module = xml.match(/<\\w+/img);\r\n\t\t\t_module = _module.toString().replace(/</img,'');\r\n\t\t\tlet newXml = AH.parseHtml(xml);\r\n\t\t\tAH.select('#externalTitle').value = newXml.getAttribute('title');\r\n\t\t\tlet multicheck = (newXml.getAttribute('multicheck') == 'true') ? true : false;\r\n\t\t\tstate.multicheck = multicheck;\r\n\t\t\tstate.sequence = newXml.getAttribute('sequence');\r\n\t\t\ttype = `<input type=\"hidden\" name=\"type\" value=\"${newXml.getAttribute('type')}\">`;\r\n\t\t\tversion = `<input type=\"hidden\" name=\"version\" value=\"${newXml.getAttribute('version')}\">`;\r\n\t\t\tmulticheck = `<input type=\"hidden\" name=\"multicheck\" value=\"${state.multicheck}\">`;\r\n\t\t\tlet windowHtml = `<form method=\"post\" target=\"authoringFrame\" action=\"${baseUrl}sim/?in_editor=1\"><input type=\"hidden\" name=\"module\" value=\"${_module}\"><input type=\"hidden\" name=\"title\" value=\"\"><input type=\"hidden\" name=\"sequence\" value=\"${state.sequence}\">${type + version + multicheck + _qxml}<input type=\"hidden\" name=\"autheringmode\" value=\"1\"></form>`;\r\n\t\t\treturn windowHtml;\r\n\t\t}\r\n\t\tcatch(err) {\r\n\t\t\tconsole.log(err);\r\n\t\t}\r\n\t}\r\n\r\n\t// for filtering the user answer\r\n\tfunction filterUserAnswer(filter_type) {\r\n\t\tlet user_answer_array = user_filter_ans.split(\"<br>\");\r\n\t\tlet correct_answer_string = AH.select('#correct_answer').innerHTML;\r\n\t\tif (filter_type==\"only_unique\") {\r\n\t\t\tlet uniqueAnswers = [];\r\n\t\t\tuser_answer_array.forEach((el, i)=> {\r\n\t\t\t    if(AH.inArray(el, uniqueAnswers) === -1) uniqueAnswers.push(el);\r\n\t\t\t});\r\n\t\t\tsetTimeout(function() {\r\n\t\t    \tAH.select('#user_answer', 'html', uniqueAnswers.join(\"<br>\"));\r\n\t\t    }, 1000);\r\n\t\t\t\r\n\t\t} else if(filter_type==\"only_relevant\") {\r\n\t\t\tlet releventAnswers = [];\r\n\t\t\tuser_answer_array.forEach(function(el, i){\r\n\t\t\t\tif (correct_answer_string.indexOf(el)!=-1) {\r\n\t\t\t\t\t if (AH.inArray(el, releventAnswers) === -1) releventAnswers.push(el);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tsetTimeout(function() {\r\n\t\t    \tAH.select('#user_answer', 'html', releventAnswers.join(\"<br>\"));\r\n\t\t    }, 1000);\r\n\t\t\t\r\n\t\t} else {\r\n\t\t\tsetTimeout(function() {\r\n\t\t    \tAH.select('#user_answer', 'html', user_filter_ans);\r\n\t\t    }, 1000);\t\t\t\t\r\n\t\t}\r\n\t}\r\n\r\n\t// not found where it is called @pradeep sir please check once\r\n\tfunction toggle() {\r\n\t\t\tqxml = document.getElementById(\"authoringFrame\").contentWindow.save_data(1, 0, true);\r\n\t\t\tif(state.toggle == false) { //Test mode on\r\n\t\t\t\tqxml = qxml.toString().replace(/'/gm,\"\\\\x27\");\r\n\t\t\t\tAH.select(\"#authoringFrame\", 'attr', {'data-authoring': '0'});\r\n\t\t\t\tqxml = qxml.toString().match(/<correct>[\\s\\S]*?<\\/correct>/img);\r\n\t\t\t\tqxml  = state.xml.toString().replace(/<correct>[\\s\\S]*?<\\/correct>/img,qxml.toString());\r\n\t\t\t\tif(qxml.match(/<correct>\\s*<!\\[CDATA\\[\\s*\\]\\]>\\s*<\\/correct>/gmi) && (!state.xml.match(/<correct>\\s*<!\\[CDATA\\[\\s*\\]\\]>\\s*<\\/correct>/gmi))) {\r\n\t\t\t\t\tqxml = \tstate.xml;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstate.xml = qxml;\r\n\t\t\t\t\tgetChildXml(qxml);\t\r\n\t\t\t\t}\r\n\t\t\t\tAH.find('#authoringArea', 'form').remove();\r\n\t\t\t\trenderPlayer();\r\n\t\t\t\tAH.empty('#authoringFrame');\r\n\t\t\t\tlet testHtml = '<form method=\"post\" target=\"authoringFrame\" action=\"'+baseUrl+'sim/?in_editor=1\"><input type=\"hidden\" name=\"first_time\" value=\"1\"/><input type=\"hidden\" name=\"testmode\" value=\"1\"/><input type=\"hidden\" name=\"qxml\" value=\\''+qxml+'\\'/><input type=\"hidden\" name=\"content_guid\" value=\"0\" /></form>';\r\n\t\t\t\tAH.insert('#authoringArea', testHtml, 'beforeend');\r\n\t\t\t\tAH.insert(AH.select('#title', 'hide'), `<div id=\"tilteShow\">${AH.select('#title').innerHTML}</div>`, 'afterend');\r\n\t\t\t\tAH.insert(AH.select('#stem', 'hide'), `<div id=\"stemShow\">${AH.select('#stem').innerHTML}</div>`, 'afterend');\r\n\t\t\t\tAH.insert(AH.select('#remediation', 'hide'), `<div id=\"remediationShow\">${AH.select('#remediation').innerHTML}</div>`, 'afterend');\r\n\t\t\t\tAH.select('#externalInputs', 'hide');\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tAH.find(document, 'form[target=\"authoringFrame\"]').submit();\r\n\t\t\t\t\teditorState.activator = true;\r\n\t\t\t\t}, 200);\r\n\t\t} else { //Authoring Mode.\r\n\t\t\tlet uxml = document.getElementById(\"authoringFrame\").contentWindow.save_data(0, 0, true);\r\n\t\t\tif(!uxml.match(/<!\\[CDATA\\[\\s*html=dW5kZWZpbmVk\\s*\\]\\]>/gmi)) {\r\n\t  \t\t\tstate.uxml = uxml;\r\n\t  \t\t}\r\n\t\t\tAH.select(\"#authoringFrame\", 'attr', {'data-authoring': '1'});\r\n\t\t\tgetChildXml(state.xml);\r\n\t\t\t// get all the details according to th current xml\r\n\t\t\tvar windowHtml = getAuthoringForm(state.xml);\r\n\t\t\tAH.empty('#authoringFrame');\r\n\t\t\tAH.find('#authoringArea', 'form', {action: 'remove'});\r\n\t\t\tAH.insert('#authoringArea', windowHtml, 'beforeend');\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\t// submit the form and send data to sim/index.php\r\n\t\t\t\tAH.find(document, 'form[target=\"authoringFrame\"]').submit();\r\n\t\t\t\teditorState.activator = true;\r\n\t\t\t}, 200);\r\n\t\t\tAH.find(document, '#tilteShow,#stemShow,#remediationShow', {action: 'remove'});\r\n\t\t\tAH.selectAll('#title,#stem,#remediation,#externalInputs', 'show');\r\n\t\t\tAH.select('#heading', 'html', 'Authoring');\r\n\t\t\tunRenderPlayer();\r\n\t\t}\r\n\t\tstate.toggle = !state.toggle;\r\n\t}\r\n\r\n\t// calls whenever there is change in sequence and update the xml accordingly\r\n\tfunction handleSequence(event) {\r\n\t\t// getting the selected dropdown value\r\n\t\tlet value = event.target.value;\r\n\t\tstate.sequence = value;\r\n\t\t// updating the xml\r\n\t\tstate.xml = state.xml.toString().replace(/sequence=\"(.*?)\"/,'sequence=\"'+value+'\"');\r\n\t\t// updating and storing the xml\r\n\t\tgetChildXml(state.xml);\r\n  \t}\r\n\t  \r\n\t// calls whenever there is change in title textbox and update the xml accordingly\r\n\tfunction changeTitle(event) {\r\n\t\tstate.xml = state.xml.toString().replace(/title=\"(.*?)\"/img,'title=\"'+event.target.value+'\"');\r\n\t\t// updating and storing the xml\r\n\t\tgetChildXml(state.xml);\r\n\t}\r\n\t\r\n\t// calls whenever there is change in multicheck checkbox and update the xml accordingly\r\n  \tfunction multicheck(event) {\r\n\t\tstate.multicheck = event.target.checked;\r\n\t\t// updating the xml on the basis of multicheck is checked \r\n\t\tstate.xml = state.xml.toString().replace(/multicheck=\"(.*?)\"/img,'multicheck=\"'+event.target.checked+'\"');\r\n\t\t// updating and storing the xml\r\n\t\tgetChildXml(state.xml);\r\n\t}\r\n\t  \r\n\t// calls whenever there is change in default textfield and update the xml accordingly\r\n  \tfunction changeDefault(event) {\r\n\t\tstate.xml = state.xml.toString().replace(/<default>\\s*<\\!\\[CDATA\\[([\\s\\S]*?)\\]\\]>\\s*<\\/default>/img,'<default><![CDATA['+event.target.value+']]></default>');\r\n\t\t// updating the xml and storing the xml \r\n\t\tgetChildXml(state.xml);\r\n\t}\r\n\t\r\n\t// for rendering the player\r\n  \tfunction renderPlayer() {\r\n\t\tAH.empty('#authoringDiv player');\r\n\t\ttag_player(AH.select('#authoringDiv'));\r\n\t\tAH.find('#authoringDiv', 'player', 'addClass', 'hidecontent');\r\n\t\tAH.selectAll('#editor img').forEach(function(_this) {\r\n\t\t\t\tlet _src = _this.getAttribute('src');\r\n\t\t\t\tif (!_this.getAttribute('header-logo') && _src.indexOf('vimeocdn') == -1 && !_src.match(/\\/\\/s3.amazonaws.com\\/jigyaasa_content_static/gm)) {\r\n\t\t\t\t\t_this.setAttribute('src', '//s3.amazonaws.com/jigyaasa_content_static/'+ _src);\r\n\t\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// for unrendering the player\r\n\tfunction unRenderPlayer() {\r\n\t\tAH.empty('#authoringDiv player');\r\n\t\tAH.find('#authoringDiv', 'player', {action: 'removeClass', actionData: 'hidecontent'});\r\n\t\tAH.selectAll('#editor img').forEach(function(_this) {\r\n\t\t\tlet _src = _this.getAttribute('src');\r\n\t\t\tif (_src.indexOf('vimeocdn') == -1 && !_src.match(/\\/\\/s3.amazonaws.com\\/jigyaasa_content_static/gm)) {\r\n\t\t\t\t_this.setAttribute('src', _src);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// calls when remediation Mode is click\r\n  \tfunction remediationMode() {\r\n  \t\tif (state.xml) {\r\n  \t\t\tlet iframe = document.getElementById(\"authoringFrame\");\r\n \t\t\tlet uxml = iframe.contentWindow.save_data(0, 0, true);\r\n\t\t\tif (uxml.match(/<!\\[CDATA\\[\\s*html=dW5kZWZpbmVk\\s*\\]\\]>/gmi) && state.uxml != '') {\r\n\t\t\t\tuxml = state.uxml;\r\n\t\t\t} else {\r\n\t\t\t\tstate.uxml = uxml;\r\n\t\t\t}\r\n\t\t\tstate.remediationToggle = true;\r\n\t\t\tAH.ajax({\r\n\t\t\t\turl: baseUrl+'editor/index.php', // point to server-side PHP script \r\n\t\t\t\tdata: {\r\n\t\t\t\t\tajax : '1', \r\n\t\t\t\t\taction : \"external_reviewmode\",\r\n\t\t\t\t\tget_message: state.xml, \r\n\t\t\t\t\tuxml: uxml,\r\n\t\t\t\t\tcontent_subtype: 16\r\n\t\t\t\t},                         \r\n\t\t\t\ttype: 'post',\r\n\t\t\t}).then((response)=> {\r\n\t\t\t\tresponse = response.replace(/\\n/gmi,'<br/>');\r\n\t\t\t\tlet answer = response.replace(/\\s=\\s/gim,'=').match(/ans=\"(.*?)\"/img);\r\n\t\t\t\tanswer = (answer) ? answer.toString().replace(/ans=|\"/img,'') : '';\r\n\t\t\t\tmessage = UCLIB.ucfirst(answer);\r\n\t\t\t\tstate.snackback = true;\r\n\t\t\t\tAH.find(document, '#remediationModel').innerHTML = (response);\r\n\t\t\t})\t\r\n  \t\t} else {\r\n  \t\t\twindow.is_review = 1;\r\n  \t\t\trenderPlayer();\r\n  \t\t}\r\n\t}\r\n\t\r\n\t// for resetting the function \r\n\t// not found where it is called @pradeep sir please check once\r\n  \tfunction resetData() {\r\n  \t\tif(AH.select(\"#authoringFrame\").getAttribute('data-authoring') == '0') {\r\n  \t\t\tdocument.getElementById(\"authoringFrame\").contentWindow.resetInEditor();\r\n  \t\t\tstate.uxml = \"<smxml></smxml>\";\r\n  \t\t} else {\r\n\t\t\tstate.xml = state.xml.toString().replace(/<!\\[CDATA\\[[\\s\\S]*?\\]\\]>/gmi,'<![CDATA[]]>');\t\r\n\t\t\tstate.uxml = state.uxml.toString().replace(/<!\\[CDATA\\[[\\s\\S]*?\\]\\]>/gmi,'<![CDATA[]]>');\r\n  \t\t\tgetChildXml(state.xml);\r\n  \t\t\tAH.find(document, 'form[target=\"authoringFrame\"]').submit();\r\n  \t\t\teditorState.activator = true;\r\n  \t\t}\r\n\t  }\r\n</script>\r\n\r\n<div id=\"authoringArea\">\r\n\t<div id=\"externalInputs\" class=\"mt-md\"> \r\n\t\t<div class=\"col-md-12 float-left\">\r\n\t\t\t<div class=\"row mx-0\">\r\n\t\t\t\t<div class=\"col-md-6\">\r\n\t\t\t\t\t<Textfield \r\n\t\t\t\t\t\tid=\"externalTitle\" \r\n\t\t\t\t\t\tlabel={l.title}\r\n\t\t\t\t\t\tstyle=\"padding-top:0;\"\r\n\t\t\t\t\t\ton:change={changeTitle} \r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"col-md-6\">\r\n\t\t\t\t\t<Textfield\r\n\t\t\t\t\t\tid=\"defaultValues\"\r\n\t\t\t\t\t\tlabel={l.default}\r\n\t\t\t\t\t\tmultiline\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\ton:change={changeDefault}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"row mt-3 mx-0\">\r\n\t\t\t\t<div class=\"col-md-6 float-left\">\r\n\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\ton:click = {multicheck}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{l.multi_check} :\r\n\t\t\t\t\t</Checkbox>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"col-md-6\">\r\n\t\t\t\t\t<div class=\"float-left\" style=\"line-height: 27px;font-family:'Roboto, sans-serif'\">{l.sequence} : </div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\tvalue={state.sequence}\r\n\t\t\t\t\t\t\ton:blur={handleSequence}\r\n\t\t\t\t\t\t\tstyle=\"margin-left:10px\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<option value=\"0\">{\"No match\"}</option>\r\n\t\t\t\t\t\t\t<option value=\"1\">{\"Loose match\"}</option>\r\n\t\t\t\t\t\t\t<option value=\"2\">{\"Exact match\"}</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<center>\r\n\t\t<div id=\"frame\">\r\n\t\t\t<iframe \r\n\t\t\t\tid=\"authoringFrame\" \r\n\t\t\t\ttitle=\"External Module\"\r\n\t\t\t\tallowFullScreen={true} \r\n\t\t\t\twebkitallowfullscreen=\"true\" \r\n\t\t\t\tmozallowfullscreen=\"true\" \r\n\t\t\t\theight=\"550\" \r\n\t\t\t\twidth=\"94%\" \r\n\t\t\t\tname=\"authoringFrame\" \r\n\t\t\t\tdata-authoring=\"1\"\r\n\t\t\t></iframe>\r\n\t\t</div>\r\n\t</center>\r\n</div>\r\n<Dialog\t\t          \r\n\tbind:visible={state.remediationToggle}\r\n\twidth={450}\r\n>\r\n\t<div slot=\"title\" style=\"text-align: left;\">\r\n\t\t<div style=\"\">Review</div>\r\n\t</div>\r\n\t<div>\r\n\t\t<div id=\"remediationModel\">\r\n\t\t\t<center>\r\n\t\t\t\t<Loader size={70} />\r\n\t\t\t\t<h4>{l.calculate_answer}<br/> {l.please_wait}</h4>\r\n\t\t\t</center>\r\n\t\t</div>\r\n\t</div>\r\n\t<div slot=\"footer\" class=\"footer\" style=\"border-top: 1px solid var(--divider, rgba(0, 0, 0, 0.1));\">\r\n\t\t<Button\r\n\t\t\ton:click={()=> state.remediationToggle = false}\r\n\t\t>\r\n\t\t\t{l.done}\r\n\t\t</Button>\r\n\t</div>\r\n</Dialog>\r\n<Snackbar\r\n\tbind:visible={state.snackback} \r\n\tbg=\"#f44336\" \r\n\tbottom={true} \r\n\ttimeout={10}\r\n\tstyle=\"position: absolute;z-index:9999\"\r\n>\r\n\t{message}\r\n</Snackbar>"],"names":["l","multi_check","done","calculate_answer","please_wait","ctx","title","default","remediationToggle","snackback","sequence","setInlineEditor","editorState","getChildXml","_module","type","version","user_filter_ans","qxml","message","state","writable","xml","uxml","defaultValue","toggle","multicheck","titleData","stemData","remediationData","toggleMode","subscribe","item","getAuthoringForm","_qxml","defaultValues","match","toString","replace","trim","AH","select","value","newXml","parseHtml","getAttribute","baseUrl","err","console","log","renderPlayer","empty","tag_player","find","selectAll","forEach","_this","_src","indexOf","setAttribute","remediationMode","document","getElementById","contentWindow","save_data","ajax","url","data","action","get_message","content_subtype","then","response","answer","UCLIB","ucfirst","innerHTML","window","is_review","onMount","inNative","getHeight","setTimeout","windowHtml","insert","submit","activator","listen","filter_type","user_answer_array","split","correct_answer_string","uniqueAnswers","el","i","inArray","push","join","releventAnswers","filterUserAnswer","textContent","toLowerCase","bind","frameHeight","innerHeight","in_frame","height","didMount","beforeUpdate","data-authoring","preview","testHtml","authoring","actionData","onDestroy","event","target","checked"],"mappings":"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"}