{"version":3,"file":"FillInTheBlanksPreview-49a355eb.js","sources":["../../../clsSMFill/fillJSString.js","../../../clsSMFill/FillInTheBlanksPreview.svelte"],"sourcesContent":["import JUI, {Draggable} from '../src/libs/javscript_helper/JUI.js';\r\nconst JS = new JUI();\r\n\r\nlet previous_droped_item = {};\r\nexport default class fillJS {\r\n\tconstructor(options) {\r\n\t\t//super();\r\n\t\tthis.userAnsXML = \"\";\r\n\t\tthis.sInfo = true;\r\n\t\tthis.labBinded = true;\r\n\t\tthis.delPreSpaces = {};\r\n\t\tthis.init();\r\n\t\tthis.iscorrect = '-2';\r\n\t\t\r\n\t}\r\n\tinit() {\r\n\t\tthis.delPreSpaces = {\r\n\t\t\tloopGaurd : 0,\r\n\t\t\twithLines : ( fillid )=> {\r\n\t\t\t\tif (this.delPreSpaces.loopGaurd > 0) { \r\n\t\t\t\t\tif (typeof activate == \"function\") activate(1);\r\n\t\t\t\t\tJS.selectAll(fillid, 'hide');\r\n\t\t\t\t}\r\n\t\t\t\tvar ln = JS.selectAll('.linenums li').length, cr = true, li_arr = [];\r\n\t\r\n\t\t\t\tif (ln == 0 && this.delPreSpaces.loopGaurd <= 4) {\r\n\t\t\t\t\tthis.delPreSpaces.loopGaurd ++;\r\n\t\t\t\t\tsetTimeout(()=> {this.delPreSpaces.withLines(fillid)}, 1000);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.showFillModule( fillid );\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tJS.selectAll('.linenums li').forEach((_this, i)=> {\r\n\t\t\t\t\tif (JS.find(_this, 'span').innerHTML == \"&nbsp;\" || JS.find(_this, 'span').innerHTML == \"\") {\r\n\t\t\t\t\t\t_this.remove();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tli_arr.push(_this);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\r\n\t\t\t\tli_arr.forEach((val, i)=> {\r\n\t\t\t\t\tif (val.children.classList.contains('fillelement') || val.children.classList.contains('dropable')) {\r\n\t\t\t\t\t\tlet ht;\r\n\t\t\t\t\t\tval.children.forEach((_this)=> {\r\n\t\t\t\t\t\t\t(_this.innerHTML == \"\") ? _this.remove() : ht = _this;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tJS.prevElm(val).append(ht)\r\n\t\t\t\t\t\tJS.insert(JS.prevElm(val), JS.nextElm(val).innerHTML, 'beforeend');\r\n\t\t\t\t\t\tJS.nextElm(val).remove();\r\n\t\t\t\t\t\tval.remove();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\t\r\n\t\t\t},\r\n\t\t\twithoutLines : (fillid)=> {\r\n\t\t\t\t//var _this = this;\r\n\t\t\t\tvar fill_pre = JS.find(fillid, '.fillelement,.dropable', 'all');\r\n\t\t\t\tfill_pre.forEach((_this)=> {\r\n\t\t\t\t\tvar pre_prv  = JS.prevElm(_this).innerHTML.trim();\r\n\t\t\t\t\tvar pre_nxt  = JS.nextElm(_this).innerHTML.trim();\r\n\t\t\t\t\tif ( delPreSpaces.loopGaurd > 0 ) { \r\n\t\t\t\t\t\tif (typeof activate == \"function\") activate(1);\r\n\t\t\t\t\t\tJS.selectAll(fillid, 'hide');\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tvar ln  = JS.find(fillid, '.kwd', 'all').length;\r\n\t\t\r\n\t\t\t\t\tif ( ln == 0 && delPreSpaces.loopGaurd <= 4 ) {\r\n\t\t\t\t\t\tdelPreSpaces.loopGaurd ++;\r\n\t\t\t\t\t\tsetTimeout(()=> { delPreSpaces.withoutLines(fillid) }, 1000);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.showFillModule( fillid );\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif ( pre_prv == \"\") {\r\n\t\t\t\t\t\tJS.prevElm(_this).remove();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tJS.prevElm(_this).innerHTML = pre_prv;\r\n\t\t\t\t\t}\r\n\t\t\r\n\t\t\t\t\tif ( pre_nxt == \"\" ) {\r\n\t\t\t\t\t\tJS.nextElm(_this).remove();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tJS.nextElm(_this).innerHTML = pre_nxt;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\r\n\t\t\t},\r\n\t\r\n\t\t\tshowFillModule : (fillid)=> {\r\n\t\t\t\tif (typeof activate == \"function\") activate(0);\r\n\t\t\t\tif (typeof quizPlayerStatic != \"undefined\") {\r\n\t\t\t\t\tif (typeof QuizPlayer != \"undefined\") {\r\n\t\t\t\t\t\tQuizPlayer.setNewHeight( quizPlayerStatic );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tJS.selectAll(fillid, 'show');\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\tsetUpdate(func) {\r\n\t\tthis.updateModule = func;\r\n\t}\r\n\r\n\treadyFill(fillid) {\r\n\t\tlet drag_id = \"\";\r\n\t\tlet drop_target = \"\";\r\n\t\tlet distance = 80, step = 5;\r\n\t\tJS.bind(fillid +' select', 'change',()=> {\r\n\t\t\tJS.trigger(fillid, 'click');\r\n\t\t});\r\n\t\tthis.dragOptionFill = {\r\n\t\t\tappendTo: \"body\",\r\n\t\t\tzIndex:100,\r\n\t\t\trevert: (is_valid_drop)=> {\r\n\t\t\t\tif (!is_valid_drop) {\r\n\t\t\t\t\tif (this.sInfo) {\r\n\t\t\t\t\t\tthis.sInfo = false;\r\n\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\tthis.sInfo = true;\r\n\t\t\t\t\t\t}, 60*1000);\r\n\t\t\t\t\t\tJS.showmsg('While dropping a component, keep your mouse pointer on the drop area. Drop area must be compatible with the component you are dropping.', 100);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t/*if (!!$(\"#error\")[0].play) {\r\n\t\t\t\t\t\ttry{ $(\"#error\")[0].currentTime = 0; }catch(err) {}\r\n\t\t\t\t\t\t$(\"#error\")[0].play();\r\n\t\t\t\t\t}*/\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thelper: (e)=> {\r\n\t\t\t\tvar target = e.target;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (target.classList.contains(\"dropable\")) {\r\n\t\t\t\t\t\ttarget = JS.find(fillid, '#'+ e.target.getAttribute('droped'));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.img = {\r\n\t\t\t\t\t\t\"width\": JS.select(target).clientWidth,\r\n\t\t\t\t\t\t\"height\": 'auto'\r\n\t\t\t\t\t};\r\n\t\t\t\t\te.target.draggable(\"option\", \"cursorAt\", {\r\n\t\t\t\t\t\tleft: Math.floor(this.img.width / 2),\r\n\t\t\t\t\t\ttop: -10,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tvar cl = e.target.cloneNode(true).css({\r\n\t\t\t\t\t\twidth: this.img.width+\"px\",\r\n\t\t\t\t\t\theight: this.img.height+\"px\",\r\n\t\t\t\t\t\t\"position\":\"absolute\",\r\n\t\t\t\t\t\t\"text-align\":\"center\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn cl;\r\n\t\t\t\t} catch(err) {\r\n\t\t\t\t\tconsole.warn(\"Helper:\",err);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonDragStart: (e)=> {\r\n\t\t\t\te.target.dataset[\"drag_enable\"] = true;\r\n\t\t\t},\r\n\t\t\tonDragEnter: (e)=> {\r\n\t\t\t\te.target.classList.add(\"drop-hover\");\r\n\t\t\t},\r\n\t\t\tonDragLeave: (e)=> {\r\n\t\t\t\te.target.classList.remove('drop-hover');\r\n\t\t\t},\r\n\t\t\tonDrop: ( event, dragElm )=> {\r\n\t\t\t\tconst _this = event.target;\r\n\t\t\t\tconst drop_id = dragElm.getAttribute('droped') ? dragElm.getAttribute('droped') : dragElm.getAttribute('id');\r\n\t\t\t\t\r\n\t\t\t\tif (_this.getAttribute(\"droped\").trim() != \"\") {\r\n\t\t\t\t\t//JS.find(fillid, '#' + _this.getAttribute(\"droped\")).draggable('enable');\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_this.innerHTML = dragElm.innerHTML;\r\n\t\t\t\tJS.select(_this, 'attr', {userans: drop_id, droped: drop_id, path: dragElm.getAttribute('path')});\r\n\t\t\t\tJS.select(_this, 'css', {backgroundColor: dragElm.style.backgroundColor});\r\n\t\t\t\t// .draggable($.extend(ucFill.dragOptionFill,{revert:false}))\r\n\t\t\t\tdrop_target = _this.id;\r\n\t\t\t\t//ucFill.checkAns(\"#previewArea\");\r\n\t\t\t\tthis.checkAns(fillid);\r\n\t\t\t\t_this.classList.remove(\"drop-hover\")\r\n\t\t\t},\r\n\t\t\tonDragEnd: (e, dragElm)=> {\r\n\t\t\t\tlet _this = e.target;\r\n\t\t\t\tif (_this.classList.contains('dropable')) {\r\n\t\t\t\t\tif (_this.dataset[\"drag_enable\"]) {\r\n\t\t\t\t\t\t//$(fillid).find('#'+_this.attr('droped')).draggable('enable');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tJS.select(_this, 'css',{ backgroundColor: _this.getAttribute('bgcolor')});\r\n\t\t\t\t\t_this.textContent = _this.getAttribute('caption');\r\n\t\t\t\t\tJS.selectAll(_this, 'attr', {droped: \"\", userans: \"\"});\r\n\t\t\t\t}\r\n\t\t\t\tdrag_id = _this.id;\r\n\t\t\t\t\r\n\t\t\t\tif (_this.classList.contains('dropable')) {\t\r\n\t\t\t\t\tconst rel_id = JS.select('#' + drop_target).getAttribute('droped');\r\n\t\t\t\t\tif (rel_id && JS.select('#' + rel_id).getAttribute('drag-single') == 1) {\r\n\t\t\t\t\t\tthis.dnd.disableDrag('#' + rel_id);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (drag_id && JS.select('#' + drag_id).getAttribute('drag-single') == 1 && drop_target != \"\") {\r\n\t\t\t\t\t\tthis.dnd.disableDrag('#' + drag_id);\r\n\t\t\t\t\t\t// Remove the dragable disabled from previous\r\n\t\t\t\t\t\tif (previous_droped_item && Object.entries(previous_droped_item) && previous_droped_item[drop_target]) {\r\n\t\t\t\t\t\t\tprevious_droped_item[drop_target].setAttribute('draggable','true');\r\n\t\t\t\t\t\t\tprevious_droped_item[drop_target].setAttribute('aria-disabled','false');\r\n\t\t\t\t\t\t\tprevious_droped_item[drop_target].classList.remove('ui-draggable-disabled', 'ui-state-disabled');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// Add the diabled features to current droped item\r\n\t\t\t\t\t\tlet selected = document.querySelector('#' + drag_id);\r\n\t\t\t\t\t\tselected.setAttribute('draggable','false');\r\n\t\t\t\t\t\tselected.setAttribute('aria-disabled','true');\r\n\t\t\t\t\t\tselected.classList.add('ui-draggable-disabled', 'ui-state-disabled');\r\n\t\t\t\t\t\tprevious_droped_item[drop_target] = selected;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.checkAns(fillid);\r\n\t\t\t\tdrop_target=\"\";\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tscroll: 'true',\r\n\t\t\trefreshPositions: true,\r\n\t\t\tcursor: \"default\",\r\n\t\t\t//copy: true,\r\n\t\t};\r\n\t\twindow.fillid = fillid;\r\n\t\tif (!this.dnd) {\r\n\t\t\tthis.dnd = new Draggable(this.dragOptionFill);\r\n\t\t}\r\n\t\t// Set Drag area\r\n\t\tJS.find(fillid, '.dragable', 'all').forEach((elm)=> this.dnd.setDrag(elm));\r\n\t\t//$(fillid).find('.dragable').draggable();\r\n\t\t\r\n\t\tJS.find(fillid, '.dropable', 'all').forEach((_elm)=> {\r\n\t\t\tconst pre_id = _elm.getAttribute('droped');\r\n\t\t\tif (pre_id && JS.select('#' + pre_id).getAttribute('drag-single') == 1) {\r\n\t\t\t\tthis.dnd.disableDrag( JS.select('#'+ pre_id) );\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t//$(fillid).find('.dragable').draggable(ucFill.dragOptionFill);\r\n\t\t\r\n\t\tJS.find(fillid, '[droped*=ID]', 'all').forEach((_this, i)=> {\r\n\t\t\tif (JS.find(fillid, '#'+ _this.getAttribute('droped')).getAttribute('multi_drag') == \"0\") {\r\n\t\t\t\tthis.dnd.disableDrag(JS.find(fillid, '#'+_this.getAttribute('droped')));\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tJS.find(fillid, '.dropable', 'all').forEach((elm)=> this.dnd.setDrop(elm));\r\n\t\t//$(fillid).find('.dropable');\r\n\t}\r\n\r\n\tbindKeyup(fillid) {\r\n\t\t//Add keyboard Support class\r\n\t\tJS.find(fillid, \".fillelement\", 'all').forEach((_this)=> { JS.selectAll(Array.from(_this.children), 'addClass', \"ks\"); });\r\n\t\tJS.find(fillid, \".dragable\", 'all').forEach((_this)=> { _this.classList.add(\"ks\"); });\r\n\t\tJS.find(fillid, \".dropable\", 'all').forEach((_this)=> { _this.classList.add(\"ks\"); });\r\n\t\t//\r\n\r\n\t\t//Initialize\r\n\t\tlet count = 0;\r\n\t\tlet count_prev = 0;\r\n\t\tlet copied_id = \"\";\r\n\t\tlet ks_activated = false;\r\n\t\tlet drag_id = \"\";\r\n\t\tlet drop_target = \"\";\r\n\r\n\t\tJS.listen(document, \"click\", fillid, (_this, event)=> {\r\n\t\t\t\r\n\t\t\tif (!window.isReview && !this.checkFocus(\"ks\")) {\r\n\t\t\t\tJS.selectAll(JS.find(fillid, \".copiedclr\", 'all'), 'removeClass', \"copiedclr\");\r\n\t\t\t\tcount = 0;\r\n\t\t\t\tcount_prev = 0;\r\n\t\t\t\tcopied_id = \"\";\r\n\t\t\t\tks_activated = false;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// JS.bind(JS.find(fillid, \"input\"), \"keypress\", (e)=> {\r\n\t\t// \tif (e.which == 13) {\r\n\t\t// \t\te.preventDefault();\r\n\t\t// \t\treturn false;\r\n\t\t// \t}\r\n\t\t// });\r\n\r\n\r\n\t\tfunction copyDraggable() {\r\n\t\t\tvar copy_drag = JS.select(fillid+\" .ks:focus\");\r\n\t\t\tif(copy_drag.classList.contains('dragable') && !copy_drag.classList.contains('ui-state-disabled')) {\r\n\t\t\t\tJS.selectAll(fillid + ' .dragable').forEach(function(_this){\r\n\t\t\t\t\tif(_this.classList.contains('copiedclr')) {\r\n\t\t\t\t\t\t_this.classList.remove(\"copiedclr\");\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t//const drop_id = dragElm.getAttribute('droped') ? dragElm.getAttribute('droped') : dragElm.getAttribute('id');\r\n\t\t\t\tcopied_id = copy_drag.id;\r\n\t\t\t\tcopy_drag.classList.add('copiedclr');\r\n\t\t\t} else {\r\n\t\t\t\tshowmsg('You cannot drop this, as it is already dropped', 3);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tfunction pasteDraggable() {\r\n\t\t\t//var paste_drag = $(fillid).find(\".ks:focus\");\r\n\t\t\tvar paste_drag = JS.select(fillid+\" .ks:focus\");\r\n\t\t\t//if (copied_id != \"\" && paste_drag.hasClass('dropable')) {\r\n\t\t\tif (copied_id != \"\" && paste_drag.classList.contains('dropable')) {\r\n\t\t\t\t//var _this_drag = $(\".footerstr\").find(\"#\"+copied_id+\"\");\r\n\t\t\t\tvar _this_drag = JS.select('.footerStr '+\"#\"+copied_id)\r\n\r\n\t\t\t\t//_this_drag.removeClass(\"copiedclr\");\r\n\t\t\t\t_this_drag.classList.remove(\"copiedclr\");\r\n\t\t\t\t//$(_this_drag).data(\"drag_enable\",true);\r\n\t\t\t\t_this_drag.setAttribute(\"drag_enable\",true)\r\n\t\r\n\t\t\t\t//var drop_id = $(_this_drag).attr('droped')?$(_this_drag).attr('droped'):$(_this_drag).attr('id');\r\n\t\t\t\tvar drop_id = _this_drag.getAttribute('droped') ? _this_drag.getAttribute('droped') : _this_drag.getAttribute('id');\r\n\t\t\t\t\r\n\t\t\t\t// if ($.trim($(paste_drag).attr(\"droped\")) != \"\") {\r\n\t\t\t\t// \t$(fillid).find('#'+$(paste_drag).attr(\"droped\")).draggable('enable');\r\n\t\t\t\t// }\r\n\t\t\t\tif(paste_drag.getAttribute(\"droped\").trim() != \"\" ) {\r\n\t\t\t\t\t//JS.find(fillid,'#'+paste_drag).getAttribute(\"droped\");\r\n\t\t\t\t}\r\n\t\t\t\t// if ($.browser.msie && $(fillid).find('#'+drop_id).text() == \"\") {\r\n\t\t\t\t// \t$(_this_drag).css(\"background-color\",\"transparent\");\r\n\t\t\t\t// }\r\n\r\n\t\t\t\tif (JS.find(fillid,'#'+drop_id).innerText == \"\") {\r\n\t\t\t\t\t_this_drag.style.backgroundColor =\"transparent\";\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\t//$(paste_drag).html($(_this_drag).html()).attr('userans',drop_id).css({\"background-color\":$(_this_drag).css(\"background-color\")})\r\n\r\n\t\t\t\tpaste_drag.innerHTML = _this_drag.innerHTML;\r\n\t\t\t\tpaste_drag.setAttribute('userans',drop_id);\r\n\t\t\t\tlet _this_drag_style = window.getComputedStyle(_this_drag);\r\n\t\t\t\tpaste_drag.style.backgroundColor = _this_drag_style.getPropertyValue('background-color');\r\n\t\t\t\tpaste_drag.setAttribute('droped',drop_id);\r\n\t\t\t\tpaste_drag.setAttribute('path',_this_drag.getAttribute('path'));\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t\t// .draggable($.extend(ucFill.dragOptionFill,{revert:false}))\r\n\t\t\t\t// .attr({'droped':drop_id,'path':$(_this_drag).attr('path')});\r\n\t\t\t\tdrop_target = paste_drag.getAttribute(\"id\");\r\n\t\t\t\tucFill.checkAns(fillid);\r\n\t\r\n\t\t\t\tdragStop(_this_drag);\r\n\t\t\t\tcopied_id = \"\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction disableDrag(target) {\r\n\t\t\tlet selected = (typeof target == 'object') ? target : document.querySelector(target);\r\n\t\t\tif (selected) {\r\n\t\t\t\tselected.removeAttribute(['dragable','draggable']);\r\n\t\t\t\tselected.classList.remove('dragable')\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tfunction dragStop(_this_drag) {\r\n\t\t\tlet drop_id = _this_drag.getAttribute('userans');\r\n\t\t\tif(_this_drag.classList.contains('dropable')) {\r\n\t\t\t\tif (_this_drag.getAttribute(\"drag_enable\")) {\r\n\t\t\t\t\t//$(fillid).find('#'+$(_this_drag).attr('droped')).draggable('enable');\r\n\t\t\t\t\t_this_drag.getAttribute('droped');\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_this_drag.style.backgroundColor = _this_drag.getAttribute('bgcolor');\r\n\t\t\t\t_this_drag.innerText = _this_drag.getAttribute('caption');\r\n\t\t\t\t_this_drag.setAttribute('droped','');\r\n\t\t\t\t_this_drag.setAttribute('userans','');\r\n\r\n\r\n\t\t\t}\r\n\t\t\t//drag_id = $(_this_drag).attr(\"id\");\r\n\t\t\tdrag_id = _this_drag.getAttribute(\"id\");\r\n\t\t\t\r\n\t\t\tif(JS.select(\"#\"+drag_id).classList.contains('dropable')) {\r\n\t\t\t\tvar rel_id = drop_target && JS.select('#' + drop_target).getAttribute('droped');\r\n\t\t\t\tif (rel_id && JS('#' + rel_id).getAttribute('drag-single') == 1) {\r\n\t\t\t\t\t//$('#' + rel_id).draggable({ disabled: true });\r\n\t\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t} \r\n\t\t\t\telse {\r\n\t\t\t\t\t// if (JS.select('#' + drag_id).getAttribute('drag-single') == 1 && drop_target != \"\") {\r\n\t\t\t\t\t\t//disableDrag('#' + drag_id);\r\n\t\t\t\t\t\tif (JS.select('#'+drop_id)) { //&& previous_droped_item[copied_id]\r\n\t\t\t\t\t\t\tJS.select('#'+drop_id).setAttribute('draggable','true');\r\n\t\t\t\t\t\t\tJS.select('#'+drop_id).setAttribute('aria-disabled','false');\r\n\t\t\t\t\t\t\tJS.select('#'+drop_id).classList.remove('ui-draggable-disabled', 'ui-state-disabled');\r\n\t\t\t\t\t\t\tJS.select('#'+drop_id).classList.add('dragable');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// // Add the diabled features to current droped item\r\n\t\t\t\t\t\t//let selected = document.querySelector('#' + drag_id);\r\n\t\t\t\t\t\t// selected.setAttribute('draggable','false');\r\n\t\t\t\t\t\t// selected.setAttribute('aria-disabled','true');\r\n\t\t\t\t\t\t// selected.classList.add('ui-draggable-disabled', 'ui-state-disabled');\r\n\t\t\t\t\t\t// previous_droped_item[drop_target] = selected;\r\n\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t//}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (JS.select('#' + drag_id).getAttribute('drag-single') == 1 && drop_target != \"\") {\r\n\t\t\t\t\tdisableDrag('#' + drag_id);\r\n\t\t\t\t\tif (Object.entries(previous_droped_item) && previous_droped_item[drop_target]) {\r\n\t\t\t\t\t\tprevious_droped_item[drop_target].setAttribute('draggable','true');\r\n\t\t\t\t\t\tprevious_droped_item[drop_target].setAttribute('aria-disabled','false');\r\n\t\t\t\t\t\tprevious_droped_item[drop_target].classList.remove('ui-draggable-disabled', 'ui-state-disabled');\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t// // Add the diabled features to current droped item\r\n\t\t\t\t\tlet selected = document.querySelector('#' + drag_id);\r\n\t\t\t\t\tselected.setAttribute('draggable','false');\r\n\t\t\t\t\tselected.setAttribute('aria-disabled','true');\r\n\t\t\t\t\tselected.classList.add('ui-draggable-disabled', 'ui-state-disabled');\r\n\t\t\t\t\tprevious_droped_item[drop_target] = selected;\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tsetTimeout(function() {ucFill.checkAns(fillid)},100);\r\n\t\t\tdrop_target=\"\";\r\n\t\t}\r\n\r\n\t\tfunction removeDraggable() {\r\n\t\t\t//var remove_id = $(fillid).find(\".ks:focus\");\r\n\t\t\tvar remove_id = JS.select(fillid+\" .ks:focus\");\r\n\t\t\tif (remove_id.getAttribute(\"droped\")) {\r\n\t\t\t\t//$(remove_id).data(\"drag_enable\",true);\r\n\t\t\t\tremove_id.setAttribute(\"drag_enable\",true);\r\n\t\t\t\tdragStop(remove_id);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tJS.listen(document,'keydown','.dragable',function(data,e){\r\n\t\t\tif(e.which === 13) {\r\n\t\t\t\tif (!window.learn) {\r\n\t\t\t\t\tcopyDraggable();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tJS.listen(document,'keydown','.dropable',function(data,e){\r\n\t\t\tif(e.which === 13) {\r\n\t\t\t\tif (!window.learn) {\r\n\t\t\t\t\tpasteDraggable();\r\n\t\t\t\t}\r\n\t\t\t} else if(e.which === 8) {\r\n\t\t\t\tif (!window.learn) {\r\n\t\t\t\t\tremoveDraggable();\r\n\t\t\t\t}\r\n\t\t\t}\t\t\t\r\n\t\t})\r\n\r\n\t\t// JS.listen(document,'keydown','.dropable',function(data,e){\r\n\t\t// \tif(e.which === 8) {\r\n\t\t// \t\tremoveDraggable();\r\n\t\t// \t}\r\n\t\t// })\r\n\r\n\t\t\r\n\r\n\r\n\r\n\t\t\r\n\t\t// if (typeof hotkeys == 'function') {\r\n\t\t// \thotkeys.unbind('alt+down,enter,delete,esc','fillintheblank');\r\n\t\t// \thotkeys(\"alt+down,enter,delete,esc\",'fillintheblank', (event, handler)=> {\r\n\t\t// \t\tswitch (handler.key) {\r\n\t\t// \t\t\tcase 'alt+down' :\r\n\t\t// \t\t\t\tactivateKs();\r\n\t\t// \t\t\tbreak;\r\n\t\t// \t\t\tcase 'enter' :\r\n\t\t// \t\t\t\tif ($(\"#sm_controller\").css(\"display\") == \"none\") {\r\n\t\t// \t\t\t\t\tif (checkFocus(\"dragable\")) {\r\n\t\t// \t\t\t\t\t\tcopyDraggable();\r\n\t\t// \t\t\t\t\t} else if (checkFocus(\"dropable\")) {\r\n\t\t// \t\t\t\t\t\tpasteDraggable();\r\n\t\t// \t\t\t\t\t}\r\n\t\t// \t\t\t\t}\r\n\t\t// \t\t\tbreak;\r\n\t\t// \t\t\tcase 'delete' :\r\n\t\t// \t\t\t\tif ($(\"#sm_controller\").css(\"display\") == \"none\") {\r\n\t\t// \t\t\t\t\tif (checkFocus(\"dropable\")) {\r\n\t\t// \t\t\t\t\t\tremoveDraggable();\r\n\t\t// \t\t\t\t\t}\r\n\t\t// \t\t\t\t}\r\n\t\t// \t\t\tbreak;\r\n\t\t// \t\t\tcase 'esc' :\r\n\t\t// \t\t\t\tif ($(\"#sm_controller\").css(\"display\") == \"none\") {\r\n\t\t// \t\t\t\t\tif (checkFocus(\"ks\")) {\r\n\t\t// \t\t\t\t\t\t$(fillid).find(\".copiedclr\").removeClass(\"copiedclr\");\r\n\t\t// \t\t\t\t\t\tcount = 0;\r\n\t\t// \t\t\t\t\t\tcount_prev = 0;\r\n\t\t// \t\t\t\t\t\tcopied_id = \"\";\r\n\t\t// \t\t\t\t\t\tks_activated = false;\r\n\t\t// \t\t\t\t\t\t$('.ks').last().focus();\r\n\t\t// \t\t\t\t\t\t$('.ks').last().blur();\r\n\t\t// \t\t\t\t\t}\t\r\n\t\t// \t\t\t\t}\r\n\t\t// \t\t\tbreak;\r\n\t\t// \t\t}\r\n\t\t// \t});\r\n\t\t// \thotkeys.setScope('fillintheblank');\r\n\t\t// \thotkeys.filter = function(event) {\r\n\t\t// \t\treturn true;\r\n\t\t// \t}\r\n\t\t// }\r\n\t\t\r\n\t}\r\n\r\n\t\r\n\r\n\tcheckFocus(list) {\r\n\t\tthis.checkAns && this.checkAns(ajax_eId);\r\n\t\tvar is_focus = false;\r\n\t\tJS.find(ajax_eId, \".\"+list, 'all').forEach((_this)=> {\r\n\t\t\tif (JS.isFocus(_this)) {\r\n\t\t\t\tis_focus = true;\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn is_focus;\r\n\t}\r\n\r\n\tshowdragans(fillid, ansType, review) {\r\n\t\tif (typeof review === \"undefined\") review = 0;\r\n\t\tJS.find(fillid, 'select,input,textarea,.dropable,span.edit_step', 'all').forEach((_this)=> {\r\n\t\t\tthis.showchilddragans(fillid, _this, ansType, review);\r\n\t\t});\r\n\t}\r\n\r\n\t\r\n\t\r\n\tshowchilddragans(fillid, pElem, ansType, review) {\r\n\t\tlet is_correct = -2;\r\n\t\tif (pElem.classList.contains('dropable')) {\r\n\t\t\tpElem.innerHTML = pElem.getAttribute('caption').replace(/\\#doublequote#/gmi,'\"');\r\n\t\t\tJS.setCss(pElem, {\"background-color\": pElem.getAttribute(\"bgcolor\")} );\r\n\t\t\tif (ansType == 'c') {\r\n\t\t\t\tvar ansKey = pElem.getAttribute('anskey').split(',');\r\n\t\t\t\tansKey.forEach((value, index)=> {\r\n\t\t\t\t\tif (value.trim() != \"\") {\r\n\t\t\t\t\t\tconst $anskey = JS.find(fillid, '#'+value);\r\n\t\t\t\t\t\tif ($anskey) {\r\n\t\t\t\t\t\t\tpElem.innerHTML = $anskey.getAttribute('caption').replace(/\\#doublequote#/gmi,'\"');\r\n\t\t\t\t\t\t\tJS.setCss(pElem, {backgroundColor: $anskey.getAttribute(\"bgcolor\")});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else if (ansType == 'u') {\r\n\t\t\t\tis_correct = -1;\r\n\t\t\t\tif (pElem.getAttribute('userans').trim() != \"\") {\r\n\t\t\t\t\tthis.userans = JS.find(fillid, '#'+ pElem.getAttribute('userans'));\r\n\t\t\t\t\tif (this.userans) {\r\n\t\t\t\t\t\tpElem.innerHTML = this.userans.getAttribute('caption').replace(/\\#doublequote#/gmi,'\"');\r\n\t\t\t\t\t\tJS.setCss(pElem, {backgroundColor: this.userans.getAttribute(\"bgcolor\")});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tconst cans = pElem.getAttribute('anskey');\r\n\t\t\t\tconst uans = pElem.getAttribute('userans');\r\n\t\t\t\tif (uans != \"\" && cans.indexOf(uans) > -1) { is_correct = 1; } \r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (pElem.classList.contains('edit_step')) {\r\n\t\t\tif (review == 1) {\r\n\t\t\t\tif (ansType=='c') {\r\n\t\t\t\t\tJS.selectAll('.edit_step', 'css', {\r\n\t\t\t\t\t\t'border' : 'none',\r\n\t\t\t\t\t\t'display' : 'none',\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (ansType=='u') {\r\n\t\t\t\t\tJS.selectAll('.edit_step', 'css', {\r\n\t\t\t\t\t\t'cursor' : 'none',\r\n\t\t\t\t\t\t'display': 'block',\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tis_correct = this.fillTestText(fillid, pElem);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (pElem.parentElement.classList.contains('fillelement')) {\r\n\t\t\tif (pElem.nodeName == \"SELECT\") {\r\n\t\t\t\tis_correct = -1;\r\n\t\t\t\tthis.totalcorrect = JS.find(pElem, \"[correctans='1']\", 'all').length;\r\n\t\t\t\tthis.a = 0;\r\n\t\t\t\tJS.find(pElem, \"option\", 'all').forEach((_this, i)=> {\r\n\t\t\t\t\t_this.removeAttribute(\"selected\");\r\n\t\t\t\t\t_this.selected = false;\r\n\t\t\t\t\tif (ansType=='c') {\r\n\t\t\t\t\t\tif (_this.getAttribute(\"correctans\") > 0) _this.selected = true;\r\n\t\t\t\t\t} else if (ansType=='u') {\r\n\t\t\t\t\t\tif (_this.getAttribute(\"userans\") > 0) _this.selected = true;\r\n\t\t\t\t\t\tif (_this.selected && _this.getAttribute('correctans') == 1) { this.a++; }\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif (this.totalcorrect == this.a) is_correct = 1;\r\n\t\t\t} else if (pElem.nodeName == \"INPUT\" || pElem.nodeName == \"TEXTAREA\") {\r\n\t\t\t\tif (typeof(pElem.type) == \"undefined\") {this.type = 'text';}\r\n\t\t\t\tif (ansType=='c') {  //correct answer\r\n\t\t\t\t\tvar anskey = pElem.getAttribute(\"anskey\").split(',');\r\n\t\t\t\t\tif (anskey.length > 1) {\r\n\t\t\t\t\t\tvar tooltip = \"<p style='text-align:left;'>All of the answers are correct!<br>\";\r\n\t\t\t\t\t\tanskey.forEach((value, index)=> {\r\n\t\t\t\t\t\t\ttooltip += \"(\" + (index + 1) + \") \" + value.replace(/#cm/g,',')  + \"<br>\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\tJS.select(pElem.parentElement,'attr', {'rel': 'multiple_answers', 'title' : tooltip + '</p>' ,'data-bs-toggle':'tooltip', 'data-toggle':'tooltip', 'data-bs-html':'true','data-html':'true'});\r\n\t\t\t\t\t\t\tJS.enableBsAll(\"[data-bs-toggle='tooltip']\", 'Tooltip', {container: 'body'});\r\n\t\t\t\t\t\t},300)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpElem.value = pElem.getAttribute(\"anskey\").replace(/#cm/g,',');\r\n\t\t\t\t} else if (ansType=='u') {  //user answer\r\n\t\t\t\t\tpElem.removeAttribute(['rel', 'title', 'data-html']);\r\n\t\t\t\t\t//$('[rel=multiple_answers]').tooltip('dispose');\r\n\t\t\t\t\tif (pElem.getAttribute(\"userans\") == \"\" && pElem.getAttribute(\"defaultAns\") !== \"\") {\r\n\t\t\t\t\t\tpElem.value = pElem.getAttribute(\"defaultAns\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar __ans = pElem.getAttribute(\"userans\");\r\n\t\t\t\t\t\tif (pElem.nodeName == \"TEXTAREA\") {\r\n\t\t\t\t\t\t\t__ans = __ans.replace(/#singlequote#/g, \"'\");\r\n\t\t\t\t\t\t\t__ans = __ans.replace(/#dblquote#/g, '\"');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tpElem.value = __ans;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tis_correct = this.fillTestText(fillid, pElem);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (ansType == 'u' && review==1) {\r\n\t\t\tif (is_correct != -2 && parseInt(JS.select(fillid).getAttribute(\"manual_grade\")) != 1) {\r\n\t\t\t\tconst correct_incorrect_mark = this.markUserAnswer(is_correct);\r\n\t\t\t\tif (pElem.classList.contains('dropable')) {\r\n\t\t\t\t\tJS.insert(pElem, correct_incorrect_mark, 'beforeend');\r\n\t\t\t\t\tpElem.setAttribute('as', is_correct);\r\n\t\t\t\t} else if (pElem.classList.contains('edit_step')) {\r\n\t\t\t\t\tif (is_correct == 1) {\r\n\t\t\t\t\t\tJS.selectAll(\"#\"+ pElem.getAttribute('id'), 'css', { 'border': '2px solid green'});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tJS.selectAll(\"#\"+ pElem.getAttribute('id'),'css', {'border': '2px solid red'});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tpElem.setAttribute('as', is_correct);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tJS.insert(pElem.parentElement, correct_incorrect_mark, 'beforeend');\r\n\t\t\t\t\tpElem.parentElement.setAttribute('as', is_correct);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tpElem.setAttribute('title', is_correct == 1 ? 'is marked as Correct' : 'is marked as incorrect');\r\n\t\t} else {\r\n\t\t\tJS.find(fillid, '.correct_incorrect_icon_fill', {action:'remove'})\r\n\t\t\tpElem.setAttribute('title','');\r\n\t\t}\r\n\t\tthis.iscorrect = is_correct;\r\n\t}\r\n\r\n\tfillTestText(fillid, pElem) {\r\n\t\tvar is_correct = -1, \r\n\t\tanskey = pElem.getAttribute(\"anskey\").trim(), \r\n\t\tuserans = pElem.value ? pElem.value.trim() : \"\",\r\n\t\thaskey = pElem.getAttribute('haskeywords'),\r\n\t\thasnkey = pElem.getAttribute('hasnotkeywords'),\r\n\t\tcodetype = pElem.getAttribute(\"codetype\"),\r\n\t\tmathtype = pElem.getAttribute(\"mathtype\");\r\n\t\tif (pElem.nodeName != \"TEXTAREA\") {\r\n\t\t\t//userans = pElem.value.trim();\r\n\t\t\tif (/\\d,\\d/.test(userans)) { // TRUE when comma is used any numerical value like 500,000\r\n\t\t\t\tuserans = pElem.value.trim().replace(/,/g,\"#cm\");\r\n\t\t\t} \r\n\t\t\t// @uc-abk added for one Custoumer Bug \"answer,anotherAnswer\" getting incorrect.\r\n\t\t\tlet temp = userans.match(/[a-zA-Z]{1,1},[a-zA-Z]{1,1}/g);\r\n\t\t\tif (userans.match(/[a-zA-Z]{1,1},[a-zA-Z]{1,1}/g)) {\r\n\t\t\t\ttemp = temp.toString().replace(/,/g, \"#cm\");\r\n\t\t\t}\r\n\t\t\tuserans = userans.replace(/[a-zA-Z]{1,1},[a-zA-Z]{1,1}/g, temp);\r\n\t\t}\r\n\t\tif (codetype == 1) {\r\n\t\t\tvar regex_code = [/\\s+/g,/\\;$/,/\"/g];\r\n\t\t\tvar regex_replace = [\"\", \"\", \"'\"];\r\n\t\t\tfor (let l=0; l < regex_code.length; l++) {\r\n\t\t\t\tuserans = userans.replace(regex_code[l],regex_replace[l]);\r\n\t\t\t\tanskey = anskey.replace(regex_code[l],regex_replace[l]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (mathtype == 1) {\r\n\t\t\tuserans = pElem.getAttribute(\"userans\").trim();\r\n\t\t\t//userans = userans;\r\n\t\t}\r\n\t\t\r\n\t\tif (JS.select(fillid).getAttribute('matchtype') == 1) {\r\n\t\t\tanskey = anskey.toLowerCase();\r\n\t\t\tuserans = userans.toLowerCase();\r\n\t\t}\r\n\r\n\t\tif (JS.select(fillid).getAttribute('ignoretype') == 1) {\r\n\t\t\tif (JS.select(fillid).getAttribute('multi') != 0) {\r\n\t\t\t\tvar ans = [];\r\n\t\t\t\tanskey.split(',').forEach((val, index)=> {\r\n\t\t\t\t\tans.push(val.replace(/[^a-zA-Z0-9]/gi, \"\"));\r\n\t\t\t\t});\r\n\t\t\t\tanskey = ans.join(',');\r\n\t\t\t} else {\r\n\t\t\t\tanskey = anskey.replace(/[^a-zA-Z0-9]/gi, \"\");\r\n\t\t\t}\r\n\t\t\tuserans = userans.replace(/[^a-zA-Z0-9]/gi, \"\");\r\n\t\t}\r\n\r\n\t\tif (pElem.getAttribute('keywordtype') == 1 && haskey.length > 0 && hasnkey.length > 0) {\r\n\t\t\tvar valid = 0 ,valid_is = 0;\r\n\t\t\thaskey.split(',').forEach((val, index)=> {\r\n\t\t\t\tif (userans.indexOf(val) != -1) valid++;\r\n\t\t\t});\r\n\t\t\thasnkey.split(',').forEach((val, index)=> {\r\n\t\t\t\tif (userans.indexOf(val) != -1) valid_is++;\r\n\t\t\t});\r\n\t\t\tif (haskey.split(',').length == valid && valid_is == 0) userans = anskey;\r\n\t\t}\r\n\t\tif (JS.select(fillid).getAttribute('multi') != 0) {\r\n\t\t\tuserans = userans.replace(/,/gm, \"#cm\");\r\n\t\t\tif (userans != \"\" && this.checkInArray(anskey.split(\",\"),userans.split(',')) ) {\r\n\t\t\t\tis_correct = 1;\r\n\t\t\t\tuserans = userans.replace(/#cm/gm, \",\");\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (userans == anskey) {\r\n\t\t\t\tis_correct = 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn is_correct;\r\n\t}\r\n\r\n\tmarkUserAnswer(is_correct) {\r\n\t\tconst droped_value_indicator_html = '<span class=\"'+((is_correct == 1) ? \"icomoon-new-24px-checkmark-circle-1 font-weight-bold\" : \"icomoon-new-24px-cancel-circle-1 font-weight-bold\")+'\" style=\"color:'+((is_correct == 1) ? \"green\" : \"red\" )+';\">';\r\n\t\tlet correct_incorrect_mark = '<span class=\"correct_incorrect_icon_fill\" style=\"background:white;border-radius:15px 12px 12px;\"> '  + droped_value_indicator_html + '</span></span>';\r\n\t\tif (JS.find(ajax_eId, '.prettyprint', 'all').length > 0) {\r\n\t\t\tcorrect_incorrect_mark = '<span class=\"correct_incorrect_icon_fill\" style=\"bottom:22px;background:none;border-radius:12px;\"> '  + droped_value_indicator_html + '</span></span>'\r\n\t\t}\r\n\t\treturn correct_incorrect_mark;\r\n\t}\r\n\r\n\tcheckAns(fillid) {\r\n\t\t\r\n\t\tthis.userAnsXML = \"<smans type='9'>\\n\";\r\n\t\tthis.result = true;\r\n\t\tthis.temp = 0;\r\n\t\tJS.find(fillid, 'select,input,textarea,.dropable,span.edit_step.mathquill', 'all').forEach((_this)=> {\r\n\t\t\tthis.userAnsXML = this.checkChildAnswer(fillid, _this, this.userAnsXML);\r\n\t\t});\r\n\t\tthis.userAnsXML += \"</smans>\";\r\n\t\twindow.ISSPECIALMODULEUSERXMLCHANGE = 1;\r\n\t\tJS.select(\"#special_module_user_xml\").value = this.userAnsXML;\r\n\t//\tupdateModule('uxml', this.userAnsXML);\r\n\r\n\t\tif (parseInt(JS.select(fillid).nodeName && JS.select(fillid).getAttribute('manual_grade') || '1') != 1) {\r\n\t\t\tJS.select(\"#answer\").checked = ((this.result) ? true : false);\r\n\t\t\tif (this.result) {\r\n\t\t\t\tJS.select(\"#answer\").checked = true;\r\n\t\t\t\tif (typeof(is_sm) != \"undefined\") JS.showmsg(\"Correct\", 3);\r\n\t\t\t\treturn \"Correct\";\r\n\t\t\t} else {\r\n\t\t\t\tJS.select(\"#answer\").checked = false;\r\n\t\t\t\tif (typeof(is_sm) != \"undefined\") JS.showmsg(\"Incorrect\", 3);\r\n\t\t\t\treturn \"Incorrect\";\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcheckInArray(tree, branch) {\r\n\t\tlet matchedBranch = [];\r\n\t\tfor (let i = 0; i < tree.length; i++) {\r\n\t\t\tfor (let j = 0; j < branch.length; j++) {\r\n\t\t\t\tif (!matchedBranch.includes(branch[j]) && (branch[j].trim() == tree[i].trim())) {\r\n\t\t\t\t\tmatchedBranch.push(branch[j]);\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet result = (branch.length - matchedBranch.length);\r\n\t\treturn result == 0 ? true : false;\r\n\t}\r\n\r\n\tcheckChildAnswer(fillid, pElem, userAnsXML) {\r\n\t\t\r\n\t\tif (pElem.classList.contains('dropable')) {\r\n\t\t\tvar ansKey = pElem.getAttribute('anskey').split(',');\r\n\t\t\tif (JS.findInArray(pElem.getAttribute('userans'), ansKey) == undefined || JS.findInArray(pElem.getAttribute('userans'), ansKey) == false) {\r\n\t\t\t\tthis.result = false;\r\n\t\t\t} else {\r\n\t\t\t\tthis.temp++;\r\n\t\t\t}\r\n\t\t\tif (typeof calculatePoint != \"undefined\") {\r\n\t\t\t\tcalculatePoint(JS.select(fillid).getAttribute('totalcorrectans'), this.temp);\r\n\t\t\t}\r\n\t\t\tuserAnsXML += `<div id='${pElem.getAttribute(\"id\")}' userAns='${pElem.getAttribute('userans')}'></div>\\n`;\r\n\t\t\t//@simran - start\r\n\t\t} else if (pElem.classList.contains('mathquill')) {\r\n\t\t\tvar innerfield = [];\r\n\t\t\tvar mathItemId = pElem.getAttribute('id');\r\n\t\t\tvar anskey = pElem.getAttribute(\"anskey\").trim();\r\n\t\t\tvar originalLatex = pElem.getAttribute(\"userans\").trim();\r\n\t\t\t\r\n\t\t\tvar MQ = MathQuill.getInterface(2);\r\n\t\t\tvar mathItem = MQ.StaticMath(document.getElementById(mathItemId));\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i <= mathItem.innerFields.length - 1; i++) {\r\n\t\t\t\tinnerfield[i] = mathItem.innerFields[i].latex();\r\n\t\t\t}\r\n\r\n\t\t\tlet newMathField = originalLatex;\r\n\t\t\tlet mathField = originalLatex.match(/\\\\MathQuillMathField(.*?)}*}{4,6}|\\\\MathQuillMathField(.*?)}*}{3,6}|\\\\MathQuillMathField(.*?)}*}{2,6}|\\\\MathQuillMathField(.*?)}*}{1,6}/g);\r\n\r\n\t\t\tif (innerfield.indexOf(\"\")<0) {\r\n\t\t\t\tfor (i in mathField) {\r\n\t\t\t\t\tconst createFeild = '\\\\MathQuillMathField{'+innerfield[i]+'}';\r\n\t\t\t\t\tconst newMf = mathField[i].replace(/\\\\MathQuillMathField(.*?)}*}{4,6}|\\\\MathQuillMathField(.*?)}*}{3,6}|\\\\MathQuillMathField(.*?)}*}{2,6}|\\\\MathQuillMathField(.*?)}*}{1,6}/g , createFeild);\r\n\t\t\t\t\tconst regex = mathField[i];\r\n\t\t\t\t\tnewMathField = newMathField.replace(regex , newMf);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\toriginalLatex = newMathField;\r\n\t\t\r\n\t\t\tlet userans = originalLatex;\r\n\r\n\t\t\tif (anskey != userans) {\r\n\t\t\t\tthis.result = false;\r\n\t\t\t} else {\r\n\t\t\t\tthis.temp++;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tpElem.setAttribute(\"userans\", userans);\r\n\t\t\r\n\t\t\tuserAnsXML += `<div id='${pElem.getAttribute(\"id\")}' userAns='${userans}' anskey='${anskey}' userAnsSeq='${pElem.getAttribute(\"userAnsSeq\")}'></div>\\n`;\r\n\r\n\t\t//@simran - end\r\n\t\t} else if (pElem.parentElement.classList.contains('fillelement')) {\r\n\t\t\tif (pElem.nodeName == \"SELECT\") {\r\n\t\t\t\tthis.uAnsSel = \"\";\r\n\t\t\t\tthis.a = 0;\r\n\t\t\t\tthis.totalcorrect = JS.find(pElem, \"[correctans='1']\", 'all').length;\r\n\t\t\t\tJS.find(pElem, \"option\", 'all').forEach((_value, index)=> {\r\n\t\t\t\t\t_value.setAttribute('userans', '');\r\n\t\t\t\t\tif (_value.selected) {\r\n\t\t\t\t\t\tthis.a++;\r\n\t\t\t\t\t\tif (_value.getAttribute(\"correctans\") != 1) {\r\n\t\t\t\t\t\t\tthis.result = false;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.temp++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.uAnsSel = this.uAnsSel+(index)+\",\";\r\n\t\t\t\t\t\t_value.setAttribute('userans', index);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif (this.a != this.totalcorrect) this.result = false;\r\n\t\t\t\tif (typeof calculatePoint != \"undefined\") {\r\n\t\t\t\t\tcalculatePoint(JS.select(fillid).getAttribute('totalcorrectans'), this.temp);\r\n\t\t\t\t}\r\n\t\t\t\tuserAnsXML += `<div id='${pElem.parentElement.getAttribute(\"id\")}' userAns='${this.uAnsSel}'></div>\\n`;\r\n\t\t\t} else if (pElem.nodeName == \"INPUT\" || pElem.nodeName == \"TEXTAREA\") {\r\n\t\t\t\tvar anskey = pElem.getAttribute(\"anskey\").trim(), \r\n\t\t\t\tuserans = pElem.value.trim(),\r\n\t\t\t\tcodetype = pElem.getAttribute(\"codetype\");\r\n\t\t\t\tpElem.setAttribute('userans', userans);\r\n\t\t\t\tif (codetype == 1) {\r\n\t\t\t\t\tvar regex_code = [/\\s+/g,/\\;$/,/\"/g];\r\n\t\t\t\t\tvar regex_replace = [\"\",\"\",\"'\"];\r\n\t\t\t\t\tfor (let l=0; l<regex_code.length; l++)  {\r\n\t\t\t\t\t\tuserans = userans.replace(regex_code[l],regex_replace[l]);\r\n\t\t\t\t\t\tanskey = anskey.replace(regex_code[l],regex_replace[l]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (JS.select(fillid).getAttribute('matchtype') == 1) {\r\n\t\t\t\t\tanskey = anskey.toLowerCase();\r\n\t\t\t\t\tuserans = userans.toLowerCase();\r\n\t\t\t\t}\r\n\t\t\t\tif (JS.select(fillid).getAttribute('ignoretype') == 1) {\r\n\t\t\t\t\tif (JS.select(fillid).getAttribute('multi') != 0) {\r\n\t\t\t\t\t\tlet ans = [];\r\n\t\t\t\t\t\tanskey.split(',').forEach((val, index)=> {\r\n\t\t\t\t\t\t\tans.push(val.replace(/[^a-zA-Z0-9]/gi, \"\"));\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tanskey = ans.join(',');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tanskey = anskey.replace(/[^a-zA-Z0-9]/gi, \"\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tuserans = userans.replace(/[^a-zA-Z0-9]/gi, \"\");\r\n\t\t\t\t}\r\n\t\t\t\t//Multiple in textBox\r\n\t\t\t\tif (JS.select(fillid).getAttribute('multi') != 0 || anskey.includes(\"#cm\")) {\r\n\t\t\t\t\t//if (anskey.substr(0, 1) != \",\") {anskey = \",\"+anskey;}\r\n\t\t\t\t\t//if (anskey.substr(-1, 1) != \",\") {anskey += \",\";}\r\n\t\t\t\t\tuserans = userans.replace(/,/g,\"#cm\");\r\n\t\t\t\t\tif (userans == \"\" || !this.checkInArray(anskey.split(','),userans.split(','))) {\r\n\t\t\t\t\t\tthis.result = false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.temp++;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar haskey = pElem.getAttribute('haskeywords'), \r\n\t\t\t\t\thasnkey\t   = pElem.getAttribute('hasnotkeywords');\r\n\t\t\t\t\tif (pElem.getAttribute('keywordtype') == 1 && haskey.length > 0 && hasnkey.length > 0) {\r\n\t\t\t\t\t\tvar valid = 0 ,valid_is = 0;\r\n\t\t\t\t\t\thaskey.split(',').forEach((val, index)=> {\r\n\t\t\t\t\t\t\tif (userans.indexOf(val) != -1) valid++;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\thasnkey.split(',').forEach((val, index)=> {\r\n\t\t\t\t\t\t\tif (userans.indexOf(val) != -1) valid_is++;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (haskey.split(',').length != valid || valid_is != 0) {\r\n\t\t\t\t\t\t\tthis.result = false;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.temp++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (anskey != userans) {\r\n\t\t\t\t\t\t\tthis.result = false;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.temp++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (typeof calculatePoint != \"undefined\") {\r\n\t\t\t\t\tcalculatePoint(JS.select(fillid).getAttribute('totalcorrectans'), this.temp);\r\n\t\t\t\t}\r\n\t\t\t\tvar __ans = pElem.value;\r\n\t\t\t\tif (pElem.nodeName == \"TEXTAREA\") {\r\n\t\t\t\t\t__ans = __ans.replace(/'/g, \"#singlequote#\");\r\n\t\t\t\t\t__ans = __ans.replace(/\"/g, \"#dblquote#\");\r\n\t\t\t\t}\r\n\t\t\t\tif (pElem.nodeName == \"INPUT\") {\r\n\t\t\t\t\t//__ans = __ans.replace(/,/g, \"#cm\");\r\n\t\t\t\t}\r\n\t\t\t\tuserAnsXML += `<div id='${pElem.parentElement.getAttribute(\"id\")}' userAns='${__ans}'></div>\\n`;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn userAnsXML;\r\n\t\t\r\n\t}\r\n\r\n\tmodeOn(modeType, isReview) {\r\n\t\tif (typeof modeType == \"undefined\") {\r\n\t\t\t//modeType = 1;\r\n\t\t}\r\n\t\tJS.selectAll('.test, .review', 'addClass', 'h');\r\n\t\tif (modeType) {\r\n\t\t\tif (typeof hotkeys == 'function') {\r\n\t\t\t\thotkeys.unbind('alt+down,enter,delete','fillintheblank');\r\n\t\t\t\thotkeys.deleteScope('fillintheblank');\r\n\t\t\t}\r\n\t\t\tJS.selectAll('.review', 'removeClass', 'h');\r\n\t\t\t//try{\r\n\t\t\t\tthis.unBindLab();\r\n\t\t\t//} catch(e) {\r\n\t\t\t//}\r\n\t\t\tthis.showdragans(ajax_eId, 'u',1);\r\n\t\t\t\r\n\t\t} else {\r\n\t\t\tthis.bindKeyup(ajax_eId);\r\n\t\t\tJS.selectAll('.test', 'removeClass', 'h');\r\n\t\t\tthis.bindLab();\r\n\t\t\tthis.showdragans(ajax_eId, 'u');\r\n\t\t}\r\n\t}\r\n\r\n\tbindLab() {\r\n\t\tthis.labBinded = true;\r\n\t\tJS.find(ajax_eId, 'select,input,textarea', {action: 'removeAttr', actionData: 'disabled'});\r\n\t\ttry {\r\n\t\t\tthis.readyFill(ajax_eId);\r\n\t\t} catch(e) {\r\n\t\t\tconsole.log(\"catch\");\r\n\t\t}\r\n\t}\t\r\n\r\n\tunBindLab() {\r\n\t\tthis.labBinded = false;\r\n\t\tJS.find(ajax_eId, 'input,select,textarea', 'all').forEach((_this)=> {\r\n\t\t\tif (this.nodeName == \"INPUT\" || this.nodeName == \"TEXTAREA\") { \r\n\t\t\t\t_this.getAttribute('userans', _this.value); \r\n\t\t\t} else if (this.nodeName == \"SELECT\") {\r\n\t\t\t\t_this.querySelectorAll(\"option\").forEach((elm, index)=> {\r\n\t\t\t\t\telm.selected ? elm.setAttribute('userans', 1) : elm.setAttribute('userans', '');\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t\t// @pradeep -  remove disabled due to ada read.\r\n\t\t//$(ajax_eId).find('select,input,textarea').prop('disabled','disabled');\r\n\t\t\r\n\t\t//JS.find(ajax_eId, '.dragable .dropable').off('click dragenter mouseenter mouseleave touchstart keyup');\r\n\t\t//JS.find(ajax_eId, '.dragable').draggable(\"destroy\");\r\n\t\t// JS.find(ajax_eId, '.dropable').each(function() {\r\n\t\t// \tif ($(this).hasClass('ui-draggable')) $(this).draggable(\"destroy\");\r\n\t\t// });\r\n\t\t\r\n\t}\r\n\r\n\tpre_fill(fillid) {\r\n\t\tvar fill_pre = JS.find(fillid, '.fillelement,.dropable', 'all');\r\n\t\tif (JS.find(fillid, '.prettyprint', 'all').length > 0) {\r\n\t\t\tif (typeof activate == \"function\") activate(1);\r\n\t\t\tJS.selectAll(fillid, 'hide');\r\n\t\t\tif (JS.find(fillid, 'pre').classList.contains('lg')) JS.selectAll(fillid, 'css', {'width': 930+'px'});\r\n\t\t\tsetTimeout(()=> {\r\n\t\t\t\tif (JS.find(fillid, 'pre').classList.contains('linenums')) {\r\n\t\t\t\t\tthis.delPreSpaces.withLines(fillid);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.delPreSpaces.withoutLines(fillid);\r\n\t\t\t\t}\r\n\t\t\t\tthis.delPreSpaces.showFillModule( fillid );\r\n\t\t\t},1000);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const ucFill = new fillJS();","<script>\r\n/**\r\n *  File Name   : FillInTheBlanksPreview.js\r\n *  Description : Container for all Fill in The Blanks preview Module\r\n *\tAuthor      : Pradeep Yadav\r\n *  Version     : 1.0\r\n *  Package     : svelte_items\r\n *  Last update : 17 Dec 2017\r\n */\r\n\timport {ucFill} from './fillJSString';\r\n\t//import ju from '../src/libs/jslib';\r\n\timport ItemHelper from '../helper/ItemHelper.svelte';\r\n\timport FillInTheBlanksToolbar from \"./../src/libs/FillInTheBlanksToolbar.svelte\";\r\n\timport { writable } from 'svelte/store';\r\n\timport { beforeUpdate, onMount,afterUpdate } from 'svelte';\r\n\timport { AH, onUserAnsChange, XMLToJSON } from '../helper/HelperAI.svelte';\r\n\r\n\t//Mathquill, seq is important and mathquil is dependent on query, so do not remove this\r\n\timport '../src/libs/mathquill.css';\r\n\r\n\texport let manual_grade;\r\n\texport let xml;\r\n\texport let uxml;\r\n\texport let isReview;\r\n\texport let editorState;\r\n\texport let smValidate;\r\n\texport let showAns;\r\n\t// variable declaration\r\n\tlet anserDisable = false;\r\n\tlet customIsReview = isReview;\r\n\tlet smControllerCallback;\r\n\tlet cdata = \"\";\r\n\tlet dragData = \"\";\r\n\tlet CheckDuplicate = [];\r\n\tlet dragID = 0;\r\n\tlet errorCatchFlag = 1;\r\n\tlet fillMath = [];\r\n\tlet fillId;\r\n\tlet parsedXml = {};\r\n\tlet parsedUxml = {};\r\n\tlet containerID = \"fillmain\";\r\n\tglobalThis.ajax_eId = \"#fillmain\";\r\n\tlet state = {};\r\n\tlet preReview = !isReview;\r\n\t\r\n\tlet hdd = writable({\r\n\t\t\tmatchtype : \"0\",\r\n\t\t\tignoretype:\"\",\r\n\t\t\tmulti:\"\",\r\n\t\t\ttotalcorrectans:0,\r\n\t\t\tshowToolbar: false,\r\n\t\t\tisMathquill:false,\r\n\t\t\tfillMath: [],\r\n\t\t\tfooterStr: false,\r\n\t\t});\r\n\tconst unsubscribe = hdd.subscribe((items)=> {\r\n\t\tstate = items;\r\n\t})\r\n\r\n\t$:{\r\n\t\tif(isReview != preReview){\r\n\t\t\tif (isReview) {\r\n\t\t\t\tsetReview();\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tunsetReview()\r\n\t\t\t}\r\n\t\t\tpreReview = isReview;\r\n\t\t}\r\n\t}\r\n\r\n\t\r\n\r\n\tonMount(async()=> {\r\n\t\tif (in_editor) {\r\n\t\t\tAH.addScript(\"\", \"https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js\");\r\n\t\t}\r\n\t\tAH.addScript(\"\", window.itemUrl + \"src/libs/mathQuill_new.js\");\r\n\t\t\r\n\t\t//AH.enableBsAll(\"[data-bs-toggle='tooltip']\", 'Tooltip', {container: 'body'});\r\n\r\n\t\tucFill.setUpdate(updateModule.bind(this));\r\n\t\tlet mathItem = document.getElementById(containerID);\r\n\t\tmathItem = mathItem ? mathItem.getElementsByClassName('mathquill') : mathItem;\r\n\t\tif (state.isMathquill) {\r\n\t\t\tAH.selectAll(\"div\" + ajax_eId,  'css', {'overflow': 'auto'});\r\n\t\t}\r\n\t\t// Binding the events \r\n\t\t\r\n\t\t\tAH.bind(ajax_eId, 'click', displayAns);\r\n\t\t\tAH.bind(ajax_eId, 'keyup', displayAns);\r\n\t\t\tAH.bind(ajax_eId, 'change', displayAns);\r\n\t\t\tAH.bind(ajax_eId, 'dragend', displayAns);\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\tAH.listen(document, \"click\", \"span.mq-editable-field.mq-focused\", oneditoFocused);\r\n\t\tAH.listen(document, \"change\", \"span.mq-editable-field.mq-focused\", oneditoFocused);\r\n\r\n\t\t// for loading the module on the basis of the updated the xml\r\n\t\tloadModule();\r\n\t})\r\n\r\n\t/*\r\n\t** This function will call when compent recieving new prop in other words whenever \r\n\t** any thing changes in xml this function will call automatically\r\n\t*/\r\n\tbeforeUpdate(() => {\r\n\t\t\r\n\t\t// for checking that there is change in the xml\r\n\t\tif (xml != state.xml) {\r\n\t\t\tif (editorState && editorState.stopPreviewUpdate == true) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\t\t\t\r\n\t\t\t// for loading the module on the basis of the updated the xml\r\n\t\t\tloadModule();\r\n\t\t\t// for adding the tabindex\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\tlet node =  document.getElementById('previewArea');\r\n\t\t\t\tif(node.childNodes[0] && node.childNodes[0].nodeName == 'TABLE') {\r\n\t\t\t\t\tnode = document.querySelectorAll('#previewArea td');\r\n\t\t\t\t\tfor (let item in node){ \r\n\t\t\t\t\t\tif(!node[item].firstElementChild && node[item].nodeName == 'TD'){\r\n\t\t\t\t\t\t\tnode[item].setAttribute('tabindex','0');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfor (let item in node.childNodes){ \r\n\t\t\t\t\t\tif(node.childNodes[item].nodeType == 3){\r\n\t\t\t\t\t\t\tlet txt = document.createElement(\"span\");\r\n\t\t\t\t\t\t\ttxt.setAttribute('tabindex','0');\r\n\t\t\t\t\t\t\ttxt.innerHTML = node.childNodes[item].textContent;\r\n\t\t\t\t\t\t\tnode.childNodes[item].replaceWith(txt);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},1000);\r\n\t\t}\r\n\t});\r\n\r\n\t// for loading the module initially \t\r\n\tfunction loadModule() {\r\n\t\tstate.xml = xml;\r\n\t\t// converting the xml to json using XMLToJSON function\r\n\t\tparsedXml = XMLToJSON(xml);\r\n\t\t// checking for user ans\r\n\t\tif (uxml) {\r\n\t\t\tif (!window.isResetMath) {\r\n\t\t\t\tparsedUxml = XMLToJSON(uxml);\r\n\t\t\t\tstate.uxml = uxml;\r\n\t\t\t} else {\r\n\t\t\t\twindow.isResetMath = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\t// parsing the authoring xml\r\n\t\tparseXmlAuthoring(parsedXml, parsedUxml);\r\n\t\t//ucFill.showdragans(ajax_eId, 'u'); //@prabhat: Its creating issue when we check the answer from editor for the drop down.\r\n\t\tif(!xml) {\r\n\t\t\tlet errMsg = smVal.validate(editorState.content_type, editorState.subtype , editorState.content_icon);\r\n\t\t\tsmValidate(errMsg);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction updateUserAns(parsedUans) {\r\n\t\tlet uaXMLNew = \"\";\r\n\t\t// finding the correct ans\r\n\t\tlet answerKey = parsedXml.smxml.text.__cdata.match(/%{[\\s\\S]*?}%/gm);\r\n\t\tlet answerType = \"\";\r\n\t\t// if correct answer is found traverseing each correct ans\r\n\t\tif (answerKey) {\r\n\t\t\tanswerKey.forEach((currentAns, i)=> {\r\n\t\t\t\t// checking for the user ans\r\n\t\t\t\tif (parsedUans) {\r\n\t\t\t\t\tif (parsedUans.smans) {\r\n\t\t\t\t\t\tlet uans = parsedUans.smans.div;\r\n\t\t\t\t\t\tif(Array.isArray(uans) == false) {\r\n\t\t\t\t\t\t\tuans = []\r\n\t\t\t\t\t\t\tuans[0] = parsedUans.smans.div;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(uans) {\r\n\t\t\t\t\t\t\tuaXMLNew = uans[i];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// finding the type by finding the match with string containing | in the start and end with }%\r\n\t\t\t\tanswerType = currentAns.match(/\\|(.*?)}%$/gm);\r\n\t\t\t\t// removing the | symbol and }% and save the remaining thing in answerType if match is found otherwise kept the answerType balnk\r\n\t    \t\tanswerType = (answerType) ? answerType[0].replace(/\\||}%/gm,'') : '';\r\n\t    \t\tanswerType = answerType.trim();\r\n\t\t\t\tif (uaXMLNew && uaXMLNew._userAns) {\r\n\t\t\t\t\t// storing the userans attribute value in useranswer\r\n\t\t\t\t\tlet id = \"\";\r\n\t\t\t\t\tif (answerType == '' || answerType == 'c') {\r\n\t\t\t\t\t\t// For textbox\r\n\t\t\t\t\t\tid = `#elem${i} .fillintheblank`;\r\n\t\t\t\t\t} else if (answerType == 'n') { \r\n\t\t\t\t\t\t// if the type is numeric\r\n\t\t\t\t\t\tid = `#elem${i} .fillintheblank`;\r\n\t\t\t\t\t} else if (answerType == \"d\" || answerType == \"ds\") {\r\n\t\t\t\t\t\t// checking for the user ans\r\n\t\t\t\t\t\tid = `#elem${i}`;\r\n\t\t\t\t\t} else if (answerType == \"s\") {\r\n\t\t\t\t\t\t// checking createSelectBox for the user ans\r\n\t\t\t\t\t} else if (answerType == \"e\") {\r\n\t\t\t\t\t\tid = `#elem${i}`;\r\n\t\t\t\t\t} else if (answerType.indexOf(\"{\" == 0) || answerType.indexOf(\"{\" == 1)) {\r\n\t\t\t\t\t\t// For multiline \r\n\t\t\t\t\t\tid = `#elem${i} .textarea`;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (AH.isValid(id) && document.querySelector(id)) {\r\n\t\t\t\t\t\tdocument.querySelector(id).setAttribute('userans', uaXMLNew._userAns);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t// this function responsible for parsing the xml \r\n\tfunction parseXmlAuthoring(MYXML, uaXML=false) {\r\n\t\t// fetching the cdata\r\n\t\tcdata = MYXML.smxml.text.__cdata;\r\n\t\tdragData = \"\";\r\n\t\tCheckDuplicate = [];\r\n\t\tdragID = 0;\r\n\t\tstate.footerStr = false;\r\n\t\tAH.selectAll(\".smnotes\", 'hide');\r\n\r\n\t\t// converting the matchType to matchtype\r\n\t\tif (MYXML.smxml.text._matchType) {\r\n\t\t\tMYXML.smxml.text._matchtype = MYXML.smxml.text._matchType;\r\n\t\t\tdelete MYXML.smxml.text._matchType;\r\n\t\t}\r\n\r\n\t\t// converting the ignoreType to ignoretype\r\n\t\tif (MYXML.smxml.text._ignoreType) {\r\n\t\t\tMYXML.smxml.text._ignoretype = MYXML.smxml.text._ignoreType;\r\n\t\t\tdelete MYXML.smxml.text._ignoreType;\r\n\t\t}\r\n\r\n\t\t// setting state \r\n\t\tstate.matchtype = MYXML.smxml.text._matchtype;\r\n\t\tstate.ignoretype = MYXML.smxml.text._ignoretype;\r\n\t\tstate.multi = (MYXML.smxml.text._multiple == \"multiple\") ? \"1\" : \"\";\r\n\r\n\t\t// finding the correct ans\r\n\t\tlet answerKey = cdata.match(/%{[\\s\\S]*?}%/gm);\r\n\t\tlet answerType = '';\r\n\t\tlet checkType = [];\r\n\t\tlet uaXMLNew = \"\";\r\n\t\tlet totalMarks = 0;\r\n\t\t// if correct answer is found traverseing each correct ans\r\n\t\tif (answerKey) {\r\n\t\t\tanswerKey.forEach((v, i)=>{\r\n\t\t\t\ttotalMarks++;\r\n\t\t\t\t// checking for the user ans\r\n\t\t\t\tif (uaXML) {\r\n\t\t\t\t\tif (uaXML.smans) {\r\n\t\t\t\t\t\tlet uans = uaXML.smans.div;\r\n\t\t\t\t\t\tif(Array.isArray(uans) == false) {\r\n\t\t\t\t\t\t\tuans = []\r\n\t\t\t\t\t\t\tuans[0] = uaXML.smans.div;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(uans) {\r\n\t\t\t\t\t\t\tuaXMLNew = uans[i];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet originalKey = answerKey[i];\r\n\t\t\t\t// finding the type by finding the match with string containing | in the start and end with }%\r\n\t\t\t\tanswerType = answerKey[i].match(/\\|(.*?)}%$/gm);\r\n\t\t\t\t// removing the | symbol and }% and save the remaining thing in answerType if match is found otherwise kept the answerType balnk\r\n\t    \t\tanswerType = (answerType) ? answerType[0].replace(/\\||}%/gm,'') : '';\r\n\t    \t\tanswerType = answerType.trim();\r\n\t\t\t\tcheckType.push(answerType);\r\n\t\t\t\t// in case of textbox or codetype\r\n\t    \t\tif(answerType == '' || answerType == 'c') {\r\n\t\t\t\t\tAH.selectAll(\".smnotes\", 'show');\r\n\t\t\t\t\t// checking for the user ans\r\n\t\t\t\t\tif(uaXMLNew) {\r\n\t\t\t\t\t\t// create the textbox in the preview area with user ans\r\n\t\t\t\t\t\tcreateTextbox(originalKey,i,uaXMLNew);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// create the textbox in the preview area\r\n\t\t\t\t\t\tcreateTextbox(originalKey,i);\r\n\t\t\t\t\t}\r\n\t    \t\t} else if(answerType == 'n') { \r\n\t\t\t\t\t// if the type is numeric\r\n\t\t\t\t\t// checking for the user ans\r\n\t\t\t\t\tif(uaXMLNew) {\r\n\t\t\t\t\t\t// create the numeric textbox in the preview area with user ans\r\n\t\t\t\t\t\tcreateNumericbox(originalKey,i,uaXMLNew);\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\t\t// create the numeric textbox in the preview area\r\n\t\t\t\t\t\tcreateNumericbox(originalKey,i);\r\n\t\t\t\t\t}\r\n\t    \t\t} else if(answerType == \"d\" || answerType == \"ds\") {\r\n\t\t\t\t\t// checking for the user ans\r\n\t\t\t\t\tif(uaXMLNew){\r\n\t\t\t\t\t\t// create the drag & drop textbox in the preview area with user ans\r\n\t\t\t\t\t\tcreateDragDrop(originalKey,i,uaXMLNew);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// create the drag & drop textbox in the preview area\r\n\t\t\t\t\t\tcreateDragDrop(originalKey,i);\r\n\t\t\t\t\t}\r\n\t    \t\t\t\r\n\t    \t\t} else if(answerType == \"s\") {\r\n\t\t\t\t\t// checking for the user ans\r\n\t\t\t\t\tif(uaXMLNew) {\r\n\t\t\t\t\t\t// create the select box in the preview area with user ans\r\n\t\t\t\t\t\tcreateSelectBox(originalKey,i,uaXMLNew);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// create the select box in the preview area\r\n\t\t\t\t\t\tcreateSelectBox(originalKey,i);\r\n\t\t\t\t\t}\r\n\t    \t\t} else if(answerType == \"e\") {\r\n\t\t\t\t\tstate.isMathquill = true;\r\n\t\t\t\t\t// checking for the user ans\r\n\t\t\t\t\tif (uaXMLNew) {\r\n\t\t\t\t\t\t// creating textbox with user ans in preview area\r\n\t\t\t\t\t\tcreateMathDiv(originalKey,i,uaXMLNew);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// creating textbox in preview area\r\n\t\t\t\t\t\tcreateMathDiv(originalKey,i);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t} else if(answerType.indexOf(\"{\" == 0) || answerType.indexOf(\"{\" == 1)) {\r\n\t\t\t\t\tAH.selectAll(\".smnotes\", 'show');\r\n\t\t\t\t\t// checking for the user ans\r\n\t\t\t\t\tif (uaXMLNew) {\r\n\t\t\t\t\t\t// create the textarea in the preview area with user ans\r\n\t\t\t\t\t\tcreateMultilineBox(originalKey,i,uaXMLNew);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// create the textarea in the preview area\r\n\t\t\t\t\t\tcreateMultilineBox(originalKey,i);\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tlet innerKey = originalKey.replace(\"%{\",\"\").replace(\"}%\",\"\");\r\n\t\t\t});\r\n\t\t}\r\n\t\tAH.selectAll(\"#\"+containerID, 'attr', {\"totalcorrectans\": totalMarks} );\r\n\t\t// Resolve html entity\r\n\t\tcdata = AH.ignoreEnity(cdata);\r\n\t\t// put the cdata in the previewarea\r\n\t\tAH.find(\"#\"+containerID, \"#previewArea\", {action:'html', actionData: cdata});\r\n\t\t// put the dragData in the dragarea\r\n\t\tAH.find(\"#\"+containerID, \".dragArea\",{action: 'html', actionData: dragData});\r\n\t\tlet parent = AH.find(\"#\"+containerID, \".dragArea\");\r\n\t\tlet divs = parent?.children ? Array.from(parent.children) : [];\r\n\t\twhile (divs.length) {\r\n\t\t\tparent.append(divs.splice(Math.floor(Math.random() * divs.length), 1)[0]);\r\n\t\t}\r\n\t\t// set the max width of the textbox\r\n\t\tsetMaxWidth();\r\n\t\tsetSMNotes();\r\n\t\trunModule();\r\n\t\tvar timer = setTimeout(function(){\r\n\t\t\tif(AH.find(ajax_eId, \".prettyprint\", 'all').length >= 1) {\r\n\t\t\t\tif(AH.find(ajax_eId, \".prettyprint .L0\", 'all').length == 0) {\r\n\t\t\t\t\tif(typeof(prettyPrint) == 'function') {\r\n\t\t\t\t\t\t/*code to prevent pretty print existing pretified code 04/02/2018*/\r\n\t\t\t\t\t\tAH.selectAll(\".prettyprint\").forEach((_this)=>{\r\n\t\t\t\t\t\t\t_this.classList.add(\"prettyprintReplica\");\r\n\t\t\t\t\t\t\t_this.classList.remove(\"prettyprint\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tAH.selectAll(\".linenums\").forEach((_this)=> {\r\n\t\t\t\t\t\t\t_this.classList.add(\"linenumsReplica\");\r\n\t\t\t\t\t\t\t_this.classList.remove(\"linenums\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tAH.find(ajax_eId, \".prettyprintReplica\").forEach((_this)=> {\r\n\t\t\t\t\t\t\t_this.classList.add(\"prettyprint\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tAH.find(ajax_eId, \".linenumsReplica\").forEach((_this)=> {\r\n\t\t\t\t\t\t\t_this.classList.add(\"linenums\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t/********/\r\n\t\t\t\t\t\tprettyPrint();\r\n\t\t\t\t\t\t/*code to prevent pretty print existing pretified code 04/02/2018*/\r\n\t\t\t\t\t\tAH.selectAll(\".prettyprintReplica\").forEach((_this)=> {\r\n\t\t\t\t\t\t\t_this.classList.add(\"prettyprint\");\r\n\t\t\t\t\t\t\t_this.classList.remove(\"prettyprintReplica\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tAH.selectAll(\".linenumsReplica\").forEach((_this)=> {\r\n\t\t\t\t\t\t\t_this.classList.add(\"linenums\");\r\n\t\t\t\t\t\t\t_this.classList.remove(\"linenumsReplica\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t/*******/\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tclearTimeout(timer);\r\n\t\t},2000);\r\n\r\n\t\tif (AH.find(ajax_eId, \"table.uc-table\", 'all').length > 0) {\r\n\t\t\tAH.find(ajax_eId, \"table.uc-table\", {action:'addClass', actionData: 'font14'});\r\n\t\t\ttry {\r\n\t\t\t\t// for removing br\r\n\t\t\t\tif (AH.find(ajax_eId, \"table.uc-table\").previousElementSibling?.nodeName == \"BR\") {\r\n\t\t\t\t\tAH.find(ajax_eId, \"table.uc-table\").previousElementSibling.remove();\r\n\t\t\t\t}\r\n\t\t\t} catch(e) {\r\n\t\t\t\tconsole.warn(e);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\t// function calls when remediation mode is on\r\n\tfunction setReview() {\r\n\t\tisReview = true;\r\n\t\twindow.isReview = true;\r\n\t\twindow.learn = true;\r\n\t\t// For mathqul based \r\n\t\tif (xml.includes(\"user Response{\") ) window.isResetMath = true;\r\n\t\tstate.showToolbar = false;\r\n\t\t// show the answer and also bind the keys event for ada\r\n\r\n\t\t\r\n\t\tsetTimeout(function(){\r\n\t\t\t\r\n\t\t\tucFill.modeOn(\"on\");\r\n\t\t\tucFill.showdragans(ajax_eId, 'u', 1);\r\n\t\t\tAH.selectAll('.remed_disable', 'show');\r\n\t\t\tautoresize(1);\r\n\t\t\t//ucFill.modeOn(\"on\");\r\n\t\t\tlet mathItem = document.getElementById(containerID);\r\n\t\t\tmathItem = mathItem ? mathItem.getElementsByClassName('mathquill') : mathItem;\r\n\t\t\tif (mathItem) {\r\n\t\t\t\tif(AI.selectAll('.textarea').length > 0) {\r\n\t\t\t\t\tAI.selectAll('.textarea').forEach((_this)=>{\r\n    \t\t\t\t\t_this.setAttribute('disabled','true');\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tAH.selectAll('.fillintheblank','attr',{'disabled':true});\r\n\r\n\t\t\t\t// AH.setCss(ajax_eId, {\"position\": \"relative\"});\r\n\t\t\t\t// AH.insert(ajax_eId, \"<div class='spinner-wrapper' style='position:absolute!important;opacity:0!important;'></div>\", 'afterbegin');\r\n\t\t\t}\r\n\t\t\tdisplayAns();\r\n\t\t},100);\r\n\t}\r\n\r\n\t// function calls when remediation mode is off\r\n\tfunction unsetReview() {\r\n\t\tAH.selectAll('.fillintheblank','attr',{'disabled':false});\r\n\t\tisReview = false;\r\n\t\twindow.learn = false;\r\n\t\tAH.selectAll('.mathquill', 'css', {'border': 'none'});\r\n\t\tucFill.modeOn();\r\n\t\tAH.selectAll('.remed_disable, .corr_div', 'hide');\r\n\t\tsetTimeout(function(){\r\n\t\t\tucFill.showdragans(ajax_eId, 'u', 0);\r\n\t\t},300)\r\n\t\t\r\n\t\tlet mathItem = document.getElementById(containerID);\r\n\t\tmathItem = mathItem ? mathItem.getElementsByClassName('mathquill') : mathItem;\r\n\t\tautoresize();\r\n\t\tif (mathItem) {\r\n\t\t\tAH.selectAll(ajax_eId, 'css', {\"position\": \"unset\"});\r\n\t\t\tAH.selectAll(\".spinner-wrapper\", 'remove');\r\n\t\t}\r\n\t}\r\n\r\n\t// for resizing the textarea\r\n\tfunction autoresize(flag) {\r\n\t\tlet ftb_textarea = document.querySelectorAll(\".textarea.ks\");\r\n\t\tfor (let i = 0; i < ftb_textarea.length; i++) {\r\n\t\t\tlet e = ftb_textarea[i];\r\n\t\t\tvar timer = setTimeout(function(){\r\n\t\t\t    e.style.cssText = 'height:auto;overflow: auto;';\r\n\t\t\t    if(flag)\r\n\t\t\t    \tif(window.isIE)\r\n\t\t\t    \t\te.style.cssText = 'height:' + (e.scrollHeight+10) + 'px;overflow: hidden';\r\n\t\t\t    \telse\r\n\t\t\t\t\t\te.style.cssText = 'height:' + (e.scrollHeight) + 'px;overflow: hidden';\r\n\t\t\t\tclearTimeout(timer);\r\n\t\t\t},100);\r\n\t\t}\r\n\t}\r\n\r\n\t// for displaying the answer\r\n\tfunction displayAns(e) {\r\n\t\t//check the ans and create user ans\r\n\t\tlet ans =  !anserDisable && ucFill.checkAns(ajax_eId) || 'Incorrect';\r\n\t\t// To save the user answer\r\n\t\tlet answer = { ans: ucFill.result, uXml: ucFill.userAnsXML};\r\n\t\tonUserAnsChange(answer);\r\n\t\tif(editorState) { showAns(ans); }\r\n\t}\r\n\r\n\t// for toggling the toolbar in case of math module\r\n\tfunction toggleToolbar(value) {\r\n\t\tstate.showToolbar = value;\r\n\t}\r\n\r\n\tfunction oneditoFocused(x, event) {\r\n\t\tlet isFillId = true;\r\n\t\t//let fillId;\r\n\t\twhile (isFillId) {\r\n\t\t\tx = x.parentElement;\r\n\t\t\tif(x.getAttribute('id')) {\r\n\t\t\t\tisFillId = false;\r\n\t\t\t\tfillId = x.getAttribute('id');\r\n\t\t\t}\r\n\t\t}\r\n\t\t\t\r\n\t\tlet latexArray = [];\r\n\t\t\t\r\n\t\tAH.selectAll(\"#\" + fillId + \" span.mq-editable-field\").forEach((element)=> {\t\r\n\t\t\tlet commandId = x.getAttribute('mathquill-command-id');\r\n\t\t\tlatexArray.push(commandId);\r\n\t\t});\r\n\t\t\t\r\n\t\tlet mathId = x.getAttribute('mathquill-command-id');\r\n\t\tlet indexId = latexArray.indexOf(mathId);\r\n\t\tstate.spanId = indexId;\r\n\t\tstate.divId =  fillId;\r\n\t\tstate.showToolbar = true;\t\r\n\t}\r\n\r\n\tfunction updateModule(key, value) {\r\n\t\tstate[key] = value;\r\n\t\tif (key == 'uxml') {\r\n\t\t\tparsedUxml = XMLToJSON(state.uxml);\r\n\t\t\t// parsing the authoring xml\r\n\t\t\tupdateUserAns(parsedUxml);\r\n\t\t}\r\n\t}\r\n\r\n\t// for giving the uc-table style\r\n\tfunction setSMNotes(){\r\n\t\tif(AH.find(ajax_eId, \"table.uc-table\", 'all').length > 0) {\r\n\t\t\tlet tableWidth = (AH.find(ajax_eId, \"table.uc-table\").clientWidth) + 9;\r\n\t\t\tAH.setCss(AH.find(ajax_eId, \".smnotes\"), {\r\n\t\t\t\t'width': tableWidth + \"px\",\r\n\t\t\t\t'margin': \"auto\",\r\n\t\t\t\t'padding-top': \"21px\",\r\n\t\t\t\t'padding-left': '65px',\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t// for adding the event to select and add drag and drop functionality to element\r\n\tfunction runModule() {\r\n\t\ttry {\r\n\t\t\t// for adding the event to select and add drag and drop functionality to element\r\n\t\t\tucFill.readyFill(ajax_eId);\r\n\t\t} catch(e) {\r\n\t\t\tif (errorCatchFlag <= 100) {\r\n\t\t\t\tvar timer = setTimeout(()=> {\r\n\t\t\t\t\trunModule();\r\n\t\t\t\t\tclearTimeout(timer);\r\n\t\t\t\t}, 50);\r\n\t\t\t} else {\r\n\t\t\t\tconsole.warn(\"Error at runModule function\");\r\n\t\t\t}\r\n\t\t\terrorCatchFlag++;\r\n\t\t}\r\n\t}\r\n\r\n\t// for setting maximum width of the drag area\r\n\tfunction setMaxWidth() {\r\n\t\tlet maxDragDropWidth = [];\r\n\t\tAH.selectAll(\".dragArea div\").forEach((_this, i)=> {\r\n\t    \tmaxDragDropWidth.push(_this.innerHTML.length * 10 + 30); \r\n\t    });\r\n\r\n\t    AH.selectAll(\"#previewArea [id^=elem]\").forEach((_this)=> {\r\n\t    \tif (_this.classList.contains('drag-resize')) {\r\n\t    \t\tAH.setCss(_this, {\"max-width\": Math.max(...maxDragDropWidth)});\r\n\t    \t}\r\n\t    });\r\n\t}\r\n\r\n\t/**\r\n\t * This six function responsible for creating the input area in the\r\n\t * Preview section on the basis of the authoring xml\r\n\t*/\r\n\r\n\tfunction createMathDiv(data, i, uaXML = false) {\r\n\t\tlet originalData = data;\r\n\t\t// removing the %{ , }% symbol from the data  \r\n\t\tdata = data.replace(/%{|}%/g, \"\");\r\n\t\t// splitting it with |\r\n\t\tdata = data.split(\"|\");\r\n\t\t// replacing the user Response in MathQuillMathField\r\n\t\tlet addMathquill = data[0].replace(/user Response/g, '\\\\MathQuillMathField');\r\n\t\t// then spliting with ##\r\n\t\tlet splitData =  addMathquill.split(\"##\");\r\n\t\tlet randomKey = Math.floor(Math.random() * splitData.length)\r\n\t\t// taking random option\r\n\t\tlet randomOption = splitData[randomKey];\r\n\t\t// storing the randomOption in userasn by replacing the MathQuillMathField{(any value)} to MathQuillMathField{}\r\n\t\tlet userans = randomOption.replace(/MathQuillMathField{(.*?)}/g, 'MathQuillMathField{}');\r\n\t\tlet defaultans = 0;\r\n\t\tlet anskey = randomOption;\r\n\t\t// checking for the user ans\r\n\t\tif(uaXML) {\r\n\t\t\tif(uaXML._userAns) {\r\n\t\t\t\t// storing the userans attribute value in useranswer\r\n\t\t\t\tuserans = uaXML._userAns;\r\n\t\t\t\t// check for the _userAnsSeq\r\n\t\t\t\tif(uaXML._userAnsSeq) {\r\n\t\t\t\t\t// storing the anskey and userAnsSeq\r\n\t\t\t\t\tanskey = uaXML._anskey;\r\n\t\t\t\t\trandomKey = uaXML._userAnsSeq;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (randomOption.indexOf(\"\\MathQuillMathField\") > -1) {\r\n\t\t\tanskey = randomOption;\r\n\t\t\tdefaultans = 1;\r\n\t\t}\r\n\r\n\t\tAH.select('#elem'+i,'css',{display:'none'});\r\n\r\n\t\tlet matheq = `<span id=\"elem${i}\" class=\"auto_height auto_width edit_step fillmathelement mathquill\" userAnsSeq=\"${randomKey}\" userans=\"${userans}\" anskey=\"${anskey}\" defaultans=\"${defaultans}\" mathtype=\"1\"></span>`;\r\n\r\n\t\tlet tag = `<div id=\"main_div\" class=\"text-center filter auto_height fillelement mathitem inline-block\"><div class=\"disable_div fh fwidth absolute h\"></div><div class=\"remed_disable fh fwidth absolute h\"></div>\r\n\t\t\t<span  id=\"m${i}\" style=\"display:none;\" class=\"auto_height h corr_div fillmathelement mathquill\" userAnsSeq=\"${randomKey}\" anskey=\"${anskey}\" defaultans=\"${defaultans}\" mathtype=\"1\">\r\n\t\t\t\t${anskey}\r\n\t\t\t</span>\r\n\t\t\t${matheq}\r\n\t\t</div>`;\r\n\r\n\t\t// rplacing the cdata\r\n\t\tcdata = cdata.replace(originalData, tag);\r\n\r\n\t\tlet mqInterval = setInterval(()=> { \r\n\t\t\t// checking the MathQuill function is defined or not\r\n\t\t\tif (typeof MathQuill == \"function\") {\r\n\t\t\t\t// if found clear the interval\r\n\t\t\t\tclearInterval(mqInterval);\r\n\t\t\t\tAH.selectAll('#elem'+i, 'show');\r\n\t\t\t\t// According to API DOC: By default, MathQuill overwrites the global MathQuill variable when loaded. If you do not want this behavior, you can use this \r\n\t\t\t\tlet MQ = MathQuill.getInterface(2);\r\n\t\t\t\tAH.selectAll(\".mathquill\").forEach((_this)=> {\r\n\t\t\t\t\tlet mathItemId  = _this.getAttribute('id');\r\n\t\t\t\t\tlet defaultans = _this.getAttribute('defaultans');\r\n\t\t\t\t\t// adding the userans in the mathItemid\r\n\t\t\t\t\tif(defaultans == 1) {\r\n\t\t\t\t\t\tvar latex = _this.getAttribute('userans');\r\n\t\t\t\t\t\tif(latex != undefined)\r\n\t\t\t\t\t\tAH.select('#'+mathItemId, 'text', latex); \r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlet usans = _this.getAttribute('userans');\r\n\t\t\t\t\t\tif(usans != null) {\r\n\t\t\t\t\t\t\tAH.select('#'+mathItemId, 'text', usans);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * According to Api doc\r\n\t\t\t\t\t * MQ.StaticMath(html_element) Creates a non-editable MathQuill initialized with the contents of the HTML element and returns a StaticMath object.\r\n\t\t\t\t\t * If the given element is already a static math instance,\r\n \t\t\t\t\t * this will return a new StaticMath object with the same .id. If the element is a different type of MathQuill, this will return null.\r\n\t\t\t\t\t**/\r\n\t\t\t\t\tfillMath[mathItemId] = MQ.StaticMath(document.getElementById(mathItemId));\r\n\t\t\t\t});\r\n\r\n\t\t\t\tucFill.fillMath = fillMath;\r\n\t\t\t}\r\n\t\t}, 100)\t\r\n\t}\r\n\r\n\tfunction createTextbox(data,i,uaXML=false) {\r\n\t\tvar userAnswer  = \"\";\r\n\t\t// checking for the user ans\r\n\t\tif(uaXML) {\r\n\t\t\tif(uaXML._userAns) {\r\n\t\t\t\t// storing the userans attribute value in useranswer\r\n\t\t\t\tuserAnswer = uaXML._userAns;\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet originalData = data;\r\n\t\tlet csStyle = \"\";\r\n\t\t// removing the %{ , }% symbol from the data  \r\n\t\tdata = data.replace(/%{|}%/g,\"\");\r\n\t\t// splitting it with |\r\n\t\tdata = data.split(\"|\");\r\n\t\t// if the type is codetype then make its value 1 else blank\r\n\t\tlet codetype = (data[1] && data[1].trim() == \"c\") ? \"1\" : \"\";\r\n\t\tlet anskey = data[0].trim();\r\n\r\n\t\t// check for if any styling is given or not\r\n\t\tif(anskey.indexOf(\"#style#\") != -1) {\r\n\t\t\tlet customStyle  = anskey.split(\"#style#\");\r\n\t\t\t// store the correct ans\r\n\t\t\tanskey = customStyle[0];\r\n\t\t\t// store the custom style\r\n\t\t\tcsStyle = customStyle[1];\r\n\t\t}\r\n\t\tlet txtWidth  = [];\r\n\t\t// split the anskey with ,\r\n\t\tlet anslen = anskey.split(\",\");\r\n\t\t// findiing width of the textbox\r\n\t\tAH.selectAll(anslen).forEach((val, j)=> {\r\n\t\t\ttxtWidth[j] = ((anslen[j].length)*10+30);\r\n\t\t});\r\n\t\t// adding information of the tag and textbox\r\n\t\tlet textbox = `<input type=\"text\" class=\"fillintheblank ks\" anskey=\"${anskey.trim()}\" value=\"${userAnswer}\" userans=\"${userAnswer}\" defaultans=\"\" haskeywords=\"\" codetype=\"${codetype}\" hasnotkeywords=\"\" keywordtype=\"\" autocomplete=\"off\" data-role=\"none\" style=\"width:${Math.max(...txtWidth)}px;${csStyle}\"  />`\r\n\t\tlet tag = `<div id=\"elem${i}\" class=\"fillelement\">${textbox}</div>`;\r\n\t\t// replace the cdata\r\n\t\tcdata = cdata.replace(originalData,tag);\r\n\t}\r\n\r\n\tfunction createNumericbox(data,i,uaXML=false) {\r\n\t\tvar userAnswer  = \"\";\r\n\t\t// checking for the user ans\r\n\t\tif (uaXML) {\r\n\t\t\tif (uaXML._userAns) {\r\n\t\t\t\t// storing the userans attribute value in useranswer\r\n\t\t\t\tuserAnswer = uaXML._userAns;\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet originalData = data;\r\n\t\tlet csStyle = \"\";\r\n\t\t// removing the %{ , }% symbol from the data  \r\n\t\tdata = data.replace(/%{|}%/g,\"\");\r\n\t\t// splitting it with |\r\n\t\tdata = data.split(\"|\");\r\n\t\t// if the type is codetype then make its value 1 else blank\r\n\t\tlet codetype = (data[1] && data[1].trim() == \"c\") ? \"1\" : \"\";\r\n\t\tlet anskey = data[0].trim();\r\n\t\t// check for if any styling is given or not\r\n\t\tif (anskey.indexOf(\"#style#\") != -1) {\r\n\t\t\tlet customStyle  = anskey.split(\"#style#\");\r\n\t\t\t// store the correct ans\r\n\t\t\tanskey = customStyle[0];\r\n\t\t\t// store the custom style\r\n\t\t\tcsStyle = customStyle[1];\r\n\t\t}\r\n\t\tlet txtWidth  = [];\r\n\t\t// split the anskey with ,\r\n\t\tlet anslen = anskey.split(\",\");\r\n\t\t// findiing width of the textbox\r\n\t\tAH.selectAll(anslen).forEach((elm, j)=> {\r\n\t\t\ttxtWidth[j] = ((anslen[j].length)*10+30);\r\n\t\t});\r\n\t\t// adding information of the tag and textbox\r\n\t\tlet textbox = `<input type=\"number\" onKeyDown=\"if(isNaN(event.key)){var key_arr = [13, 37, 38, 39, 40, 8, 69, 101, 46, 16, 9];if(!key_arr.includes(event.keyCode)) event.preventDefault()} \"class=\"fillintheblank ks\" anskey=\"${anskey.trim()}\" value=\"${userAnswer}\" userans=\"${userAnswer}\" defaultans=\"\" haskeywords=\"\" codetype=\"${codetype}\" hasnotkeywords=\"\" keywordtype=\"\" autocomplete=\"off\" data-role=\"none\" style=\"width: ${(Math.max(...txtWidth)+(20))}px;${csStyle}\" />`;\r\n\t\tlet tag = `<div id=\"elem${i}\" class=\"fillelement\">${textbox}</div>`;\r\n\t\t// replace the cdata\r\n\t\tcdata = cdata.replace(originalData,tag);\r\n\t}\r\n\r\n\tfunction createSelectBox(data,i,uaXML=false) {\r\n\t\tlet originalData = data;\r\n\t\t// removing the %{ , }% symbol from the data  \r\n\t\tdata = data.replace(/%{|}%/g,\"\");\r\n\t\t// splitting it with |\r\n\t\tdata = data.split(\"|\");\r\n\t\tlet optionsValue = data[0].trim();\r\n\t\t// splitting with , to extract all the option\r\n\t\toptionsValue = optionsValue.split(\",\").map(item => item.trim());\r\n\t\tlet options = '<option value=\"\">&nbsp;Please Select</option>';\r\n\r\n\t\t// iterating through each options\r\n\t\tAH.selectAll(optionsValue).forEach((_this, j)=> {\r\n\t\t\t// checking correct\r\n\t\t\tlet isCorrect = ((optionsValue[j].indexOf('*') == 0)? \"1\" : \"0\");\r\n\t\t\t// checking default selected value\r\n\t\t\tlet selected = ((optionsValue[j].indexOf('+') == 0)? 'selected=\"selected\"' : \"\");\r\n\t\t\t// extracting value of the option\r\n\t\t\tlet innerVal = ((optionsValue[j].indexOf('*') == 0 || optionsValue[j].indexOf('+') == 0)? optionsValue[j].slice(1) : optionsValue[j] );\r\n\t\t\tlet userAnswer = \"\";\r\n\t\t\t// checking for the user asn\r\n\t\t\tif(uaXML) {\r\n\t\t\t\tif(uaXML._userAns) {\r\n\t\t\t\t\tselected = '';\r\n\t\t\t\t\t// spliiting with , \r\n\t\t\t\t\tlet sel = uaXML._userAns.split(\",\");\r\n\t\t\t\t\t// checkimg for the option which is selected by the user\r\n\t\t\t\t\tif(j == sel[0].trim()-1) {\r\n\t\t\t\t\t\tselected = 'selected=\"selected\"';\r\n\t\t\t\t\t\tuserAnswer = \"1\"\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// replacing #cm with , & #pl with + in option text\r\n\t\t\tinnerVal = innerVal.replace(/\\#cm/gmi,\",\").replace(/\\#pl/gmi,\"+\");\r\n\t\t\t// creating options\r\n\t\t\toptions += `<option value=\"${j}\" correctans=\"${isCorrect}\" userans=\"${userAnswer}\" ${selected}>&nbsp;${innerVal}</option>`;\r\n\t\t});\r\n\t\t// creating selectbox\r\n\t\tlet selectbox = `<select class=\"fillintheblank ks\" data-role=\"none\">${options}</select>`;\r\n\t\tlet tag = `<div id=\"elem${i}\" class=\"fillelement\" tabindex =\"0\">${selectbox}</div>`;\r\n\t\t// replace the cdata\r\n\t\tcdata = cdata.replace(originalData,tag);\r\n\t}\r\n\r\n\tfunction createMultilineBox(data, i, uaXML=false) {\r\n\t\tlet userAnswerM  = \"\";\r\n\t\t// checking for the user ans\r\n\t\tif (uaXML) {\r\n\t\t\tif (uaXML._userAns) {\r\n\t\t\t\t// storing the userans attribute value in useranswer\r\n\t\t\t\tuserAnswerM = uaXML._userAns;\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet originalData = data;\r\n\t\t// removing the %{ , }% symbol from the data  \r\n\t\tdata = data.replace(/%{|}%/g,\"\");\r\n\t\t// splitting it with |\r\n\t\tdata = data.split(\"|\");\r\n\t\tlet anskey = data[0].trim();\r\n\t\t// parse the attr in json\r\n\t\tlet attrs = JSON.parse(data[1]);\r\n\t\t// creating textarea\r\n\t\tlet multilineBox  = `<textarea class=\"textarea ks\" rows=\"${attrs.rows}\" cols=\"${attrs.cols}\" anskey=\"${anskey}\" value=\"${userAnswerM}\" defaultans=\"${((attrs.defaultAns) ? attrs.defaultAns: \"\")}\" userans=\"${userAnswerM}\" haskeywords=\"\" hasnotkeywords=\"\" keywordtype=\"1\" autocomplete=\"off\" data-role=\"none\">${userAnswerM}</textarea>`;\r\n\t\tlet tag = `<span id=\"elem${i}\" class=\"fillelement\" style=\"height:auto\">${multilineBox}</span>`;\r\n\t\t// replace the cdata\r\n\t\tcdata = cdata.replace(originalData, tag);\r\n\t}\r\n\r\n\tfunction createDragDrop(data,i,uaXML=false) {\r\n\t\tlet originalData = data;\r\n\t\t// removing the %{ , }% symbol from the data  \r\n\t\tdata = data.replace(/%{|}%/g,\"\");\r\n\t\t// splitting it with |\r\n\t\tdata = data.split(\"|\");\r\n\t\tlet anskey = data[0].trim();\r\n\t\t// if the type is ds then make dragSingle value 1 else 0\r\n\t\tlet dragSingle = ((data[1].trim() == \"ds\")? \"1\": \"0\");\r\n\t\t// split the anskey with ,\r\n\t\tlet totalDrag = anskey.split(\",\");\r\n\t\tlet dropAns = '';\r\n\r\n\t\t// traversing through each option\r\n\t\tAH.selectAll(totalDrag).forEach((elm, j)=> {\r\n\t\t\tlet isDuplicate = false;\r\n\t\t\tlet maxWidth = ((totalDrag[j].length)*10+30);\r\n\t\t\tlet dragAns = totalDrag[j];\r\n\t\t\t// storing the incorrect values\r\n\t\t\tlet ignore = totalDrag[j].match(/i~|~i/g);\r\n\t\t\tlet tempAns = \"\";\r\n\r\n\t\t\tif (ignore) {\r\n\t\t\t\t// removing ~i,i~ from the dragans\r\n\t\t\t\tdragAns = totalDrag[j].replace(/i~|~i/g,\"\");\r\n\t\t\t} else {\r\n\t\t\t\tdropAns += \"ID\" + dragID + \",\";\r\n\t\t\t\ttempAns = \"ID\" + dragID + \",\";\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// function for checking duplicate values\r\n\t\t\tAH.selectAll(CheckDuplicate).forEach((elm, z)=> {\r\n\t\t\t\tif (CheckDuplicate[z].ans == dragAns) {\r\n\t\t\t\t\tisDuplicate = true;\r\n\t\t\t\t\tif (!ignore) {\r\n\t\t\t\t\t\tdropAns =  dropAns.replace(tempAns,\"\");\r\n\t\t\t\t\t\tdropAns += CheckDuplicate[z].id+\",\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// if value is not duplicate\r\n\t\t\tif (isDuplicate == false) {\r\n\t\t\t\tCheckDuplicate.push({\r\n\t\t\t\t\t\"ans\":dragAns,\r\n\t\t\t\t\t\"id\":\"ID\"+dragID\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (isDuplicate == false) dragData += `<div id=\"ID${dragID}\" dragable=\"true\" tabindex=\"0\" class=\"drag-resize dragable ks\" caption=\"${dragAns.replace(/\\#cm/gmi,\",\").replace(/\\\"/gmi,\"#doublequote#\")}\" path=\"//s3.amazonaws.com/jigyaasa_content_static/\" drag-single=\"${dragSingle}\" bgcolor=\"#CCFFCC\" style=\"background-color:#CCFFCC;height:auto;max-width:${maxWidth}px;padding:3px 10px 3px 10px; margin: 2px 2px;\" aria-disabled=\"false\">${dragAns.replace(/\\#cm/gmi,\",\")}</div>`;\r\n\t\t\t \r\n\t\t\tif (isDuplicate == false) dragID++;\r\n\t\t});\r\n\t\tlet userAnswer = \"\";\r\n\t\t// checking for the user ans\r\n\t\tif (uaXML) {\r\n\t\t\tif (uaXML._userAns) {\r\n\t\t\t\t// storing the userans attribute value in useranswer\r\n\t\t\t\tuserAnswer = uaXML._userAns;\r\n\t\t\t}\r\n\t\t}\r\n\t\t// adding information in html\r\n\t\tlet drop = '<div id=\"elem'+i+'\" tabindex=\"0\" dropzone=\"1\" class=\"drag-resize dropable ks\" path=\"//s3.amazonaws.com/jigyaasa_content_static/\" anskey=\"'+dropAns.slice(0,-1)+'\" caption=\"\" userans=\"'+userAnswer+'\" droped=\"'+userAnswer+'\" bgcolor=\"#FFFFCC\" style=\"background-color: rgb(255, 255, 204); min-width: 50px; height: auto; padding: 5px 10px 5px;\">'+userAnswer+'</div>';\r\n\t\t// replace the cdata\r\n\t\tcdata = cdata.replace(originalData,drop);\r\n\t\tstate.footerStr = true;\r\n\t}\r\n\t/*----------------------------------------------------------------- */\r\n\r\n\t// for showing correct answer.\r\n\tfunction correctAnswer() {\r\n\t\tucFill.showdragans(ajax_eId, 'c', 1);\r\n\t\tAH.selectAll('.corr_div','css',{display:'block'});\r\n\t\tAH.selectAll('.remed_disable','css',{display:'block'});\r\n\t\tautoresize(1);\r\n\t}\r\n\r\n\t// for showing user answer.\r\n\tfunction yourAnswer() {\r\n\t\t\tucFill.showdragans(ajax_eId, 'u', 1);\r\n\t\t\tAH.selectAll('.corr_div', 'hide');\r\n\t\t\tautoresize(1);\r\n\t}\r\n\r\n\t//To handle review toggle\r\n\tfunction handleReview(mode, event) {\r\n\t\tif (mode == 'c') {\r\n\t\t\tanserDisable = true;\r\n\t\t\tcorrectAnswer(event)\r\n\t\t} else {\r\n\t\t\tanserDisable = false;\r\n\t\t\tyourAnswer(event);\r\n\t\t}\r\n\t}\r\n</script>\r\n<div class={xml ? \"mx-4 pl-2 pl-md-0\": \"\"}>\r\n\t<center>\r\n\t\t\r\n\t\t<ItemHelper \r\n\t\t\tbind:this={smControllerCallback}\r\n\t\t\ton:setReview = {setReview}\r\n\t\t\ton:unsetReview = {unsetReview}\r\n\t\t\thandleReviewClick={handleReview}\r\n\t\t\treviewMode={isReview}\r\n\t\t\tcustomReviewMode={customIsReview}\r\n\t\t/>\r\n\t\t\r\n\t\t<div \r\n\t\t\tid={containerID}\r\n\t\t\tclass=\"fillmain\"\r\n\t\t\tmatchtype={state.matchtype}\r\n\t\t\ttabindex=\"0\"\r\n\t\t\tmulti={state.multi}\r\n\t\t\tignoretype={state.ignoretype}\r\n\t\t\tmanual_grade={manual_grade || 0}\r\n\t\t\ttotalcorrectans={state.totalcorrectans}\r\n\t\t\tstyle='font-family: Roboto, sans-serif;font-size: 1em;'\r\n\t\t>\r\n\t\r\n\t\t<div class=\"string\" id=\"previewArea\"></div>\r\n\t\t\t<div style=\"color: #b94a48; margin-top: 5px\" class=\"smnotes\">\r\n\t\t\t\t{#if state.matchtype == \"0\"}\r\n\t\t\t\t\t*Exact matching is required.\r\n\t\t\t\t{:else}\r\n\t\t\t\t\t*Matching is not case sensitive.\r\n\t\t\t\t{/if}\r\n\t\t\t</div>\r\n\t\t\t<div class=\"footerStr\" style=\"display: {state.footerStr ? 'block' : 'none'}\">\r\n\t\t\t\t<div class=\"arrow-up\"></div>\r\n\t\t\t\t<center class=\"dragArea\"></center>\r\n\t\t\t</div>\r\n\t\t\t{#if state.showToolbar} \r\n\t\t\t\t<FillInTheBlanksToolbar  \r\n\t\t\t\t\tspanId={state.spanId} \r\n\t\t\t\t\tdivId={state.divId} \r\n\t\t\t\t\taction={ucFill.fillMath[fillId]} \r\n\t\t\t\t\tshow={toggleToolbar}\r\n\t\t\t\t/>\r\n\t\t\t{/if}\r\n\t\t</div>\r\n\t</center>\r\n</div>\r\n<!-- <textarea class=\"h\" id=\"special_module_user_xml\"></textarea> -->\r\n<style type=\"text/css\">\r\n\t/*@import 'layout/themes/bootstrap4/css/bootstrap5Beta1.css'; */\r\n\t\r\n\t:global(xmp) {\r\n\t\tdisplay: inline;\r\n\t}\r\n\t:global(#fillmain) {\r\n\t\toverflow:hidden;\r\n\t\tmax-width:1024px;\r\n\t\ttext-align:left;\r\n\t}\r\n\t:global(#fillmain pre) {\r\n\t\tbackground: none;\r\n\t\tborder: none;\r\n\t\tfont-size: 14px!important;\r\n\t}\r\n\t:global(#fillmain .string) {\r\n\t\tmin-height:50px;\r\n\t\tmargin-top:10px;\r\n\t\tmargin-right:10px;\r\n\t}\r\n\t:global(#fillmain .footerStr) {\r\n\t\tposition:relative;\r\n\t\tmargin-top: 10px;\r\n\t\tbackground-color: #ccc;\r\n\t\tpadding: 15px;\r\n\t\tmin-height: 60px;/*100px;*/\r\n\t}\r\n\t:global(#fillmain .footerStr .arrow-up) {\r\n\t\tposition: absolute;\r\n\t\ttop: -10px;\r\n\t\tright: 50%;\r\n\t\twidth: 0;\r\n\t\theight: 0;\r\n\t\tborder-left: 10px solid transparent;\r\n\t\tborder-right: 10px solid transparent;\r\n\t\tborder-bottom: 10px solid #ccc;\r\n\t}\r\n\t:global(#fillmain .fill-row) {\r\n\t\tpadding:6px;\r\n\t}\r\n\t:global(#fillmain .fillelement){\r\n\t\theight:30px;\r\n\t\tdisplay:inline-block;\r\n\t\tposition:relative;\r\n\t\tmin-height: 30px;\r\n\t\tmargin: 1px 0 1px 0;\r\n\t\ttop: -3px;\r\n\t}\r\n\t:global(#fillmain .drag-resize) {\r\n\t\theight:30px;\r\n\t\tdisplay:inline-block;\r\n\t\tposition:relative;\r\n\t\tmin-height: 30px;\r\n\t\tmargin: 1px 0 1px 0;\r\n\t\ttop: -3px;\r\n\t}\r\n\t:global(td .drag-resize) {\r\n\t\ttop: 0 !important;\r\n\t}\r\n\t:global(td .fillelement) {\r\n\t\ttop: 0px !important;\r\n\t}\r\n\t/* :global(#fillmain input[type=\"text\"]), select {\t\r\n\t\theight:99%!important;\r\n\t\tresize: none;\r\n\t\tfont-size:12px;\r\n\t\tcolor: #000;\r\n\t\tmax-width: 800px;\r\n\t} */\r\n\t:global(#fillmain input[type=\"text\"]) {\t\r\n\t\theight:99%!important;\r\n\t\tresize: none;\r\n\t\tfont-size:12px;\r\n\t\tcolor: #000;\r\n\t\tmax-width: 800px;\r\n\t}\r\n\t:global(#fillmain .drag-resize) {\r\n\t\tvertical-align:middle;\r\n\t\tborder:1px solid #31B731;\r\n\t\ttext-align:center;\r\n\t\tpadding:3px;\r\n\t\tfont-size: 14px;\r\n\t}\r\n\t:global(#fillmain .drag-resize.dragable)  {\r\n\t\tcursor:move;\r\n\t}\r\n\t:global(#fillmain .drop-hover)  {\r\n\t\tborder: 1px dashed red!important;\r\n\t\tbox-shadow: 0 0 0 2px yellow inset;\r\n\t\toutline: 1px solid blue;\r\n\t}\r\n\t:global(#fillmain .fillcheck ul) {\r\n\t\twidth:220px;\r\n\t}\r\n\t:global(#fillmain .fillcheck li.selected) {\r\n\t\tbackground-color: #E5E5E5;\r\n\t}\r\n\t:global(.fillcheck .selected .icomoon-checkmark-3:before) {\r\n\t\tfloat: left;\r\n\t\tcolor: blue;\r\n\t\tpadding: 3px;\r\n\t\tposition: relative;\r\n\t\tright: 14px;\r\n\t}\r\n\t:global(.fillcheck .icomoon-close-2:before) {\r\n\t\tfloat: left;\r\n\t\tcolor: blue;\r\n\t\tposition: relative;\r\n\t\tright: 14px;\r\n\t\tfont-size: 20px;\r\n\t}\r\n\t:global(.MathJax_Display) {\r\n\t\t\tdisplay : inline!important;\r\n\t}\r\n\t:global(#fillmain .select) {\r\n\t\tfont-size: 15px;\r\n\t}\r\n\t:global(#fillmain .textarea) {\r\n\t\tvertical-align: middle;\r\n\t\tborder-radius:3px;\r\n\t\tbackground:#ffe;\r\n\t\tborder: 1px solid #ccc;\r\n\t\t-webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,0.075);\r\n\t\tbox-shadow: inset 0 1px 1px rgba(0,0,0,0.075);\r\n\t}\r\n\t:global(.ui-draggable-disabled) {\r\n\t\tcursor: no-drop!important;\r\n\t\topacity: 0.5!important;\r\n\t}\r\n\t:global(.sel) {\r\n\t\tborder :2px solid #FF0000!important;\r\n\t}\r\n\t:global(#fillmain .dragable:focus) {\r\n\t\tbox-shadow: inset 0 0 0 1px transparent, inset 0 0 0 1px #ffffff, inset 0 0 0 2px #fff;\r\n\t\toutline: none;\r\n\t}\r\n\r\n\t:global(#fillmain .dropable:focus) {\r\n\t\tbox-shadow: inset 0 0 0 1px transparent, inset 0 0 0 1px #ffffff, inset 0 0 0 2px #fff;\r\n\t\toutline: none;\r\n\t}\r\n\t:global(.highlight_main) {\r\n\t\tborder : 1px dashed #000;\r\n\t}\r\n\r\n\t:global(.copiedclr) {\r\n\t\tbackground-color: #CCC!important;\r\n\t}\r\n\r\n\t:global(#fillmain select::-ms-expand) {\r\n\t\tmargin-left: 2px;\r\n\t}\r\n\t:global(.fillintheblank) {\r\n\t\theight: 30px;\r\n\t\tpadding: 5px 10px;\r\n\t\tfont-size: 14px;\r\n\t\tmargin-bottom:3px;\r\n\t\tline-height: 20px;\r\n\t\t-webkit-border-radius: 3px;\r\n\t\t-moz-border-radius: 3px;\r\n\t\tborder-radius: 3px;\r\n\t\tcolor: #171718;\r\n\t\tbackground-color: #FFE;\r\n\t\tvertical-align: middle;\r\n\t\tbackground-image: none;\r\n\t\tborder: 1px solid #ccc;\r\n\t\tfont-family: Roboto, sans-serif;\r\n\t\t-webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,0.075);\r\n\t\tbox-shadow: inset 0 1px 1px rgba(0,0,0,0.075);\r\n\t\t-webkit-transition: border-color ease-in-out .15s,box-shadow ease-in-out .15s;\r\n\t\ttransition: border-color ease-in-out .15s,box-shadow ease-in-out .15s;\r\n\t}\r\n\r\n\t:global(.fillintheblank:focus) {\r\n\t\tborder-color: rgba(82,168,236,0.8);\r\n\t\toutline: 0;\r\n\t\t-webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,0.075),0 0 8px rgba(82,168,236,0.6);\r\n\t\t-moz-box-shadow: inset 0 1px 1px rgba(0,0,0,0.075),0 0 8px rgba(82,168,236,0.6);\r\n\t\tbox-shadow: inset 0 1px 1px rgba(0,0,0,0.075),0 0 8px rgba(82,168,236,0.6);\r\n\t}\r\n\t:global(.correct_incorrect_icon_fill) {\r\n\t\tposition:absolute;\r\n\t\twidth:17px;\r\n\t\theight:18px;\r\n\t\tright:-4px;\r\n\t\ttop:-7px;\r\n\t\tfont-size: 17px;\r\n\t\twhite-space: normal !important;\r\n\t\tz-index: 9 !important;\r\n\t}\r\n\t:global(.corr_div) {\r\n\t\tdisplay: none;\r\n\t\tposition: absolute;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tbackground-color: #21a81d;\r\n\t\tcolor: #ffffff;\r\n\t\ttop: 0%;\r\n\t\tpadding-top: 4px;\r\n\t\tborder-radius: 3px;\r\n\t\tcursor: none !important;\r\n\t}\r\n\t:global(.auto_height) {\r\n\t\theight:auto!important;\r\n\t}\r\n\t:global(.auto_width) {\r\n\t\twidth:auto!important;\r\n\t}\r\n\t:global(.prettyprint) {\r\n\t\tdisplay: -ms-grid!important;\r\n\t}\r\n\t:global(.tooltip-inner) {\r\n    \ttext-align: left;\r\n\t}\r\n</style>"],"names":["JS","JUI","previous_droped_item","ucFill","[object Object]","options","this","userAnsXML","sInfo","labBinded","delPreSpaces","init","iscorrect","loopGaurd","withLines","fillid","activate","selectAll","ln","length","li_arr","setTimeout","showFillModule","forEach","_this","i","find","innerHTML","remove","push","val","children","classList","contains","ht","prevElm","append","insert","nextElm","withoutLines","pre_prv","trim","pre_nxt","quizPlayerStatic","QuizPlayer","setNewHeight","func","updateModule","drag_id","drop_target","bind","trigger","dragOptionFill","appendTo","zIndex","revert","is_valid_drop","showmsg","helper","e","target","getAttribute","img","width","select","clientWidth","height","draggable","left","Math","floor","top","cloneNode","css","position","text-align","err","console","warn","onDragStart","dataset","onDragEnter","add","onDragLeave","onDrop","event","dragElm","drop_id","userans","droped","path","backgroundColor","style","id","checkAns","onDragEnd","textContent","rel_id","dnd","disableDrag","Object","entries","setAttribute","selected","document","querySelector","scroll","refreshPositions","cursor","window","Draggable","elm","setDrag","_elm","pre_id","setDrop","Array","from","copied_id","dragStop","_this_drag","innerText","removeAttribute","listen","isReview","checkFocus","data","copy_drag","which","learn","remove_id","paste_drag","_this_drag_style","getComputedStyle","getPropertyValue","pasteDraggable","list","ajax_eId","is_focus","isFocus","ansType","review","showchilddragans","pElem","is_correct","replace","setCss","background-color","split","value","index","$anskey","cans","uans","indexOf","border","display","fillTestText","parentElement","nodeName","totalcorrect","a","type","anskey","tooltip","rel","title","data-bs-toggle","data-toggle","data-bs-html","data-html","enableBsAll","container","__ans","parseInt","correct_incorrect_mark","markUserAnswer","action","haskey","hasnkey","codetype","mathtype","test","temp","match","toString","regex_code","regex_replace","l","toLowerCase","ans","join","valid","valid_is","checkInArray","droped_value_indicator_html","result","checkChildAnswer","ISSPECIALMODULEUSERXMLCHANGE","checked","tree","branch","matchedBranch","j","includes","ansKey","undefined","findInArray","calculatePoint","innerfield","mathItemId","originalLatex","mathItem","MathQuill","getInterface","StaticMath","getElementById","innerFields","latex","newMathField","mathField","createFeild","newMf","regex","uAnsSel","_value","modeType","hotkeys","unbind","deleteScope","unBindLab","showdragans","bindKeyup","bindLab","actionData","readyFill","log","querySelectorAll","ctx","spanId","divId","fillMath","matchtype","showToolbar","footerStr","containerID","multi","ignoretype","totalcorrectans","autoresize","flag","ftb_textarea","timer","cssText","isIE","scrollHeight","clearTimeout","smControllerCallback","fillId","manual_grade","xml","uxml","editorState","smValidate","showAns","anserDisable","customIsReview","cdata","dragData","CheckDuplicate","dragID","errorCatchFlag","parsedXml","parsedUxml","globalThis","state","preReview","writable","isMathquill","subscribe","items","loadModule","XMLToJSON","isResetMath","MYXML","uaXML","smxml","text","__cdata","AH","_matchType","_matchtype","_ignoreType","_ignoretype","_multiple","answerKey","answerType","uaXMLNew","totalMarks","v","smans","div","isArray","originalKey","createTextbox","createNumericbox","createDragDrop","createSelectBox","createMathDiv","createMultilineBox","ignoreEnity","parent","divs","splice","random","maxDragDropWidth","max-width","max","setMaxWidth","tableWidth","margin","padding-top","padding-left","setSMNotes","runModule","prettyPrint","previousElementSibling","parseXmlAuthoring","errMsg","smVal","validate","content_type","subtype","content_icon","setReview","modeOn","getElementsByClassName","AI","disabled","displayAns","unsetReview","answer","uXml","onUserAnsChange","oneditoFocused","x","isFillId","latexArray","element","commandId","mathId","indexId","key","parsedUans","currentAns","_userAns","isValid","updateUserAns","originalData","splitData","randomKey","randomOption","defaultans","_userAnsSeq","_anskey","tag","mqInterval","setInterval","clearInterval","MQ","usans","userAnswer","csStyle","customStyle","txtWidth","anslen","optionsValue","map","item","isCorrect","innerVal","slice","userAnswerM","attrs","JSON","parse","rows","cols","defaultAns","dragSingle","totalDrag","dropAns","isDuplicate","maxWidth","dragAns","ignore","tempAns","z","drop","onMount","in_editor","addScript","itemUrl","setUpdate","overflow","beforeUpdate","stopPreviewUpdate","node","childNodes","firstElementChild","nodeType","txt","createElement","replaceWith","mode"],"mappings":"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"}