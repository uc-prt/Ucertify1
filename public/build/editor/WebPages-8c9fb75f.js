import{S as e,i as t,s as a,e as s,f as i,h as o,ad as n,r as l,o as r,p as d,C as g,A as c,ae as u,w as m,b as p,g as _,j as b,l as y,y as h,q as f,v as w,af as x,ag as q,$ as T}from"./main-fcda70bb.js";function v(e,t,a){const s=e.slice();return s[16]=t[a],s[18]=a,s}function M(e){let t,a,n,l,d,g,c,u,m,f,w,x,q,v,M,k=e[1]("Subject")+"",S=e[1]("Message")+"";return{c(){t=s("div"),a=new T,n=p(),l=s("div"),g=p(),c=new T,u=p(),m=s("br"),f=p(),w=s("textarea"),a.a=n,i(l,"class","tinymce-editor auth-editor"),i(l,"contenteditable",d=!0),i(l,"id","subject"),i(l,"data-text","Subject"),_(l,"border-bottom","1px solid #e7e7e7"),_(l,"margin","10px 0 5px 0"),_(l,"min-height","80px"),c.a=u,i(w,"id","message"),i(w,"rows",x=10),i(w,"cols",q=90),i(w,"placeholder","Message"),w.value="\t\r\n            "},m(s,i){o(s,t,i),a.m(k,t),b(t,n),b(t,l),b(t,g),c.m(S,t),b(t,u),b(t,m),b(t,f),b(t,w),v||(M=[y(l,"keyup",e[6].bind(this,"subject")),y(w,"Change",e[5])],v=!0)},p(e,t){2&t&&k!==(k=e[1]("Subject")+"")&&a.p(k),2&t&&S!==(S=e[1]("Message")+"")&&c.p(S)},d(e){e&&r(t),v=!1,h(M)}}}function k(e){let t,a=[],s=new Map,i=e[3];const n=e=>e[16].id;for(let t=0;t<i.length;t+=1){let o=v(e,i,t),l=n(o);s.set(l,a[t]=j(l,o))}return{c(){for(let e=0;e<a.length;e+=1)a[e].c();t=f()},m(e,s){for(let t=0;t<a.length;t+=1)a[t].m(e,s);o(e,t,s)},p(e,o){75&o&&(i=e[3],a=x(a,o,n,1,e,i,s,t.parentNode,q,j,t,v))},d(e){for(let t=0;t<a.length;t+=1)a[t].d(e);e&&r(t)}}}function S(e){let t,a,n,l,d,g,c,u,m,h,f,x=e[1](e[16].label)+"";return{c(){t=s("div"),a=new T,n=p(),l=s("div"),u=p(),a.a=n,i(l,"class","tinymce-editor auth-editor"),i(l,"contenteditable",d=!0),i(l,"id",g=e[16].id),i(l,"data-text",c=e[16].id),_(l,"border-bottom","1px solid #e7e7e7"),_(l,"margin","10px 0 5px 0"),_(l,"min-height","125px"),i(t,"key",m=e[16].id)},m(s,i){o(s,t,i),a.m(x,t),b(t,n),b(t,l),b(t,u),h||(f=y(l,"keyup",(function(){w(e[6].bind(this,e[16].arg))&&e[6].bind(this,e[16].arg).apply(this,arguments)})),h=!0)},p(s,o){e=s,10&o&&x!==(x=e[1](e[16].label)+"")&&a.p(x),8&o&&g!==(g=e[16].id)&&i(l,"id",g),8&o&&c!==(c=e[16].id)&&i(l,"data-text",c),8&o&&m!==(m=e[16].id)&&i(t,"key",m)},d(e){e&&r(t),h=!1,f()}}}function j(e,t){let a,s,i=t[16].view.includes(t[0].item),n=i&&S(t);return{key:e,first:null,c(){a=f(),n&&n.c(),s=f(),this.first=a},m(e,t){o(e,a,t),n&&n.m(e,t),o(e,s,t)},p(e,a){t=e,9&a&&(i=t[16].view.includes(t[0].item)),i?n?n.p(t,a):(n=S(t),n.c(),n.m(s.parentNode,s)):n&&(n.d(1),n=null)},d(e){e&&r(a),n&&n.d(e),e&&r(s)}}}function C(e){let t,a,d,g;function c(e,t){return"p"==e[0].content_type?k:"e"==e[0].content_type?M:void 0}let u=c(e),m=u&&u(e);return{c(){t=s("div"),m&&m.c(),i(t,"id","webPagesAuthoring")},m(s,i){o(s,t,i),m&&m.m(t,null),d||(g=n(a=e[2].call(null,t,e[4])),d=!0)},p(e,[a]){u===(u=c(e))&&m?m.p(e,a):(m&&m.d(1),m=u&&u(e),m&&(m.c(),m.m(t,null)))},i:l,o:l,d(e){e&&r(t),m&&m.d(),d=!1,g()}}}function A(e){let t=[document.querySelectorAll("style"),document.querySelectorAll("link"),document.querySelectorAll("script")],a="";for(let e=0;e<3;e++)for(let s=0;s<t[e].length;s++)/bundle\.js/gm.test(t[e][s].outerHTML)||(a+=t[e][s].outerHTML);let s="<!DOCTYPE html><html><head>"+a+"</head><body>"+e+"</body></html>",i=document.querySelector("#layoutMode").firstElementChild;i.className="fwidth border-0",i.style.cssText="min-height: 600px;";let o=i.contentDocument;o.open(),o.write(s),o.close();let n=setInterval((function(){let e=o.querySelectorAll(".video_preview img");if(e.length>0){for(let t=0;t<e.length;t++)e[t].style.cssText="transform:unset";clearInterval(n)}}),300)}function L(e,t,a){let{editorState:s}=t,{content_guid:i}=t,{getLabel:o}=t,{didMount:n}=t,l=[],r={};m({content_type:"",content_subtype:"",exam:"",examdetails:"",subject:"",message:"",meta_title:"",meta_keywords:"",meta_description:"",meta_keywords:"",google_suggestion:"",exam_groups:"",requirements:"",about:"",about_more:"",header:"",footer:"",usefull_Links:"",content:"",details:"",Heading:"",toggleMode:""}).subscribe((e=>{r=e}));function p(e){for(let t in l)c.select(t.id,"html",e[t.id])}function _(e){let t="object"==typeof e?e.target.id:e,a=tinyMCE.activeEditor.getContent({format:"raw"});c.select("#"+t+"_show","html",get_ucsyntax(a)),a.match(/<uc:syntax/gm)&&prettyPrint();let s=c.select("#webpageContentShow","html",tinyMCE.activeEditor.getContent());s=s.textContent,r[t]=seqTag(s,1),p(y(1))}function b(){c.activate(2),c.ajax({url:baseUrl+"editor/index.php",cache:!1,data:{ajax:"1",action:"get_web_page_data",content_guid:s.guid,content_text:s.webPageData},type:"post"}).then((e=>{document.querySelector("#layoutMode").innerHTML="<iframe></iframe>",A(e),c.activate(0)}))}function y(e=0){let t={};if("p"==r.content_type)switch(parseInt(r.content_subtype)){case 0:t.exam=seqTag(r.exam),t.examdetails=seqTag(r.examdetails),t.meta_title=seqTag(r.meta_title),t.meta_description=seqTag(r.meta_description),t.meta_keywords=seqTag(r.meta_keywords),t.google_suggestion=seqTag(r.google_suggestion),t.exam_groups=seqTag(r.exam_groups),t.header=seqTag(r.header),t.about=seqTag(r.about);case 1:t.meta_title=seqTag(r.meta_title),t.meta_keywords=seqTag(r.meta_keywords),t.meta_description=seqTag(r.meta_description),t.google_suggestion=seqTag(r.google_suggestion),t.exam_groups=seqTag(r.exam_groups),t.requirements=seqTag(r.requirements),t.about=seqTag(r.about),t.about_more=seqTag(r.about_more);case 2:t.meta_title=seqTag(r.meta_title),t.meta_description=seqTag(r.meta_description),t.meta_keywords=seqTag(r.meta_keywords),t.about=seqTag(r.about),t.about_more=seqTag(r.about_more),t.google_suggestion=seqTag(r.google_suggestion),t.header=seqTag(r.header),t.footer=seqTag(r.footer);case 3:t.meta_title=seqTag(r.meta_title),t.meta_description=seqTag(r.meta_description),t.meta_keywords=seqTag(r.meta_keywords),t.heading=seqTag(r.heading),t.details=seqTag(r.details),t.header=seqTag(r.header),t.content=seqTag(r.content),t.usefull_links=seqTag(r.usefull_links);default:t.exam=seqTag(r.exam),t.examdetails=seqTag(r.examdetails)}else"e"==r.content_type&&(t.subject=br2nl(r.subject),t.message=br2nl(r.message));return e?(t.content_icon=0,t.course_code=editor.course,t.action="save"):(t.func="react_get_preview",t.ajax="1"),t.content_guid="p"==r.content_type?c.select("#show_guid").innerHTML:i,t.content_type=r.content_type,t.content_subtype=r.content_subtype,"p"==r.content_type&&(t.webpage=c.select("#show_guid").innerHTML),JSON.parse(JSON.stringify(t))}return d((async()=>{a(3,l=[{label:"Exam",id:"exam",arg:"exam",view:[0]},{label:"Exam Details",id:"examdetails",arg:"examdetails",view:[0]},{label:"Meta Title",id:"meta_title",arg:"meta_title",view:[0,1,2,3]},{label:"Meta Description",id:"meta_description",arg:"meta_description",view:[0,1,2,3]},{label:"Meta Keywords",id:"meta_keywords",arg:"meta_keywords",view:[0,1,2,3]},{label:"Google Suggestion",id:"google_suggestion",arg:"google_suggestion",view:[0,1,2]},{label:"Exam Groups",id:"exam_groups",arg:"exam_groups",view:[1]},{label:"Requirements",id:"requirements",arg:"requirements",view:[1]},{label:"Header",id:"header",arg:"header",view:[0,2,3]},{label:"Heading",id:"heading",arg:"heading",view:[3]},{label:"Details",id:"details",arg:"details",view:[3]},{label:"Content",id:"Content",arg:"Content",view:[3]},{label:"Usefull Links",id:"usefull_links",arg:"usefull_links",view:[3]},{label:"About",id:"about",arg:"about",view:[0,1,2]},{label:"About More",id:"about_more",arg:"about_more",view:[1,2]},{label:"Footer",id:"footer",arg:"footer",view:[2]}]),s.viewConfig.showRefresh&&AI.set(s.content_type+"_refresh",b),r.content_type=s.content_type,r.content_subtype=s.item,function(){"e"==s.content_type&&c.insert("#content_show",'<div id="subject_show" class="pt-md bold" style="whiteSpace:pre-line;wordWrap:break-word;"></div><div id="message_show" class="pt-md" style="whiteSpace:pre-line;wordWrap:break-word;"></div>',"afterend");setTimeout((function(){!function(e=s.propsAjaxData){if(e){for(let t in e)null!=r[t]&&(r[t]=e[t],AI.isValid(e[t])&&(c.selectAll(`#${t}, #${t}_show`,"html",e[t].replace(/\n/g,"<br />")),"message"==t&&c.select("#message","value",e[t].replace(/\n/g,"<br />"))));p(y(1)),e.page_data&&(c.select("#layoutMode","html","<iframe></iframe>"),A(e.page_data))}else c.select("#exam","html",u.getWebpageTags("exam")),c.select("#examdetails","html",u.getWebpageTags("examdetails"))}()}),200),c.listen("body","click","#showPreview",(e=>{let t=y();a(0,s.activator=!0,s),c.ajax({url:baseUrl+"editor/index.php",data:t,type:"post"}).then((e=>{e=JSON.parse(e),s.propsAjaxData.page_data&&(document.querySelector("#layoutMode").innerHTML="<iframe></iframe>",A(e.page_data)),a(0,s.activator=!1,s)}))})),tinyMCE.PluginManager.add("changeInModule",(function(e){e.on("change click ExecCommand keyup",(function(e){try{_(tinyMCE.activeEditor.id)}catch(e){}}))}))}()})),g((async()=>{if(s.toggleMode!==r.toggleMode&&"authoring"==s.editorView&&s.webPageData){for(let e in s.webPageData)r[e]=s.webPageData[e];r.webpageArray=s.webpageArray,setTimeout((function(){p(y(1))}),200),r.toggleMode=s.toggleMode}})),e.$$set=e=>{"editorState"in e&&a(0,s=e.editorState),"content_guid"in e&&a(7,i=e.content_guid),"getLabel"in e&&a(1,o=e.getLabel),"didMount"in e&&a(2,n=e.didMount)},[s,o,n,l,undefined,function(e){let t=e.target.value;document.querySelector("#message_show").innerHTML=get_ucsyntax(t),t.match(/<uc:syntax/gm)&&prettyPrint(),r.message=seqTag(t).replace(/&lsqb;/g,"["),p(y(1));let a=c.select("#save_xml");a.classList.contains("disabled")&&"disabled"==a.getAttribute("disabled")&&(1==editor.save?(c.select(a,"removeClass","disabled"),a.disabled=!1):(c.select(a,"addClass","disabled"),a.disabled=!0))},_,i]}export default class extends e{constructor(e){super(),t(this,e,L,C,a,{editorState:0,content_guid:7,getLabel:1,didMount:2})}}
//# sourceMappingURL=WebPages-8c9fb75f.js.map
