import{S as e,i as t,s as l,q as s,h as n,e as r,b as c,j as o,f as a,g as i,l as d,o as u,y as p,D as m,c as h,u as g,m as f,x as C,t as A,a as w,d as b,p as x,X as v,A as k,C as _,R as y}from"./main-464952be.js";import{I as $}from"./ItemHelper-9b9be701.js";function P(e,t,l){const s=e.slice();return s[39]=t[l],s}function S(e,t,l){const s=e.slice();return s[36]=t[l],s[38]=l,s}function V(e){let t,l=e[4],r=[];for(let t=0;t<l.length;t+=1)r[t]=G(S(e,l,t));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=s()},m(e,l){for(let t=0;t<r.length;t+=1)r[t].m(e,l);n(e,t,l)},p(e,s){if(635&s[0]){let n;for(l=e[4],n=0;n<l.length;n+=1){const c=S(e,l,n);r[n]?r[n].p(c,s):(r[n]=G(c),r[n].c(),r[n].m(t.parentNode,t))}for(;n<r.length;n+=1)r[n].d(1);r.length=l.length}},d(e){m(r,e),e&&u(t)}}}function I(e){let t,l=e[3],r=[];for(let t=0;t<l.length;t+=1)r[t]=T(P(e,l,t));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=s()},m(e,l){for(let t=0;t<r.length;t+=1)r[t].m(e,l);n(e,t,l)},p(e,s){if(619&s[0]){let n;for(l=e[3],n=0;n<l.length;n+=1){const c=P(e,l,n);r[n]?r[n].p(c,s):(r[n]=T(c),r[n].c(),r[n].m(t.parentNode,t))}for(;n<r.length;n+=1)r[n].d(1);r.length=l.length}},d(e){m(r,e),e&&u(t)}}}function E(e){let t,l,s,m,h,g,f,C,A,w=e[0]&&j(e);return{c(){t=r("td"),w&&w.c(),l=c(),a(t,"id",s=e[39].id),a(t,"tabindex",m=e[39].tabindex),a(t,"aria-label",h=e[39].arialabel),a(t,"data-grid","no"),a(t,"pevdata-id",g=e[39].pevdata),a(t,"class",f=`${e[0]&&0==e[1]?"":e[39].class} ${e[39].classDetails} ${e[0]&&0==e[1]?"icomoon-24px-correct"==e[39].spanclass?"gridCorrect":"":e[39].correctAnswerColor} gridColor pointer border-dark text-center`),i(t,"width",e[39].width),i(t,"height",e[39].height),i(t,"pointerEvents","pointerEvents")},m(s,r){n(s,t,r),w&&w.m(t,null),o(t,l),C||(A=[d(t,"click",e[6]),d(t,"keyup",e[9])],C=!0)},p(e,n){e[0]?w?w.p(e,n):(w=j(e),w.c(),w.m(t,l)):w&&(w.d(1),w=null),8&n[0]&&s!==(s=e[39].id)&&a(t,"id",s),8&n[0]&&m!==(m=e[39].tabindex)&&a(t,"tabindex",m),8&n[0]&&h!==(h=e[39].arialabel)&&a(t,"aria-label",h),8&n[0]&&g!==(g=e[39].pevdata)&&a(t,"pevdata-id",g),11&n[0]&&f!==(f=`${e[0]&&0==e[1]?"":e[39].class} ${e[39].classDetails} ${e[0]&&0==e[1]?"icomoon-24px-correct"==e[39].spanclass?"gridCorrect":"":e[39].correctAnswerColor} gridColor pointer border-dark text-center`)&&a(t,"class",f),8&n[0]&&i(t,"width",e[39].width),8&n[0]&&i(t,"height",e[39].height)},d(e){e&&u(t),w&&w.d(),C=!1,p(A)}}}function j(e){let t;function l(e,t){return 1==e[1]?L:R}let r=l(e),c=r(e);return{c(){c.c(),t=s()},m(e,l){c.m(e,l),n(e,t,l)},p(e,s){r===(r=l(e))&&c?c.p(e,s):(c.d(1),c=r(e),c&&(c.c(),c.m(t.parentNode,t)))},d(e){c.d(e),e&&u(t)}}}function R(e){let t,l,s,c;return{c(){t=r("span"),l=r("span"),a(l,"class",s=e[39].corrspanclass),a(l,"aria-label",c=e[39].spanarialabel),i(l,"color",e[39].corrspanstyle)},m(e,s){n(e,t,s),o(t,l)},p(e,t){8&t[0]&&s!==(s=e[39].corrspanclass)&&a(l,"class",s),8&t[0]&&c!==(c=e[39].spanarialabel)&&a(l,"aria-label",c),8&t[0]&&i(l,"color",e[39].corrspanstyle)},d(e){e&&u(t)}}}function L(e){let t,l,s,c,d;return{c(){t=r("span"),l=r("span"),a(l,"class",s=e[39].spanclass),a(l,"aria-label",c=e[39].spanarialabel),i(l,"color",e[39].spanstyle),a(t,"class",d=e[5].iconVisible),i(t,"display",e[39].spandisplay)},m(e,s){n(e,t,s),o(t,l)},p(e,n){8&n[0]&&s!==(s=e[39].spanclass)&&a(l,"class",s),8&n[0]&&c!==(c=e[39].spanarialabel)&&a(l,"aria-label",c),8&n[0]&&i(l,"color",e[39].spanstyle),32&n[0]&&d!==(d=e[5].iconVisible)&&a(t,"class",d),8&n[0]&&i(t,"display",e[39].spandisplay)},d(e){e&&u(t)}}}function T(e){let t,l=e[38]==e[39].rowno&&E(e);return{c(){l&&l.c(),t=s()},m(e,s){l&&l.m(e,s),n(e,t,s)},p(e,s){e[38]==e[39].rowno?l?l.p(e,s):(l=E(e),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},d(e){l&&l.d(e),e&&u(t)}}}function G(e){let t,l,s=e[3]&&e[3].length>0&&I(e);return{c(){t=r("tr"),s&&s.c(),l=c()},m(e,r){n(e,t,r),s&&s.m(t,null),o(t,l)},p(e,n){e[3]&&e[3].length>0?s?s.p(e,n):(s=I(e),s.c(),s.m(t,l)):s&&(s.d(1),s=null)},d(e){e&&u(t),s&&s.d()}}}function H(e){let t,l,s,d,p,m,x,v,k,y,P,S,I,E=_.you_were_req_to_select+"",j=e[5].correctCount+"",R=_.grid_mark_ans_correct+"";l=new $({props:{reviewMode:e[0],handleReviewClick:e[10]}}),l.$on("setReview",e[8]),l.$on("unsetReview",e[7]);let L=e[4]&&e[4].length>0&&V(e);return{c(){t=r("div"),h(l.$$.fragment),s=c(),d=r("table"),p=r("tbody"),L&&L.c(),m=c(),x=r("div"),v=g(E),k=c(),y=g(j),P=c(),S=g(R),a(d,"id","table"),a(d,"class","table-bordered shadingTable"),i(d,"pointer-events",e[0]?"none":""),a(x,"class","h mt-5 text-center"),a(x,"id","correctCountStatus"),i(x,"color",e[2]),a(t,"class","shadingPreview")},m(e,r){n(e,t,r),f(l,t,null),o(t,s),o(t,d),o(d,p),L&&L.m(p,null),o(t,m),o(t,x),o(x,v),o(x,k),o(x,y),o(x,P),o(x,S),I=!0},p(e,t){const s={};1&t[0]&&(s.reviewMode=e[0]),l.$set(s),e[4]&&e[4].length>0?L?L.p(e,t):(L=V(e),L.c(),L.m(p,null)):L&&(L.d(1),L=null),(!I||1&t[0])&&i(d,"pointer-events",e[0]?"none":""),(!I||32&t[0])&&j!==(j=e[5].correctCount+"")&&C(y,j),(!I||4&t[0])&&i(x,"color",e[2])},i(e){I||(A(l.$$.fragment,e),I=!0)},o(e){w(l.$$.fragment,e),I=!1},d(e){e&&u(t),b(l),L&&L.d()}}}function N(e,t,l){let s,n,r,c,o,a,i,d,{xml:u}=t,{uxml:p}=t,{isReview:m}=t,{showAns:h}=t,{editorState:g}=t,f="",C=[],A=!0,w="",b="",$=1,P={rowCount:1,colCount:4,gridWidth:80,gridHeight:80,correctAns:[],correctCount:"",userAns:[],shadedCell:[],cellLocked:!1,hiddenCell:[],smController:"h",itemLayout:[],iconVisible:"h",pointerEvents:"auto",checkLockCell:"",lockedCellValue:""};function S(e){!function(e){try{l(5,P.rowCount=e.smxml._rowCount,P),l(5,P.colCount=e.smxml._colCount,P),l(5,P.gridWidth=40*parseInt(e.smxml._cellWidth),P),l(5,P.gridHeight=40*parseInt(e.smxml._cellHeight),P),l(5,P.correctAns=e.smxml._correctAns.split(","),P),l(5,P.correctCount=e.smxml._correctCount,P),l(5,P.cellLocked=e.smxml._lockedCell,P),l(5,P.hiddenCell=e.smxml._hiddenCell,P),l(5,P.shadedCell=e.smxml._shadedCell,P),l(5,P.lockedCellValue=e.smxml._lockedCellValue,P),function(){let e=""!=P.shadedCell?"#p"+P.shadedCell.split(",").join(",#p"):"";k.selectAll(".shadingPreview .shadingTable td","removeClass",["gridSelected","lockedGrid"]),k.selectAll(".shadingPreview .shadingTable td").forEach((function(e){e.dataset.grid="no"})),""!=e&&(k.selectAll(e,"addClass","gridSelected"),k.selectAll(e).forEach((function(e){e.dataset.grid="selected"})));let t=null!=P.lockedCellValue&&""!=P.lockedCellValue?"#p"+P.lockedCellValue.split(",").join(",#p"):"";""!=t&&(k.selectAll(t,"addClass","lockedGrid"),k.selectAll(t).forEach((function(e){e.dataset.grid="selected"})))}(),p&&function(e){let t=v(e);if(l(5,P.userAns=t.smans._userAns.split(","),P),t.smans._userAns){let e="#p"+t.smans._userAns.split(",").join(",#p");k.selectAll(".shadingPreview .shadingTable td","removeClass","gridSelected"),k.selectAll(".shadingPreview .shadingTable td").forEach((function(e){e.dataset.grid="no"})),k.selectAll(e,"addClass","gridSelected"),k.selectAll(e).forEach((function(e){e.dataset.grid="selected"}))}}(p)}catch(e){console.warn({error:e.message,"function name":"parseXMLPreview","File name":"ShadingPreview.js"})}}(e=v(e))}function V(e){return 0!=P.correctAns?!!P.correctAns.includes(e):P.userAns.length==P.correctCount?(l(2,w="#136d13"),!0):(l(2,w="#c30f0f"),!1)}function I(e){let t;return 0!=P.correctAns&&(t=!(!P.correctAns.includes(e)||P.userAns.includes(e))),t}function E(e,t,l){let s="";return-1!=t.indexOf(e)&&(s+="lockedGrid "),-1!=l.indexOf(e)&&1==$&&(s+="gridSelected"),s}function j(e){let t=e.target.id;$--,k.select(".shadingPreview [id='"+t+"']").classList.contains("lockedGrid")||(k.select(".shadingPreview [id='"+t+"']").classList.contains("gridSelected")?(k.select(".shadingPreview [id='"+t+"']").setAttribute("data-grid","no"),k.selectAll(".shadingPreview [id='"+t+"']","removeClass","gridSelected")):(k.select(".shadingPreview [id='"+t+"']").setAttribute("data-grid","selected"),k.selectAll(".shadingPreview [id='"+t+"']","addClass","gridSelected")));let l=L();g||y({uXml:P.userxml,ans:l})}function R(e,t){l(5,P.iconVisible="showIcon"==t?"":"h",P),"cans"==e?l(16,C=P.correctAns):"yans"==e&&l(16,C=P.userAns)}function L(){const e=P.correctAns.length;let t=0,s=0,n="",r="";return l(5,P.userAns=[],P),k.selectAll(".shadingPreview .shadingTable .gridSelected").forEach((function(e){P.userAns.push(e.getAttribute("pevdata-id"))})),k.select("#special_module_user_xml").innerText="<smans userAns='"+P.userAns.join()+"'></smans>",l(5,P.userxml="<smans userAns='"+P.userAns.join()+"'></smans>",P),""!=P.correctAns&&(P.correctAns.map((function(e,l){P.userAns.map((function(l,s){e==l&&(t+=1)}))})),n=e==t&&t==P.userAns.length?_.correct:_.incorrect,"undefined"!=typeof calculatePoint&&calculatePoint(P.correctAns.length,t),r="Incorrect"!=n,g&&h(n)),""!=P.correctCount&&""==P.correctAns&&(P.userAns.length==P.correctCount?(b=_.correct,s=P.correctCount):b=_.incorrect,"undefined"!=typeof calculatePoint&&calculatePoint(P.correctCount,s),g&&h(b)),g||y({uXml:P.userxml,ans:r}),r}function T(){R("yans","hideIcon"),l(0,m=!1),""!=P.correctCount&&""==P.correctAns&&k.selectAll("#correctCountStatus","addClass","h")}function G(){R("yans","showIcon"),l(0,m=!0),L(),""!=P.correctCount&&""==P.correctAns&&k.selectAll("#correctCountStatus","removeClass","h")}return x((()=>{l(5,P.xml=u,P),l(5,P.correctAns=[],P),l(5,P.correctCount=[],P),l(5,P.shadedCell=[],P),p||l(5,P.userAns=[],P),S(u)})),e.$$set=e=>{"xml"in e&&l(11,u=e.xml),"uxml"in e&&l(12,p=e.uxml),"isReview"in e&&l(0,m=e.isReview),"showAns"in e&&l(13,h=e.showAns),"editorState"in e&&l(14,g=e.editorState)},e.$$.update=()=>{if(31557689&e.$$.dirty[0]){m?G():T(),u!=P.xml&&(l(5,P.xml=u,P),S(u)),l(4,d=[]),l(3,i=[]),l(23,o=null!=P.lockedCellValue&&""!=P.lockedCellValue?P.lockedCellValue.split(","):""),l(24,a=""!=P.shadedCell?P.shadedCell.split(","):"");for(let e=0;e<P.rowCount;e++){l(4,d=[...d,{id:"gridRow_"+e}]);for(let d=0;d<P.colCount;d++)l(21,r=e+"_"+d),""!=C?(l(22,c=C.indexOf(r)),l(15,f=-1!=c?"gridSelected":"")):l(15,f=""),l(3,i=[...i,{id:"p"+r,tabindex:"auto"==P.pointerEvents?"0":"",arialabel:"Grids row "+(e+1)+" and column "+(d+1)+" is selected",pevdata:r,class:f,width:parseInt(P.gridWidth)+"px",height:parseInt(P.gridHeight)+"px",classDetails:E(r,o,a),correctAnswerColor:(t=r,s=""==P.iconVisible&&P.userAns.includes(t)?V(t)?" gridCorrect":" gridIncorrect":"",n=""!=P.iconVisible||P.userAns.includes(t)?"":I(t)?" gridNotPerformed":"",s+=n,s),spanclass:V(r)?"icomoon-24px-correct":"icomoon-24px-close",spanarialabel:V(r)?I(r)?"marked as unattempted":"marked as correct":"marked as incorrect",spanstyle:P.userAns.includes(r)?V(r)?"#136d13":"#c30f0f":I(r)?"#222":"",spandisplay:""==P.iconVisible&&P.userAns.includes(r)||""==P.iconVisible&&!P.userAns.includes(r)&&I(r)?"block":"none",rowno:e,corrspanclass:V(r)?"icomoon-24px-correct":"",corrspanstyle:V(r)?"#136d13":""}])}}var t},[m,A,w,i,d,P,j,T,G,function(e){13==e.keyCode&&j(e)},function(e){"c"==e?l(1,A=!1):"u"==e&&l(1,A=!0)},u,p,h,g]}export default class extends e{constructor(e){super(),t(this,e,N,H,l,{xml:11,uxml:12,isReview:0,showAns:13,editorState:14},[-1,-1])}}
//# sourceMappingURL=ShadingPreview-8a4cb4ac.js.map
