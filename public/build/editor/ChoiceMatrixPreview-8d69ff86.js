import{S as e,i as t,s as a,F as l,e as c,j as n,q as s,h as r,u as i,f as o,W as d,g as m,x as u,o as h,D as g,b as f,l as p,c as b,m as x,t as y,a as v,d as A,E as w,a3 as k,p as _,X as E,A as C,w as F,V as N}from"./main-5a2bbeeb.js";import{I as S}from"./ItemHelper-8a464338.js";import{l as $}from"./parseCSV-675f32c5.js";const{document:B}=l;function R(e,t,a){const l=e.slice();return l[26]=t[a],l[28]=a,l}function D(e,t,a){const l=e.slice();return l[29]=t[a],l[31]=a,l}function j(e,t,a){const l=e.slice();return l[26]=t[a],l[28]=a,l}function J(e){let t,a=e[2].cdata.option,l=[];for(let t=0;t<a.length;t+=1)l[t]=M(j(e,a,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=s()},m(e,a){for(let t=0;t<l.length;t+=1)l[t].m(e,a);r(e,t,a)},p(e,c){if(20&c[0]){let n;for(a=e[2].cdata.option,n=0;n<a.length;n+=1){const s=j(e,a,n);l[n]?l[n].p(s,c):(l[n]=M(s),l[n].c(),l[n].m(t.parentNode,t))}for(;n<l.length;n+=1)l[n].d(1);l.length=a.length}},d(e){g(l,e),e&&h(t)}}}function M(e){let t,a,l,s,g,f=e[26].text.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"";return{c(){t=c("th"),a=i(f),o(t,"key",l=e[28]),o(t,"class",s=d("preview_header adjust_width "+("theme3"!==e[2].theme?e[26].id+"text-center text-white":e[26].id+"text-center"))+" svelte-ugc9ab"),o(t,"tabindex",g=0),m(t,"background-color",e[4][e[2].theme],1)},m(e,l){r(e,t,l),n(t,a)},p(e,l){4&l[0]&&f!==(f=e[26].text.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"")&&u(a,f),4&l[0]&&s!==(s=d("preview_header adjust_width "+("theme3"!==e[2].theme?e[26].id+"text-center text-white":e[26].id+"text-center"))+" svelte-ugc9ab")&&o(t,"class",s),4&l[0]&&m(t,"background-color",e[4][e[2].theme],1)},d(e){e&&h(t)}}}function O(e){let t,a=e[1].cdata.term,l=[];for(let t=0;t<a.length;t+=1)l[t]=W(R(e,a,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=s()},m(e,a){for(let t=0;t<l.length;t+=1)l[t].m(e,a);r(e,t,a)},p(e,c){if(302&c[0]){let n;for(a=e[1].cdata.term,n=0;n<a.length;n+=1){const s=R(e,a,n);l[n]?l[n].p(s,c):(l[n]=W(s),l[n].c(),l[n].m(t.parentNode,t))}for(;n<l.length;n+=1)l[n].d(1);l.length=a.length}},d(e){g(l,e),e&&h(t)}}}function I(e){let t,a,l,s,i,u,g,b,x,y,v,A,w,k,_,E,C,F,N,S,$,B,R,D,j;return{c(){t=c("td"),a=c("i"),s=f(),i=c("i"),g=f(),b=c("input"),E=f(),C=c("label"),o(a,"class","fa fa-check svelte-ugc9ab"),o(a,"aria-hidden","true"),o(a,"style",l=L(e[3])),o(i,"class","fa fa-close"),o(i,"aria-hidden","true"),o(i,"style",u=L(e[3])),o(b,"type","radio"),o(b,"class","test_radio CMRad"),o(b,"style",x="vertical-align:middle;"),b.value=y=e[29].id,o(b,"name",v="tm"+(e[28]+1)),o(b,"id",A="t"+e[28]+e[31]),o(b,"data-termid",w=e[26].id),o(b,"data-correct",k=e[26].correct),o(b,"data-userans",""),o(b,"data-role","none"),o(b,"tabindex",_=-1),o(C,"tabindex",F=0),o(C,"class",N="label_choice customRadCM "+(e[31]%2==0?"tureitemColorCM":"falseitemColorCM")),o(C,"for",S="t"+e[28]+e[31]),o(t,"key",$=e[31]),o(t,"id",B="tb"+e[28]+e[31]),o(t,"class",R=d("text-center test_area "+(e[29].id==e[26].correct?"dbg-success":"dbg-danger"))+" svelte-ugc9ab"),m(t,"background-color",e[28]%2==0?e[5][e[2].theme]:"#FFF")},m(l,c){r(l,t,c),n(t,a),n(t,s),n(t,i),n(t,g),n(t,b),n(t,E),n(t,C),D||(j=p(b,"click",e[8]),D=!0)},p(e,a){2&a[0]&&y!==(y=e[29].id)&&(b.value=y),2&a[0]&&w!==(w=e[26].id)&&o(b,"data-termid",w),2&a[0]&&k!==(k=e[26].correct)&&o(b,"data-correct",k),2&a[0]&&R!==(R=d("text-center test_area "+(e[29].id==e[26].correct?"dbg-success":"dbg-danger"))+" svelte-ugc9ab")&&o(t,"class",R),4&a[0]&&m(t,"background-color",e[28]%2==0?e[5][e[2].theme]:"#FFF")},d(e){e&&h(t),D=!1,j()}}}function W(e){let t,a,l,s,p,b,x,y,v=e[26].text.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"",A=e[1].cdata.option,w=[];for(let t=0;t<A.length;t+=1)w[t]=I(D(e,A,t));return{c(){t=c("tr"),a=c("td"),l=i(v),b=f();for(let e=0;e<w.length;e+=1)w[e].c();x=f(),o(a,"class",s=d(e[26].id)+" svelte-ugc9ab"),o(a,"tabindex",p=0),m(a,"background-color",e[28]%2==0?e[5][e[2].theme]:"#FFF",1),m(a,"font-size","14pt"),m(a,"vertical-align","middle"),m(a,"font-family",e[2].font),o(t,"key",y=e[28])},m(e,c){r(e,t,c),n(t,a),n(a,l),n(t,b);for(let e=0;e<w.length;e+=1)w[e].m(t,null);n(t,x)},p(e,c){if(2&c[0]&&v!==(v=e[26].text.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"")&&u(l,v),2&c[0]&&s!==(s=d(e[26].id)+" svelte-ugc9ab")&&o(a,"class",s),4&c[0]&&m(a,"background-color",e[28]%2==0?e[5][e[2].theme]:"#FFF",1),4&c[0]&&m(a,"font-family",e[2].font),302&c[0]){let a;for(A=e[1].cdata.option,a=0;a<A.length;a+=1){const l=D(e,A,a);w[a]?w[a].p(l,c):(w[a]=I(l),w[a].c(),w[a].m(t,x))}for(;a<w.length;a+=1)w[a].d(1);w.length=A.length}},d(e){e&&h(t),g(w,e)}}}function z(e){let t,a,l,s,g,p,w,k,_,E,C,F,N,$,B,R,D,j,M,I=e[2].stem.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"";l=new S({props:{handleReviewClick:e[9],reviewMode:e[0]}}),l.$on("setReview",e[6]),l.$on("unsetReview",e[7]);let W=e[2].cdata&&J(e),z=e[1].cdata&&O(e);return{c(){t=c("main"),a=c("div"),b(l.$$.fragment),s=f(),g=c("center"),p=c("table"),w=c("thead"),k=c("tr"),_=c("th"),E=i(I),N=f(),W&&W.c(),$=f(),B=c("tbody"),z&&z.c(),o(_,"class",C=d("preview_header "+("theme3"!==e[2].theme?"text-center text-white":"text-center"))+" svelte-ugc9ab"),o(_,"tabindex",F=0),m(_,"background-color",e[4][e[2].theme],1),o(k,"class","table-head"),o(p,"class",R="table testmode_table "),o(p,"id","test_table"),o(p,"style",D="position:relative; margin-top:20px;width:"+e[2].maxWidth+"px;font-family: Georgia;"),o(a,"id","choicemain"),o(a,"style",j="margin-bottom:20px")},m(e,c){r(e,t,c),n(t,a),x(l,a,null),n(a,s),n(a,g),n(g,p),n(p,w),n(w,k),n(k,_),n(_,E),n(k,N),W&&W.m(k,null),n(p,$),n(p,B),z&&z.m(B,null),M=!0},p(e,t){const a={};1&t[0]&&(a.reviewMode=e[0]),l.$set(a),(!M||4&t[0])&&I!==(I=e[2].stem.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"")&&u(E,I),(!M||4&t[0]&&C!==(C=d("preview_header "+("theme3"!==e[2].theme?"text-center text-white":"text-center"))+" svelte-ugc9ab"))&&o(_,"class",C),(!M||4&t[0])&&m(_,"background-color",e[4][e[2].theme],1),e[2].cdata?W?W.p(e,t):(W=J(e),W.c(),W.m(k,null)):W&&(W.d(1),W=null),e[1].cdata?z?z.p(e,t):(z=O(e),z.c(),z.m(B,null)):z&&(z.d(1),z=null),(!M||4&t[0]&&D!==(D="position:relative; margin-top:20px;width:"+e[2].maxWidth+"px;font-family: Georgia;"))&&o(p,"style",D)},i(e){M||(y(l.$$.fragment,e),M=!0)},o(e){v(l.$$.fragment,e),M=!1},d(e){e&&h(t),A(l),W&&W.d(),z&&z.d()}}}function q(){let e=document.getElementsByClassName("test_radio");for(let t=0;t<e.length;t++)e[t].getAttribute("id")==e[t].getAttribute("data-userans")?e[t].checked=!0:e[t].checked=!1}function V(){!function(){let e=document.querySelectorAll(" .test_radio");for(let t=0;t<e.length;t++)e[t].getAttribute("value")==e[t].getAttribute("data-correct")?e[t].checked=!0:e[t].checked=!1}(),G()}function G(){let e=document.getElementsByClassName("fa-check"),t=document.getElementsByClassName("fa-close");for(let a=0;a<e.length;a++)e[a].style.display="none",t[a].style.display="none"}function L(e){return 1==e?{paddingLeft:"14px",display:"inline-flex",position:"absolute"}:{paddingLeft:"15px",display:"none",position:"absolute"}}function P(e,t,a){let l,{showAns:c}=t,{editorState:n}=t,{xml:s}=t,{uxml:r}=t,{isReview:i}=t,o={cdata:""},d={},m=0;F({cdata:"",stem:"",xml:"",theme:"",font:"",maxWidth:"",totalcorrectans:""}).subscribe((e=>{a(2,d=e)}));function u(){let e=function(){let e=0,t=0,a=document.getElementsByClassName("test_radio");for(let t=0;t<a.length;t++)if(a[t].getAttribute("value")==a[t].getAttribute("data-correct")){if(1!=a[t].checked)return e=0,a[t].setAttribute("as",0),!1;a[t].setAttribute("as",1),e=1}for(let e=0;e<a.length;e++)a[e].getAttribute("value")==a[e].getAttribute("data-correct")&&1==a[e].checked&&t++,"undefined"!=typeof calculatePoint&&calculatePoint(d.totalcorrectans,t);return e}();e=1==e,r?C.select("#answer").checked=e:n&&c(e?"Correct":"Incorrect"),N({uXml:l,ans:e})}function h(){q(),C.select(".dbg-success input","checked").forEach((e=>{C.siblings(e,".fa-check").forEach((e=>{e.style.display="inline-flex"}))})),C.select(".dbg-danger input","checked").forEach((e=>{C.siblings(e,".fa-close").forEach((e=>{e.style.display="inline-flex"}))})),C.selectAll(".dbg-success input, .dbg-danger input","removeAttr","as"),C.select(".dbg-success input","checked").forEach((e=>{e.setAttribute("as",1)})),C.select(".dbg-success input","checked").forEach((e=>{e.setAttribute("as",0)})),C.select(".dbg-success input","checked").forEach((e=>{C.siblings(e,".label_choice").forEach((e=>{e.setAttribute("title","is marked as correct")}))})),C.select(".dbg-danger input","checked").forEach((e=>{C.siblings(e,".label_choice").forEach((e=>{e.setAttribute("title","is marked as incorrect")}))}))}function g(){a(0,i=!0);let e=C.selectAll(" .test_radio");for(let t=0;t<e.length;t++)e[t].disabled=!0;h()}function f(){a(0,i=!1);let e=document.getElementsByClassName("test_radio");for(let t=0;t<e.length;t++)e[t].disabled=!1;G()}return w((()=>{var e;s!=d.xml&&(a(2,d.xml=s,d),e=r,function(e,t){a(2,d.theme=e.smxml._theme,d),a(2,d.font=e.smxml._font,d),a(2,d.maxWidth=e.smxml._maxwidth?e.smxml._maxwidth:800,d);let l=$.parseCSVFormat(e.smxml.__cdata),c=[];c=JSON.parse(JSON.stringify(l)),a(2,d.cdata=c,d),a(2,d.stem=c.stem,d),a(1,o.cdata=c,o);let n=o.cdata.term.length;if(a(2,d.totalcorrectans=n,d),f(),t)try{t=JSON.parse(t);let e=[];e=JSON.parse(JSON.stringify(t)),setTimeout((function(){e.ans.map((function(e,t){C.selectAll(".test_area #"+e.userAns,"attr",{"data-userans":e.userAns})})),q()}),100)}catch(e){}else{let e=document.getElementsByClassName("test_radio");for(let t=0;t<e.length;t++)e[t].checked=!1,e[t].setAttribute("data-userans","")}}(E(s),e))})),k((()=>{i||G()})),_((()=>{AI.listen("body","keydown",".label_choice",(function(e,t){13===t.which&&e.click()}))})),e.$$set=e=>{"showAns"in e&&a(10,c=e.showAns),"editorState"in e&&a(11,n=e.editorState),"xml"in e&&a(12,s=e.xml),"uxml"in e&&a(13,r=e.uxml),"isReview"in e&&a(0,i=e.isReview)},e.$$.update=()=>{18433&e.$$.dirty[0]&&(i?(g(),n&&0==m&&(a(14,m=1),u())):(a(14,m=0),q(),f()))},[i,o,d,undefined,{theme1:"#5B9BD5",theme2:"#3B67BC",theme3:"#F6C3A2",theme4:"#70AD47",theme5:"#745998"},{theme1:"#DEEAF6",theme2:"#D4DEF1",theme3:"#FAE0CF",theme4:"#E2EFD9",theme5:"#E1DAE9"},function(){g()},function(){q(),f()},function(e){let t=e.target.id,a=e.target.name,c=document.querySelectorAll(" .test_area input[name="+a+"]");for(let e=0;e<c.length;e++)c[e].setAttribute("data-userans","");C.selectAll(" .test_area #"+t,"attr",{"data-userans":t});let n={type:"34",ans:[]},s=document.getElementsByClassName("test_radio");for(let e=0;e<s.length;e++)1==s[e].checked&&n.ans.push({id:s[e].getAttribute("data-termid"),userAns:s[e].getAttribute("id")});l=JSON.stringify(n),u()},function(e,t){"c"==e?V():h()},c,n,s,r,m]}export default class extends e{constructor(e){var l;super(),B.getElementById("svelte-ugc9ab-style")||((l=c("style")).id="svelte-ugc9ab-style",l.textContent=".fa-check{color:#46A546;position:relative;left:50px}.fa-close{color:#A80000;left:50px}.fa-close{margin-left:-26px;font-size:18px;position:relative;bottom:10px}.fa-check{margin-left:-26px;font-size:18px;position:relative;bottom:10px}.fa-close,.fa-check.svelte-ugc9ab,.middle_align.svelte-ugc9ab{vertical-align:middle!important}.middle_align{width:164px;min-width:164px}.topic_input{min-width:257px}.preview_header{font-size:16pt;font-weight:bold;vertical-align:middle}.adjust_width{width:10%;text-align:center}",n(B.head,l)),t(this,e,P,z,a,{showAns:10,editorState:11,xml:12,uxml:13,isReview:0},[-1,-1])}}
//# sourceMappingURL=ChoiceMatrixPreview-8d69ff86.js.map
