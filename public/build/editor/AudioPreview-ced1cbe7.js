import{S as e,i as t,s as a,e as i,b as o,c as s,C as n,u as r,f as l,h as c,j as d,m as u,l as p,t as m,a as g,o as w,d as b,y as v,p as f,A as h,X as _}from"./main-ac89e9fe.js";import{I as x}from"./ItemHelper-6d042fa0.js";function A(e){let t,a,s,u,m,g,b,f,h,_,x,A,C,R,S,k,T,B,E,I,O,$,L,P,D,G,M,j,N,U,H,X,Y,z,F,J,K=n.recording_warning+"",V=1==e[4].showTranscript&&y(e);return{c(){t=i("div"),a=i("div"),s=i("b"),s.textContent=""+n.note_label,u=o(),m=r(K),g=o(),V&&V.c(),b=o(),f=i("div"),h=i("div"),_=i("div"),x=i("b"),x.textContent=""+n.audio_recorder,A=o(),C=i("div"),R=i("span"),R.textContent=""+n.starting_message,S=o(),k=i("div"),k.innerHTML='<img src="//s3.amazonaws.com/jigyaasa_content_static/6ba174bf48e9b6dc8d8bd19d13c9caa9_000Awg.gif" alt="recording is on" class="w-100 h-100 img_fit"/>',T=o(),B=i("div"),B.innerHTML='<img src="//s3.amazonaws.com/jigyaasa_content_static/giphy_000AYi.gif" alt="audio is playing" class="w-100 h-100 img_fit"/>',E=o(),I=i("div"),O=i("button"),$=i("span"),D=o(),G=i("button"),M=i("span"),U=o(),H=i("button"),X=i("span"),l(s,"class","noteColor bolder"),l(a,"class",""),l(a,"tabindex","0"),l(a,"aria-label","Recording will end after 15 sec"),l(t,"class","col-12 pb-3"),l(_,"class","p-2 tokenfield bg-light mb-3"),l(_,"aria-label","Audio Recorder"),l(_,"tabindex","0"),l(R,"class","align-self-center mx-auto previewInitialState tokenfield"),l(R,"aria-label","Click on record to start recording"),l(R,"tabindex","0"),l(k,"class","h previewRecordingOn tokenfield"),l(k,"aria-label","recording is on"),l(k,"tabindex","0"),l(B,"class","h previewAudioPlaying tokenfield"),l(B,"aria-label","Audio is playing"),l(B,"tabindex","0"),l(C,"class","mx-auto text-danger recording_status initialState mb-3 d-flex mx-auto"),l($,"class","icomoon-circle-2 s2 text-danger position-relative top1"),l($,"data-bs-toggle","tooltip"),l($,"data-placement","top"),l($,"data-original-title",L="recording"==e[4].status?"Stop Recording":"Start Recording"),l($,"id","recordButtonTooltip"),l($,"name","recordButtonTooltip"),l(O,"type","button"),l(O,"name","preview_recordButton"),l(O,"id","preview_recordButton"),l(O,"class","btn btn-light py-0"),l(O,"aria-label",P="Click for "+e[3]),l(M,"class","icomoon-24px-autoplay-4 position-relative top1"),l(M,"data-bs-toggle","tooltip"),l(M,"data-placement","top"),l(M,"data-original-title","Play Audio"),l(M,"id","stopButtonTooltip"),l(M,"name","stopButtonTooltip"),l(G,"type","button"),l(G,"name","preview_stopButton"),l(G,"id","preview_stopButton"),G.disabled=j=e[4].disabled,l(G,"class","btn btn-light py-0"),l(G,"aria-label",N="Click for "+e[1]),l(X,"class","icomoon-new-24px-reset-1 position-relative top1"),l(X,"data-bs-toggle","tooltip"),l(X,"data-placement","top"),l(X,"title","Reset Data"),l(H,"type","button"),l(H,"name","resetButton"),l(H,"id","resetButton"),l(H,"class","btn btn-light py-0"),H.disabled=Y=e[4].isReset,l(H,"data-bs-toggle","modal"),l(H,"data-bs-target","#preview_confirm_modal"),l(H,"aria-label","Click on this button for override the previous recording"),l(I,"id","controls_container"),l(I,"class",z="bg-light text-center w-100 p-2 "+("none"==e[4].pointerEvents?"pointerEventOff":"pointerEventOn")),l(h,"class","border rounded shadow-sm"),l(f,"class","col-12 col-md-8 offset-md-2")},m(i,o){c(i,t,o),d(t,a),d(a,s),d(a,u),d(a,m),c(i,g,o),V&&V.m(i,o),c(i,b,o),c(i,f,o),d(f,h),d(h,_),d(_,x),d(h,A),d(h,C),d(C,R),d(C,S),d(C,k),d(C,T),d(C,B),d(h,E),d(h,I),d(I,O),d(O,$),d(I,D),d(I,G),d(G,M),d(I,U),d(I,H),d(H,X),F||(J=[p(O,"click",e[7]),p(G,"click",e[10]),p(H,"click",e[8])],F=!0)},p(e,t){1==e[4].showTranscript?V?V.p(e,t):(V=y(e),V.c(),V.m(b.parentNode,b)):V&&(V.d(1),V=null),16&t[0]&&L!==(L="recording"==e[4].status?"Stop Recording":"Start Recording")&&l($,"data-original-title",L),8&t[0]&&P!==(P="Click for "+e[3])&&l(O,"aria-label",P),16&t[0]&&j!==(j=e[4].disabled)&&(G.disabled=j),2&t[0]&&N!==(N="Click for "+e[1])&&l(G,"aria-label",N),16&t[0]&&Y!==(Y=e[4].isReset)&&(H.disabled=Y),16&t[0]&&z!==(z="bg-light text-center w-100 p-2 "+("none"==e[4].pointerEvents?"pointerEventOff":"pointerEventOn"))&&l(I,"class",z)},d(e){e&&w(t),e&&w(g),V&&V.d(e),e&&w(b),e&&w(f),F=!1,v(J)}}}function C(e){let t,a,s,u,p,m=n.insensitive_message+"";function g(e,t){return 1!=e[5]?S:R}let b=g(e),v=b(e);return{c(){v.c(),t=o(),a=i("div"),s=i("b"),s.textContent=""+n.note_label,u=o(),p=r(m),l(s,"class","noteColor bolder"),l(a,"class","col-12 pb-3"),l(a,"tabindex","0"),l(a,"aria-label","matching is case insensitive")},m(e,i){v.m(e,i),c(e,t,i),c(e,a,i),d(a,s),d(a,u),d(a,p)},p(e,a){b===(b=g(e))&&v?v.p(e,a):(v.d(1),v=b(e),v&&(v.c(),v.m(t.parentNode,t)))},d(e){v.d(e),e&&w(t),e&&w(a)}}}function y(e){let t,a,s,r,u,p,m,g;return{c(){t=i("div"),a=i("div"),s=i("label"),r=i("b"),r.textContent=""+n.spoken_label,u=o(),p=i("textarea"),l(s,"for","preview_show_transcript"),l(p,"id","preview_show_transcript"),l(p,"name","preview_show_transcript"),l(p,"class","w-100 form-control"),l(p,"rows","2"),p.value=m=e[4].cdata,p.readOnly="readonly",l(p,"tabindex","0"),l(p,"aria-label",g=n.spoken_label+" "+(""!=e[4].cdata.trim()?e[4].cdata.trim():"Nothing")),l(t,"class","col-12 pb-3")},m(e,i){c(e,t,i),d(t,a),d(a,s),d(s,r),d(t,u),d(t,p)},p(e,t){16&t[0]&&m!==(m=e[4].cdata)&&(p.value=m),16&t[0]&&g!==(g=n.spoken_label+" "+(""!=e[4].cdata.trim()?e[4].cdata.trim():"Nothing"))&&l(p,"aria-label",g)},d(e){e&&w(t)}}}function R(e){let t,a,o,s,n;return{c(){t=i("div"),a=i("textarea"),l(a,"id","preview_data_container"),l(a,"name","cdata"),l(a,"class",o="w-100 form-control "+(1==e[4].useransstatus?"border-success typeCorrect":"border-danger typeIncorrect")),l(a,"rows","2"),a.value=s=e[4].cdata,a.readOnly="readonly",l(a,"tabindex","0"),l(a,"aria-label",n="Your answer is "+e[4].cdata+" which is "+(e[4].cdata.toLowerCase().trim()==e[4].correctAns.toLowerCase().trim()?"Correct":"Incorrect")),l(t,"class","col-12 py-3")},m(e,i){c(e,t,i),d(t,a)},p(e,t){16&t[0]&&o!==(o="w-100 form-control "+(1==e[4].useransstatus?"border-success typeCorrect":"border-danger typeIncorrect"))&&l(a,"class",o),16&t[0]&&s!==(s=e[4].cdata)&&(a.value=s),16&t[0]&&n!==(n="Your answer is "+e[4].cdata+" which is "+(e[4].cdata.toLowerCase().trim()==e[4].correctAns.toLowerCase().trim()?"Correct":"Incorrect"))&&l(a,"aria-label",n)},d(e){e&&w(t)}}}function S(e){let t,a,o,s;return{c(){t=i("div"),a=i("textarea"),l(a,"id","preanswer_data_container"),l(a,"name","cdata"),l(a,"class","w-100 form-control border-success typeCorrect"),l(a,"rows","2"),a.value=o=e[4].correctAns,a.readOnly="readonly",l(a,"tabindex","0"),l(a,"aria-label",s="correct Answer is "+e[4].correctAns),l(t,"class","col-12 py-3")},m(e,i){c(e,t,i),d(t,a)},p(e,t){16&t[0]&&o!==(o=e[4].correctAns)&&(a.value=o),16&t[0]&&s!==(s="correct Answer is "+e[4].correctAns)&&l(a,"aria-label",s)},d(e){e&&w(t)}}}function k(e){let t,a,f,h,_,y,R,S,k,T,B,E,I,O,$,L,P,D,G,M,j,N,U,H,X,Y,z,F=n.modal_data+"";function J(e,t){return e[0]?C:A}y=new x({props:{reviewMode:e[0],handleReviewClick:e[13]}}),y.$on("setReview",e[11]),y.$on("unsetReview",e[12]);let K=J(e),V=K(e);return{c(){t=i("link"),f=o(),h=i("div"),_=i("div"),s(y.$$.fragment),R=o(),V.c(),S=o(),k=i("div"),T=i("div"),B=i("div"),E=i("div"),I=i("div"),O=i("h4"),O.textContent=""+n.confirm_label,$=o(),L=i("button"),L.textContent="×",P=o(),D=i("div"),G=r(F),M=o(),j=i("div"),N=i("button"),N.textContent=""+n.no_label,U=o(),H=i("button"),H.textContent=""+n.yes_label,l(t,"onload","this.rel='stylesheet'"),l(t,"rel","preload"),l(t,"as","style"),l(t,"href",a=editor.baseUrlTheme+"clsSMAudioRecorder/css/AudioStyle.min.css"),l(_,"class","row"),l(h,"id","preview_container"),l(h,"class","container"),l(O,"class","modal-title tokenfield"),l(O,"aria-label","Confirmation Dialog box"),l(O,"tabindex","0"),l(L,"type","button"),l(L,"class","close"),l(L,"data-bs-dismiss","modal"),l(L,"tabindex","0"),l(L,"aria-label","Click on this button for close the confirmation dialog box"),l(I,"class","modal-header"),l(D,"class","modal-body tokenfield"),l(D,"tabindex","0"),l(D,"aria-label",e[2]),l(D,"id","previewDialogBody"),l(D,"name","previewDialogBody"),l(N,"type","button"),l(N,"class","preview_dismiss_modal btn btn-light pr-2"),l(N,"data-bs-dismiss","modal"),l(N,"tabindex","0"),l(N,"aria-label","Click on this button for neglecte to override previous recording"),l(H,"type","button"),l(H,"class","preview_dismiss_done btn btn-primary"),l(H,"data-bs-dismiss","modal"),l(H,"tabindex","0"),l(H,"aria-label","Click on this button for override the previous recording"),l(j,"class","modal-footer"),l(E,"class","modal-content"),l(B,"class","modal-dialog modal-md modal-dialog-centered"),l(T,"class","modal fade"),l(T,"id","preview_confirm_modal"),l(k,"class","preview_modal_container container")},m(a,i){c(a,t,i),c(a,f,i),c(a,h,i),d(h,_),u(y,_,null),d(_,R),V.m(_,null),c(a,S,i),c(a,k,i),d(k,T),d(T,B),d(B,E),d(E,I),d(I,O),d(I,$),d(I,L),d(E,P),d(E,D),d(D,G),d(E,M),d(E,j),d(j,N),d(j,U),d(j,H),X=!0,Y||(z=[p(N,"click",e[9]),p(H,"click",e[6])],Y=!0)},p(e,t){const a={};1&t[0]&&(a.reviewMode=e[0]),y.$set(a),K===(K=J(e))&&V?V.p(e,t):(V.d(1),V=K(e),V&&(V.c(),V.m(_,null))),(!X||4&t[0])&&l(D,"aria-label",e[2])},i(e){X||(m(y.$$.fragment,e),X=!0)},o(e){g(y.$$.fragment,e),X=!1},d(e){e&&w(t),e&&w(f),e&&w(h),b(y),V.d(),e&&w(S),e&&w(k),Y=!1,v(z)}}}function T(e,t,a){let i,o,s,r,l,{xml:c}=t,{uxml:d}=t,{showAns:u}=t,{isReview:p}=t,{editorState:m}=t,g="no",w="Play Audio",b="Start Recording",v=15,x={disabled:!0,cdata:"",language:"",correctAns:"",xml:"",status:"",pointerEvents:"auto",isReset:!0,showTranscript:!1,counter:0};function A(e){!function(e){try{if(a(4,x.language=e.smxml._language,x),a(4,x.correctAns=e.smxml.__cdata,x),a(4,x.showTranscript="true"==e.smxml._showTranscript,x),d){let e=setTimeout((function(){!function(e){let t=_(e);a(4,x.language=t.smans._language,x),a(4,x.cdata=t.smans.__cdata,x),a(4,x.status=t.smans._status,x),a(4,x.disabled="recordingStopped"!=t.smans._status,x),a(4,x.isReset="true"==t.smans._isReset,x),a(4,x.showTranscript="true"==t.smans._showTranscript,x)}(d),clearTimeout(e)}),100)}}catch(e){console.warn({error:e.message,"function name":"parseXMLPreview","File name":"AudioPreview.svelte"})}}(_(e))}function C(){setTimeout((function(){let e='<smans type="43" name="AudioRecorder" disabled="'+x.disabled+'" status="'+x.status+'" language="'+x.language+'" isReset="'+x.isReset+'" showTranscript="'+x.showTranscript+'"><![CDATA['+x.cdata+"]]></smans>";h.select("#special_module_user_xml").value=e,ISSPECIALMODULEUSERXMLCHANGE=1,a(14,d=h.select("#special_module_user_xml").value),a(1,w=h.select("#stopButtonTooltip").getAttribute("data-original-title")),a(3,b=h.select("#recordButtonTooltip").getAttribute("data-original-title")),a(2,s=h.select("#previewDialogBody").innerText),""!=x.correctAns.trim()&&B()}),100)}function y(){k(),clearTimeout(r),a(4,x.status="recordingStopped",x),a(4,x.disabled=!1,x),C(),h.selectAll(".previewRecordingOn","addClass","h"),h.selectAll(".previewInitialState","removeClass","h"),i.stop()}function R(){v-=1,a(4,x.counter=x.counter+1,x),r=setTimeout((function(){v>0?R():y()}),1e3)}function S(){!function(){if(!window.webkitSpeechRecognition&&!window.SpeechRecognition)return void h.alert(n.browser_support_msg);window.SpeechRecognition=window.webkitSpeechRecognition||window.SpeechRecognition,i=new SpeechRecognition,i.continuous=!0,i.interimResults=!0,i.lang=x.language,window.recognitionData=i,i.addEventListener("end",(function(){x.isReset||(clearTimeout(r),h.alert(n.recording_ended),k(),h.selectAll(".previewInitialState","removeClass","h"),a(4,x.status="recordingStopped",x),a(4,x.disabled=!1,x),C())}))}(),i.start(),h.select("#preview_container #resetButton").disabled=!1,h.selectAll(".previewAudioPlaying, .previewInitialState","addClass","h"),h.selectAll(".previewRecordingOn","removeClass","h"),i.onresult=e=>{let t="";for(let a=0;a<e.results.length;a+=1)t+=e.results[a][0].transcript;a(4,x.cdata=t.trim(),x),C()}}function k(){h.selectAll(".previewAudioPlaying, .previewRecordingOn","addClass","h"),h.selectAll(".previewInitialState","removeClass","h"),h.selectAll("#preview_recordButton span","removeClass","icomoon-24px-stop"),h.selectAll("#preview_recordButton span","addClass",["icomoon-circle-2","text-danger"])}function T(){switch(x.status){case"recording":y();break;case"recordingStopped":h.getBS("#preview_confirm_modal","Modal").show(),h.select(".modal-body").focus();break;default:S(),a(4,x.status="recording",x),a(4,x.isReset=!1,x),a(4,x.counter=0,x),v=15,R(),C(),h.selectAll("#preview_recordButton span","removeClass",["icomoon-circle-2","text-danger"]),h.selectAll("#preview_recordButton span","addClass","icomoon-24px-stop")}}function B(){let e="";""!=x.correctAns.trim()?(x.correctAns.toLowerCase()==x.cdata.toLowerCase()?(e=n.correct,h.select("#answer").checked=!0,a(4,x.useransstatus=!0,x)):(e=n.incorrect,h.select("#answer").checked=!1,a(4,x.useransstatus=!1,x)),m&&u(e)):h.alert(n.matching_msg)}function E(){a(0,p=!0),a(4,x.pointerEvents="none",x),a(5,l=!0),B(),1==x.useransstatus?h.setCss("#preview_data_container",{color:"#50af50"}):h.setCss("#preview_data_container",{color:"#c30f0f"}),h.selectAll(h.parent(h.selectAll("#preanswer_data_container")),"addClass","h"),h.selectAll(h.parent(h.selectAll("#preview_data_container")),"removeClass","h")}function I(){a(0,p=!1),a(4,x.pointerEvents="auto",x),a(5,l=!1),h.selectAll(h.parent(h.selectAll("#preview_data_container")),"addClass","h")}return f((()=>{window.webkitSpeechRecognition||window.SpeechRecognition||h.alert(n.browser_support_msg),c!=x.xml&&(a(4,x.xml=c,x),a(4,x.disabled=!0,x),a(4,x.cdata="",x),a(4,x.xml="",x),a(4,x.status="",x),a(4,x.isReset=!0,x),A(c))})),e.$$set=e=>{"xml"in e&&a(15,c=e.xml),"uxml"in e&&a(14,d=e.uxml),"showAns"in e&&a(16,u=e.showAns),"isReview"in e&&a(0,p=e.isReview),"editorState"in e&&a(17,m=e.editorState)},e.$$.update=()=>{32769&e.$$.dirty[0]&&(p?E():I(),A(c))},[p,w,s,b,x,l,function(){if("yes"==g)!function(){k(),"recording"==x.status&&i.stop();a(4,x.cdata="",x),a(4,x.disabled=!0,x),a(4,x.xml="",x),a(4,x.status="",x),a(4,x.isReset=!0,x),clearTimeout(r),C()}(),g="no";else{a(4,x.cdata="",x),a(4,x.disabled=!0,x),a(4,x.status="",x),a(4,x.pauseRecording="",x),C();let e=setTimeout((function(){T(),clearTimeout(e)}),120)}},T,function(){g="yes"},function(){g="no"},function(){window.speechSynthesis?(o=window.speechSynthesis,""!=x.cdata?(h.selectAll(".previewRecordingOn, .previewInitialState","addClass","h"),h.selectAll(".previewAudioPlaying","removeClass","h"),a(4,x.disabled=!0,x),C(),function(){let e=new SpeechSynthesisUtterance(x.cdata),t=o.getVoices(),i="de-DE"==x.language?"Google Deutsch":"fr-FR"==x.language?"Google français":"es-ES"==x.language?"Google español":"hi-IN"==x.language?"Google हिन्दी":"ja-JP"==x.language?"Google 日本語":"ko-KR"==x.language?"Google 한국의":"it-IT"==x.language?"Google italiano":"Google US English";e.addEventListener("end",(function(){h.selectAll(".previewAudioPlaying, .previewRecordingOn","addClass","h"),h.selectAll(".previewInitialState","removeClass","h"),a(4,x.disabled=!1,x),C(),o.cancel()}));for(let a=0;a<t.length;a+=1)if(t[a].name==i){e.voice=t[a],e.pitch=1,e.rate=1,e.lang=x.language,o.speak(e);break}}()):(h.selectAll(".previewRecordingOn, .previewAudioPlaying","addClass","h"),h.selectAll(".previewInitialState","removeClass","h"),h.alert(n.no_data_msg))):h.alert(n.browser_support_msg)},E,I,function(e){"c"==e?a(5,l=!1):"u"==e&&a(5,l=!0)},d,c,u,m]}export default class extends e{constructor(e){super(),t(this,e,T,k,a,{xml:15,uxml:14,showAns:16,isReview:0,editorState:17},[-1,-1])}}
//# sourceMappingURL=AudioPreview-ced1cbe7.js.map
