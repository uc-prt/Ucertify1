{"version":3,"file":"ItemPluginPreview-bc46661d.js","sources":["../../../clsSMStepAlgo/Step.js","../../../clsSMStepAlgo/StepAlgoPreview.svelte","../../../clsSMMixedItem/ItemPluginPreview.svelte"],"sourcesContent":["var ALGO = ALGO || {mathtype:\"\"};\r\n\r\nALGO.init = function (algostr, genereted_str) {\t\r\n\tlet var_list = '';\r\n\ttry {\r\n\t\tvar_list = ALGO.util.generateVariables (algostr, genereted_str);\r\n\t} catch(e) {\r\n\t\tswal({\r\n\t\t\thtml: true,          \r\n\t\t\ttitle: '',\r\n\t\t\ttext: \"<b>\"+e+\"<br/><br/>Variables are not correctly defined!</b>\",\r\n\t\t\ttype: \"error\"\r\n\t\t});\r\n\t}\r\n\tconsole.log('var llist',var_list);\r\n\treturn var_list;\r\n};\r\n\r\nALGO.util = {\r\n\tgenerateVariables : function (algostr, genereted_str) {\r\n\t\tconst regex_mathtype = /is_advance[\\s]*=([\\s\"'\\d]*)/;\r\n\t\t//if (genereted_str != \"\" && genereted_str != \"undefined\") {\r\n\t\t\t//return JSON.parse(genereted_str);\r\n\t\t//} else {\r\n\t\t\tlet fnName = \"\",\r\n\t\t\t\tvar_list = {};\t\t\t\t\r\n\t\t\tvar xml = algostr.split(\"\\n\");\r\n\t\t\ttry {\t\t\t\r\n                ALGO.mathtype = +xml[0].match(regex_mathtype)[1].match(/[\\d]+/);\r\n\t\t\t} catch(err) {\r\n                ALGO.mathtype = \"\";\r\n\t\t\t}\t\t\r\n\t\t\tfor (let i = 0; i < xml.length; i++) {\t\t\t\r\n                let xml_id = xml[i],\r\n\t\t\t\txml_arr = xml_id.split(\"=\");\r\n\t\t\t\tfnName = xml_arr[1].substr(0, xml_arr[1].indexOf('(')).trim();\t\r\n\t\t\t\tswitch (fnName) {\r\n\t\t\t\t\tcase \"rand_int\":\r\n\t\t\t\t\tfnName = \"randInt\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"rand_float\":\r\n\t\t\t\t\t\tfnName = \"randFloat\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"uc_sqrt\":\r\n\t\t\t\t\t\tfnName = \"ucSqrt\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"rand_obj\":\r\n\t\t\t\t\t\tfnName = \"randObj\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\t\r\n\t\t\t\tif (typeof ALGO.math[fnName] != 'object') {\r\n\t\t\t\t\tfnName = \"\";\r\n\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\tif (fnName != \"\") {\t \r\n\t\t\t\t\tconst regExp = /\\(([^)]+)\\)/;\r\n\t\t\t\t\tlet val_eval = [],\r\n\t\t\t\t\tmatches = regExp.exec(xml_arr[1]),\r\n\t\t\t\t\tmin,\r\n\t\t\t\t\tmax,\r\n\t\t\t\t\tfix_decimal;\r\n\t\t\t\t\tswitch (fnName.trim()) {\r\n\t\t\t\t\t\tcase \"randInt\":\r\n\t\t\t\t\t\t\tval_eval = matches[1].split(',');\t\r\n\t\t\t\t\t\t\tmin = parseInt(val_eval[0]);\r\n\t\t\t\t\t\t\tmax = parseInt(val_eval[1]);\r\n\t\t\t\t\t\t\tfix_decimal = parseInt(val_eval[2]);\r\n\t\t\t\t\t\t\tvar_list[xml_arr[0].trim()] = ALGO.math [fnName].f (min,max,fix_decimal);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"randFloat\":\r\n\t\t\t\t\t\t\tval_eval = matches[1].split(',');\t\t\t\t\t\r\n\t\t\t\t\t\t\tmin = parseFloat(val_eval[0]);\r\n\t\t\t\t\t\t\tmax = parseFloat(val_eval[1]);\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tfix_decimal = parseInt(val_eval[2]);\r\n\t\t\t\t\t\t\tvar_list[xml_arr[0].trim()] = ALGO.math [fnName].f (min,max,fix_decimal);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"ucSqrt\":\r\n\t\t\t\t\t\t\tval_eval = matches[1].split(',');\t\r\n\t\t\t\t\t\t\tmin = parseInt(val_eval[0]);\r\n\t\t\t\t\t\t\tmax = parseInt(val_eval[1]);\r\n\t\t\t\t\t\t\tvar_list[xml_arr[0].trim()] = ALGO.math [fnName].f (min, max);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"ucPow\":\r\n\t\t\t\t\t\t\tval_eval = matches[1].split(',');\t\r\n\t\t\t\t\t\t\tmin = parseInt(val_eval[0]);\r\n\t\t\t\t\t\t\tmax = parseInt(val_eval[1]);\r\n\t\t\t\t\t\t\tfix_decimal = parseInt(val_eval[2]);\r\n\t\t\t\t\t\t\tvar_list[xml_arr[0].trim()] = ALGO.math [fnName].f (min,max,fix_decimal);\r\n\t\t\t\t\t\tbreak;\t\t\t\t\t\t\r\n\t\t\t\t\t\tdefault:\t\t\r\n\t\t\t\t\t\t\tlet string = JSON.stringify(matches[1]);\t\t\t\t\t\r\n\t\t\t\t\t\t\tstring = string.trim().replace(/\"|\\\\/g,'');\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar_list[xml_arr[0].trim()] = ALGO.math [fnName].f (string);\r\n\t\t\t\t\t}\t\t\t\t\t\t \r\n\t\t\t\t}\r\n\t\t\t\tif (fnName == \"\") {\t\t\t\t\t\t\t\t\r\n\t\t\t\t\tconst regExp_arth = /(\\*|\\+|\\-|\\/|\\^|\\%|\\(|\\)|\\,|\\[|\\]|\\#)/g,\r\n\t\t\t\t\t\tregExp_semicolon = /;|\\\\/g;\t\t\t\t\r\n\t\t\t\t\tlet test = xml_arr[1].split(regExp_arth),\r\n\t\t\t\t\t\texpression = \"\";\r\n\t\t\t\t\tvar iscartesian = false;\t\t\t\r\n\t\t\t\t\tfor (let j = 0; j < test.length; j++) {\r\n\t\t\t\t\t\ttest[j] = test[j].trim();\r\n\t\t\t\t\t\tif (test[j] != \";\" && test[j] != \"\") {\r\n\t\t\t\t\t\t\ttest[j] = test[j].replace(regExp_semicolon,'');\r\n\t\t\t\t\t\t\tif (test[j] == \"#\") {\r\n\t\t\t\t\t\t\t\ttest[j] = \"'\";\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ttest[j] = var_list.hasOwnProperty(test[j]) ? var_list[test[j]] : isNaN(+test[j])?test[j]:+test[j];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlet t = test[j];\r\n\t\t\t\t\t\t\tt = typeof t == \"string\" ? t.trim() : t;\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (t == 'math.setCartesian') {\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tiscartesian = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\texpression = expression + test[j];\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\t\t\r\n\t\t\t\t\tif (ALGO.mathtype == 2) {\r\n\t\t\t\t\t\tif (iscartesian == true) {\r\n\t\t\t\t\t\t\tvar testing = (0,eval)(expression),\r\n\t\t\t\t\t\t\t\tstr = \"\";\r\n\t\t\t\t\t\t\tfor (var k=0;k<testing.length;k++) {\r\n\t\t\t\t\t\t\t\ttesting[k] = \"(\"+testing[k]+\") \";\r\n\t\t\t\t\t\t\t\tstr = str+testing[k];\r\n\t\t\t\t\t\t\t}\t\r\n\t\t\t\t\t\t\tvar_list[xml_arr[0].trim()] = str;\r\n\t\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t\t\tif (!iscartesian) {\r\n\t\t\t\t\t\t\tvar_list[xml_arr[0].trim()] = (0,eval)(expression).toString();\t\t\t\t\t\r\n\t\t\t\t\t\t}\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (var_list[xml_arr[0].trim()] == \"\") {\r\n\t\t\t\t\t\t\tvar_list[xml_arr[0].trim()] = \"None of these\"\r\n\t\t\t\t\t\t}\t\t\t\t\r\n\t\t\t\t\t} \r\n\t\t\t\t\tif (ALGO.mathtype == \"\") {\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar_list[xml_arr[0].trim()] = (0,eval)(expression.trim());\r\n\t\t\t\t\t}\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t}\t\r\n\t\t\treturn var_list;\r\n\t\t//}\r\n    }\r\n};\r\nALGO.init.replaceVariables = function (latex_str, var_list) {\r\n    for (let i in var_list) {\r\n\t\tlet temp = \"<\\{\"+i+\"\\}>\";\r\n\t\tvar re = new RegExp(temp, \"g\");\r\n        latex_str = latex_str.replace(re, var_list[i]);\t\t\r\n    }\t\r\n    return latex_str;\r\n}\r\n\r\nALGO.math = {\r\n\trandObj : {\r\n\t\ttext:\"Randomize Object\",\r\n\t\tdescription:\"Find the random string or character\",\r\n\t\tparam:\"(javascript,java,C,react,php)\",\r\n\t\tuse:\"randObj(javascript,php,java,c)\",\r\n\t\tf : function (object) {\r\n\t\t\tlet val_eval = object.split(',');\t\r\n\t\t\treturn val_eval[ALGO.math.randInt.f(0,val_eval.length-1)];\r\n\t\t}\r\n\t},\r\n\trandInt : {\r\n\t\ttext:\"Randomize Integer\",\r\n\t\tdescription:\"Find the random integer value (min-value, max-value, no. of values after decimal)\",\r\n\t\tparam:\"minimunvalue,maximumvalue\",\r\n\t\tagrlength:2,\r\n\t\tuse:\"randInt(1,4,2)\",\r\n\t\tf : function (min, max, fix_decimal) {\t\r\n\t\t\treturn (Math.floor(Math.random() * (max - min + 1)) + min).toFixed(fix_decimal);\r\n\t\t}\r\n\t},\r\n\trandFloat : {\r\n\t\ttext:\"Randomize Float\",\r\n\t\tdescription:\"Find the random float/decimal value (min-value, max-value, no. of values after decimal)\",\r\n\t\tparam:\"minimunvalue,maximumvalue\",\r\n\t\tagrlength:2,\r\n\t\tuse:\"randFloat(1,4,2)\",\r\n\t\tf : function  (min, max, fix_decimal) {\r\n\t\t\treturn (Math.random() * (max - min) + min).toFixed(fix_decimal);\r\n\t\t}\r\n\t},\r\n\tucSqrt : {\r\n\t\ttext:\"Square root\",\r\n\t\tdescription:\"Find the square root (value, no. of values after decimal)\",\r\n\t\tparam:\"minimunvalue,maximumvalue\",\r\n\t\tagrlength:2,\r\n\t\tuse:\"ucSqrt(9,2)\",\r\n\t\tf : function  (min, max) {\r\n\t\t\treturn (Math.sqrt(min)).toFixed(max);\r\n\t\t}\r\n\t},\r\n\tucPow : {\r\n\t\ttext:\"Power\",\r\n\t\tdescription:\"Return the value of the number 4 to the power of 3(value, power, no. of values after decimal)\",\r\n\t\tparam:\"minimunvalue,maximumvalue\",\r\n\t\tagrlength:2,\r\n\t\tuse:\"ucPow(4,3,2)\",\r\n\t\tf : function  (min, max, fix_decimal) {\r\n\t\t\treturn (Math.pow(min, max)).toFixed(fix_decimal);\r\n\t\t}\r\n\t}\t\t\r\n};\r\n\r\nexport default ALGO;","<!-- \r\n*  File Name   : StepAlgoPreview.svelte\r\n*  Description : show the boxes for users side\r\n*  Author      : Sundaram Tripathi\r\n*  Version     : 1.0\r\n*  Package     : svelte_items\r\n*  Last update :  -->\r\n<script>\r\n    import {writable} from 'svelte/store';\r\n\t//import ju from '../src/libs/jslib';\r\n\timport ALGO from \"./Step.js\";\r\n    import l from '../src/libs/editorLib/language.js';\r\n    import { onMount,afterUpdate, beforeUpdate } from 'svelte';\r\n    import {AH,XMLToJSON,JSONToXML,onUserAnsChange} from \"../helper/HelperAI.svelte\";\r\n\t//import FillInTheBlanksToolbar from '../clsSMFill/FillInTheBlanksToolbar.svelte';\r\n\timport FillInTheBlanksToolbar from  \"./../src/libs/FillInTheBlanksToolbar.svelte\"\r\n\timport ItemHelper from '../helper/ItemHelper.svelte';\r\n\timport '../src/libs/mathquill.css';\r\n\r\n    let step_xml;\r\n    let smans = {};\r\n    let usans = {};\r\n    let element_id, element_div = '';\r\n    let cdata = '';\r\n    let fill_math = [];\r\n    var answer_array = [];\r\n\tlet btntype;\r\n\tlet resultNew = {};\r\n    let var_list = '';\r\n\tlet special_module = {};\r\n\tlet lists = '';\r\n\tlet oldstep = '';\r\n\tlet answer_arr = [];\r\n\tlet fillId;\r\n\tlet steps = 0;\r\n\tlet wrong_choice = 0;\r\n\tlet optionrem = 0;\t\r\n\tlet flagxml = false;\r\n    let state = {};\r\n\tlet txtWidth = [];\r\n\tlet globWith = '';\r\n\tlet new_xml ;\r\n\r\n    export let xml;\r\n    export let stopPreviewUpdate;\r\n\texport let isReview;\r\n\texport let uxml;\r\n\r\n\tlet MQ;\r\n\tlet customIsReview = isReview;\r\n    let stateData = writable({\r\n            blank                   : true,\r\n\t\t\thideNext                : false,\r\n\t\t\titemArray               : [],\r\n\t\t\tclassChange             : -1,\r\n\t\t\tisColor                 : true,\r\n\t\t\tsmController            : \"h\",\r\n\t\t\tdisplay                 : -1,\r\n\t\t\tshowToolbar             : true,\r\n\t\t\tisMathquill             : false,\r\n\t\t\tcorrect_answer          : true,\r\n\t\t\tmain_steps              : false,\r\n\t\t\tyour_answer             : []\r\n    });\r\n\r\n    const unsubscribe = stateData.subscribe((items)=>{\r\n        state = items;\r\n    })\r\n\r\n\t$:{\r\n\t\tif(customIsReview != isReview){\r\n\t\t\tif (isReview) {\r\n\t\t\t\tvar timer = setTimeout(function() {\r\n\t\t\t\t\tsetReview();\r\n\t\t\t\t\tclearTimeout(timer);\r\n\t\t\t\t},500);\t\r\n\t\t\t} else {\r\n\t\t\t\tvar timer_next = setTimeout(function() {\r\n\t\t\t\t\tunsetReview();\r\n\t\t\t\t\tclearTimeout(timer_next);\r\n\t\t\t\t},200);\r\n\t\t\t}\r\n\t\t\tcustomIsReview = isReview;\r\n\t\t}\r\n\t}\r\n\r\n\tbeforeUpdate(()=>{\r\n\t\tAH.addScript(\"\", itemUrl + \"src/libs/mathQuill_new.js\");\r\n\t\tif (uxml) {\r\n\t\t\tlet answer = XMLToJSON(uxml);\r\n\t\t\tif (answer?.smans) {\r\n\t\t\t\tif (answer?.smans.div) {\r\n\t\t\t\t\tif (answer?.smans.div._userAns) {\r\n\t\t\t\t\t\tparseSteps(uxml);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (xml != state.xml) {\t\t\r\n\t\t\tstate.xml = xml;\r\n\t\t\tif (stopPreviewUpdate == true) return false;\r\n\t\t\tif (!uxml) {\r\n\t\t\t\tsteps = 0;\r\n\t\t\t\tstate.itemArray = [];\t\r\n\t\t\t\tstep_xml, smans, usans = {};\r\n\t\t\t\tstate.hideNext = false;\t\t\t\r\n\t\t\t\treset();\r\n\t\t\t}\r\n\t\t\tstate.blank = false;\r\n\t\t\tnew_xml = XMLToJSON(state.xml);\r\n\t\t\tloadModule(new_xml);\r\n\t\t}\r\n\t})\r\n\r\n\tonMount(()=>{\r\n\r\n\t\tAH.listen(document,'keydown','.edit_step',function(data,e) {\r\n\t\t\t//let ele = $(this);\r\n\t\t\tlet l = (e.target.value.split('').length * 10) + 45 +'px';\r\n\t\t\tdata.style.width = l;\r\n\t\t\tif(e.target.previousSibling){\r\n\t\t\t\te.target.previousSibling.style.width = l;\r\n\t\t\t}\r\n\t\t\tglobWith = l;\r\n\t\t})\r\n\r\n\t\t//window.J = ju;\r\n\t\tAH.set('stepAlgo', this);\r\n\t\tif (in_editor) {\r\n\t\t\tAH.addScript(\"\", \"https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js\");\r\n\t\t}\r\n\t\t//AH.addScript(\"\", itemUrl + \"src/libs/mathQuill_new.js\");\r\n\r\n\t\tif(window.inNative) {\r\n\t\t\twindow.getHeight && window.getHeight();\r\n        }\r\n\t\tsetTimeout(function() {\r\n\t\t\t//jQuery('.toolbar_container_one').addClass('h-imp');\r\n\t\t\tAH.selectAll('.toolbar_container_one','addClass','h-imp');\r\n\t\t}, 100);\r\n\r\n\t\tAH.listen(document,'click','.edit_step',(_element) => {\r\n\t\t\tsetOutline(_element)\r\n\t\t})\r\n\r\n\t\tAH.listen(document,'keyup','.edit_step',(_element)=>{\r\n\t\t\tsetOutline(_element)\r\n\t\t})\r\n\r\n\t\tAH.listen(document,'change','.edit_step',(_element)=>{\r\n\t\t\tsetOutline(_element)\r\n\t\t})\r\n\r\n\t\tAH.listen(document,'click','span.mq-editable-field.mq-focused',(_e)=>{\r\n\t\t\tlet span_math = _e;\r\n\t\t\tlet is_fillid = true;\r\n\t\t\tlet fillid;\r\n\t\t\twhile(is_fillid) {\r\n\t\t\t\tspan_math = span_math.parentElement;\r\n\t\t\t\tif (span_math.getAttribute('id')) {\r\n\t\t\t\t\tis_fillid = false;\r\n\t\t\t\t\tfillid = span_math.getAttribute('id');\r\n\t\t\t\t\tfillId = fillid;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\r\n\t\t\tlet latex_array = [];\r\n\t\t\tAH.selectAll(\"#\" +fillid + \" span.mq-editable-field\").forEach((_this)=> {\r\n\t\t\t\tlet command_id = _this.getAttribute('mathquill-command-id');\r\n\t\t\t\tlatex_array.push(command_id);\r\n\t\t\t}); // Need to fixed it\r\n\r\n\t\t\tlet math_id = _e.getAttribute('mathquill-command-id');\r\n\t\t\tlet index_id = latex_array.indexOf(math_id);\r\n\t\t\tstate.spanId = index_id;\r\n\t\t\tstate.divId = fillid;\r\n\t\t\t\r\n\t\t\tAH.selectAll('.toolbar_container_one','removeClass','h-imp');\r\n\t\t\tstate.showToolbar = true;\r\n\t\t})\r\n\t\t\r\n\t\t// jQuery(document).on('click', '.next_step', function(e) {\r\n\t\t// \tif (typeof QUIZPLAYERID != \"undefined\") {\r\n\t\t// \t\twindow.parent.autoResize(QUIZPLAYERID);\r\n\t\t// \t}\r\n\t\t// \te.preventDefault();\r\n\t\t// \tinputFilled();\r\n\t\t// });\r\n\r\n\t\tAH.listen(document,'click','.next_step',function(curr,e) {\r\n\t\t\tif (typeof QUIZPLAYERID != \"undefined\") {\r\n\t\t\t\twindow.parentElement.autoResize(QUIZPLAYERID);\r\n\t\t\t}\r\n\t\t\te.preventDefault();\r\n\t\t\tinputFilled();\r\n\t\t})\r\n\t\t\r\n\t\t// setTimeout(function() {\r\n\t\t// \tjQuery(\"#set-review\").on('click', function() {\r\n\t\t// \t\tsetReview();\r\n\t\t// \t});\r\n\t\t// \tjQuery(\"#unset-review\").on('click', function() {\r\n\t\t// \t\tunsetReview();\r\n\t\t// \t});\r\n\t\t// },1000);\r\n\r\n\t\tsetTimeout(function() {\r\n\t\t\tAH.listen(document,'click','#set-review',function() {\r\n\t\t\t\tsetReview();\r\n\t\t\t})\r\n\t\t\tAH.listen(document,'click','#unset-review',function() {\r\n\t\t\t\tunsetReview();\r\n\t\t\t})\r\n\t\t},1000);\r\n\r\n\t\tif (window.inNative) {\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\twindow.postMessage('height___'+document.getElementsByClassName('inNativeStyle')[0].offsetHeight,'*');\r\n\t\t\t}, 200);\r\n\t\t}\r\n\r\n\t\tif(window.inNative) {\r\n\t\t\twindow.checkReview = (isReview) => isReview ? self.setReview() : self.unsetReview();\r\n\t\t}\r\n\t})\r\n\r\n\tfunction setOutline(_element) {\r\n\t\tif ( _element.nodeName) {\r\n\t\t\tif (_element.classList.contains('mathquill')) {\r\n\t\t\t\tmathquillAns(_element, false);\r\n\t\t\t} else {\r\n\t\t\t\tlet inp_id =  _element.getAttribute('id');\r\n\t\t\t\tlet inp_div = _element.closest('div').getAttribute('seq');\r\n\t\t\t\tlet inp_val = _element.value;\r\n\t\t\t\tusans = createAns(usans, inp_id, inp_div, inp_val);\r\n\t\t\t\tlet smans_overall = smans;\r\n\t\t\t\tsetUserAns(usans);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction inputFilled() {\r\n\t\tif (usans) {\r\n\t\t\tfor (let i in usans) {\r\n\t\t\t\tfor (let key in usans[i]) {\r\n\t\t\t\t\tlet ans_val = usans[i][key].value;\r\n\t\t\t\t\tif (ans_val != '') {\r\n\t\t\t\t\t\tlet ans_arr = ans_val.match(/MathQuillMathField\\{(.*?)\\}/g);\r\n\t\t\t\t\t\tif (ans_arr) {\r\n\t\t\t\t\t\t\tans_arr.map(function(obj) {\r\n\t\t\t\t\t\t\t\tlet math_field = obj.toString().replace(/MathQuillMathField\\{|\\}/g, '')\r\n\t\t\t\t\t\t\t\tif (math_field == '') {\r\n\t\t\t\t\t\t\t\t\t//jQuery(\"#\"+key).removeClass('answer_input');\r\n\t\t\t\t\t\t\t\t\tAH.select(\"#\"+key,'removeClass','answer_input');\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t//jQuery(\"#\"+key).addClass('answer_input');\r\n\t\t\t\t\t\t\t\t\tAH.select(\"#\"+key,'addClass','answer_input');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t//jQuery(\"#\"+key).addClass('answer_input');\r\n\t\t\t\t\t\t\tAH.select(\"#\"+key,'addClass','answer_input');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//jQuery(\"#\"+key).removeClass('answer_input');\r\n\t\t\t\t\t\tAH.select(\"#\"+key,'removeClass','answer_input');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n    function loadModule(new_xml) {\r\n\t\tflagxml = false;\r\n\t\tif(new_xml.smxml.algo != \"undefined\" && new_xml.smxml.algo) {\r\n\t\t\tflagxml = true;\t\t\r\n\t\t}\r\n\t\tif(flagxml) {\r\n\t\t\tvar_list = ALGO.init(new_xml.smxml.algo);\r\n\t\t}\r\n\t\tlet xml_str = JSON.stringify(new_xml);\r\n\t\tif(flagxml) {\r\n\t\t\tif (uxml) {\r\n\t\t\t\tlet answer = XMLToJSON(uxml);\r\n\t\t\t\tif (answer.smans) {\r\n\t\t\t\t\tif (answer.smans.div) {\r\n\t\t\t\t\t\tif (answer.smans.div._lists) {\r\n\t\t\t\t\t\t\tvar_list = lists;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tstep_xml = ALGO.init.replaceVariables(xml_str, var_list);\r\n\t\t\tstep_xml = JSON.parse(step_xml);\r\n\t\t} else {\r\n\t\t\tstep_xml = new_xml;\r\n\t\t}\r\n\t\tlet answer_arr_clone = step_xml.smxml.step;\r\n\t\tanswer_array = answer_arr_clone.slice();\r\n\t\tif (typeof Object.assign != 'function') {\r\n\t\t\tObject.assign = function(target) {\r\n\t\t\t\t'use strict';\r\n\t\t\t\tif (target == null) {\r\n\t\t\t\t\tthrow new TypeError('Cannot convert undefined or null to object');\r\n\t\t\t\t}\r\n\t\t\t\ttarget = Object(target);\r\n\t\t\t\tfor (var index = 1; index < arguments.length; index++) {\r\n\t\t\t\t\tvar source = arguments[index];\r\n\t\t\t\t\tif (source != null) {\r\n\t\t\t\t\t\tfor (var key in source) {\r\n\t\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(source, key)) {\r\n\t\t\t\t\t\t\t\ttarget[key] = source[key];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn target;\r\n\t\t\t};\r\n\t\t}\r\n\t\tanswer_arr_clone.map(function(item, i) {\r\n\t\t\tanswer_array[i] = Object.assign({}, item);\r\n\t\t});\r\n\t\tif (oldstep != '') {\r\n\t\t\tsteps = oldstep;\r\n\t\t\tfor (let i=0; i<=oldstep; i++) {\r\n\t\t\t\tcreateStep(i);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tcreateStep();\r\n\t\t}\r\n\t\tif (uxml) {\r\n\t\t\tlet answer = XMLToJSON(uxml);\r\n\t\t\tif (answer?.smans) {\r\n\t\t\t\tif (answer?.smans.div) {\r\n\t\t\t\t\tif (answer?.smans.div._userAns) {\r\n\t\t\t\t\t\tvar timer = setTimeout(function() {\r\n\t\t\t\t\t\t\tparseUserAns(uxml);\r\n\t\t\t\t\t\t\tclearTimeout(timer);\r\n\t\t\t\t\t\t},50);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction parseUserAns(uans) {\r\n\t\tlet user_answer = XMLToJSON(uans);\r\n        if (user_answer.smans && user_answer.smans.div && user_answer.smans.div._userAns) {\r\n\t\t\tuser_answer = JSON.parse(user_answer.smans.div._userAns);\r\n\t\t\tfor (let i in user_answer) {\r\n\t\t\t\tfor (let j in user_answer[i]) {\r\n\t\t\t\t\tlet runn = i.split('');\r\n\t\t\t\t\tlet val = runn[1];\r\n\t\t\t\t\tlet box_value = user_answer[i][j].value;\r\n\t\t\t\t\tif (AH.select('#'+j).classList.contains('mathquill')) {\r\n\t\t\t\t\t\t//jQuery('#'+j).attr('userans', box_value);\r\n\t\t\t\t\t\tAH.select('#'+j,'userans',box_value);\r\n\t\t\t\t\t\tmathquillAns('#'+j, \"math_user\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//jQuery('#'+j).val(box_value).focus().blur(); \r\n\t\t\t\t\t\tAH.select('#'+j).value = box_value;\r\n\t\t\t\t\t\tsetOutline(AH.select('#'+j))\r\n\t\t\t\t\t}\r\n\t\t\t\t\toptionrem = 0; \r\n\t\t\t\t\tinputFilled();\r\n\t\t\t\t\tcheckAns(val);\r\n\t\t\t\t}\r\n\t\t\t}\r\n            //forceUpdate();\r\n        }\r\n\t}\r\n\r\n    function createStep(i) {\r\n\t\tif(flagxml) {\r\n\t\t\tspecial_module.var_list = var_list;\r\n\t\t}\r\n\t\tspecial_module.cuurentStep = steps;\r\n\t\toptionrem = 0;\t\r\n\t\tconst item = state.itemArray;\r\n\t\tparseXmlAuthoring(step_xml, i);\r\n\t\titem.push({ cdata });         \r\n\t\tstate.itemArray = item;\r\n\t\tif (i <= oldstep) {\r\n\t\t\tvar curr = i;\r\n\t\t} else {\r\n\t\t\tvar curr = steps;\r\n\t\t}\r\n\t}\r\n\r\n    function reset() {\r\n\t\t//jQuery(document).find('.sticky').removeClass('sticky');\r\n\t\tAH.find(document,'.sticky',{\r\n\t\t\taction:'removeClass',\r\n\t\t\tactionData:'sticky'\r\n\t\t})\r\n\t\t//jQuery('.edit_step').removeAttr('disabled');\r\n\t\tAH.selectAll('.edit_step','removeAttr','disabled');\r\n\r\n\t\t//jQuery('.edit_step').val('');\r\n\t\tAH.selectAll('.edit_step').value = '';\r\n\t}\r\n\r\n    function parseXmlAuthoring(MYXML, user_xml) {\r\n\t\tif (user_xml <= oldstep) {\r\n\t\t\tcdata = MYXML.smxml.step[user_xml].__cdata;\t\r\n\t\t\tcreatingInteractive(user_xml, cdata);\r\n\t\t} else {\r\n\t\t\tif (MYXML.smxml.step[steps] != undefined) {\r\n\t\t\t\tcdata = MYXML.smxml.step[steps].__cdata;\r\n\t\t\t\tcreatingInteractive(user_xml, cdata);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction creatingInteractive(user_xml, cdata, index) {\r\n\t\tlet answer_key = cdata.match(/%{[\\s\\S]*?}%/gm);\r\n\t\tlet answer_type = '';\r\n\t\tlet check_type = [];\r\n\t\tlet uaxml_new = \"\";\r\n\t\tlet total_marks = 0;\r\n\t\tif (answer_key) {\r\n\t\t\t//jQuery(answer_key).each(function(i) {\r\n\t\t\tanswer_key.forEach(function(data,i) {\r\n\t\t\t\tif(index != undefined) {\r\n\t\t\t\t\tvar org_cdata = answer_array[index].__cdata;\r\n\t\t\t\t}\r\n\t\t\t\ttotal_marks++;\r\n\t\t\t\tlet originalKey = answer_key[i];\r\n\t\t\t\tanswer_type = answer_key[i].match(/\\|(.*?)}%$/gm);\r\n\t\t\t\tanswer_type = (answer_type) ? answer_type[0].replace(/\\||}%/gm, '') : '';\r\n\t\t\t\tanswer_type = answer_type.trim();\r\n\t\t\t\tcheck_type.push(answer_type);\r\n\t\t\t\tif (answer_type == '' || answer_type == 'c') {\r\n\t\t\t\t\tif(index != undefined) {\r\n\t\t\t\t\t\tcreateTextbox(originalKey, i, user_xml, index, org_cdata);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcreateTextbox(originalKey, i, user_xml);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (answer_type == 'n') {\r\n\t\t\t\t\tif(index != undefined) {\r\n\t\t\t\t\t\tcreateTextbox(originalKey, i, user_xml, index, org_cdata);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcreateTextbox(originalKey, i, user_xml);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (answer_type == \"e\") {\r\n\t\t\t\t\tstate.isMathquill = true;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (index != undefined) {\r\n\t\t\t\t\t\tcreateMathDiv(originalKey, i, user_xml, index, org_cdata);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcreateMathDiv(originalKey, i, user_xml);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treturn '';\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getClass(index) {\r\n\t\tif (index == state.classChange) {\r\n\t\t\tif (state.isColor) {\r\n\t\t\t\treturn \"border_green\";\r\n\t\t\t} else {\r\n\t\t\t\treturn \"border_red\";\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn \"\";\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getCorrect(id) {\r\n\t\tif (state.display == 1) {\r\n\t\t\tif (special_module.smans != undefined) {\r\n\t\t\t\tif (special_module.smans[id] != undefined) {\t\r\n\t\t\t\t\tif (special_module.smans[id].overall == 1) {\r\n\t\t\t\t\t\treturn 'border_green';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn 'border_red';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn '';\r\n\t\t}\r\n\t}\r\n\r\n\tfunction isSticky(index) {\r\n\t\tif(step_xml.smxml.step[index] != undefined) {\r\n\t\t\tif (step_xml.smxml.step[index]._sticky == 1) {\r\n\t\t\t\treturn \"sticky\";\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction toggleToolbar(value) {\r\n\t\tstate.showToolbar = value;\r\n\t}\r\n\r\n\tfunction moveNext() {\r\n\t\tif (typeof QUIZPLAYERID != \"undefined\") {\r\n\t\t\tvar timer = setTimeout(function(){\r\n\t\t\t\twindow.parentElement.autoResize(QUIZPLAYERID);\r\n\t\t\t\tclearTimeout(timer);\r\n\t\t\t}, 0);\r\n\t\t}\r\n\t\tif (step_xml.smxml.step[steps+1] != undefined || step_xml.smxml.step[steps]._attempt == \"1\") {\r\n\t\t\tif(step_xml.smxml._gonext == 1) {\r\n\t\t\t\tnextbtnAnswer();\r\n\t\t\t} else {\t\r\n\t\t\t\tif (step_xml.smxml.step[steps]._attempt == 1) {\r\n\t\t\t\t\tif (AH.selectAll('.edit_step').length == AH.selectAll('.answer_input').length) {\r\n\t\t\t\t\t\tcheckAns();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnotFilled();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else { \r\n\t\t\t\t\tnextStep();\r\n\t\t\t\t\taddSticky();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif((step_xml.smxml.step.length <= (step_xml.smxml.step[steps]._seq)) && step_xml.smxml.step[steps]._attempt != 1) {\r\n\t\t\t\tstate.hideNext = true;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tstate.hideNext = true;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction nextStep() {\r\n\t\r\n\t\tAH.selectAll('.edit_step').forEach((_this)=>{\r\n\t\t\tif(_this.classList.contains('mathquill')) {\r\n\t\t\t\tif(((_this.previousElementSibling).classList.contains(\"disable_div\"))) {\r\n\t\t\t\t\tAH.select(_this.previousElementSibling,'removeClass','h');\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t_this.disabled = true;\r\n\t\t\t}\r\n\t\t\t_this.classList.add('data-check');\r\n\t\t})\r\n\t\toptionrem = 0;\r\n\t\tif(step_xml.smxml.step[steps+1] == undefined && step_xml.smxml.step[steps]._attempt == \"1\") {\r\n\t\t\tstate.hideNext = true;\r\n\t\t\tsetUserAns(usans);\r\n\t\t\toverAll();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (steps != step_xml.smxml.step.length -1) {\r\n\t\t\tsteps += 1;\r\n\t\t\tcreateStep(steps);\r\n\t\t\tsetUserAns(usans);\r\n\t\t\toverAll();\r\n\t\t} else {\r\n\t\t\tconsole.log(\"All steps are attempted\");\r\n\t\t}\r\n\t} \r\n\r\n\r\n\t\r\n\r\n\tfunction setUserAns(user_ans) {\r\n\t\tif(window.inNative) {\r\n\t\t\twindow.getHeight && window.getHeight();\r\n        }\r\n\t\t//ISSPECIALMODULEUSERXMLCHANGE = 1; ## fixed in onUserAnsChange;\r\n\t\tvar cond = flagxml ? 'lists='+JSON.stringify(special_module.var_list) : ' ';\r\n\t\t\r\n\t\t//jQuery(\"#special_module_user_xml\").val(\"<smans><div \"+ cond +\" currStep='\"+steps+\"' userAns='\"+JSON.stringify(user_ans)+\"'></div></smans>\");\r\n\t\t//AH.select(\"#special_module_user_xml\").value = \"<smans><div \"+ cond +\" currStep='\"+steps+\"' userAns='\"+JSON.stringify(user_ans)+\"'></div></smans>\"; ## fixed in onUserAnsChange;\r\n\r\n\t\tresultNew.special = \"<smans><div \"+ cond +\" currStep='\"+steps+\"' userAns='\"+JSON.stringify(user_ans)+\"'></div></smans>\";\r\n\t}\r\n\r\n\tfunction overAll() {\r\n\t\tlet over = false;\r\n\t\tlet userAnswers = null;\r\n\t\tlet inNativeIsCorrect = false;\r\n\t\tif(step_xml.smxml.step.length == state.itemArray.length) {\r\n\t\t\tlet check = true;\r\n\t\t\tfor (let i in smans) {\r\n\t\t\t\tif (smans[i].overall != undefined) {\r\n\t\t\t\t\tif (smans[i].overall == 1) {\r\n\t\t\t\t\t\tover = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tover = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcheck = check && over;\r\n\t\t\t\t}\r\n\t\t\t\tif (check == false) {\r\n\t\t\t\t\t//jQuery(\"#answer\").prop(\"checked\", false);\r\n\t\t\t\t\tAH.select(\"#answer\").checked = false;\r\n\t\t\t\t\tresultNew.answer = false;\r\n\t\t\t\t\tinNativeIsCorrect = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//jQuery(\"#answer\").prop(\"checked\", true);\r\n\t\t\t\t\t\tAH.select(\"#answer\").checked = true;\r\n\t\t\t\t\t\tresultNew.answer = true;\r\n\t\t\t\t\t\tinNativeIsCorrect = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//userAnswers = jQuery('#special_module_user_xml').val();\r\n\t\t//userAnswers = document.querySelector(\"#special_module_user_xml\").value;\r\n\t\tuserAnswers = resultNew.special;\r\n\t\tif (window.inNative) {\r\n\t\t\twindow.postMessage('height___'+document.getElementsByClassName('inNativeStyle')[0].offsetHeight,'*');\r\n\t\t\twindow.postMessage(JSON.stringify({ userAnswers, inNativeIsCorrect }), '*');\r\n\t\t}\r\n\t\tonUserAnsChange({uXml:resultNew.special,ans:resultNew.answer});\r\n\t}\r\n\r\n\tfunction addSticky() {\r\n\t\t//jQuery('[data-sticky]').addClass('sticky');\r\n\t\tAH.select('[data-sticky]','addClass','sticky');\r\n\t}\r\n\t\r\n\r\n\tfunction createTextbox(data, i, user_xml, index, org_cdata) {\r\n\t\tlet original_data = data;\r\n\t\tdata = data.replace(/%{|}%/g, \"\");\r\n\t\tdata = data.split(\"|\");\r\n\t\tlet codetype = (data[1] && data[1].trim() == \"n\") ? \"1\" : \"\";\r\n\t\tlet corr_ans = data[0].trim();\r\n\t\tlet csStyle = \"\";\r\n\t\tif(corr_ans.indexOf(\"#style#\") != -1) {\r\n\t\t\tlet customStyle  = corr_ans.split(\"#style#\");\r\n\t\t\tcorr_ans = customStyle[0];\r\n\t\t\tcsStyle = customStyle[1];\r\n\t\t}\r\n\t\ttxtWidth  = [];\r\n\t\tlet anslen = corr_ans.split(\",\");\r\n\t\t// jQuery(anslen).each(function(j){\r\n\t\t// \ttxtWidth[j] = ((anslen[j].length)*10+30)\r\n\t\t// });\r\n\t\tanslen.forEach(function(data,j){\r\n\t\t\ttxtWidth[j] = ((anslen[j].length)*8*anslen.length)\r\n\t\t})\r\n\t\tif(index != undefined) {\r\n\t\t\ttextBox(data, txtWidth, csStyle, original_data, user_xml, corr_ans, i, index, org_cdata);\r\n\t\t} else {\r\n\t\t\ttextBox(data, txtWidth, csStyle, original_data, user_xml, corr_ans, i);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction textBox(data, txtWidth, csStyle, original_data, user_xml, corr_ans, i, index, org_cdata) {\r\n\t\tif(index != undefined) {\r\n\t\t\telement_id = \"s\"+index+\"_t\"+i;\r\n\t\t\telement_div = \"s\"+index;\r\n\t\t\tlet textbox = '<input type=\"text\" id=\"'+element_id+'\" class=\"fillintheblank ks nmb text-center span0 edit_step\" defaultans=\"\" haskeywords=\"\"  hasnotkeywords=\"\" keywordtype=\"\" autocomplete=\"off\" data-role=\"none\" style=\"width:'+(Math.max(...txtWidth) + 20)+'px;'+csStyle+'\" />';\r\n\t\t\tlet tag = '<span id=\"'+element_div+'\" class=\"text-center filter fillelement position-relative inline-block\"><span class=\"remed_disable fh fwidth absolute h\"></span><span id=\"text\" class=\"corr_div\" style=\"width:'+(Math.max(...txtWidth) + 20)+'px;'+csStyle+'\" >'+data[0]+'</span>'+textbox+'</span>';\r\n\t\t\tlet cd_ans = org_cdata.replace(original_data, tag);\r\n\t\t\tanswer_array[index].__cdata = cd_ans;\r\n\t\t} else {\t\r\n\t\t\tif (user_xml <= oldstep) {\r\n\t\t\t\tvar steps_counter = user_xml;\r\n\t\t\t} else {\r\n\t\t\t\tvar steps_counter = steps;\r\n\t\t\t}\r\n\t\t\telement_id = \"s\"+steps_counter+\"_t\"+i;\r\n\t\t\telement_div = \"s\"+steps_counter;\r\n\t\t\tlet textbox = '<input type=\"text\" id=\"'+element_id+'\" class=\"fillintheblank ks nmb text-center span0 edit_step\" defaultans=\"\" haskeywords=\"\"  hasnotkeywords=\"\" keywordtype=\"\" autocomplete=\"off\" data-role=\"none\"  style=\"width:38px;'+csStyle+'\" />';\r\n\t\t\tlet tag = '<span id=\"'+element_div+'\" class=\"text-center filter fillelement position-relative inline-block\"><span class=\"remed_disable fh fwidth absolute h\"></span><span id=\"\" class=\"corr_div h-imp\">'+data[0]+'</span>'+textbox+'</span>';\r\n\t\t\tcdata = cdata.replace(original_data, tag);\r\n\t\t\tsmans = createAns(smans, element_id, element_div, corr_ans)\r\n\t\t\tspecial_module.smans = smans;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction createAns(obj, element_id, element_div, correctval) {\r\n\t\tif (typeof obj[element_div] == \"undefined\" || typeof obj[element_div][element_id] == \"undefined\") {\r\n\t\t\tif (typeof obj[element_div] == \"undefined\") {\r\n\t\t\t\tobj[element_div] = {};\r\n\t\t\t}\r\n\t\t\tobj[element_div][element_id] = {};\r\n\t\t}\r\n\t\tobj[element_div][element_id].value = correctval;\r\n\t\treturn obj;\r\n\t}\r\n\r\n\t/*function notFilled() {\r\n\t\tjQuery('.edit_step').each(function(i, obj) {\r\n\t\t\tlet element = jQuery(this);\r\n\t\t\tif (!jQuery(this).hasClass('answer_input')) {\r\n\t\t\t\telement.css({border: '2px solid #ff0000'});\r\n\t\t\t\tvar timer = setTimeout(function() {\r\n\t\t\t\t\telement.css({border: '1px solid #ccc'});\r\n\t\t\t\t\tclearTimeout(timer);\r\n\t\t\t\t}, 500);\r\n\t\t\t}\r\n\t\t\treturn; \r\n\t\t});\r\n\t}*/\r\n\r\n\tfunction notFilled() {\r\n\t\tAH.selectAll('.edit_step').forEach((_element)=> {\r\n\t\t\t\r\n\t\t\tif (!_element.classList.contains('answer_input')) {\r\n\t\t\t\t_element.style.border = '2px solid #ff0000';\r\n\t\t\t\tvar timer = setTimeout(function() {\r\n\t\t\t\t\t_element.style.border = '1px solid #ccc'\r\n\t\t\t\t\tclearTimeout(timer);\r\n\t\t\t\t}, 500);\r\n\t\t\t}\r\n\t\t\treturn; \r\n\t\t});\r\n\t}\r\n\r\n\r\n\tfunction checkAns(j) {\r\n\t\t\r\n\t\twrong_choice = 0;\r\n\t\toptionrem += 1;\r\n\t\tfor (let i in smans) {\r\n\t\t\tfor (let prop in smans[i]) {\r\n\t\t\t\tif (j < oldstep) {\r\n\t\t\t\t\tvar curr = j;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar curr = steps;\r\n\t\t\t\t}\r\n\t\t\t\t//try {\r\n\t\t\t\t\tif (usans[\"s\"+curr] && usans[\"s\"+curr][prop] != undefined) {\r\n\t\t\t\t\t\tif (smans[\"s\"+curr][prop].value == usans[\"s\"+curr][prop].value) {\r\n\t\t\t\t\t\t\tinputHover('correct', prop);\r\n\t\t\t\t\t\t} else if (/\\,/g.test(smans[\"s\"+curr][prop].value)) {\r\n\t\t\t\t\t\t\tlet s_ans = (smans[\"s\"+curr][prop].value).split(\",\");\r\n\t\t\t\t\t\t\tlet u_ans = usans[\"s\"+curr][prop].value;\r\n\t\t\t\t\t\t\tif(s_ans.indexOf(u_ans) > -1) {\r\n\t\t\t\t\t\t\t\tinputHover('correct', prop);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\twrong_choice = 1;\r\n\t\t\t\t\t\t\t\tinputHover('wrong', prop);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\twrong_choice = 1;\r\n\t\t\t\t\t\t\tinputHover('wrong', prop);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t//} catch(e) {\r\n\t\t\t\t//\tconsole.warn(e);\r\n\t\t\t\t//}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (step_xml.smxml.step[steps]._mode == 1) { \r\n\t\t\tshowAnsMod(j, \"s\"+j);\r\n\t\t} else {\r\n\t\t\tshowAns(j, \"s\"+j);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction inputHover(option, elem) {\r\n\t\t\r\n\t\tif (step_xml.smxml.step[steps]._mode != 1) { \r\n\t\t\tif (option == 'correct') {\r\n\t\t\t\t//jQuery('#'+elem).removeClass('false-hover');\r\n\t\t\t\tAH.select('#'+elem,'removeClass','false-hover');\r\n\t\t\t\t//jQuery('#'+elem).addClass('true-hover');\r\n\t\t\t\tAH.select('#'+elem,'addClass','true-hover');\r\n\t\t\t} else if (option == 'wrong') {\r\n\t\t\t\t//jQuery('#'+elem).removeClass('true-hover');\r\n\t\t\t\tAH.select('#'+elem,'removeClass','true-hover');\r\n\t\t\t\t//jQuery('#'+elem).addClass('false-hover');\r\n\t\t\t\tAH.select('#'+elem,'addClass','false-hover');\r\n\t\t\t}\r\n\t\t\tif (optionrem>1) {\r\n\t\t\t\tlet len = Math.max(...txtWidth);\r\n\t\t\t\tif(len < 45) {\r\n\t\t\t\t\tlen = '45px';\r\n\t\t\t\t}\r\n\t\t\t\t//jQuery('#'+elem).prev().removeClass('h-imp');\r\n\t\t\t\tAH.select(AH.select('#'+elem).previousElementSibling,'css',{width:len + 'px'});\r\n\t\t\t\tAH.select(AH.select('#'+elem).previousElementSibling.nextSibling,'css',{width:len + 'px'});\r\n\t\t\t\tAH.select(AH.select('#'+elem).previousElementSibling,'removeClass','h-imp');\r\n\t\t\t}\r\n\t\t\tif(step_xml.smxml._fixed != 1) {\r\n\t\t\t\tvar timer = setTimeout(function() {\r\n\t\t\t\t\t//jQuery('#'+elem).prev().addClass('h-imp');\r\n\t\t\t\t\tAH.select(AH.select('#'+elem).previousElementSibling.nextSibling,'css',{width:globWith});\r\n\t\t\t\t\tAH.select(AH.select('#'+elem).previousElementSibling,'addClass','h-imp');\r\n\t\t\t\t \tclearTimeout(timer);\r\n\t\t\t\t},2000);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (uxml) {\r\n\t\t\t//jQuery('.edit_step').each(function(i, obj) {\r\n\t\t\tAH.selectAll('.edit_step').forEach(function(obj, i) {\t\t\r\n\t\t\t\t//if (jQuery(this).hasClass('mathquill')) {\r\n\t\t\t\t\tif (obj.classList.contains('mathquill')) {\t\t\r\n\t\t\t\t\t//jQuery('#'+elem).prevAll('.disable_div').removeClass('h');\t\r\n\t\t\t\t\tif((AH.select('#'+elem).previousElementSibling).classList.contains(\"disable_div\")) {\r\n\t\t\t\t\t\tAH.select(AH.select('#'+elem).previousElementSibling,'removeClass','h');\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t//} else if(jQuery(this).hasClass('answer_input')) {\r\n\t\t\t\t}\telse if(obj.classList.contains('answer_input')) {\t\t\r\n\t\t\t\t\t//jQuery(this).prop('disabled', 'disabled');\r\n\t\t\t\t\tobj.disabled = true;\r\n\t\t\t\t}\t\t\r\n\t\t\t\t//jQuery(this).addClass('data-check');\r\n\t\t\t\tobj.classList.add('data-check');\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction showAns(j, outer) {\r\n\t\tvar overall = 0;\r\n\t\tif (wrong_choice>0) {\r\n\t\t\tstate.classChange = state.itemArray.length-1; \r\n\t\t\tstate.isColor = false;\r\n\t\t\toverall = 0;\r\n\t\t\tif (j<=oldstep) {\r\n\t\t\t\tsmans[outer].overall = overall;\r\n\t\t\t} else {\r\n\t\t\t\tsmans[element_div].overall = overall;\r\n\t\t\t\toverAll();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tstate.classChange = state.itemArray.length-1; \r\n\t\t\tstate.isColor = true;\r\n\t\t\toverall = 1;\r\n\t\t\tif (j<=oldstep) {\r\n\t\t\t\tsmans[outer].overall = overall;\r\n\t\t\t} else {\r\n\t\t\t\tsmans[element_div].overall = overall;\r\n\t\t\t\tnextStep();\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (optionrem>1) {\r\n\t\t\tnextStep();\r\n\t\t}\r\n\t\tif (usans[element_div] &&  usans[element_id] != undefined) {\r\n\t\t\tusans[element_div].optry = optionrem;\r\n\t\t}\r\n\t\tvar timer = setTimeout(function() {\r\n\t\t\tstate.classChange = -1;\r\n\t\t\tclearTimeout(timer);\r\n\t\t}, 2500);\r\n\t}\r\n\r\n\tfunction showAnsMod(j, outer) {\r\n\t\tvar overall = 0;\r\n\t\tif (wrong_choice>0) {\r\n\t\t\toverall = 0;\r\n\t\t\tif (j<=oldstep) {\r\n\t\t\t\tsmans[outer].overall = overall;\r\n\t\t\t} else {\r\n\t\t\t\tsmans[element_div].overall = overall;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\toverall = 1;\r\n\t\t\tif (j<=oldstep) {\r\n\t\t\t\tsmans[outer].overall = overall;\r\n\t\t\t} else {\r\n\t\t\t\tsmans[element_div].overall = overall;\r\n\t\t\t}\r\n\t\t}\r\n\t\tnextStep();\r\n\t}\r\n\r\n\tfunction setReview() {\r\n\t\t\r\n\t\tisReview = true;\r\n\t\toverAll();\t\r\n\t\tyourAnswer();\r\n\t\t//jQuery('.fillintheblank').prop(\"disabled\", true);\r\n\t\tdocument.querySelectorAll('.fillintheblank').disabled = true;\r\n\t}\r\n\r\n\tfunction unsetReview() {\r\n\t\t\r\n\t\tisReview = false;\r\n\t\tstate.display = -1;\r\n\t\tstate.smController = ' h';\r\n\t\t\r\n\t\t//jQuery('.fillintheblank').removeClass('default-hover');\r\n\t\tAH.selectAll('.fillintheblank','removeClass','default-hover');\r\n\t\t//jQuery('.fillintheblank').prop(\"disabled\", false);\r\n\t\tAH.selectAll('.fillintheblank').disabled = false;\r\n\t\tstate.main_steps = false;\r\n\t\tstate.correct_answer = true;\r\n\t\t\r\n\t\t//jQuery('.remed_disable').css('display', 'none');\r\n\t\tAH.selectAll('.remed_disable','css',{display:'none'});\r\n\t\tif((step_xml.smxml.step[steps+1] == undefined && step_xml.smxml.step[steps]._attempt == \"1\") || (step_xml.smxml.step[steps+1] == undefined && step_xml.smxml.step[steps]._viewonly == \"1\")) {\r\n\t\t\tif (AH.selectAll('.edit_step').length == AH.selectAll('.data-check').length) {\r\n\t\t\t\tstate.hideNext =  true;\r\n\t\t\t} else {\r\n\t\t\t\tstate.hideNext = false;\r\n\t\t\t}\r\n\t\t} else {\t\t\t\r\n\t\t\tstate.hideNext = false;\r\n\t\t}\r\n\t\tif(window.inNative) {\r\n            window.getHeight && window.getHeight();\r\n        }\r\n\t}\r\n\r\n\tfunction correctAnswer() {\r\n\t\tstate.display = -1;\r\n\t\tAH.selectAll('.fillintheblank','addClass','default-hover');\r\n\r\n\t\t/// Manage correct answer position ////\r\n\t\t// AH.selectAll('.edit_step', 'hide');\r\n\t\t// AI.selectAll('.edit_step').forEach((_this)=>{\r\n\t\t// \t_this.style.display = 'none';\r\n\t\t// })\r\n\t\tsetTimeout(function(){\r\n\t\t\tAI.selectAll('.corr_div_correct').forEach((_this)=>{\r\n\t\t\t\t_this.style.position = \"absolute\";\r\n\t\t\t})\r\n\t\t},100);\r\n\t\t\r\n\t\tAH.selectAll('#text','removeClass','corr_div');\r\n\t\tAH.selectAll('#text','addClass','corr_div_correct');\r\n\t\tshowCorrect();\r\n\t\tstate.main_steps = true;\r\n\t\tstate.correct_answer = false;\r\n\t\r\n\t\tif(window.inNative) {\r\n\t\t\twindow.getHeight && window.getHeight();\r\n        }\r\n\t}\r\n\r\n\tfunction showCorrect() {\r\n\t\tlet show_ans = step_xml.smxml.step;\r\n\t\tshow_ans.map(function(item, index) {\r\n\t\t\tlet cdata_ans = item.__cdata;\t\r\n\t\t\tlet org_cdata = cdata_ans;\t\t\r\n\t\t\tcreatingInteractive('corr_ans', org_cdata, index);\r\n\t\t});\r\n\t}\r\n\r\n\tfunction yourAnswer() {\r\n\t\tstate.display = 1;\r\n\t\tstate.hideNext = true;\r\n\t\tstate.smController = '';\r\n\r\n\t\tsetTimeout(function(){\r\n\t\t\tAI.selectAll('.corr_div_correct').forEach((_this)=>{\r\n\t\t\t\t_this.style.position = \"relative\";\r\n\t\t\t})\r\n\t\t},100)\r\n\r\n\t\t// AI.selectAll('.edit_step').forEach((_this)=>{\r\n\t\t// \t\t_this.style.display = 'none';\r\n\t\t// })\r\n\r\n\t\t// if(new_xml.smxml._fixed === '1') {\r\n\t\t// \tAI.selectAll('.edit_step').forEach((_this)=>{\r\n\t\t// \t\t_this.style.display = 'none';\r\n\t\t// \t})\r\n\t\t// }\r\n\t\t\r\n\t\t//$('.fillintheblank').removeClass('default-hover');\r\n\r\n\t\t\r\n\t\tAH.selectAll(\".fillintheblank\",\"removeClass\",\"default-hover\");\r\n\t\t\r\n\t\tAH.selectAll('#text','addClass','corr_div');\r\n\t\tAH.selectAll('#text','removeClass','corr_div_correct');\r\n\r\n\t\tstate.main_steps = false;\r\n\t\tstate.correct_answer = true;\r\n\r\n\t\t// if(step_xml.smxml._fixed) {\r\n\t\t// \tAI.selectAll('.edit_step ','css',{display:'none'})\r\n\t\t// }\r\n\t\t\r\n\t\t//jQuery('.remed_disable').css('display', 'block');\r\n\t\tAH.selectAll('.remed_disable','css',{display:'block'});\r\n\t\tif(window.inNative) {\r\n\t\t\twindow.getHeight && window.getHeight();\r\n        }\r\n\t}\r\n\r\n\tfunction parseSteps(steps) {\r\n\t\tlet user_step = XMLToJSON(steps);\r\n\t\tif(flagxml) {\r\n\t\t\tlists = JSON.parse(user_step.smans.div._lists);\r\n\t\t}\r\n\t\toldstep = JSON.parse(user_step.smans.div._currStep);\r\n\t}\r\n\r\n\tfunction nextbtnAnswer() {\r\n\t\t\r\n\t\tlet current = `s${steps}`;\r\n\t\t//let textboxes = jQuery('#'+current).find('.edit_step');\r\n\t\tlet textboxes = AH.find('#'+current,'.edit_step','all');\r\n\t\ttextboxes.forEach(function(item,index) {\r\n\t\t\tif (item.classList.contains('mathquill')) {\r\n\t\t\t\tmathquillAns(item, false);\t\r\n\t\t\t} else {\r\n\t\t\t\t//let inp_id = jQuery(item).attr('id');\r\n\t\t\t\tlet inp_id = item.getAttribute('id');\r\n\t\t\t\t//let inp_val = jQuery(item).val();\r\n\t\t\t\tlet inp_val = item.value;\r\n\t\t\t\tusans = createAns(usans, inp_id, current, inp_val);\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (step_xml.smxml.step[steps]._attempt == 1) {\r\n\t\t\tcheckAns();\r\n\t\t} else { \r\n\t\t\tnextStep();\r\n\t\t\taddSticky();\r\n\t\t}\r\n\t}\r\n\r\n\t// AH.createLink('../clsSMFill/css/fillintheblank.css');\r\n\r\n\r\n\t\t//To handle review toggle\r\n\tfunction handleReview(mode, event) {\r\n\t\tif (mode == 'c') {\r\n\t\t\tcorrectAnswer();\r\n\t\t} else {\r\n\t\t\tyourAnswer();\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfunction createMathDiv(data, i, user_xml, index, org_cdata) {\r\n\t\tlet original_data = data;\r\n\t\tdata = data.replace(/%{|}%/g,\"\");\r\n\t\tdata = data.split(\"|\");\r\n\t\tdata[0] = data[0].replace(/user Response/g, '\\\\MathQuillMathField');\r\n\t\t// let split_data = addMathquill.split(\"##\");\r\n\t\tlet split_data = data[0].split(\"##\");\r\n\t\tlet random_key = Math.floor(Math.random() * split_data.length)\r\n\t\tlet random_option = split_data[random_key];\r\n\t\tlet userans = random_option.replace(/MathQuillMathField{(.*?)}/g,'MathQuillMathField{}');\r\n\t\tlet defaultans = 0;\r\n\t\tlet anskey = random_option;\r\n\t\tlet answer_element = anskey.replace(/\\\\MathQuillMathField/g,'');\r\n\t\tif (random_option.indexOf(\"\\MathQuillMathField\") > -1) {\r\n\t\t\tanskey = random_option;\r\n\t\t\tdefaultans = 1;\r\n\t\t}\t\r\n\t\tif(index != undefined) {\r\n\t\t\tmathQuill(userans, data, original_data, user_xml, i, random_key, defaultans, anskey, answer_element, index, org_cdata);\r\n\t\t} else {\r\n\t\t\tmathQuill(userans, data, original_data, user_xml, i, random_key, defaultans, anskey, answer_element);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfunction mathQuill(userans, data, original_data, user_xml, i, random_key, defaultans, anskey, answer_element, index, org_cdata) {\r\n\t\tlet corr_ans = data[0].trim();\r\n\t\tif (user_xml <= oldstep) {\r\n\t\t\tvar steps_counter = user_xml;\r\n\t\t} else {\r\n\t\t\tvar steps_counter = steps;\r\n\t\t}\r\n\t\tif(index != undefined) {\r\n\t\t\telement_id = \"s0\"+index+\"_t\"+i;\r\n\t\t\telement_div = \"s0\"+index;\r\n\t\t\tlet ans_id = \"m0\"+index+\"_t\"+i;\r\n\t\t\tlet matheq = '<span  id=\"'+element_id+'\" class=\"auto_height edit_step fillmathelement h-100 mathquill mq'+steps_counter+'\" userAnsSeq=\"'+random_key+'\" userans=\"'+userans+'\" anskey=\"'+anskey+'\" defaultans=\"'+defaultans+'\" mathtype=\"1\">'+'s'+'</span>';\r\n\t\t\tlet tag = '<span id=\"'+element_div+'\" class=\"text-center filter fillelement position-relative inline-block\"><span class=\"disable_div fh fwidth absolute h\"></span><span class=\"remed_disable fh fwidth absolute h\"></span><span  id=\"'+ans_id+'\" class=\"corr_div fillmathelement position-absolute h-100 mathquill mq'+steps_counter+'\" userAnsSeq=\"'+random_key+'\" anskey=\"'+anskey+'\" defaultans=\"'+defaultans+'\" mathtype=\"1\">'+answer_element+'</span>'+matheq+'</span>';\r\n\t\t\tlet cd_ans = org_cdata.replace(original_data, tag);\r\n\t\t\tanswer_array[index].__cdata = cd_ans;\r\n\t\t} else {\r\n\t\t\telement_id = \"s\"+steps_counter+\"_t\"+i;\r\n\t\t\telement_div = \"s\"+steps_counter;\r\n\t\t\tlet ans_id = \"m\"+steps_counter+\"_t\"+i;\r\n\t\t\tlet matheq = '<span  id=\"'+element_id+'\" class=\"auto_height edit_step fillmathelement h-100 mathquill mq'+steps_counter+'\" userAnsSeq=\"'+random_key+'\" userans=\"'+userans+'\" anskey=\"'+anskey+'\" defaultans=\"'+defaultans+'\" mathtype=\"1\">'+'s'+'</span>';\r\n\t\t\tlet tag = '<span id=\"'+element_div+'\" class=\"text-center filter fillelement position-relative inline-block\"><span class=\"disable_div fh fwidth absolute h\"></span><span class=\"remed_disable fh fwidth absolute h\"></span><span  id=\"'+ans_id+'\" class=\"corr_div h-imp fillmathelement h-100 mathquill mq'+steps_counter+'\" userAnsSeq=\"'+random_key+'\" anskey=\"'+anskey+'\" defaultans=\"'+defaultans+'\" mathtype=\"1\">'+answer_element+'</span>'+matheq+'</span>';\r\n\t\t\tcdata = cdata.replace(original_data, tag);\r\n\t\t\tsmans = createAns(smans, element_id, element_div, corr_ans);\r\n\t\t\tspecial_module.smans = smans;\r\n\t\t}\r\n\r\n\t\tlet time_interval = setInterval(function() { \r\n\t\t\tif (typeof MathQuill == \"function\" && window.jQuery) {\r\n\t\t\t\tclearInterval(time_interval);\r\n\t\t\t\tif(!MQ){\r\n\t\t\t\t\tMQ = MathQuill.getInterface(2);\r\n\t\t\t\t}\r\n\t\t\t\t//jQuery(\".mathquill.mq\"+steps_counter).each(function() {\r\n\t\t\t\tAH.selectAll(\".mathquill.mq\"+steps_counter).forEach((_this)=> {\r\n\t\t\t\t\t//let math_itemid  = jQuery(this).attr('id');\r\n\t\t\t\t\tlet math_itemid  = _this.getAttribute('id');\r\n\t\t\t\t\t//let defaultans = jQuery(this).attr('defaultans');\r\n\t\t\t\t\tlet defaultans = _this.getAttribute('defaultans');\r\n\t\t\t\t\tif (defaultans == 1) {\r\n\t\t\t\t\t\t//let latex = jQuery(this).attr('userans');\r\n\t\t\t\t\t\tlet latex = _this.getAttribute('userans');\r\n\t\t\t\t\t\t//jQuery('#'+math_itemid).text(latex);\r\n\t\t\t\t\t\tif(latex != null)\r\n\t\t\t\t\t\tAH.select('#'+math_itemid).innerText = latex\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//jQuery('#'+math_itemid).text(jQuery(this).attr('userans'));\r\n\t\t\t\t\t\tAH.select('#'+math_itemid).innerText = _this.getAttribute(\"userans\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tfill_math[math_itemid]  = MQ.StaticMath(document.getElementById(math_itemid));\r\n\t\t\t\t\t} catch(e) {\r\n\t\t\t\t\t\tconsole.log(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}.bind(this),100);\t\r\n\t}\r\n\r\n\tfunction mathquillAns(element, math_user) {\r\n\t\tlet innerfield = [];\r\n\t\tlet div_outer = jQuery(element).closest('div').find(\"span.fillelement\").attr('id');\r\n\t\tlet math_itemid = jQuery(element).attr('id');\r\n\t\tlet original_latex = jQuery(element).attr(\"userans\").trim();\r\n\t\tlet userans;\r\n\t\tif (math_user == \"math_user\") {\r\n\t\t\tuserans = original_latex; \r\n\t\t} else {;\r\n\t\t\tlet math_item = MQ.StaticMath(document.getElementById(math_itemid));\r\n\t\t\tfor (let i=0; i<= math_item.innerFields.length-1 ; i++) {\r\n\t\t\t\tinnerfield[i] = math_item.innerFields[i].latex();\r\n\t\t\t}\r\n\t\t\tlet new_math_field = original_latex;\r\n\t\t\t// let mathfield = original_latex.match(/\\\\MathQuillMathField(.*?)}*}{4,6}|\\\\MathQuillMathField(.*?)}*}{3,6}|\\\\MathQuillMathField(.*?)}*}{2,6}|\\\\MathQuillMathField(.*?)}*}{1,6}/g);\r\n\t\t\tlet mathfield = original_latex.match(/\\\\MathQuillMathField{(.*?)\\}/g);\r\n\t\t\tfor (let i in mathfield) {\r\n\t\t\t\tconst create_mathfield = '\\\\MathQuillMathField{'+innerfield[i]+'}';\r\n\t\t\t\t// const new_mathfield = mathfield[i].replace(/\\\\MathQuillMathField(.*?)}*}{4,6}|\\\\MathQuillMathField(.*?)}*}{3,6}|\\\\MathQuillMathField(.*?)}*}{2,6}|\\\\MathQuillMathField(.*?)}*}{1,6}/g , create_mathfield);\r\n\t\t\t\tconst new_mathfield = mathfield[i].replace(/\\\\MathQuillMathField{(.*?)\\}/g, create_mathfield);\r\n\t\t\t\tlet regex = mathfield[i];\r\n\t\t\t\tnew_math_field = new_math_field.replace(regex, new_mathfield);\r\n\t\t\t}\r\n\t\t\toriginal_latex = new_math_field;\r\n\t\t\tuserans = original_latex;\r\n\t\t}\r\n\r\n\t\tusans = createAns(usans, math_itemid, div_outer, userans);\r\n\t\tsetUserAns(usans);\r\n\t}\r\n\t\r\n\tafterUpdate(() => {\r\n\t\tAH.selectAll( `[data-mce-bogus=\"all\"]`, 'remove', 'remove');\r\n\t});\r\n</script>\r\n\r\n<main>\r\n\t{#if state.blank == false}\r\n\t\t\r\n\t\t<center>\r\n\t\t\t<ItemHelper \r\n\t\t\t\t\r\n\t\t\t\ton:setReview = {setReview}\r\n\t\t\t\ton:unsetReview = {unsetReview}\r\n\t\t\t\thandleReviewClick={handleReview}\r\n\t\t\t\treviewMode={isReview}\r\n\t\t\t\tcustomReviewMode={customIsReview}\r\n\t\t\t/>\r\n\t\t\t<div class={state.correct_answer ? '': 'h-imp'} style={\"width:\" + (AH.isValid(window.inNative) ? \"100%\" : \"700px\")}>\r\n\t\t\t\t\r\n\t\t\t\t{#each state.itemArray as item, index}\r\n\t\t\t\t\t\t<div data-sticky={isSticky(index)} class=\"bt-pd bg-white mt-3\" tabindex={0}> \t \t\r\n\t\t\t\t\t\t\t<div id={\"s\"+index} class={\"bg-white\"}>\r\n\t\t\t\t\t\t\t\t<div id={'data-block_'+index} class={\"main_item darkgrey_border secure-icon p-lg jqsfield spanlink_nav \" + ((state.display == 1 && special_module?.smans && special_module?.smans[\"s\"+index] != undefined && isReview) ? ((special_module?.smans[\"s\"+index].overall == 1) ? 'border_green': 'border_red') : '')} key={index}>\r\n\t\t\t\t\t\t\t\t\t<div seq={\"s\"+index}>{@html item.cdata}</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t{/each}\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t\t<div class={state.correct_answer ? 'h-imp': ''} style={\"width:\" + (AH.isValid(window.inNative) ? \"100%\" : \"700px\")}>\r\n\t\t\t\t{#each answer_array as item,index}\r\n\t\t\t\r\n\t\t\t\t\t\t<div data-sticky={isSticky(index)} class=\"bt-pd bg-white mt-3\"  tabindex={0}>\r\n\t\t\t\t\t\t\t<div id={\"s\"+index} class={\"bg-white \"}>\r\n\t\t\t\t\t\t\t\t<div id={'data-block_'+index} class={\"main_item darkgrey_border secure-icon p-lg jqsfield spanlink_nav \" + ((state.display == 1 && special_module?.smans && special_module.smans[\"s\"+index] != undefined && isReview) ? ((special_module.smans[\"s\"+index].overall == 1) ? 'border_green': 'border_red') : '')} key={index}>\r\n\t\t\t\t\t\t\t\t\t<div seq={\"s\"+index}>{@html item.__cdata}</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t\t{/each}\r\n\t\t\t</div>\r\n\r\n\t\t\t<FillInTheBlanksToolbar bind:display={state.showToolbar}  spanId={state.spanId} divId={state.divId} action={fill_math[fillId]} show={toggleToolbar}/>\r\n\r\n\t\t\t<div class={state.hideNext ? 'h-imp': null}>\r\n\t\t\t\t<button type=\"button\" style={'width:auto;font-size:15px;margin:15px 0;'} class=\"btn btn-sm btn-outline-primary imgcenter next_step px-md-5 px-sm-3\"  on:click={() => setTimeout(function(){moveNext()},100)} >{l.next}</button>\r\n\t\t\t</div>\r\n\t\t</center>\r\n\t{/if}\r\n</main>\r\n\r\n<style>\r\n\t:global(.darkgrey_border) {\r\n  \t  border: 1px solid #ccc!important;\r\n\t}\r\n\r\n\t:global(.p-lg) {\r\n  \t  padding: 15px;\r\n\t}\r\n\t:global(.true-hover) {\r\n\t\toutline: 0;\r\n\t\tborder: 2px solid #14ca14!important;\r\n\t}\r\n\r\n\t:global(.false-hover) {\r\n\t\toutline: 0;\r\n\t\tborder: 1px solid #e45252!important;\r\n\t}\r\n\r\n\t:global(.default-hover) {\r\n\t\tborder-color: transparent!important;\r\n\t\t-webkit-box-shadow: inset 0 1px 0px 0px rgba(0,0,0,.075), 0 0 1px rgba(2, 2, 2, 0.9)!important;\r\n\t\t-moz-box-shadow: inset 0 1px 0px 0px rgba(0,0,0,.075), 0 0 1px rgba(2, 2, 2, 0.9)!important;\r\n\t\tbox-shadow: inset 0 1px 0px 0px rgba(0,0,0,.075), 0 0 1px rgba(2, 2, 2, 0.9)!important;\r\n\t}\r\n\r\n\t:global(.blocked) {\r\n\t\tdisplay: block !important;\r\n\t}\r\n\r\n\t:global(.border_green) {\r\n\t\tborder: 3px solid green!important;\r\n\t}\r\n\r\n\t:global(.border_red) {\r\n\t\tborder: 3px solid red!important;\r\n\t}\r\n\r\n\t:global(.sticky) {\r\n\t\tz-index: 800;\r\n\t\tposition: sticky;\r\n\t\ttop: 0\r\n\t}\r\n\r\n\t:global(.corr_div) {\r\n\t\twidth: 38px;\r\n\t\tline-height: 30px;\r\n\t\tbackground-color: #21a81d;\r\n\t\tcolor: #ffffff;\r\n\t\tz-index: 1;\r\n\t\tdisplay: inline-block;\r\n\t\tvertical-align: middle;\r\n\t\tcursor: default;\r\n\t\tposition: absolute !important;\r\n\t}\r\n\r\n\t:global(.corr_div_correct) {\r\n\t\tposition: relative;\r\n\t\twidth: 38px;\r\n\t\tline-height: 30px;\r\n\t\tbackground-color: #21a81d;\r\n\t\tcolor: #ffffff;\r\n\t\tz-index: 1;\r\n\t\tdisplay: inline-block;\r\n\t\tvertical-align: middle;\r\n\t\tcursor: default;\r\n\t}\r\n\r\n\r\n\t:global([id^=\"fillmain\"]) {\r\n        overflow:hidden;\r\n        /*width:700px;  testing*/\r\n        text-align:left;\r\n    }\r\n    :global([id^=\"fillmain\"] pre) {\r\n        background: none;\r\n        border: none;\r\n        font-size: 14px!important;\r\n    }\r\n    :global([id^=\"fillmain\"] .string) {\r\n        min-height:50px;\r\n        margin-top:10px;\r\n        margin-right:10px;\r\n    }\r\n    :global([id^=\"fillmain\"] .footerstr) {\r\n        position:relative;\r\n        margin-top: 10px;\r\n        background-color: #ccc;\r\n        padding: 15px;\r\n        min-height: 60px;/*100px;*/\r\n    }\r\n    :global([id^=\"fillmain\"] .footerstr .arrow-up) {\r\n        position: absolute;\r\n        top: -10px;\r\n        right: 50%;\r\n        width: 0;\r\n        height: 0;\r\n        border-left: 10px solid transparent;\r\n        border-right: 10px solid transparent;\r\n        border-bottom: 10px solid #ccc;\r\n    }\r\n    :global([id^=\"fillmain\"] .fill-row) {\r\n        padding:6px;\r\n    }\r\n    :global(#fillmain .fillelement){\r\n        height:30px;\r\n        display:inline-block;\r\n        position:relative;\r\n        min-height: 30px;\r\n        margin: 1px;\r\n    }\r\n\t:global(#fillmain .drag-resize) {\r\n        height:30px;\r\n        display:inline-block;\r\n        position:relative;\r\n        min-height: 30px;\r\n        margin: 1px;\r\n    }\r\n    :global([id^=\"fillmain\"] input[type=\"text\"]) {\t\r\n        height:99%!important;\r\n        resize: none;\r\n        font-size:12px;\r\n        color: #000;\r\n        max-width: 800px;\r\n    }\r\n\t:global([id^=\"fillmain\"] select) {\t\r\n        height:99%!important;\r\n        resize: none;\r\n        font-size:12px;\r\n        color: #000;\r\n        max-width: 800px;\r\n    }\r\n    :global([id^=\"fillmain\"] .drag-resize) {\r\n        vertical-align:middle;\r\n        border:1px solid #31B731;\r\n        text-align:center;\r\n        padding:3px;\r\n        font-size: 14px;\r\n    }\r\n    :global([id^=\"fillmain\"] .drag-resize.ui-draggable) {\r\n        cursor:move;\r\n    }\r\n    :global([id^=\"fillmain\"] .drop-hover) {\r\n        border: 1px dashed red!important;\r\n        box-shadow: 0 0 0 2px yellow inset;\r\n        outline: 1px solid blue;\r\n    }\r\n    :global([id^=\"fillmain\"] .fillcheck ul) {\r\n        width:220px;\r\n    }\r\n    :global([id^=\"fillmain\"] .fillcheck li.selected) {\r\n        background-color: #E5E5E5;\r\n    }\r\n    :global(.fillcheck .selected .icomoon-checkmark-3:before) {\r\n        float: left;\r\n        color: blue;\r\n        padding: 3px;\r\n        position: relative;\r\n        right: 14px;\r\n    }\r\n    :global(.fillcheck .icomoon-close-2:before) {\r\n        float: left;\r\n        color: blue;\r\n        position: relative;\r\n        right: 14px;\r\n        font-size: 20px;\r\n    }\r\n    :global(.MathJax_Display) {\r\n            display : inline!important;\r\n    }\r\n    :global([id^=\"fillmain\"] .select) {\r\n        font-size: 15px;\r\n    }\r\n    :global([id^=\"fillmain\"] .textarea) {\r\n        vertical-align:middle;\r\n        border-radius:3px;\r\n        background:#ffe;\r\n        border: 1px solid #ccc;\r\n        -webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,0.075);\r\n        box-shadow: inset 0 1px 1px rgba(0,0,0,0.075);\r\n    }\r\n    :global(.ui-draggable-disabled) {\r\n        cursor: no-drop!important;\r\n        opacity: 0.5!important;\r\n    }\r\n\r\n</style>","<script>\r\n    import StepAlgoPreview from '../clsSMStepAlgo/StepAlgoPreview.svelte';\r\n\r\n    export let xml;\r\n    export let remedStatus;\r\n    export let showAns;\r\n    export let stopPreviewUpdate;\r\n    export let editorState;\r\n    export let content_icon;\r\n    export let isReview;\r\n    export let uxml;\r\n\r\n\r\n</script>\r\n\r\n<main>\r\n    {#if editorState?.content_icon == 2 ||  content_icon == 2}\r\n        <StepAlgoPreview xml = {xml} remedStatus = {remedStatus} showAns = {showAns} stopPreviewUpdate = {stopPreviewUpdate} isReview = {isReview} uxml={uxml}  />\r\n    {/if}\r\n</main>"],"names":["ALGO","mathtype","ctx","itemArray","length","spanId","divId","showToolbar","l","next","correct_answer","AH","isValid","window","inNative","hideNext","insert","append","cdata","display","smans","undefined","overall","__cdata","blank","createAns","obj","element_id","element_div","correctval","value","step_xml","usans","fill_math","answer_array","fillId","new_xml","MQ","resultNew","var_list","special_module","lists","oldstep","steps","wrong_choice","optionrem","flagxml","state","txtWidth","globWith","xml","stopPreviewUpdate","isReview","uxml","customIsReview","writable","classChange","isColor","smController","isMathquill","main_steps","your_answer","subscribe","items","setOutline","_element","nodeName","classList","contains","mathquillAns","inp_id","getAttribute","inp_div","closest","inp_val","setUserAns","inputFilled","i","key","ans_val","ans_arr","match","map","toString","replace","select","createStep","cuurentStep","item","MYXML","user_xml","smxml","step","creatingInteractive","push","index","answer_key","answer_type","forEach","data","org_cdata","originalKey","trim","createTextbox","createMathDiv","moveNext","QUIZPLAYERID","timer","setTimeout","parentElement","autoResize","clearTimeout","_attempt","_gonext","current","find","checkAns","nextStep","addSticky","nextbtnAnswer","selectAll","style","border","_seq","_this","previousElementSibling","disabled","add","overAll","console","log","user_ans","getHeight","cond","JSON","stringify","special","over","userAnswers","inNativeIsCorrect","check","checked","answer","postMessage","document","getElementsByClassName","offsetHeight","onUserAnsChange","uXml","ans","original_data","corr_ans","split","csStyle","indexOf","customStyle","anslen","j","textBox","textbox","Math","max","tag","cd_ans","steps_counter","prop","curr","inputHover","test","s_ans","u_ans","_mode","outer","showAnsMod","optry","showAns","option","elem","len","width","nextSibling","_fixed","setReview","yourAnswer","querySelectorAll","unsetReview","_viewonly","correctAnswer","AI","position","split_data","random_key","floor","random","random_option","userans","defaultans","anskey","answer_element","mathQuill","time_interval","setInterval","MathQuill","jQuery","clearInterval","getInterface","math_itemid","latex","innerText","StaticMath","getElementById","e","bind","this","element","math_user","innerfield","div_outer","attr","original_latex","math_item","innerFields","new_math_field","mathfield","create_mathfield","new_mathfield","regex","beforeUpdate","addScript","itemUrl","XMLToJSON","div","_userAns","user_step","parse","_lists","_currStep","parseSteps","action","actionData","algo","init","xml_str","replaceVariables","answer_arr_clone","slice","Object","assign","target","TypeError","arguments","source","prototype","hasOwnProperty","call","uans","user_answer","val","box_value","parseUserAns","loadModule","onMount","listen","previousSibling","set","in_editor","_e","fillid","span_math","is_fillid","latex_array","command_id","math_id","index_id","preventDefault","checkReview","self","afterUpdate","timer_next","_sticky","mode","event","algostr","genereted_str","util","generateVariables","swal","html","title","text","type","regex_mathtype","fnName","err","xml_arr","substr","math","min","fix_decimal","val_eval","matches","exec","parseInt","f","parseFloat","string","regExp_arth","regExp_semicolon","expression","iscartesian","isNaN","t","testing","eval","str","k","latex_str","re","RegExp","randObj","description","param","use","object","randInt","agrlength","toFixed","randFloat","ucSqrt","sqrt","ucPow","pow","content_icon","remedStatus","editorState"],"mappings":"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"}