import{G as t,N as e,S as s,i as l,s as a,F as n,e as r,j as o,$ as c,f as d,g as u,h as f,l as h,r as m,o as p,H as g,I as b,K as v,b as A,c as _,u as k,m as w,x as y,M as x,t as I,a as L,d as C,y as T,p as q,A as M,E as $,X as S,R as H,D as E,W as j,O as D}from"./main-ac89e9fe.js";import{I as W}from"./ItemHelper-6d042fa0.js";import{h as O}from"./hotkeys.esm-4c49bce2.js";const z=new t,B={sinfo:!0,multimatch:0,ajax_eId:"#matchmain",is_valid_drop:!1};let U,P=[];B.removeUserAns=function(){z.find("#matchmain","#lines, .matchlist-delete",{action:"remove"}),z.selectAll("#matchmain div[data-userans]").forEach((t=>{t.setAttribute("data-userans","")}))},B.update_XMLValue=function(){B.xmlDom=z.select("#special_module_xml").value,B.multimatch=z.select("#matchType").value,z.select("#multimatch").checked&&(B.multimatch=1);let t=z.findChild(B.xmlDom,"matchlist");z.setAttr(t,{listheading1:z.select("#list1").value,listheading2:z.select("#list2").value,multimatch:B.multimatch}),t.innerHTML="<![CDATA[\n"+z.select("#matchList").value+"\n]]>",z.select("#special_module_xml","value",formatXml(B.xmlDom.xml?B.xmlDom.xml:(new XMLSerializer).serializeToString(B.xmlDom[0])))},B.remove_lines=function(t){z.select(t+" #remMatchLine","remove"),z.listen("body","click",".matchlist-delete",(e=>{let s={path:e.getAttribute("d"),base:e.getAttribute("base").split("_")};s.userans=z.find("#matchmain",`[id="${s.base[0]}"]`).getAttribute("data-userans").split(","),0!=s.userans.includes(s.base[1])&&s.userans.splice(s.userans.indexOf(s.base[1]),1),s.userans=s.userans.join(","),","==s.userans.substr(0,1)&&(s.userans=s.userans.substr(1,s.userans.length)),z.select(`[id="${s.base[0]}"]`,"attr",{"data-userans":s.userans}),s.path=s.path.substr(1,s.path.length).split("C"),s.l1=s.path[0].trim().replace(/ /g,",").split(","),s.l2=s.path[1].trim().replace(/ /g,",").split(","),s.index=parseInt(s.l1[s.l1.length-1])+"_"+(parseInt(s.l1[s.l1.length-2])-20)+","+parseInt(s.l2[s.l2.length-1])+"_"+(parseInt(s.l2[s.l2.length-2])+10)+","+e.getAttribute("base"),P.splice(P.indexOf(s.index),1),z.remove(`[base='${e.getAttribute("base")}']`),B.checkAns(P),setTimeout((function(){B.checkAns(t)}),200)}))},z.listen(document,"click",".donotshowdialo",(t=>{B.storeDoNotShow(user_guid,1==t.checked?"store":"remove")})),B.storeDoNotShow=function(t,e){let s=JSON.parse(localStorage.getItem("dontshowdialog"));"store"==e?(null==s&&(s={}),s[t]=1,localStorage.setItem("dontshowdialog",JSON.stringify(s))):"remove"==e&&null!=s&&(delete s[t],localStorage.setItem("dontshowdialog",JSON.stringify(s)))},B.chkDoNotShow=function(t){const e=JSON.parse(localStorage.getItem("dontshowdialog"));return null!=e&&t in e},B.showUserAns=function(t){let s=0;P=[],B.multimatch=z.select(t).getAttribute("multimatch"),B.showAns(t),B.dragOptionMatchlist={zIndex:100,cursorAt:{top:-10,left:-10},cursor:"default"},window.mlid=t,U=new e({onDragStart:t=>{B.is_valid_drop=!1;let e=t.target;s=parseInt(e.offsetTop+e.clientHeight/2)+"_"+parseInt(e.offsetLeft+e.offsetWidth)},onDrop:(e,l)=>{document.querySelectorAll(".list2").length>0?function(e,l){B.is_valid_drop=!0;let a,n=e.target,i="black";z.select("#main-page").length>0&&"bla"==z.select("#main-page").getAttribute("mode")&&(i="white"),n.style.position="relative",a=s+","+parseInt(n.offsetTop+n.clientHeight/2)+"_"+parseInt(n.offsetLeft)+","+l.getAttribute("id")+"_"+n.getAttribute("id"),0==P.includes(a)&&P.push(a);let r,o=l.getAttribute?.("data-userans")?l.getAttribute("data-userans").split(","):[];0==o.includes(n.getAttribute("id"))&&o.push(n.getAttribute("id")),o=o.join(","),","==o.substr(0,1)&&(o=o.substr(1,o.length)),l.setAttribute("data-userans",o);let c='<svg id="lines">';var d;P.forEach((function(t,e){e=t.split(","),t=e[1].split("_"),d=e[2],e=e[0].split("_"),r='<div class="matchlist-delete center-block" d="M'+parseInt(e[1])+","+e[0]+"C"+(parseInt(e[1])+88)+" ,"+e[0]+","+(parseInt(e[1])+88)+","+t[0]+","+(parseInt(t[1])-10)+","+t[0]+'" base="'+d+'" style="left:'+parseInt(e[1])+"px;top:"+(parseInt(e[0])-9)+'px">&times</div>',c+='<path fill="none" d="M'+(parseInt(e[1])+20)+","+(parseInt(e[0])-4)+"C"+(parseInt(e[1])+88)+" ,"+(parseInt(e[0])-4)+","+(parseInt(e[1])+88)+","+(parseInt(t[0])-4)+","+(parseInt(t[1])-10)+","+(parseInt(t[0])-3)+'"  base="'+d+'" stroke-width = "2" stroke="'+i+'"></path>',c+='<g transform="translate('+(parseInt(t[1])-11)+","+(parseInt(t[0])-9)+') rotate(0) scale(4) translate(0,0) scale(.3)" base="'+d+'"><g fill="'+i+'" stroke="none" ><path d="M 0 0 L 10 5 L 0 10 z" /></g></g>'})),c+="</svg>",z.insert(t,r,"afterbegin"),z.insert(t,c,"afterbegin"),B.remove_lines(t)}(e,l):document.querySelectorAll(".list3").length>0&&function(e,s){B.is_valid_drop=!0;const l=e.target;l.style.position="relative";var a=s.getAttribute("data-droped")?s.getAttriburte("data-droped"):s.getAttribute("id");l.setAttribute("data-droped",a),l.innerHTML=s.innerHTML,l.setAttribute("data-userans",a);let n=window.getComputedStyle(s);l.style.backgroundColor=n.getPropertyValue("background-color");var i=[];0==(i=s.getAttribute("data-userans").split(",")).includes(l.getAttribute("id"))&&i.push(a),","==(i=i.join(",")).substr(0,1)&&(i=i.substr(1,i.length)),s.setAttribute("data-userans",i),B.checkAns(t)}(e,l)},isValidDrag:t=>{console.log("isValidDrag"+t)}})},B.bindKeyup=function(t){t=t||B.ajax_eId,z.find(".row-fluid",".selmatch",{action:"removeClass",actionData:"selmatch"});let e=0,s="";function l(){z.find(t,".copiedclr","all").forEach((t=>{t.classList.remove("copiedclr")})),s="",e=0}function a(e){z.find(t,"."+e,"all").forEach((t=>{t.classList.add("ks")}))}function n(){!function(){const t=z.selectAll("#matchmain .ks").length;z.find(mlidVar,".ks:nth("+e+")").focus(),e==t-1?e=0:e++}()}function i(e){var s=!1;let l=z.find(t,"."+e,"all"),a=z.select(":focus");if(a.nodeName){let t=a.getAttribute("id");for(let e=0;e<l.length;e++)if(t==l[e].getAttribute("id")){s=!0;break}}return s}function r(t,e=1){if(t.id){let s=z.selectAll(".ks"),l=-1;for(let a=0;a<s.length;a++)if(t.id==s[a].id){l=e?a==s.length-1?0:a+1:0==a?s.length-1:a-1;break}-1!=l&&s[l].focus()}}"2"!=z.select(t).getAttribute("multimatch")?(a("list1"),a("list2")):(a("list3"),a("list4")),document.addEventListener("click",(()=>{i("list1")||i("list2")||i("list3")||i("list4")||l()})),document.querySelector(t).addEventListener("keydown",(()=>{"function"==typeof O&&O.setScope("matchlist")})),B.cleanTitle=function(){z.find(B.ajax_eId,".list1","all").forEach((t=>{t.removeAttribute("aria-label")}))},B.getTitle=function(t,e,s,l,a){return t&&(0==s&&(e+=a?a+" and Attached to ":"Attached to "),s>0&&(e+=" and "),l?(e+=t.textContent,e+="1"==t.getAttribute("as")?" is marked as correct":" is marked as incorrect"):e+=t.textContent),e},"function"==typeof O&&(O.unbind("down,up,left,right,alt+down,enter,delete,esc","matchlist"),O("down,up,left,right,alt+down,enter,delete,esc","matchlist",(function(e,a){switch(a.key){case"down":case"right":if(i("ks")){let t=z.select(".ks:focus"),s=z.selectAll(".ks")[z.selectAll(".ks").length-1];t.id==s.id?z.selectAll(".ks")[0].focus():r(t,1),e.preventDefault()}break;case"up":case"left":if(i("ks")){let t=z.select(".ks:focus"),s=z.selectAll(".ks")[0];t.id==s.id?z.selectAll(".ks")[z.selectAll(".ks").length].focus():r(focus_element,0),e.preventDefault()}break;case"alt+down":n();break;case"enter":e.preventDefault(),i("list1")||i("list4")?function(){let e=z.selectAll(t+" .ks:focus");z.find(t,".list1","all").forEach((t=>{t.classList.remove("copiedclr")})),z.find(t,".list4","all").forEach((t=>{t.classList.remove("copiedclr")})),s=e[0].id,e.className="copiedclr"}():i("list2")?function(){let e=z.find(t,".ks:focus");if(""!=s){let l=z.find(t,'[id="'+s+'"]'),a=0;a=parseInt(l.offsetTop+l.clientHeight/2)+"_"+parseInt(l.offsetLeft+l.offsetWidth);let n=z.clone(l);n.classList.add("clone"),z.setCss(n,{position:"absolute",top:l.offsetTop,left:l.offsetLeft,width:l.offsetWidth+20,height:l.clientHeight+15});let i="black";z.selectAll("#main-page").length>0&&"bla"==z.selectAll("#main-page").getAttribute("mode")&&(i="white"),e.style.position="relative";let r=a+","+parseInt(e.offsetTop+e.clientHeight/2)+"_"+parseInt(e.offsetLeft)+","+l.getAttribute("id")+"_"+e.getAttribute("id");0==P.includes(r)&&P.push(r);let o,c=[];if(c=l.getAttribute("data-userans").split(","),0==c.includes(e.getAttribute("id"))&&c.push(e.getAttribute("id")),c=c.join(","),","==c.substr(0,1)&&(c=c.substr(1,c.length)),l.setAttribute("data-userans",c),c.length>0){let t=c.split(","),e="";t.map(((t,s)=>{e=B.getTitle(z.select("#"+t),e,s)})),l.setAttribute("aria-label",e)}z.find(t,"#lines",{action:"remove"});let d,u='<svg id="lines">';P.forEach(((t,e)=>{e=t.split(","),t=e[1].split("_"),d=e[2],e=e[0].split("_"),o='<div class="matchlist-delete center-block" d="M'+(parseInt(e[1])+20)+","+e[0]+"C"+(parseInt(e[1])+88)+" ,"+e[0]+","+(parseInt(e[1])+88)+","+t[0]+","+(parseInt(t[1])-10)+","+t[0]+'" base="'+d+'" style="left:'+parseInt(e[1])+"px;top:"+(parseInt(e[0])-9)+'px">&times</div>',u+='<path fill="none" d="M'+(parseInt(e[1])+20)+","+(parseInt(e[0])-5)+"C"+(parseInt(e[1])+88)+" ,"+e[0]+","+(parseInt(e[1])+88)+","+t[0]+","+(parseInt(t[1])-10)+","+t[0]+'"  base="'+d+'" stroke-width = "2" stroke="'+i+'"></path>',u+='<path fill="none" d="M'+(parseInt(e[1])+20)+","+e[0]+"C"+(parseInt(e[1])+88)+" ,"+e[0]+","+(parseInt(e[1])+88)+","+t[0]+","+(parseInt(t[1])-10)+","+t[0]+'" marker-end="url(#triangle)" class="line" base="'+d+'" stroke-width = "50"></path>',u+='<g transform="translate('+(parseInt(t[1])-11)+","+(parseInt(t[0])-6)+') rotate(0) scale(4) translate(0,0) scale(.3)" base="'+d+'"><g fill="'+i+'" stroke="none" ><path d="M 0 0 L 10 5 L 0 10 z" /></g></g>'})),u+="</svg>",z.insert(t,o,"afterbegin"),z.insert(t,u,"afterbegin"),B.remove_lines(t),l.removeAttribute("style"),l.style.position="relative",z.remove(".clone"),l.classList.contains("ui-droppable"),B.checkAns(t),l.classList.remove("copiedclr"),s=""}}():i("list3")&&function(){var e=z.find(t,".ks:focus");if(""!=s){var l=z.find(t,'#[id="'+s+'"]');l.classList.remove("copiedclr"),e.style.position="relative";var a=l.getAttribute("data-droped")?l.getAttribute("data-droped"):l.getAttribute("id");e.setAttribute("data-droped",a),e.innerHtml=z.select(l).innerHtml,e.setAttribute("data-userans",a);let i=window.getComputedStyle(l);e.style.backgroundColor=i.getPropertyValue("background-color");var n=[];0==(n=l.getAttribute("data-userans").split(",")).includes(e.getAttribute("id"))&&n.push(a),","==(n=n.join(",")).substr(0,1)&&(n=n.substr(1,n.length)),l.setAttribute("data-userans",n),B.checkAns(t),l.classList.remove("copiedclr"),s=""}}();break;case"delete":e.preventDefault(),i("list1")?function(){var e=z.find(t,".ks:focus");if(e.classList.contains("ui-draggable")&&""!=e.getAttribute("data-userans")){var s=e.getAttribute("id")+"_"+e.getAttribute("data-userans").split(",")[0],l="";z.find(t,".matchlist-delete","all").forEach((t=>{if(t.getAttribute("base")==s)return l=t,!1}));var a=document.querySelector(l).getAttribute("d"),n=document.querySelector(l).getAttribute("base").split("_"),i=z.find(t,'[id="'+rem.base[0]+'"]').getAttribute("data-userans").split(",");0!=i.includes(n[1])&&i.splice(i.indexOf(n[1]),1),","==(i=i.join(",")).substr(0,1)&&(i=i.substr(1,i.length)),document.querySelector("#"+n[0]).setAttribute("data-userans",i),document.querySelector("#"+n[0]).setAttribute("aria-label","");var r=(a=a.substr(1,a.length).split("C"))[0].trim().replace(/ /g,",").split(","),o=a[1].trim().replace(/ /g,",").split(","),c=parseInt(r[r.length-1])+"_"+(parseInt(r[r.length-2])-20)+","+parseInt(o[o.length-1])+"_"+(parseInt(o[o.length-2])+10)+","+z.select(l).getAttribute("base");P.splice(P.indexOf(c),1);var d=document.querySelector(l).getAttribute("base");z.remove("[base='"+d+"']"),B.checkAns(t)}}():i("list3")&&function(){let e=0;var s=z.find(t,".ks:focus");e=parseInt(s.offsetTop+s.clientHeight/2)+"_"+parseInt(s.offsetLeft+s.offsetWidth),z.clone(s),s.classList.add("clone"),z.setCss(s,{position:"absolute",top:s.offsetTop,left:s.offsetLeft,width:s.offsetWidth+20,height:s.clientHeight+15}),s.removeAttribute("style"),s.style.position="relative",z.remove(".clone"),s.classList.contains("ui-droppable")&&(s.classList.remove("dropped"),s.innerHTML="Place Here",s.setAttribute("data-userans",""))}();break;case"esc":i("ks")&&(e.preventDefault(),l(),focusLast(),z.selectAll(".ks")[z.selectAll(".ks").length-1].blur())}})),O.setScope("matchlist"))},B.pollFunc=function(t,e,s){var l=(new Date).getTime();s=s||1e3,canPoll=!0,function a(){canPoll=(new Date).getTime()-l<=e,!t()&&canPoll&&setTimeout(a,s)}()},B.showAns=function(t){if(B.multimatch=document.querySelector(t).getAttribute("multimatch"),B.multimatch<2){var e='<svg id="lines">';B.f=0,z.selectAll(t+" .list1").forEach((s=>{if(""!=s.getAttribute("data-userans")){B.f=1;const l=parseInt(s.offsetTop+s.clientHeight/2),a=parseInt(s.offsetLeft+s.offsetWidth),n=top+"_"+a;e+='<marker id="triangle" viewBox="0 0 10 10" refX="0" refY="5" markerUnits="strokeWidth" markerWidth="6" markerHeight="5" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" /></marker>';const i=s.getAttribute("data-userans").split(",");for(let r=0;r<i.length;r++)if(""!=i[r]){const o=parseInt(z.find(t,"#"+i[r]).offsetTop+z.find(t,"#"+i[r]).clientHeight/2),c=parseInt(z.find(t,"#"+i[r]).offsetLeft),d=o+"_"+c,u='<div class="matchlist-delete center-block" d="M'+(parseInt(a)+20)+","+l+"C"+(parseInt(a)+88)+","+l+","+(parseInt(a)+88)+","+o+","+(parseInt(c)-10)+","+o+'" base="'+s.getAttribute("id")+"_"+z.find(t,"#"+i[r]).getAttribute("id")+'" style="left:'+parseInt(a)+"px;top:"+(l-9)+'px">&times</div>';e+='<path fill="none" d="M'+parseInt(a)+","+(l-5)+"C"+(parseInt(a)+88)+","+(parseInt(l)-4)+","+(parseInt(a)+88)+","+(parseInt(o)-4)+","+(parseInt(c)-10)+","+(parseInt(o)-4)+'" marker-end="url(#triangle)" class="line" base="'+s.getAttribute("id")+"_"+document.querySelector(t+" #"+i[r]).getAttribute("id")+'"></path>';const f=n+","+d+","+s.getAttribute("id")+"_"+z.select(t+" #"+i[r]).getAttribute("id");-1==f.includes(P)&&P.push(f),z.insert(t,u,"afterbegin")}}})),e+="</svg>",1==B.f&&z.insert(t,e,"afterbegin")}else B.showMultimatchAnswer(t,1)},B.checkAns=function(t){let e={},s=!0,l="",a="",n="",i=0,r="",o="",c=".list1",d=".list2";if(2==B.multimatch&&(c=".list3",d=".list4"),"#matchmain"==t){z.selectAll(t+" "+c).forEach((t=>{let e=t.getAttribute("data-correctans").split(",").sort().join(","),l=t.getAttribute("data-userans").split(",").sort().join(",");","==e.substr(0,1)&&(e=e.substr(1,e.length)),","==l.substr(0,1)&&(l=l.substr(1,l.length)),e!=l?s=!1:i++,a+=t.getAttribute("id")+",","undefined"!=typeof calculatePoint&&calculatePoint(z.select("#matchmain").getAttribute("totalcorrectans"),i),r+=t.getAttribute("data-originalseq")+","})),a=a.split(",");let u=a.filter(((t,e,s)=>s.lastIndexOf(t)==e));a=u.join(","),a=a.substr(0,a.length-1),r=r.substr(0,r.length-1),z.find(t,d,"all").forEach((e=>{var s="";z.find(t,c+`[data-userans*="${e.getAttribute("id")}"]`,"all").forEach((t=>{""!=t.getAttribute("data-userans")&&(s+=t.getAttribute("id")+"|")})),""!=(s=s.substr(0,s.length-1))&&(l+=e.getAttribute("id")+"["+s+"],"),n+=e.getAttribute("id")+",",o+=e.getAttribute("data-originalseq")+","})),n=n.substr(0,n.length-1),o=o.substr(0,o.length-1),l=l.substr(0,l.length-1);const f="<smans type='14'>\n\t<matchlist list1seq='"+a+"' list2seq='"+n+"' userans='"+l+"' originalseq1='"+r+"' originalseq2='"+o+"'></matchlist>\n</smans>";return e.u=f,e.ans=s,s?("undefined"!=typeof is_sm&&z.showmsg("Correct"),e):("undefined"!=typeof is_sm&&z.showmsg("Incorrect"),e)}},B.insertAtCaret=function(t,e){if(document.selection){t.focus(),document.selection.createRange().text=e}else if(t.selectionStart||0===t.selectionStart){let s=t.selectionStart,l=t.selectionEnd,a=t.scrollTop;t.value=t.value.substring(0,s)+e+t.value.substring(l,t.value.length),t.selectionStart=s+e.length,t.selectionEnd=s+e.length,t.scrollTop=a}else t.value+=e;t.focus()},B.showMultimatchAnswer=function(t,e){z.find(t," .list3","all").forEach((t=>{z.select(t,"removeClass","dropped"),t.innerHTML="Place here"})),z.find(t,".list3","all").forEach((e=>{if(e.getAttribute("data-userans").length>0){const s=e.getAttribute("data-userans").split(",");for(let l=0;l<s.length;l++)if(""!=s[l]){const a=z.find(t,"#"+s[l]).innerHTML;e.innerHTML=a,e.classList.add("dropped")}}}))},B.checkAnswerStatus=function(t,e,s){let l=s||"",a=e.getAttribute("data-correctans").split(",").sort().join(","),n=e.getAttribute("data-userans").split(",").sort().join(",");if(","==a.substr(0,1)&&(a=a.substr(1,a.length)),","==n.substr(0,1)&&(n=n.substr(1,n.length)),""!=l){const e=a.split(","),s=n.split(",");0!=e.includes(l)&&0==s.includes(l)&&(t=-1)}else a!=n&&(t=-1);return t},B.showAllCorrectAns=function(t){z.selectAll(t+" .list3").forEach((e=>{const s=e.getAttribute("data-correctans").split(",");for(let l=0;l<s.length;l++)if(""!=s[l]){const a=z.find(t,"#"+s[l]).innerHTML;e.innerHTML=a,z.select(e,"addClass","dropped")}}))},B.showAllAns=function(t){if(console.table("showAns"),z.remove("#lines"),z.remove(".correct_incorrect_icon"),B.multimatch=document.querySelector(t).getAttribute("multimatch"),B.multimatch<2){var e='<svg id="lines"><marker id="triangle" viewBox="0 0 10 10" refX="0" refY="5" markerUnits="strokeWidth" markerWidth="6" markerHeight="5" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" /></marker>';e+='<marker id="trngle" viewBox="0 0 10 10" refX="0" refY="5" markerUnits="strokeWidth" markerWidth="6" markerHeight="5" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" style="fill:#83C883"/></marker>',z.find(t,".list1","all").forEach((s=>{const l=s.offsetTop+s.clientHeight/2;var a=s.offsetLeft+s.offsetWidth,n=s.getAttribute("data-correctans").split(",");for(let s=0;s<n.length;s++)if(""!=n[s]){const i=z.find(t,"#"+n[s]).offsetTop+z.find(t,"#"+n[s]).clientHeight/2-5,r=z.find(t,"#"+n[s]).offsetLeft;e+='<path fill="none" d="M'+parseInt(a)+","+(parseInt(l)-5)+"C"+(parseInt(a)+83)+","+(parseInt(l)-5)+","+(parseInt(a)+83)+","+i+","+(parseInt(r)-10)+","+i+'" marker-end="url(#trngle)" class="correct"></path>'}if(s.getAttribute("data-userans").length>0){const n=s.getAttribute("data-userans").split(",");var i="";for(let r=0;r<n.length;r++)if(""!=n[r]){const o=z.find(t,"#"+n[r]).offsetTop+z.find(t,"#"+n[r]).clientHeight/2+5,c=z.find(t,"#"+n[r]).offsetLeft;e+='<path fill="none" d="M'+parseInt(a)+","+(parseInt(l)+5)+"C"+(parseInt(a)+93)+","+(parseInt(l)+5)+","+(parseInt(a)+93)+","+o+","+(parseInt(c)-10)+","+o+'" marker-end="url(#triangle)" class="line"></path>',i=B.getTitle(z.select("#"+n[r]),i,r,!0,s.textContent)}s.setAttribute("aria-label",i)}})),e+="</svg>",z.insert(t,e,"afterbegin");var s=".list2"}else B.showMultimatchAnswer(t),s=".list3";z.selectAll(t+" "+s).forEach((e=>{const s=e.getAttribute("id");var l=1;2==B.multimatch?l=B.checkAnswerStatus(l,e):z.selectAll(t+' .list1[data-correctans*="'+e.getAttribute("id")+'"]').forEach((t=>{l=B.checkAnswerStatus(l,t,s)}));const a=1==l?'<span class="icomoon-checkmark-circle" style="color:green;">':'<span class="icomoon-cancel-circle" style="color:red;">';e.setAttribute("mrel",e.getAttribute("id")),e.setAttribute("as",l),z.insert(e,'<span class="correct_incorrect_icon" style="position:absolute;width:19px;height:19px;right:-9px;top:-9px;background:white;border-radius:15px 12px 12px;font-size:21px;"> '+a+"</span>","beforeend")}))},B.resetMatch=function(){z.remove("#lines"),z.remove(".correct_incorrect_icon");let t='<svg id="lines"><marker id="triangle" viewBox="0 0 10 10" refX="0" refY="5" markerUnits="strokeWidth" markerWidth="6" markerHeight="5" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" /></marker>';return t+='<marker id="trngle" viewBox="0 0 10 10" refX="0" refY="5" markerUnits="strokeWidth" markerWidth="6" markerHeight="5" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" style="fill:#83C883"/></marker>','<svg id="lines"><marker id="triangle" viewBox="0 0 10 10" refX="0" refY="5" markerUnits="strokeWidth" markerWidth="6" markerHeight="5" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" /></marker><marker id="trngle" viewBox="0 0 10 10" refX="0" refY="5" markerUnits="strokeWidth" markerWidth="6" markerHeight="5" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" style="fill:#83C883"/></marker>'},B.showCorrect=function(t){let e=B.resetMatch();B.cleanTitle(),z.selectAll(t+" .list1").forEach((s=>{const l=s.offsetTop+s.clientHeight/2;let a=s.offsetLeft+s.offsetWidth,n=s.getAttribute("data-correctans").split(","),i="";for(let r=0;r<n.length;r++)if(""!=n[r]){const o=z.find(t,"#"+n[r]).offsetTop+z.find(t,"#"+n[r]).clientHeight/2-5,c=z.find(t,"#"+n[r]).offsetLeft;e+='<path fill="none" d="M'+parseInt(a)+","+(parseInt(l)-5)+"C"+(parseInt(a)+83)+","+(parseInt(l)-5)+","+(parseInt(a)+83)+","+o+","+(parseInt(c)-10)+","+o+'" marker-end="url(#trngle)" class="correct"></path>',i=B.getTitle(z.select("#"+n[r]),i,r,s.textContent)}s.setAttribute("aria-label",i)})),e+="</svg>",z.insert(t,e,"afterbegin")},B.showYour=function(t){B.cleanTitle();let e=B.resetMatch();z.find(t,".list1","all").forEach((s=>{const l=s.offsetTop+s.clientHeight/2;let a=s.offsetLeft+s.offsetWidth;if(s.getAttribute("data-userans").length>0){const n=s.getAttribute("data-userans").split(",");let i="";for(let r=0;r<n.length;r++)if(""!=n[r]){const o=z.find(t,"#"+n[r]).offsetTop+z.find(t,"#"+n[r]).clientHeight/2+5,c=z.find(t,"#"+n[r]).offsetLeft;e+='<path fill="none" d="M'+parseInt(a)+","+(parseInt(l)+5)+"C"+(parseInt(a)+93)+","+(parseInt(l)+5)+","+(parseInt(a)+93)+","+o+","+(parseInt(c)-10)+","+o+'" marker-end="url(#triangle)" class="line"></path>',i=B.getTitle(z.select("#"+n[r]),i,r,!0,s.textContent)}s.setAttribute("aria-label",i)}})),e+="</svg>",z.insert(t,e,"afterbegin");z.find(t,".list2","all").forEach((e=>{const s=e.getAttribute("id");let l=1;z.find(t,'.list1[data-correctans*="'+e.getAttribute("id")+'"]',"all").forEach((t=>{l=B.checkAnswerStatus(l,t,s)}));const a=1==l?'<span class="icomoon-checkmark-circle" style="color:green;">':'<span class="icomoon-cancel-circle" style="color:red;">';e.setAttribute("mrel",e.getAttribute("id")),e.setAttribute("as",l),z.insert(e,'<span class="correct_incorrect_icon" style="position:absolute;width:19px;height:19px;right:-9px;top:-9px;background:white;border-radius:15px 12px 12px;font-size:21px;"> '+a+"</span>","afterbegin")}))},B.showAll=function(){B.showAllAns(B.ajax_eId)},B.labBinded=!0,B.modeOn=function(t){z.selectAll(".test","addClass","h"),z.find(B.ajax_eId,".review_2, .review_default",{action:"addClass",actionData:"h"}),t?(z.selectAll(".review","removeClass","h"),setTimeout((function(){"function"==typeof O&&O.unbind("down,up,left,right,alt+down,enter,delete,esc","matchlist"),z.selectAll(B.ajax_eId+"  .selmatch","removeClass","selmatch"),B.unBindLab(),B.showAllAns(B.ajax_eId),z.selectAll(B.ajax_eId+" #sm_controller button").forEach((t=>{t.classList.contains("your-ans btn-primary")?B.showAllAns(B.ajax_eId):t.classList.contains("correct-ans btn-primary")&&B.showAllCorrectAns(B.ajax_eId)})),z.find(B.ajax_eId,"#sm_controller_default button","all").forEach((t=>{t.classList.contains("your-ans btn-primary")?B.showYour(B.ajax_eId):t.classList.contains("correct-ans btn-primary")?B.showCorrect(B.ajax_eId):t.classList.contains("both-ans btn-primary")&&B.showAll(B.ajax_eId)}))}),50)):(z.selectAll(".review","addClass","h"),z.selectAll(".test","removeClass","h"),setTimeout((function(){B.bindLab(),B.bindKeyup(B.ajax_eId),B.showUserAns(B.ajax_eId),B.remove_lines(B.ajax_eId),B.cleanTitle()}),50))},B.unBindLab=function(){B.labBinded=!1,z.find(B.ajax_eId,"#lines, .matchlist-delete",{action:"remove"})},B.modifyClass=function(t,e){z.find(B.ajax_eId,"#sm_controller button, #sm_controller_default button","all"),t.classList.add("btn-primary"),t.classList.remove("btn-light")},B.bindLab=function(){B.labBinded=!0,z.find(B.ajax_eId,"#lines,.correct,.lines,.correct_incorrect_icon",{action:"remove"})},B.editor_validtion=function(t){if(1==t||2==t||3==t){const t=document.getElementById("#list1").value,e=document.getElementById("#list2").value,s=document.getElementById("#matchList").value;return""!=t&&""!=e&&""!=s||(z.showmsg("Please Fill The Heading of Lists and Question",1),!1)}};const{document:N}=n;function X(t,e,s){const l=t.slice();return l[50]=e[s],l[52]=s,l}function Y(t,e,s){const l=t.slice();return l[50]=e[s],l[52]=s,l}function R(t,e,s){const l=t.slice();return l[50]=e[s],l[52]=s,l}function V(t,e,s){const l=t.slice();return l[50]=e[s],l[52]=s,l}function J(t){let e,s,l;return{c(){e=r("div"),e.textContent=""+c.shuffle,d(e,"id","shuffleArea"),d(e,"class","shuffle text-center svelte-bi3u6x"),u(e,"font-size","17px"),u(e,"cursor","pointer"),u(e,"display","none"),u(e,"color","#aaa")},m(a,n){f(a,e,n),s||(l=h(e,"click",t[14]),s=!0)},p:m,d(t){t&&p(e),s=!1,l()}}}function K(t){let e,s,l,a=t[6],n=[];for(let e=0;e<a.length;e+=1)n[e]=G(Y(t,a,e));let i=t[7],c=[];for(let e=0;e<i.length;e+=1)c[e]=Q(X(t,i,e));return{c(){e=r("div");for(let t=0;t<n.length;t+=1)n[t].c();s=A(),l=r("div");for(let t=0;t<c.length;t+=1)c[t].c();d(l,"class","row-fluid match_options shuffleList2"),d(e,"class","row-fluid shuffleList1")},m(t,a){f(t,e,a);for(let t=0;t<n.length;t+=1)n[t].m(e,null);o(e,s),o(e,l);for(let t=0;t<c.length;t+=1)c[t].m(l,null)},p(t,r){if(32832&r[0]){let l;for(a=t[6],l=0;l<a.length;l+=1){const i=Y(t,a,l);n[l]?n[l].p(i,r):(n[l]=G(i),n[l].c(),n[l].m(e,s))}for(;l<n.length;l+=1)n[l].d(1);n.length=a.length}if(67712&r[0]){let e;for(i=t[7],e=0;e<i.length;e+=1){const s=X(t,i,e);c[e]?c[e].p(s,r):(c[e]=Q(s),c[e].c(),c[e].m(l,null))}for(;e<c.length;e+=1)c[e].d(1);c.length=i.length}},d(t){t&&p(e),E(n,t),E(c,t)}}}function F(t){let e,s,l,a,n,i,c=t[6],u=[];for(let e=0;e<c.length;e+=1)u[e]=Z(V(t,c,e));let h=t[7],m=[];for(let e=0;e<h.length;e+=1)m[e]=tt(R(t,h,e));return{c(){e=r("div"),s=r("div");for(let t=0;t<u.length;t+=1)u[t].c();l=A(),a=r("div"),n=A(),i=r("div");for(let t=0;t<m.length;t+=1)m[t].c();d(s,"class","span4 shuffleList1"),d(s,"dragable","1"),d(a,"class","span3"),d(i,"class","span4 shuffleList2"),d(e,"class","row-fluid")},m(t,r){f(t,e,r),o(e,s);for(let t=0;t<u.length;t+=1)u[t].m(s,null);o(e,l),o(e,a),o(e,n),o(e,i);for(let t=0;t<m.length;t+=1)m[t].m(i,null)},p(t,e){if(32832&e[0]){let l;for(c=t[6],l=0;l<c.length;l+=1){const a=V(t,c,l);u[l]?u[l].p(a,e):(u[l]=Z(a),u[l].c(),u[l].m(s,null))}for(;l<u.length;l+=1)u[l].d(1);u.length=c.length}if(67712&e[0]){let s;for(h=t[7],s=0;s<h.length;s+=1){const l=R(t,h,s);m[s]?m[s].p(l,e):(m[s]=tt(l),m[s].c(),m[s].m(i,null))}for(;s<m.length;s+=1)m[s].d(1);m.length=h.length}},d(t){t&&p(e),E(u,t),E(m,t)}}}function G(t){let e,s,l,a,n,i,c,u,h,m,g,b,v,_,w,y,x,I,L,C,T,q,M=t[15](t[50],t[52])+"";return{c(){e=r("div"),s=r("span"),l=r("div"),u=A(),h=r("span"),m=r("div"),b=A(),v=r("span"),_=r("div"),w=k("Place Here"),d(l,"id",a=t[50].id),d(l,"class","list1"),d(l,"tabindex","0"),d(l,"data-correctans",n=t[50].correctans),d(l,"data-userans",i=t[50].userans),d(l,"data-originalseq",c=t[50].originalseq?t[50].originalseq:"0"),d(s,"class","span4"),d(m,"id",g=t[50].id),d(m,"class","arrow"),d(h,"class","span3"),d(_,"id",y=t[50].id),d(_,"class","list3 ui-droppable"),d(_,"data-droped",""),d(_,"data-correctans",x=t[50].correctans),d(_,"data-userans",I=t[50].userans),d(_,"mrel",L=t[50].id),d(_,"dropzone","1"),d(_,"draggable","true"),d(_,"tabindex","0"),d(_,"aria-label",C="Droped"),d(_,"data-originalseq",T=t[50].originalseq?t[50].originalseq:"0"),d(v,"class","span4"),d(e,"key",q=t[52]),d(e,"class","row-fluid")},m(t,a){f(t,e,a),o(e,s),o(s,l),l.innerHTML=M,o(e,u),o(e,h),o(h,m),o(e,b),o(e,v),o(v,_),o(_,w)},p(t,e){64&e[0]&&M!==(M=t[15](t[50],t[52])+"")&&(l.innerHTML=M),64&e[0]&&a!==(a=t[50].id)&&d(l,"id",a),64&e[0]&&n!==(n=t[50].correctans)&&d(l,"data-correctans",n),64&e[0]&&i!==(i=t[50].userans)&&d(l,"data-userans",i),64&e[0]&&c!==(c=t[50].originalseq?t[50].originalseq:"0")&&d(l,"data-originalseq",c),64&e[0]&&g!==(g=t[50].id)&&d(m,"id",g),64&e[0]&&y!==(y=t[50].id)&&d(_,"id",y),64&e[0]&&x!==(x=t[50].correctans)&&d(_,"data-correctans",x),64&e[0]&&I!==(I=t[50].userans)&&d(_,"data-userans",I),64&e[0]&&L!==(L=t[50].id)&&d(_,"mrel",L),64&e[0]&&T!==(T=t[50].originalseq?t[50].originalseq:"0")&&d(_,"data-originalseq",T)},d(t){t&&p(e)}}}function Q(t){let e,s,l,a,n,i,c=t[16](t[50],t[11][t[52]])+"";return{c(){e=r("div"),l=A(),s=new j(l),d(e,"key",a=t[52]),d(e,"id",n=t[50].id),d(e,"class","list4 ui-draggable"),d(e,"data-correctans",""),d(e,"dragable","1"),d(e,"draggable","true"),d(e,"data-userans",""),d(e,"tabindex","0"),d(e,"data-originalseq",i=t[50].originalseq?t[50].originalseq:"0")},m(t,a){f(t,e,a),s.m(c,e),o(e,l)},p(t,l){128&l[0]&&c!==(c=t[16](t[50],t[11][t[52]])+"")&&s.p(c),128&l[0]&&n!==(n=t[50].id)&&d(e,"id",n),128&l[0]&&i!==(i=t[50].originalseq?t[50].originalseq:"0")&&d(e,"data-originalseq",i)},d(t){t&&p(e)}}}function Z(t){let e,s,l,a,n,i,c,u,h,m=t[15](t[50],t[52])+"";return{c(){e=r("div"),l=A(),s=new j(l),d(e,"key",a=t[52]),d(e,"id",n=t[50].id),d(e,"class","list1 ui-draggable"),d(e,"data-correctans",i=t[50].correctans),d(e,"data-userans",c=t[50].userans),d(e,"style",u="position:relative;"),d(e,"tabindex","0"),d(e,"draggable","true"),d(e,"data-originalseq",h=t[50].originalseq?t[50].originalseq:"0")},m(t,a){f(t,e,a),s.m(m,e),o(e,l)},p(t,l){64&l[0]&&m!==(m=t[15](t[50],t[52])+"")&&s.p(m),64&l[0]&&n!==(n=t[50].id)&&d(e,"id",n),64&l[0]&&i!==(i=t[50].correctans)&&d(e,"data-correctans",i),64&l[0]&&c!==(c=t[50].userans)&&d(e,"data-userans",c),64&l[0]&&h!==(h=t[50].originalseq?t[50].originalseq:"0")&&d(e,"data-originalseq",h)},d(t){t&&p(e)}}}function tt(t){let e,s,l,a,n,i,c,u=t[16](t[50],t[11][t[52]])+"";return{c(){e=r("div"),l=A(),s=new j(l),d(e,"key",a=t[52]),d(e,"id",n=t[50].id),d(e,"class","list2 ui-droppable"),d(e,"data-correctans",""),d(e,"data-userans",""),d(e,"dropzone","1"),d(e,"style",i="position:relative;"),d(e,"tabindex","0"),d(e,"data-originalseq",c=t[50].originalseq?t[50].originalseq:"0")},m(t,a){f(t,e,a),s.m(u,e),o(e,l)},p(t,l){128&l[0]&&u!==(u=t[16](t[50],t[11][t[52]])+"")&&s.p(u),128&l[0]&&n!==(n=t[50].id)&&d(e,"id",n),128&l[0]&&c!==(c=t[50].originalseq?t[50].originalseq:"0")&&d(e,"data-originalseq",c)},d(t){t&&p(e)}}}function et(t){let e;return{c(){e=r("i"),e.innerHTML='<span class="u-sr-only svelte-bi3u6x">close</span>',d(e,"class","mi mi-close")},m(t,s){f(t,e,s)},d(t){t&&p(e)}}}function st(t){let e,s,l,a,n,i,c,h,m,g,b,v,k,y,x;return n=new D({props:{style:"position:relative;left:21px;bottom:6px;",$$slots:{default:[et]},$$scope:{ctx:t}}}),n.$on("click",t[28]),{c(){e=r("div"),s=r("div"),s.textContent="How to drop?",l=A(),a=r("div"),_(n.$$.fragment),i=A(),c=r("div"),h=r("div"),m=r("img"),b=A(),v=r("br"),k=A(),y=r("span"),y.innerHTML='<input type="checkbox" style="top:2px;" class="relative donotshowdialog" id="dropId"/> \n\t\t\t\t\t\t<label for="dropId">Do not show this dialog again</label>',d(s,"title","How to drop?"),d(s,"class","float-start"),d(a,"class","float-end"),u(e,"font-weight","bold"),d(e,"class","clearfix"),d(m,"alt","gif file"),m.src!==(g=M.select("#matchmain").getAttribute("path")+"match_drop_000BOG.gif")&&d(m,"src",g),d(y,"class","mt-2"),d(h,"class","row")},m(t,r){f(t,e,r),o(e,s),o(e,l),o(e,a),w(n,a,null),f(t,i,r),f(t,c,r),o(c,h),o(h,m),o(h,b),o(h,v),o(h,k),o(h,y),x=!0},p(t,e){const s={};33554432&e[1]&&(s.$$scope={dirty:e,ctx:t}),n.$set(s)},i(t){x||(I(n.$$.fragment,t),x=!0)},o(t){L(n.$$.fragment,t),x=!1},d(t){t&&p(e),C(n),t&&p(i),t&&p(c)}}}function lt(t){let e,s,l,a,n,i,c,m,q,M,$,S,H,E,j,D,O,z,B,U,P,N,X,Y,R,V,G,Q,Z,tt,et,lt,at,nt,it=t[1]&&J(t);function rt(t,e){return 0==t[5]||1==t[5]?F:K}c=new W({props:{handleReviewClick:t[17],reviewMode:t[0]}}),c.$on("setReview",t[12]),c.$on("unsetReview",t[13]);let ot=rt(t),ct=ot(t);function dt(e){t[29].call(null,e)}let ut={style:"width:450px;height:254px;",$$slots:{default:[st]},$$scope:{ctx:t}};return void 0!==t[10].dropDialog&&(ut.visible=t[10].dropDialog),tt=new g({props:ut}),b.push((()=>v(tt,"visible",dt))),{c(){e=r("main"),s=r("div"),l=r("center"),it&&it.c(),a=A(),n=r("div"),i=r("div"),_(c.$$.fragment),m=A(),q=r("div"),M=r("div"),$=r("button"),$.textContent="Correct Answer",S=A(),H=r("button"),H.textContent="Compare",E=A(),j=r("button"),j.textContent="Your Answer",O=A(),z=r("div"),B=r("div"),U=r("div"),P=k(t[3]),N=A(),X=r("div"),Y=A(),R=r("div"),V=r("div"),G=k(t[4]),Q=A(),ct.c(),Z=A(),_(tt.$$.fragment),d(i,"class","btn-group clearfix review_2 h"),d(i,"id","sm_controller"),d($,"type","button"),d($,"tabindex","0"),d($,"class","btn btn-light correct-ans"),d(H,"type","button"),d(H,"tabindex","0"),d(H,"class","btn btn-primary both-ans"),d(j,"type","button"),d(j,"tabindex","0"),d(j,"class","btn btn-light your-answer"),d(M,"class","btn-group clearfix review_default h"),d(M,"id","sm_controller_default"),d(q,"class",D=""),d(U,"class","heading"),d(B,"class","span4"),d(X,"class","span3"),d(V,"class","heading"),d(R,"class","span4"),d(z,"class","row-fluid"),d(n,"id",t[9]),d(n,"path","//s3.amazonaws.com/jigyaasa_content_static/"),d(n,"multimatch",t[5]),d(n,"totalcorrectans",t[8]),u(n,"font-family","Roboto, sans-serif"),u(n,"font-size","1em"),d(s,"id","previewSection"),d(s,"class","px-2")},m(r,d){f(r,e,d),o(e,s),o(s,l),it&&it.m(l,null),o(l,a),o(l,n),o(n,i),w(c,i,null),o(n,m),o(n,q),o(q,M),o(M,$),o(M,S),o(M,H),o(M,E),o(M,j),o(n,O),o(n,z),o(z,B),o(B,U),o(U,P),o(z,N),o(z,X),o(z,Y),o(z,R),o(R,V),o(V,G),o(n,Q),ct.m(n,null),o(e,Z),w(tt,e,null),lt=!0,at||(nt=[h($,"click",t[22]),h($,"keyup",t[23]),h(H,"click",t[24]),h(H,"keyup",t[25]),h(j,"click",t[26]),h(j,"keyup",t[27])],at=!0)},p(t,e){t[1]?it?it.p(t,e):(it=J(t),it.c(),it.m(l,a)):it&&(it.d(1),it=null);const s={};1&e[0]&&(s.reviewMode=t[0]),c.$set(s),(!lt||8&e[0])&&y(P,t[3]),(!lt||16&e[0])&&y(G,t[4]),ot===(ot=rt(t))&&ct?ct.p(t,e):(ct.d(1),ct=ot(t),ct&&(ct.c(),ct.m(n,null))),(!lt||512&e[0])&&d(n,"id",t[9]),(!lt||32&e[0])&&d(n,"multimatch",t[5]),(!lt||256&e[0])&&d(n,"totalcorrectans",t[8]);const i={};1024&e[0]|33554432&e[1]&&(i.$$scope={dirty:e,ctx:t}),!et&&1024&e[0]&&(et=!0,i.visible=t[10].dropDialog,x((()=>et=!1))),tt.$set(i)},i(t){lt||(I(c.$$.fragment,t),I(tt.$$.fragment,t),lt=!0)},o(t){L(c.$$.fragment,t),L(tt.$$.fragment,t),lt=!1},d(t){t&&p(e),it&&it.d(),C(c),ct.d(),C(tt),at=!1,T(nt)}}}function at(t){for(let e=t.length-1;e>0;e--){let s=Math.floor(Math.random()*(e+1)),l=t[e];t[e]=t[s],t[s]=l}return t}function nt(t,s,l){let{showAns:a}=s,{cmed:n}=s,{xml:r}=s,{isReview:o}=s,{uxml:c}=s,{editorState:d}=s,u="",f="",h="",m=[],p=[],g="",b=!1,v=0,A=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],_=!1,k=0,w=!1,y=1,x="",I="";B.sinfo=!0;let L,C,T,E=0,j=n?"matchmain"+n:"matchmain",D={xml:"",remedStatus:"",dropDialog:"",isReview:!1};function W(){let t=B.checkAns("#"+j);H({uXml:t.u,ans:t.ans}),d&&a(t.ans)}function O(){if(E>3)return!1;"function"==typeof hotkeys?setTimeout((function(){console.log("hotkey function is ","function"==typeof hotkeys),B.bindKeyup()}),1e3):(console.log("Hotkey try = ",E),E++,O())}function z(){if(l(0,o=!0),w=!0,W(),null!=document.querySelector("#shuffleAre")&&(document.querySelector("#shuffleAre").style.display="none"),B.modeOn("on"),1==h||0==h){M.find("#"+j,"#sm_controller").classList.add("h"),M.find("#"+j,"#sm_controller").style.display="none",M.find("#"+j,"#sm_controller_default").style.display="inline-block";var t=setTimeout((function(){M.find("#"+j,"#sm_controller_default .both-ans").click(),clearTimeout(t)}),50)}else{M.select("#"+j+" #sm_controller_default").classList.add("h"),M.find("#"+j,"#sm_controller_default").style.display="none",M.selectAll("#"+j+" #sm_controller").style.display="inline-block";var e=setTimeout((function(){AI.find("#"+j,"#sm_controller_default .your-ans").click(),clearTimeout(e)}),200)}}function U(){l(0,o=!1),M.addClass(".review_2, .review_default","h");let t=document.querySelectorAll(".review_2, .review_default");for(let e=0;e<t.length;e++)t[e].style.display="none";w=!1,1==b?M.select("#shuffleArea","css",{display:"none"}):M.select("#shuffleArea","css",{display:"block"}),B.modeOn()}function P(){try{!function(){c||B.removeUserAns();B.showUserAns("#"+j),B.remove_lines("#"+j),B.modeOn(),d&&function(){let t=S(c);if(c&&t.smans&&t.smans.matchlist&&t.smans.matchlist._userans){let t=S(c),e=t.smans.matchlist._list1seq.split(","),s=t.smans.matchlist._list2seq.split(",");x=t.smans.matchlist._originalseq1?t.smans.matchlist._originalseq1.split(","):"",I=t.smans.matchlist._originalseq2?t.smans.matchlist._originalseq2.split(","):"";let a=[];for(let t of e)for(let e in m)m[e].id==t&&a.push(m[e]);l(6,m=a);let n=[];for(let t of s)for(let e in p)p[e].id==t&&n.push(p[e]);if(l(7,p=n),t.smans.matchlist._userans){const e=t.smans.matchlist._userans.split(",");for(let t in e)for(let s in m){let a=e[t].split(/\[|\]/g)[1];a=a.split("|");for(let n in a)m[s].id==a[n]&&l(6,m[s].userans+=e[t].split(/\[|\]/g)[0]+",",m)}}}else at(m),at(p),B.removeUserAns();B.showUserAns("#"+j),B.remove_lines("#"+j),B.modeOn()}();if(o){M.find("#"+j,"#sm_controller_default .both-ans").click();var t=setTimeout((function(){w=!0,W(),M.select("#shuffleArea","css",{display:"none"}),B.modeOn("on"),1==h||0==h?(M.select("#"+j+" #sm_controller","addClass","h"),M.select("#"+j+" #sm_controller_default","removeClass","h")):(M.select("#"+j+" #sm_controller_default","addClass","h"),M.select("#"+j+" #sm_controller","removeClass","h")),clearTimeout(t)}),100)}else{let t=document.querySelectorAll(".review_2, .review_default");for(let e=0;e<t.length;e++)t[e].classList.add("h")}}()}catch(e){if(y<=100)var t=setTimeout((function(){P(),clearTimeout(t)}),50);else console.log("runModule14:Error"),console.log(e);y++}}q((()=>{!function(){let t={preload:!0,type:"stylesheet",as:"style"};M.createLink(baseUrlTheme+"clsSMMatchList/css/matchList.min.css",t),M.createLink("https://unpkg.com/mono-icons@1.0.5/iconfont/icons.css",t)}(),L=new e({onDragEnd:t=>{W(),console.log("onDragEnd"),B.is_valid_drop||B.sinfo&&(l(2,B.sinfo=!1,B),setTimeout((function(){l(2,B.sinfo=!0,B)}),6e4),"function"==typeof M.alert&&M.showmsg("While dropping a component, keep your mouse pointer on the drop area. Drop area must be compatible with the component you are dropping."),console.log("checking box"),1!=B.chkDoNotShow(user_guid)&&l(10,D.dropDialog=!0,D))}}),M.listen(document,"click","#set-review",(function(){z()})),M.listen(document,"click","#unset-review",(function(){U()})),setTimeout(function(){let t=M.select("#"+j+" img");M.listen(document,"load",t,(()=>{o?(1==h||0==h?(M.select("#"+j+" #sm_controller","addClass","h"),M.select("#"+j+" #sm_controller_default","removeClass","h")):(M.select("#"+j+" #sm_controller_default","addClass","h"),M.select("#"+j+" #sm_controller","removeClass","h")),U(),z()):(z(),U())}))}.bind(this),500),setTimeout((function(){O()}),1500)})),$((()=>{D.xml!=r&&(l(10,D.xml=r,D),n&&(l(9,j="matchmain"+n),l(2,B.ajax_eId="#matchmain"+n,B)),l(31,b=!1),M.select("#shuffleArea","css",{display:"block"}),function(t){try{if(l(6,m=[]),l(7,p=[]),l(3,u=t.smxml.matchlist._listheading1),l(4,f=t.smxml.matchlist._listheading2),l(5,h=t.smxml.matchlist._multimatch),g=t.smxml.matchlist.__cdata,_=!!t.smxml.matchlist._is_algo&&"true"==t.smxml.matchlist._is_algo,t.smxml.matchlist._max_node){var e=Number(t.smxml.matchlist._max_node);k=e>0?e:0}else k=0;g=g.split("\n");var s=0,a=1,n=!1,i=!1,r="";if(g.forEach((function(t,e){if(""!=g[e].trim()){l(8,v++,v);var o="";if(g[e].match(/\[(.*?)\]/g)){var c=g[e].match(/\[(.*?)\]/g)[0];c=(c=c.replace("[","").replace("]","")).split("|")}p.forEach((function(t,s){p[s].value==g[e].replace(g[e].match(/\[(.*?)\]/g),"").trim()&&(r=p[s].id,i=!0)})),1!=i?(p.push({id:A[s],correctans:"",value:g[e].replace(g[e].match(/\[(.*?)\]/g),"").trim()}),o=p[s].id):o=r,m.forEach((function(t,e){m[e].value==c&&(n=!0,l(6,m[e].correctans=1!=i?m[e].correctans+","+p[s].id:m[e].correctans+","+r,m))})),1!=n&&c.forEach((function(t,e){m.push({id:a,correctans:o,userans:"",value:c[e]}),a++})),n=!1,0==i&&s++,i=!1}})),k>0&&k<=m.length){l(6,m=at(m));for(var o=[],c=0;c<k;c++)o.push(m[c]);l(6,m=o),(o=[]).length=0;var d=0;for(c=0;c<m.length;c++)for(var b=m[c].correctans.split(","),w=0;w<b.length;w++)for(var y=0;y<p.length;y++)if(d=0,b[w]==p[y].id)if(o.length<=0)o.push(p[y]);else{for(var x=0;x<o.length;x++)if(b[w]==o[x].id){d=1;break}1!=d&&o.push(p[y])}l(7,p=o)}}catch(t){console.log({error:t,fun:"ParseXMLPreview",file:"MatchlistPreview.js"})}}(S(r)),P())}));return t.$$set=t=>{"showAns"in t&&l(18,a=t.showAns),"cmed"in t&&l(19,n=t.cmed),"xml"in t&&l(20,r=t.xml),"isReview"in t&&l(0,o=t.isReview),"uxml"in t&&l(21,c=t.uxml),"editorState"in t&&l(1,d=t.editorState)},t.$$.update=()=>{549&t.$$.dirty[0]|1&t.$$.dirty[1]&&(1==o?(console.log("review mode"),W(),M.select("#shuffleArea","hide"),B.modeOn("on"),1==h||0==h?(M.select(".both-ans").click(),M.select("#"+j+" #sm_controller","addClass","h"),M.select("#"+j+" #sm_controller_default","removeClass","h"),M.select("#"+j+" #sm_controller_default","css",{display:"inline-block"})):(M.select("#"+j+" #sm_controller_default","addClass","h"),M.select("#"+j+" #sm_controller","removeClass","h"),setTimeout((function(){document.getElementsByClassName("your-ans")[0].click()}),500))):(l(0,o=!1),M.select("#"+j+" #sm_controller_default","css",{display:"none"}),1==b?M.select("#shuffleArea","css",{display:"none"}):M.select("#shuffleArea","css",{display:"block"}),B.modeOn()))},[o,d,B,u,f,h,m,p,v,j,D,A,z,U,function(){console.log("Shuffled"),l(31,b=!0),B.removeUserAns(),B.showUserAns("#"+j),B.remove_lines("#"+j),B.modeOn(),l(6,m=at(m)),l(7,p=at(p)),M.select("#shuffleArea","css",{display:"none"})},function(t,e){if(1==_&&1!=w)if(x){var s=x[i];t.originalseq=s,t.value=t.value.split("%%")[s]}else t.value=function(e){console.log("arr arr");let s=Math.floor(Math.random()*e.length);return t.originalseq=s,e[s]}(t.value.split("%%"));let l=t.value.substr(1).split("##")[0].split("%%")[0],a=t.value.substr(1).split("##")[1]?t.value.substr(1).split("##")[1]:"";return C=`<span class="serial">${e+1}.</span>`+("*"==t.value.charAt(0)?`<img class="pe-none" src="//s3.amazonaws.com/jigyaasa_content_static/${l}" alt="${a}" />`:t.value),C},function(t,e){if(1==_&&1!=w)if(I){var s=I[i];data.originalseq=s,t.value=t.value.split("%%")[s]}else t.value=(l=t.value.split("%%"),a=Math.floor(Math.random()*l.length),t.originalseq=a,l[a]);var l,a;let n=t.value.substr(1).split("##")[0].split("%%")[0],r=t.value.substr(1).split("##")[1]?t.value.substr(1).split("##")[1]:"";return T=`<span class="serial">${e}.</span>`+("*"==t.value.charAt(0)?`<img class="pe-none" src="//s3.amazonaws.com/jigyaasa_content_static/${n}" alt="${r}" />`:t.value),T},function(t){"c"==t?B.showAllCorrectAns("#"+j):B.showAllAns("#"+j)},a,n,r,c,()=>B.showCorrect("#"+j),t=>{13==t.keyCode&&B.showCorrect("#"+j)},()=>B.showAll("#"+j),t=>{13==t.keyCode&&B.showAll("#"+j)},()=>B.showYour("#"+j),t=>{13==t.keyCode&&B.showYour("#"+j)},()=>{l(10,D.dropDialog=!1,D)},function(t){D.dropDialog=t,l(10,D)}]}export default class extends s{constructor(t){var e;super(),N.getElementById("svelte-bi3u6x-style")||((e=r("style")).id="svelte-bi3u6x-style",e.textContent=".u-sr-only.svelte-bi3u6x{position:absolute;left:-10000px;top:auto;width:1px;height:1px;overflow:hidden}@media(max-width:500px){.shuffle.svelte-bi3u6x{text-align:center}}",o(N.head,e)),l(this,t,nt,lt,a,{showAns:18,cmed:19,xml:20,isReview:0,uxml:21,editorState:1},[-1,-1])}}
//# sourceMappingURL=MatchListPreview-c7e4caa5.js.map
