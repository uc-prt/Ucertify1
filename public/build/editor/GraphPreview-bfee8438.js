import{G as JUI,C as l,S as SvelteComponent,i as init,s as safe_not_equal,F as append_styles,q as empty,h as insert,o as detach,e as element,b as space,c as create_component,u as text,f as attr,g as set_style,j as append,m as mount_component,l as listen,x as set_data,t as transition_in,a as transition_out,d as destroy_component,D as destroy_each,y as run_all,E as beforeUpdate,A as AH,a6 as afterUpdate,p as onMount,Z as onUserAnsChange,X as XMLToJSON,w as writable}from"./main-c5587fa4.js";import{I as ItemHelper}from"./ItemHelper-ecd6a2bb.js";const JS=new JUI;let GRAPH={},board,point,prevPoint,is_correct;function add_css(t){append_styles(t,"svelte-e5vip7","#graph_modal.svelte-e5vip7 .modal-body.svelte-e5vip7{max-height:350px}")}function get_each_context(t,e,a){const s=t.slice();return s[23]=e[a],s}function create_else_block_1(t){let e,a,s,i,o,r,n,l,c,d,p,u;return{c(){e=element("div"),attr(e,"id",a=t[1].QXML._id+"Preview"),attr(e,"data-userans",s=t[1].userAns_data),attr(e,"data-anskey",i=t[1].QXML._anskey),attr(e,"type",o=t[1].QXML._type),attr(e,"class",r="drag-resize dropable "+t[1].QXML._type),attr(e,"data-xtickdistance",n=t[1].QXML._xtickdistance),attr(e,"data-ytickdistance",l=t[1].QXML._ytickdistance),attr(e,"data-xaxis",c=t[1].QXML._xaxis),attr(e,"data-yaxis",d=t[1].QXML._yaxis),attr(e,"data-snapsize",p=t[1].QXML._snapsize),attr(e,"data-equation",u=t[1].QXML._equation),set_style(e,"height",t[1].QXML._height-40+"px"),set_style(e,"width",t[1].QXML._width+"px"),set_style(e,"border","1px solid #ccc")},m(t,a){insert(t,e,a)},p(t,f){2&f&&a!==(a=t[1].QXML._id+"Preview")&&attr(e,"id",a),2&f&&s!==(s=t[1].userAns_data)&&attr(e,"data-userans",s),2&f&&i!==(i=t[1].QXML._anskey)&&attr(e,"data-anskey",i),2&f&&o!==(o=t[1].QXML._type)&&attr(e,"type",o),2&f&&r!==(r="drag-resize dropable "+t[1].QXML._type)&&attr(e,"class",r),2&f&&n!==(n=t[1].QXML._xtickdistance)&&attr(e,"data-xtickdistance",n),2&f&&l!==(l=t[1].QXML._ytickdistance)&&attr(e,"data-ytickdistance",l),2&f&&c!==(c=t[1].QXML._xaxis)&&attr(e,"data-xaxis",c),2&f&&d!==(d=t[1].QXML._yaxis)&&attr(e,"data-yaxis",d),2&f&&p!==(p=t[1].QXML._snapsize)&&attr(e,"data-snapsize",p),2&f&&u!==(u=t[1].QXML._equation)&&attr(e,"data-equation",u),2&f&&set_style(e,"height",t[1].QXML._height-40+"px"),2&f&&set_style(e,"width",t[1].QXML._width+"px")},d(t){t&&detach(e)}}}function create_if_block_3(t){let e,a,s,i,o,r,n,l,c,d,p,u,f;return{c(){e=element("div"),attr(e,"id",a=t[1].QXML._id+"Preview"),attr(e,"data-userans",s=t[1].userAns_data),attr(e,"data-anskey",i=t[1].QXML._anskey),attr(e,"type",o=t[1].QXML._type),attr(e,"class",r="drag-resize dropable "+t[1].QXML._type),attr(e,"data-xtickdistance",n=t[1].QXML._xtickdistance),attr(e,"data-ytickdistance",l=t[1].QXML._ytickdistance),attr(e,"data-xaxis",c=t[1].QXML._xaxis),attr(e,"data-yaxis",d=t[1].QXML._yaxis),attr(e,"data-snapsize",p=t[1].QXML._snapsize),attr(e,"data-equation",u=t[1].QXML._equation),attr(e,"data-reflection",f=t[1].QXML._reflection),set_style(e,"height",t[1].QXML._height-40+"px"),set_style(e,"width",t[1].QXML._width+"px"),set_style(e,"border","1px solid #ccc")},m(t,a){insert(t,e,a)},p(t,b){2&b&&a!==(a=t[1].QXML._id+"Preview")&&attr(e,"id",a),2&b&&s!==(s=t[1].userAns_data)&&attr(e,"data-userans",s),2&b&&i!==(i=t[1].QXML._anskey)&&attr(e,"data-anskey",i),2&b&&o!==(o=t[1].QXML._type)&&attr(e,"type",o),2&b&&r!==(r="drag-resize dropable "+t[1].QXML._type)&&attr(e,"class",r),2&b&&n!==(n=t[1].QXML._xtickdistance)&&attr(e,"data-xtickdistance",n),2&b&&l!==(l=t[1].QXML._ytickdistance)&&attr(e,"data-ytickdistance",l),2&b&&c!==(c=t[1].QXML._xaxis)&&attr(e,"data-xaxis",c),2&b&&d!==(d=t[1].QXML._yaxis)&&attr(e,"data-yaxis",d),2&b&&p!==(p=t[1].QXML._snapsize)&&attr(e,"data-snapsize",p),2&b&&u!==(u=t[1].QXML._equation)&&attr(e,"data-equation",u),2&b&&f!==(f=t[1].QXML._reflection)&&attr(e,"data-reflection",f),2&b&&set_style(e,"height",t[1].QXML._height-40+"px"),2&b&&set_style(e,"width",t[1].QXML._width+"px")},d(t){t&&detach(e)}}}function create_else_block(t){let e,a,s,i,o,r,n,c,d,p,u,f,b,h,A,m,v,x,g,_,y,P,w,S,k,H,J,R,L=l.pointx1+"",G=l.pointy1+"",X=l.pointx2+"",C=l.pointy2+"";return{c(){e=element("div"),a=element("div"),s=element("label"),i=text(L),o=space(),r=element("input"),c=space(),d=element("label"),p=text(G),u=space(),f=element("input"),h=space(),A=element("label"),m=text(X),v=space(),x=element("input"),_=space(),y=element("label"),P=text(C),w=space(),S=element("input"),H=space(),attr(r,"type","number"),attr(r,"resetvalue","1"),attr(r,"class","point_x_1 getFieldVal form-control"),attr(r,"id","setAnsByKey"),attr(r,"placeholder",n=l.insert_numeric_data),attr(s,"class","text-body"),attr(f,"type","number"),attr(f,"resetvalue","1"),attr(f,"class","point_y_1 getFieldVal form-control"),attr(f,"id","setAnsByKey"),attr(f,"placeholder",b=l.insert_numeric_data),attr(d,"class","ml-2 text-body"),attr(x,"type","number"),attr(x,"resetvalue","1"),attr(x,"class","point_x_2 getFieldVal form-control"),attr(x,"id","setAnsByKey"),attr(x,"placeholder",g=l.insert_numeric_data),attr(A,"class","text-body"),attr(S,"type","number"),attr(S,"resetvalue","1"),attr(S,"class","point_y_2 getFieldVal form-control"),attr(S,"id","setAnsByKey"),attr(S,"placeholder",k=l.insert_numeric_data),attr(y,"class","ml-2 text-body"),attr(a,"class","col-12 text-center"),attr(e,"class","row mainDiv mt-4"),attr(e,"key",J="divAllTextBox"+t[23].index),attr(e,"id",R="divAllTextBox"+t[23].index)},m(t,n){insert(t,e,n),append(e,a),append(a,s),append(s,i),append(s,o),append(s,r),append(a,c),append(a,d),append(d,p),append(d,u),append(d,f),append(a,h),append(a,A),append(A,m),append(A,v),append(A,x),append(a,_),append(a,y),append(y,P),append(y,w),append(y,S),append(e,H)},p(t,a){2&a&&J!==(J="divAllTextBox"+t[23].index)&&attr(e,"key",J),2&a&&R!==(R="divAllTextBox"+t[23].index)&&attr(e,"id",R)},d(t){t&&detach(e)}}}function create_if_block_2(t){let e,a,s,i,o,r,n,c,d,p,u,f,b,h,A,m,v,x,g,_,y=l.pointx+(t[23].index+1)+"",P=l.pointy+(t[23].index+1)+"";return{c(){e=element("div"),a=element("div"),s=element("label"),i=text(y),o=space(),r=element("input"),p=space(),u=element("label"),f=text(P),b=space(),h=element("input"),x=space(),attr(r,"type","number"),attr(r,"resetvalue","1"),attr(r,"class","form-control getFieldVal"),attr(r,"name",n="point_"+t[23].index),attr(r,"id",c="x_"+t[23].index),attr(r,"placeholder",d=l.insert_numeric_data),attr(s,"class","text-body"),attr(h,"type","number"),attr(h,"resetvalue","1"),attr(h,"class","form-control getFieldVal"),attr(h,"name",A="point_"+t[23].index),attr(h,"id",m="y_"+t[23].index),attr(h,"placeholder",v=l.insert_numeric_data),attr(u,"class","ml-2 text-body"),attr(a,"class","col-12 text-center"),attr(e,"class","row mainDiv mt-2"),attr(e,"key",g="divAllTextBox"+t[23].index),attr(e,"id",_="divAllTextBox"+t[23].index)},m(t,n){insert(t,e,n),append(e,a),append(a,s),append(s,i),append(s,o),append(s,r),append(a,p),append(a,u),append(u,f),append(u,b),append(u,h),append(e,x)},p(t,a){2&a&&y!==(y=l.pointx+(t[23].index+1)+"")&&set_data(i,y),2&a&&n!==(n="point_"+t[23].index)&&attr(r,"name",n),2&a&&c!==(c="x_"+t[23].index)&&attr(r,"id",c),2&a&&P!==(P=l.pointy+(t[23].index+1)+"")&&set_data(f,P),2&a&&A!==(A="point_"+t[23].index)&&attr(h,"name",A),2&a&&m!==(m="y_"+t[23].index)&&attr(h,"id",m),2&a&&g!==(g="divAllTextBox"+t[23].index)&&attr(e,"key",g),2&a&&_!==(_="divAllTextBox"+t[23].index)&&attr(e,"id",_)},d(t){t&&detach(e)}}}function create_if_block_1(t){let e,a,s,i,o,r,n,c,d,p,u,f,b,h,A,m,v,x,g,_,y,P,w,S,k=l.pointx+(t[23].index+1)+"",H=l.pointy+(t[23].index+1)+"",J=l.pointx2+"";return{c(){e=element("div"),a=element("div"),s=element("span"),i=element("label"),o=text(k),r=space(),n=element("input"),d=space(),p=element("label"),u=text(H),f=space(),b=element("input"),A=space(),m=element("div"),v=element("label"),x=text(J),g=space(),_=element("input"),P=space(),attr(n,"type","number"),attr(n,"resetvalue","1"),attr(n,"class","association_x_point getFieldVal form-control"),attr(n,"placeholder",c=l.insert_numeric_data),attr(i,"class","ml-2 text-body"),attr(b,"type","number"),b.value="0.4",b.disabled="disabled",attr(b,"class","point_y_1 pe-none getFieldVal form-control"),attr(b,"placeholder",h=l.insert_numeric_data),attr(p,"class","ml-2 text-body"),attr(s,"class","text-justify"),attr(a,"class","col-12 text-center"),attr(_,"type","number"),attr(_,"resetvalue","1"),attr(_,"class","association_point getFieldVal form-control"),attr(_,"placeholder",y=l.insert_numeric_data),attr(v,"class","text-body"),attr(m,"class","col-12 text-center"),attr(e,"class","row mainDiv mt-2"),attr(e,"key",w="divAllTextBox"+t[23].index),attr(e,"id",S="divAllTextBox"+t[23].index)},m(t,l){insert(t,e,l),append(e,a),append(a,s),append(s,i),append(i,o),append(i,r),append(i,n),append(s,d),append(s,p),append(p,u),append(p,f),append(p,b),append(e,A),append(e,m),append(m,v),append(v,x),append(v,g),append(v,_),append(e,P)},p(t,a){2&a&&k!==(k=l.pointx+(t[23].index+1)+"")&&set_data(o,k),2&a&&H!==(H=l.pointy+(t[23].index+1)+"")&&set_data(u,H),2&a&&w!==(w="divAllTextBox"+t[23].index)&&attr(e,"key",w),2&a&&S!==(S="divAllTextBox"+t[23].index)&&attr(e,"id",S)},d(t){t&&detach(e)}}}function create_if_block(t){let e,a,s,i,o,r,n,c,d,p,u,f,b,h,A,m,v,x,g,_,y,P,w,S,k=l.pointx+(t[23].index+1)+"",H=l.pointy+(t[23].index+1)+"",J="Radius "+(t[23].index+1);return{c(){e=element("div"),a=element("div"),s=element("span"),i=element("label"),o=text(k),r=space(),n=element("input"),d=space(),p=element("label"),u=text(H),f=space(),b=element("input"),A=space(),m=element("div"),v=element("label"),x=text(J),g=space(),_=element("input"),P=space(),attr(n,"type","number"),attr(n,"resetvalue","1"),attr(n,"class","point_x_1 getFieldVal form-control "),attr(n,"id","setAnsByKey"),attr(n,"placeholder",c=l.insert_numeric_data),attr(i,"class","ml-2 text-body"),attr(b,"type","number"),attr(b,"resetvalue","1"),attr(b,"class","point_y_1 getFieldVal form-control"),attr(b,"placeholder",h=l.insert_numeric_data),attr(p,"class","ml-2 text-body"),attr(s,"class","text-justify"),attr(a,"class","col-12 text-center"),attr(_,"type","number"),attr(_,"resetvalue","1"),attr(_,"class","point_x_2 getFieldVal form-control"),attr(_,"placeholder",y=l.insert_numeric_data),attr(v,"class","text-body"),attr(m,"class","col-12 text-center"),attr(e,"class","row mainDiv mt-4"),attr(e,"key",w="divAllTextBox"+t[23].index),attr(e,"id",S="divAllTextBox"+t[23].index)},m(t,l){insert(t,e,l),append(e,a),append(a,s),append(s,i),append(i,o),append(i,r),append(i,n),append(s,d),append(s,p),append(p,u),append(p,f),append(p,b),append(e,A),append(e,m),append(m,v),append(v,x),append(v,g),append(v,_),append(e,P)},p(t,a){2&a&&k!==(k=l.pointx+(t[23].index+1)+"")&&set_data(o,k),2&a&&H!==(H=l.pointy+(t[23].index+1)+"")&&set_data(u,H),2&a&&J!==(J="Radius "+(t[23].index+1))&&set_data(x,J),2&a&&w!==(w="divAllTextBox"+t[23].index)&&attr(e,"key",w),2&a&&S!==(S="divAllTextBox"+t[23].index)&&attr(e,"id",S)},d(t){t&&detach(e)}}}function create_each_block(t){let e;function a(t,e){return"circle"==t[23].moduleType?create_if_block:"association"==t[23].moduleType?create_if_block_1:"point"==t[23].moduleType||"polygon"==t[23].moduleType?create_if_block_2:create_else_block}let s=a(t),i=s(t);return{c(){i.c(),e=empty()},m(t,a){i.m(t,a),insert(t,e,a)},p(t,o){s===(s=a(t))&&i?i.p(t,o):(i.d(1),i=s(t),i&&(i.c(),i.m(e.parentNode,e)))},d(t){i.d(t),t&&detach(e)}}}function create_fragment(t){let e,a,s,i,o,r,n,c,d,p,u,f,b,h,A,m,v,x,g,_,y,P,w,S,k,H,J,R,L,G,X,C,M,F,j,I,Q,T,q,E,B,O,D,Y,N,z,V,U,$,W,K,Z=t[1].QXML._type+"";function tt(t,e){return t[1].QXML._reflection?create_if_block_3:create_else_block_1}r=new ItemHelper({props:{reviewMode:t[0],handleReviewClick:t[6]}}),r.$on("setReview",t[4]),r.$on("unsetReview",t[5]);let et=tt(t),at=et(t),st=t[1].modalViewLayout,it=[];for(let e=0;e<st.length;e+=1)it[e]=create_each_block(get_each_context(t,st,e));return{c(){e=element("div"),a=element("link"),i=space(),o=element("center"),create_component(r.$$.fragment),n=space(),c=element("div"),d=element("div"),p=element("ul"),u=element("li"),f=text(Z),b=space(),h=element("button"),A=element("span"),x=space(),g=element("div"),_=element("button"),y=element("span"),k=space(),at.c(),H=space(),J=element("ul"),J.innerHTML='<li class="btn_active btn-point" rel="point" data-value="P"></li> \n            <li rel="segment" class="btn-segment" data-value="S"></li> \n            <li rel="segment_left_point_hollow" class="btn-SLH" data-value="SLH"></li> \n            <li rel="segment_right_point_hollow" class="btn-SRH" data-value="SRH"></li> \n            <li rel="segment_both_point_hollow" class="btn-SBH" data-value="SBH"></li> \n            <li rel="ray_left_direction" class="btn-RL" data-value="RL"></li> \n            <li rel="ray_right_direction" class="btn-RR" data-value="RR"></li> \n            <li rel="ray_left_direction_right_hollow" class="btn-RRH" data-value="RRH"></li> \n            <li rel="ray_right_direction_left_hollow" class="btn-RLH" data-value="RLH"></li>',R=space(),L=element("div"),G=element("div"),X=element("div"),C=element("div"),M=element("h5"),M.textContent=""+l.set_ans,F=space(),j=element("div"),I=element("div"),Q=element("div"),T=element("button"),T.textContent=""+l.add_point,q=space(),E=element("button"),E.textContent=""+l.del_row,B=space(),O=element("div"),D=element("div");for(let t=0;t<it.length;t+=1)it[t].c();Y=space(),N=element("div"),z=element("button"),z.textContent=""+l.cancel,V=space(),U=element("button"),U.textContent=""+l.ok_btn,attr(a,"onload","this.rel='stylesheet'"),attr(a,"rel","preload"),attr(a,"as","style"),attr(a,"href",s=itemUrl+"src/libs/Math.min.css"),u.value="plotgraph",attr(u,"class","selected-option text-uppercase m-0"),attr(p,"class","controls"),attr(A,"data-bs-toggle","tooltip"),attr(A,"title",m=l.ada_graph_msg),attr(A,"class","icomoon-keyboard-2 s2"),attr(h,"tabindex","0"),attr(h,"id","ADA_button"),attr(h,"class","ADAButton float-start mt-1 btn w-auto h-auto p-1 btn-light ml"),attr(h,"aria-label",v=l.ada_graph_msg),attr(y,"title",P=l.delete),attr(y,"data-bs-toggle","tooltip"),attr(y,"class",w="icomoon-new-24px-delete-1"),attr(_,"type","button"),attr(_,"class","btn btn-light p-1 focus_div"),attr(_,"id","delButton"),attr(_,"data-placement","right"),attr(_,"tabindex","0"),attr(_,"aria-label",S=l.ada_message),attr(g,"class","btn-group tools delElem h-imp"),attr(d,"id","option-toolbar"),attr(d,"class","text-dark"),attr(J,"class","footer_toolbox h"),attr(c,"id","mathmain"),attr(c,"class","userAns position-relative bg-white"),set_style(c,"height",Number(t[1].QXML._height)+2+"px"),set_style(c,"width",t[1].QXML._width+"px"),attr(M,"class","modal-title"),attr(T,"class","btn btn-light"),attr(T,"id","updateRow"),attr(E,"class","btn btn-light ml-1"),attr(E,"id","delete_btn"),attr(Q,"class","float-end"),attr(I,"class","col-12"),attr(j,"class","row"),attr(C,"class","modal-header"),attr(D,"class","row"),attr(O,"class","modal-body overflow-y svelte-e5vip7"),attr(z,"type","button"),attr(z,"class","btn btn-light"),attr(z,"data-bs-dismiss","modal"),attr(U,"type","button"),attr(U,"class","btn btn-secondary"),attr(N,"class","modal-footer"),attr(X,"class","modal-content"),attr(G,"class","modal-dialog modal-dialog-centered"),attr(L,"id","graph_modal"),attr(L,"class","modal fade svelte-e5vip7"),attr(L,"tabindex","-1")},m(s,l){insert(s,e,l),append(e,a),append(e,i),append(e,o),mount_component(r,o,null),append(o,n),append(o,c),append(c,d),append(d,p),append(p,u),append(u,f),append(d,b),append(d,h),append(h,A),append(d,x),append(d,g),append(g,_),append(_,y),append(c,k),at.m(c,null),append(c,H),append(c,J),append(e,R),append(e,L),append(L,G),append(G,X),append(X,C),append(C,M),append(C,F),append(C,j),append(j,I),append(I,Q),append(Q,T),append(Q,q),append(Q,E),append(X,B),append(X,O),append(O,D);for(let t=0;t<it.length;t+=1)it[t].m(D,null);append(X,Y),append(X,N),append(N,z),append(N,V),append(N,U),$=!0,W||(K=[listen(T,"click",t[11]),listen(E,"click",t[12]),listen(U,"click",t[2])],W=!0)},p(t,[e]){const a={};if(1&e&&(a.reviewMode=t[0]),r.$set(a),(!$||2&e)&&Z!==(Z=t[1].QXML._type+"")&&set_data(f,Z),et===(et=tt(t))&&at?at.p(t,e):(at.d(1),at=et(t),at&&(at.c(),at.m(c,H))),(!$||2&e)&&set_style(c,"height",Number(t[1].QXML._height)+2+"px"),(!$||2&e)&&set_style(c,"width",t[1].QXML._width+"px"),2&e){let a;for(st=t[1].modalViewLayout,a=0;a<st.length;a+=1){const s=get_each_context(t,st,a);it[a]?it[a].p(s,e):(it[a]=create_each_block(s),it[a].c(),it[a].m(D,null))}for(;a<it.length;a+=1)it[a].d(1);it.length=st.length}},i(t){$||(transition_in(r.$$.fragment,t),$=!0)},o(t){transition_out(r.$$.fragment,t),$=!1},d(t){t&&detach(e),destroy_component(r),at.d(),destroy_each(it,t),W=!1,run_all(K)}}}function instance(t,e,a){let{xml:s}=e,{uxml:i}=e,{isReview:o}=e,{showAns:r}=e,{editorState:n}=e,c={},d=writable({xml:"",QXML:"",userAns_data:"",moduleType:"none",noOfRow:1,review:!1,init:!1,open:!1,modalViewLayout:[],checked:!0});d.subscribe((t=>{a(1,c=t)}));function p(){"undefined"!=typeof JXG&&AH.select("#ID0Preview").nodeName&&AH.select("#ID0Preview").offsetHeight&&u()}function u(){GRAPH.readyThis("#mathmain"),GRAPH.showansdrag("#mathmain","u",1),GRAPH.modeOn()}function f(){let t=GRAPH.checkAns("#mathmain");"undefined"!=typeof is_sm&&AH.showmsg(t.ans?"Correct":"Incorrect",3e3),n&&r(t.ans?"Correct":"Incorrect"),onUserAnsChange(t)}function b(){AH.getBS("#graph_modal","Modal").show(),A(),AH.selectAll('[resetValue="1"]',"value","")}function h(t){"add"==t?a(1,c.noOfRow=c.noOfRow+1,c):"remove"==t&&(1==c.noOfRow?AH.alert("Default row can't be deleted"):a(1,c.noOfRow=c.noOfRow-1,c)),A()}function A(){let t=[];for(let e=0;e<c.noOfRow;e++)t=[...t,{moduleType:c.moduleType,index:e}];d.update((e=>(e.modalViewLayout=t,e)))}function m(){AH.selectAll("#mathmain #delButton.active","removeClass","active"),a(0,o=!0),GRAPH.modeOn("on"),GRAPH.showansdrag("#mathmain","u",1),f()}function v(){AH.selectAll("#mathmain #delButton.active","removeClass","active"),a(0,o=!1),GRAPH.modeOn(),GRAPH.showansdrag("#mathmain","u",0)}beforeUpdate((async()=>{c.init||("object"==typeof JXG&&n?a(1,c.init=!0,c):void 0===n&&AH.addScript("",itemUrl+"src/libs/jsxgraph.min.js",{callback(){a(1,c.init=!0,c)}})),n&&n.stopPreviewUpdate&&a(7,s=AH.select("#special_module_xml").value),c.init&&c.xml!=s&&function(t){e=t=XMLToJSON(t),d.update((t=>(t.QXML=e.smxml.plot,t.moduleType=e.smxml.plot._type,t)));var e;let a={};i&&(a=XMLToJSON(i),a&&a.smans&&a.smans.div&&a.smans.div._userAns&&d.update((t=>(t.userAns_data=a.smans.div._userAns,t))))}(s)})),afterUpdate((async()=>{c.init&&(c.xml!=s&&(n&&(a(1,c.noOfRow=1,c),AH.selectAll('[id^=divAllTextBox]:not([id="divAllTextBox0"])',"remove"),AI.selectAll(".getFieldVal:not(:disabled)","value",""),AH.find("#mathmain","[id^=ID]").setAttribute("data-userans","")),u(),d.update((t=>(t.xml=s,t))),o&&void 0===n&&m()),c.review!=o&&n&&(d.update((t=>(t.review=o,t))),o?(GRAPH.modeOn(1),f()):GRAPH.modeOn(0),AH.selectAll("#mathmain #delButton.active","removeClass","active")),c.checked&&void 0===r&&(GRAPH.checkAns("#mathmain"),a(1,c.checked=!1,c)),AH.enableBsAll('[data-bs-toggle="tooltip"]',"Tooltip"))})),onMount((async()=>{window.inNative&&window.getHeight&&window.getHeight(),AH.set("q_refresh",p),n||p(),AH.listen("body","keydown","#mathmain #delButton",(function(t,e){e.ctrlKey&&e.altKey&&(49==e.which||49==e.keyCode)&&b()})),AH.listen("body","keydown","#mathmain #ADA_button",(function(t,e){13==e.keyCode&&b()})),AH.listen("body","click","#mathmain",(function(t,e){"delButton"!=e.target.parentNode.id&&"ADA_button"!=e.target.id&&"delButton"!=e.target.id&&"ADA_button"!=e.target.parentNode.id&&"option-toolbar"!=e.target.id&&f()})),AH.listen("body","mouseup","#mathmain",(function(t,e){"delButton"!=e.target.parentNode.id&&"ADA_button"!=e.target.id&&"delButton"!=e.target.id&&"ADA_button"!=e.target.parentNode.id&&"option-toolbar"!=e.target.id&&f()})),AH.listen("body","click",".delElem",(function(t){let e=t.children[0];e.classList.toggle("active"),"point"==AH.select(".selected-option").innerHTML||"circle"==AH.select(".selected-option").innerHTML||"association"==AH.select(".selected-option").innerHTML?e.classList.contains("active")?(AH.alert(l.delete_msg),AH.find("#mathmain","#ID0Preview").style.cursor="pointer"):(AH.find("#mathmain","#ID0Preview").style.cursor="default",e.style.color="black"):e.classList.contains("active")&&(e.style.color="black",AH.alert(l.last_delete_msg),AH.setCss(t,{backgroundColor:"transparent",boxShadow:"none"}),AH.find("#mathmain","#ID0Preview").style.cursor="default")})),AH.listen("body","click","#mathmain .footer_toolbox li",(function(t){t.classList.add("btn_active"),AH.selectAll(AH.siblings(t),"removeClass","btn_active")}))}));return t.$$set=t=>{"xml"in t&&a(7,s=t.xml),"uxml"in t&&a(8,i=t.uxml),"isReview"in t&&a(0,o=t.isReview),"showAns"in t&&a(9,r=t.showAns),"editorState"in t&&a(10,n=t.editorState)},[o,c,function(){let t,e=[];switch(c.moduleType){case"circle":t=document.querySelectorAll(".mainDiv"),t.forEach((function(t){let a=document.querySelectorAll(`#${t.id} .getFieldVal`),s=[a[0].value+","+a[1].value+"/"+a[2].value];e.push(s)})),AH.find("#mathmain","[id^=ID]").setAttribute("data-userans",e.join("|")),v();break;case"point":case"polygon":t=document.querySelectorAll(".mainDiv"),t.forEach((function(t){let a=document.querySelectorAll(`#${t.id} .getFieldVal`),s=[a[0].value+","+a[1].value];e.push(s)})),AH.find("#mathmain","[id^=ID]").setAttribute("data-userans",e.join("|")),v();break;case"sine":case"cosine":case"line":case"ray":case"segment":case"vector":case"parabola":t=document.querySelectorAll(".mainDiv"),t.forEach((function(t){let a=document.querySelectorAll(`#${t.id} .getFieldVal`),s=[a[0].value+","+a[1].value+"|"+a[2].value+","+a[3].value];e.push(s)})),AH.find("#mathmain","[id^=ID]").setAttribute("data-userans",e.join("|")),v();break;case"association":t=document.querySelectorAll(".mainDiv"),t.forEach((function(t){let a=document.querySelectorAll(`#${t.id} .getFieldVal`),s=[a[0].value+","+a[1].value+","+a[2].value];e.push(s)})),AH.find("#mathmain","[id^=ID]").setAttribute("data-userans",e.join("|")),v()}f(),AH.getBS("#graph_modal","Modal").hide()},h,m,v,function(t){"c"==t?GRAPH.showansdrag("#mathmain","c",1):"u"==t&&GRAPH.showansdrag("#mathmain","u",1)},s,i,r,n,()=>{h("add")},()=>{h("remove")}]}GRAPH.userAnsXML="",GRAPH.sinfo=!1,GRAPH.ajax_eId="#mathmain",GRAPH.readyThis=function(t){GRAPH.plotgraphPreview(t)},GRAPH.initBoardPreview=function(t,e){JXG.Options.point.snapToGrid=!0,JXG.Options.point.snapSizeX=JS.select(e).getAttribute("data-xtickdistance"),JXG.Options.point.snapSizeY=JS.select(e).getAttribute("data-ytickdistance"),JXG.Options.point.showInfobox=!1;let a,s,i,o,r,n,l=JS.select(e).getAttribute("data-xaxis"),c=-l,d=JS.select(e).getAttribute("data-yaxis"),p=-d;for(let t in JXG.boards)JXG.boards[t].container.includes("Preview")&&JS.select(e).getAttribute("id")==JXG.boards[t].container&&JXG.JSXGraph.freeBoard(JXG.boards[t]);JS.find(t,".footer_toolbox").style.display="none",JS.find(t,".delElem").classList.remove("h-imp"),JS.select(e).classList.contains("association")?(a=JXG.JSXGraph.initBoard(JS.select(e).getAttribute("id"),{boundingbox:[c,3.4,l,-5.4],axis:!1,grid:!1,zoom:{factorX:1.25,factorY:1.25,wheel:!0,needshift:!0,eps:.1},showCopyright:!1,shownavigation:!1}),s=a.create("line",[[0,0],[1,0]],{firstArrow:!0,lastArrow:!0,strokecolor:"#3E3E3E",fillcolor:"#3E3E3E",fixed:!0}),a.axis=s,a.texts=[],a.create("ticks",[s,JS.select(e).getAttribute("data-xtickdistance")],{minorTicks:9,majorHeight:15,minorHeight:5,drawLabels:!0,label:{offset:[2,-10]},drawZero:!0}),JS.find(t,".delElem").classList.add("h-imp"),i=Math.abs(JS.select(e).getAttribute("data-xaxis"))+Math.abs(JS.select(e).getAttribute("data-xtickdistance")),o=JS.select(e).getAttribute("data-yaxis"),n=a.create("polygon",[[-i,-2.4],[-i,-5.4],[i,-5.4],[i,-2.4]],{fillcolor:"#ccc",highlightfillcolor:"#ccc",withLines:!1})):JS.select(e).classList.contains("plot")?(a=JXG.JSXGraph.initBoard(JS.select(e).getAttribute("id"),{boundingbox:[c,d,l,-1],axis:!1,grid:!1,zoom:{factorX:1.25,factorY:1.25,wheel:!0,needshift:!0,eps:.1},showCopyright:!1,shownavigation:!1}),s=a.create("line",[[0,0],[1,0]],{firstArrow:!0,lastArrow:!0,strokecolor:"#3E3E3E",fillcolor:"#3E3E3E",fixed:!0}),a.create("ticks",[s,JS.select(e).getAttribute("data-xtickdistance")],{minorTicks:0,majorHeight:15,minorHeight:5,drawLabels:!0,label:{offset:[-6,-16]},drawZero:!0}),a.xmax=l,JS.find(t,".delElem").classList.add("h-imp"),JS.find(t,".footer_toolbox").style.display="block"):(a=JXG.JSXGraph.initBoard(JS.select(e).getAttribute("id"),{boundingbox:[c,d,l,p],axis:!1,grid:!1,zoom:{factorX:1.25,factorY:1.25,wheel:!0,needshift:!0,eps:.1},showCopyright:!1,shownavigation:!1}),i=a.create("axis",[[-Math.abs(JS.select(e).getAttribute("data-xtickdistance"))/2,0],[Math.abs(JS.select(e).getAttribute("data-xtickdistance"))/2,0]]),i.removeAllTicks(),a.create("ticks",[i,JS.select(e).getAttribute("data-xtickdistance")],{strokeColor:"#ccc",majorHeight:-1,drawLabels:!0,label:{offset:[2,-10]},minorTicks:3,drawZero:!0}),o=a.create("axis",[[0,-Math.abs(JS.select(e).getAttribute("data-ytickdistance"))/2],[0,Math.abs(JS.select(e).getAttribute("data-ytickdistance"))/2]]),o.removeAllTicks(),a.create("ticks",[o,JS.select(e).getAttribute("data-ytickdistance")],{strokeColor:"#ccc",majorHeight:-1,drawLabels:!0,label:{offset:[4,-6]},minorTicks:3,drawZero:!1})),a.points=[],a.xtick=JS.select(e).getAttribute("data-xtickdistance"),a.ytick=JS.select(e).getAttribute("data-ytickdistance"),a.xaxis=JS.select(e).getAttribute("data-xaxis"),a.yaxis=JS.select(e).getAttribute("data-yaxis");let u=JS.find(t,"li.selected-option","all");if(u.length&&u.forEach((t=>{t.innerHTML=JS.select(e).getAttribute("type"),t.style.textTransform="capitalize"})),"polygon"==JS.select(e).getAttribute("type")&&JS.select(e).getAttribute("data-reflection")&&JS.select(e).getAttribute("data-reflection")){r=JS.select(e).getAttribute("data-reflection").split("|"),n=[];for(let t=0;t<r.length;t++){let e=r[t].split(","),s=a.create("point",[e[0],e[1]],{name:"",strokecolor:"darkgray",strokewidth:2,fillcolor:"darkgray"});n.push(s)}a.create("polygon",n,{withline:!0,fillcolor:"darkgray",borders:{strokecolor:"darkgray",strokewidth:2}})}return a},GRAPH.plotgraphPreview=function(t){let e=JS.find(t,".drag-resize","all");for(let a=0;a<e.length;a++){let s=e[a].getAttribute("id");board=GRAPH.initBoardPreview(t,e[a]),board.prevPoint=null;let i=1,o=function(t){let e=board.getCoordsTopLeftCorner(t),a=JXG.getPosition(t,0),s=a[0]-e[0],i=a[1]-e[1];return new JXG.Coords(JXG.COORDS_BY_SCREEN,[s,i],board)},r=function(e){let a,r,n=!0;for(r in a=o(e),board.objects)if(JXG.isPoint(board.objects[r])&&board.objects[r].hasPoint(a.scrCoords[1],a.scrCoords[2])){n=!1;break}if(n){let e,o;JS.select("#"+s).classList.contains("plot")?(e=board.create("point",[a.usrCoords[1],i],{name:"",showInfobox:!1}),e.Xjc=e.X()+Math.abs(e.board.xtick),o=JS.select(".footer_toolbox li.btn_active").getAttribute("data-value"),i++,i==e.board.yaxis&&board.off("down")):e=board.create("point",[a.usrCoords[1],a.usrCoords[2]],{name:""}),GRAPH.updateAndDrawPreview(t,s,e,o),GRAPH.updateAttrsPreview(s,e)}GRAPH.checkAns(t)};if(JS.select("#"+s).classList.contains("association")){if(""==JS.select("#"+s).getAttribute("data-userans")){let e=JS.select("#"+s).getAttribute("data-anskey").split("|"),a=-(JS.select("#"+s).getAttribute("data-xaxis")-JS.select("#"+s).getAttribute("data-xtickdistance")),i=-4.4;for(let o=0;o<e.length;o++){let r=e[o].split(","),n=GRAPH.updateNumberline(t,s,a,i,r[0]);GRAPH.updateNumbelineAttr(s,n),a=a+1+Math.abs(JS.select("#"+s).getAttribute("data-xtickdistance"))/10,GRAPH.checkAns(t)}}}else board.off("down").on("down",r)}},GRAPH.updateNumberline=function(t,e,a,s,i){if(board.texts.length<JS.select("#"+e).getAttribute("data-anskey").split("|").length){let o=board.create("text",[a,s,i],{cssClass:"cursor-down",fontSize:"20px",highlightCssClass:"cursor-down",display:"html",snapSizeX:Math.abs(JS.select("#"+e).getAttribute("data-xtickdistance"))/10,snapSizeY:.4,snapToGrid:!0,anchorX:"middle",anchorY:"bottom"});return board.texts.push(o),o.on("down",(function(){this.startPosition=this.X().toFixed(1)+","+this.Y()+","+this.htmlStr})),o.on("up",(function(){this.Y().toFixed(1)>.4?(board.removeObject(this),board.texts.pop(this),GRAPH.updateNumberline(t,e,parseFloat(this.X().toFixed(1)),.4,this.htmlStr),this.upPosition=this.X().toFixed(1)+",0.4,"+this.htmlStr):this.Y().toFixed(1)<.4?(board.removeObject(this),board.texts.pop(this),GRAPH.updateNumberline(t,e,parseFloat(this.X().toFixed(1)),-4.4,this.htmlStr),this.upPosition=this.X().toFixed(1)+","+"-4.4,"+this.htmlStr):this.upPosition=this.X().toFixed(1)+","+this.Y().toFixed(1)+","+this.htmlStr,GRAPH.updateNumbelineAttr(e,this,!0),GRAPH.checkAns(t)})),o.on("over",(function(){this.visProp.fixed||(board.containerObj.style.cursor="move",this.setAttribute({cssClass:"cursor-down-hover",highlightCssClass:"cursor-down-hover"}))})),o.on("out",(function(){this.visProp.fixed||(board.containerObj.style.cursor="default",this.setAttribute({cssClass:"cursor-down",highlightCssClass:"cursor-down"}))})),o}},GRAPH.updateNumbelineAttr=function(t,e,a){let s=JS.select("#"+t).getAttribute("data-userans");void 0===a?(s=s.split("|").filter((function(t){return""!=t})),s.push(e.X().toFixed(1)+","+e.Y()+","+e.htmlStr),JS.select("#"+t).setAttribute("data-userans",s.join("|"))):(s=JS.select("#"+t).getAttribute("data-userans").replace(e.startPosition,e.upPosition),JS.select("#"+t).setAttribute("data-userans",s))},GRAPH.updateAndDrawPreview=function(t,e,a,s){if(JS.select("#"+e).classList.contains("plot")){if(a.setAttribute({fillcolor:"#52A8EC",strokecolor:"#52A8EC"}),JS.select('[data-value="'+s+'"]').nodeName&&JS.select('[data-value="'+s+'"]').getAttribute("rel")&&0==JS.select('[data-value="'+s+'"]').getAttribute("rel").indexOf("segment"))switch(a.board.prevPoint=a.board.create("point",[a.Xjc,a.Y()],{name:"",fillcolor:"#52A8EC",strokecolor:"#52A8EC",fixed:!0}),a.for=a.board.create("line",[a.board.prevPoint,a],{straightFirst:!1,straightLast:!1,firstArrow:!1,lastArrow:!1,strokeWidth:"2",fillcolor:"#52A8EC",strokecolor:"#52A8EC"}),a.for.name=s,s){case"SLH":a.setAttribute({fillcolor:"#fff",strokecolor:"#52A8EC"});break;case"SRH":a.board.prevPoint.setAttribute({fillcolor:"#fff",strokecolor:"#52A8EC"});break;case"SBH":a.setAttribute({fillcolor:"#fff",strokecolor:"#52A8EC"}),a.board.prevPoint.setAttribute({fillcolor:"#fff",strokecolor:"#52A8EC"})}else if(JS.select('[data-value="'+s+'"]').nodeName&&JS.select('[data-value="'+s+'"]').getAttribute("rel")&&0==JS.select('[data-value="'+s+'"]').getAttribute("rel").indexOf("ray")){switch(s){case"RL":a.board.prevPoint=a.board.create("point",[-Math.abs(a.board.xmax),a.Y()],{visible:!1});break;case"RR":a.board.prevPoint=a.board.create("point",[Math.abs(a.board.xmax),a.Y()],{visible:!1});break;case"RRH":a.setAttribute({fillcolor:"#fff",strokecolor:"#52A8EC"}),a.board.prevPoint=a.board.create("point",[-Math.abs(a.board.xmax),a.Y()],{visible:!1});break;case"RLH":a.setAttribute({fillcolor:"#fff"}),a.board.prevPoint=a.board.create("point",[Math.abs(a.board.xmax),a.Y()],{visible:!1})}a.for=a.board.create("line",[a.board.prevPoint,a],{straightFirst:!0,straightLast:!1,firstArrow:!0,lastArrow:!1,strokeWidth:"2",fillcolor:"#52A8EC",strokecolor:"#52A8EC"}),a.for.name=s}board.on("move",(function(){null!=a.Yjc&&a.moveTo([a.X(),a.Yjc])})),a.on("over",(function(){this.visProp.fixed||(board.containerObj.style.cursor="e-resize")})),a.on("out",(function(){this.visProp.fixed||(board.containerObj.style.cursor="default")}))}else if(GRAPH.sinfo=!1,a.board.points.push(a),null==a.board.prevPoint)a.board.prevPoint=a;else{let t,i;if(JS.select("#"+e).classList.contains("line"))is_correct=GRAPH.getEquationPreview(e,a.X(),a.Y(),a.board.prevPoint.X(),a.board.prevPoint.Y()),a.for=a.board.create("line",[a,a.board.prevPoint],{straightFirst:!0,straightLast:!0,firstArrow:!0,lastArrow:!0,strokeWidth:"2"}),GRAPH.sinfo=!!is_correct;else if(JS.select("#"+e).classList.contains("circle"))a.for=a.board.create("circle",[a.board.prevPoint,a],{straightFirst:!0,straightLast:!0,firstArrow:!0,lastArrow:!0,strokeWidth:"2"}),a.for.center.for=a.for;else if(JS.select("#"+e).classList.contains("segment"))a.for=a.board.create("line",[a,a.board.prevPoint],{straightFirst:!1,straightLast:!1,firstArrow:!1,lastArrow:!1,strokeWidth:"2"});else if(JS.select("#"+e).classList.contains("vector"))a.for=a.board.create("line",[a,a.board.prevPoint],{straightFirst:!1,straightLast:!1,firstArrow:!0,lastArrow:!1,strokeWidth:"2"});else if(JS.select("#"+e).classList.contains("ray"))a.for=a.board.create("line",[a,a.board.prevPoint],{straightFirst:!0,straightLast:!1,firstArrow:!0,lastArrow:!1,strokeWidth:"2"});else if(JS.select("#"+e).classList.contains("parabola")){a.setAttribute({fixed:!0}),a.board.prevPoint.setAttribute({fixed:!0});let t=JS.select("#"+e).getAttribute("data-equation").split("="),s=GRAPH.getEquationPreview(e,a.X(),a.Y(),a.board.prevPoint.X(),a.board.prevPoint.Y()),i=board.jc.snippet(s,!0,"x",!0);a.for=a.board.create("functiongraph",[i]),GRAPH.sinfo=s==t[1],a.for.point1=a.board.prevPoint,a.for.point2=a,a.board.prevPoint=null}else JS.select("#"+e).classList.contains("polygon")?void 0===s?(a.for=a.board.create("polygon",[a.board.prevPoint,a]),a.board.prevPoint=a):s.length==a.board.points.length&&(a.for=a.board.create("polygon",a.board.points,{boadres:{strokecolor:"darkgray",strokeWidth:2}}),a.for.parents.for=a.for,a.board.prevPoint=null,a.board.points=[]):JS.select("#"+e).classList.contains("sine")?(is_correct=GRAPH.getEquationPreview(e,a.X(),a.Y(),a.board.prevPoint.X(),a.board.prevPoint.Y()),t=a.board.prevPoint,i=a,a.for=a.board.create("curve",[function(t){return t},function(e){let a=t.coords.usrCoords,s=i.coords.usrCoords,o=a[1],r=a[2],n=1/(4*(s[1]-o));return(s[2]-r)*Math.sin(2*Math.PI*n*(e-o))+r}]),a.for.point1=a.board.prevPoint,a.for.point2=a,GRAPH.sinfo=!!is_correct):JS.select("#"+e).classList.contains("cosine")&&(is_correct=GRAPH.getEquationPreview(e,a.X(),a.Y(),a.board.prevPoint.X(),a.board.prevPoint.Y()),t=a.board.prevPoint,i=a,a.for=a.board.create("curve",[function(t){return t},function(e){let a=t.coords.usrCoords,s=i.coords.usrCoords,o=a[1],r=a[2],n=s[1],l=1/(4*(o-n));return(s[2]-r)*Math.cos(2*Math.PI*l*(e-n))+r}]),a.for.point1=a.board.prevPoint,a.for.point2=a,GRAPH.sinfo=!!is_correct);JS.select("#"+e).classList.contains("polygon")||(a.board.prevPoint=null)}a.on("down",(function(){JS.select("#"+e).classList.contains("plot")?(this.Yjc=this.Y(),void 0===this.for?this.startPosition=this.X()+","+this.name:this.startPosition=this.for.point2.X()+","+this.for.point1.X()+","+this.for.name):(this.startPosition=this.X()+","+this.Y(),JS.select("#"+e).classList.contains("polygon")&&a.board.points.length>0&&this.X()+","+this.Y()==a.board.points[0].X()+","+a.board.points[0].Y()&&(a.for=a.board.create("polygon",a.board.points,{boadres:{strokecolor:"darkgray",strokeWidth:2}}),a.for.parents.for=a.for,a.board.prevPoint=null,a.board.points=[])),void 0!==this.for&&"circle"==this.for.elType&&(this.startPosition=Math.round(this.for.Radius()))})),a.on("up",(function(){let s=!1;if(JS.select(".delElem").children[0].classList.contains("active")){if(JS.select("#"+e).classList.contains("point"))board.removeObject(this),this.position=this.startPosition,s=!0;else if(JS.select("#"+e).classList.contains("circle"))board.removeObject(this),board.removeObject(this.for.center),board.removeObject(this.for.point2),GRAPH.modeOn(),this.position=this.for.center.X()+","+this.for.center.Y()+"/"+Math.round(this.for.Radius()),s=!0;else if(JS.select("#"+e).classList.contains("polygon")&&void 0!==this.for){let t=[];if(void 0!==this.for.parents.for){for(let e=0;e<a.for.vertices.length;e++)a.board.removeObject(this.for.parents.for.vertices[e]),t.push(this.for.parents.for.vertices[e].X()+","+this.for.parents.for.vertices[e].Y());a.board.removeObject(this.for.parents.for),t.pop(t[t.length-1]),this.position=t.join("|"),s=!0}}else void 0!==this.for?(board.removeObject(this.for),board.removeObject(this.for.point1),board.removeObject(this.for.point2),this.position=this.for.point1.X()+","+this.for.point1.Y()+"|"+this.for.point2.X()+","+this.for.point2.Y(),s=!0):JS.select("#"+e).classList.contains("parabola")&&JS&&JS.showmsg(l.curve_start_point,3e3);if(JS.select("#"+e).classList.contains("parabola")?void 0!==this.for?(GRAPH.updateDeleteAttrs(e,this.position),GRAPH.checkAns(t),JS.select(".delElem").children[0].classList.remove("active")):console.warn({msg:l.warning_this_for}):(GRAPH.updateDeleteAttrs(e,this.position),GRAPH.checkAns(t)),s){let t=setTimeout((function(){JS.selectAll("#mathmain #delButton.active","removeClass","active"),clearTimeout(t)}),100)}}else GRAPH.updateAttrsPreview(e,this,!0),GRAPH.checkAns(t)})),a.on("over",(function(){!this.visProp.fixed&&JS.select(".delElem").children[0].classList.contains("active")&&(JS.select("#"+e).classList.contains("point")?this.setAttribute({name:"Delete",showInfobox:!1,fillcolor:"#000",strokecolor:"#000"}):JS.select("#"+e).classList.contains("circle")&&void 0!==this.for?(this.for.center.setAttribute({name:"Delete",showInfobox:!1,fillcolor:"#000",strokecolor:"#000"}),this.for.point2.setAttribute({name:"Delete",showInfobox:!1,fillcolor:"#000",strokecolor:"#000"})):JS.select("#"+e).classList.contains("polygon")&&void 0!==this.for?void 0!==this.for.parents.for&&this.setAttribute({name:"Delete",showInfobox:!1,fillcolor:"#000",strokecolor:"#000"}):JS.select("#"+e).classList.contains("sine")||JS.select("#"+e).classList.contains("cosine")?void 0!==this.for&&this.for.point2.setAttribute({name:"Delete",showInfobox:!1,fillcolor:"#000",strokecolor:"#000"}):void 0!==this.for&&this.for.point1.setAttribute({name:"Delete",showInfobox:!1,fillcolor:"#000",strokecolor:"#000"}))})),a.on("out",(function(){!this.visProp.fixed&&JS.select(".delElem").children[0].classList.contains("active")&&(JS.select("#"+e).classList.contains("point")?this.setAttribute({name:"",showInfobox:!0,fillcolor:"#ff0000",strokecolor:"#ff0000"}):JS.select("#"+e).classList.contains("circle")&&void 0!==this.for?(this.for.center.setAttribute({name:"",showInfobox:!0,fillcolor:"#ff0000",strokecolor:"#ff0000"}),this.for.point2.setAttribute({name:"",showInfobox:!0,fillcolor:"#ff0000",strokecolor:"#ff0000"})):JS.select("#"+e).classList.contains("polygon")&&void 0!==this.for?void 0!==this.for.parents.for&&this.setAttribute({name:"",showInfobox:!0,fillcolor:"#ff0000",strokecolor:"#ff0000"}):JS.select("#"+e).classList.contains("sine")||JS.select("#"+e).classList.contains("cosine")?void 0!==this.for&&this.for.point2.setAttribute({name:"",showInfobox:!0,fillcolor:"#ff0000",strokecolor:"#ff0000"}):void 0!==this.for&&this.for.point1.setAttribute({name:"",showInfobox:!0,fillcolor:"#ff0000",strokecolor:"#ff0000"}))}))},GRAPH.getEquationPreview=function(elem,pointx,pointy,prevx,prevy){let eq=JS.select("#"+elem).getAttribute("data-equation").split("="),a,_this=JS.select("#"+elem).getAttribute("type"),str,equation="",is_correct;switch(_this){case"parabola":{eq[0].includes("x")?(equation="a*(y-h)^2+k",a=eval(pointx-prevy)/Math.pow(pointy-prevx,2)):(a=Math.round(10*eval((pointy-prevy)/Math.pow(pointx-prevx,2)))/10,equation="a*(x-h)^2+k");let eqn=equation.replace("a",a).replace("h",prevx).replace("k",prevy);return eqn=eqn.replace(/\\-\\-/g,"+").replace(/\\+\\-/g,"-"),eqn}case"sine":case"cosine":return JS.select("#"+elem).classList.contains("sine")?str=eq[1].replace("sin","Math.sin").replace("x","(x/180)*Math.PI"):JS.select("#"+elem).classList.contains("cosine")&&(str=eq[1].replace("cos","Math.cos").replace("x","(x/180)*Math.PI")),a=isNaN(parseFloat(eq[1].charAt(0)))||!isFinite(eq[1].charAt(0))?1:eq[1].charAt(0),is_correct=Math.round(100*eval(str.replace("x",pointx))/100)==pointy&&Math.round(100*eval(str.replace("x",prevx))/100)==prevy&&a==Math.abs(prevy),is_correct;case"line":return is_correct=Math.round(eval(eq[1].replace("x",pointx)))==Math.round(eval(eq[0].replace("y",pointy)))&&Math.round(eval(eq[1].replace("x",prevx)))==Math.round(eval(eq[0].replace("y",prevy))),is_correct}},GRAPH.updateDeleteAttrs=function(t,e){let a=JS.select("#"+t).getAttribute("data-userans").split("|"),s=[];switch(JS.select("#"+t).getAttribute("type")){case"point":case"circle":for(let t=0;t<a.length;t++)a[t]!=e&&s.push(a[t]);break;case"segment":case"ray":case"vector":case"sine":case"cosine":case"line":case"parabola":if(null!=e){let t=e.split("|");s=a.filter((function(t){return!this.has(t)}),new Set(t))}}JS.select("#"+t).setAttribute("data-userans",s.join("|"))},GRAPH.updateAttrsPreview=function(t,e,a){let s=JS.select("#"+t).getAttribute("data-userans"),i=JS.select("#"+t).getAttribute("type");if(void 0!==e.for&&"circle"==e.for.elType){let a=e.for.center,i=a.X()+","+a.Y();void 0!==e.startPosition&&(i+="/"+e.startPosition),s=s.replace(i,a.X()+","+a.Y()+"/"+Math.round(e.for.Radius())),JS.select("#"+t).setAttribute("data-userans",s)}else if(a)switch(s=JS.select("#"+t).classList.contains("plot")?void 0===e.for?JS.select("#"+t).getAttribute("data-userans").replace(e.startPosition,e.X()+","+e.name):JS.select("#"+t).getAttribute("data-userans").replace(e.startPosition,e.for.point2.X()+","+e.for.point1.X()+","+e.for.name):JS.select("#"+t).getAttribute("data-userans").replace(e.startPosition,e.X()+","+e.Y()),JS.select("#"+t).setAttribute("data-userans",s),i){case"line":case"sine":case"cosine":{let e=0,a=null,i=s.split("|");for(let s=0;s<i.length;s++){let o=i[s].split(",");if(null==a)a=o;else{0==GRAPH.getEquationPreview(t,o[0],o[1],a[0],a[1])&&e++,a=null}}GRAPH.sinfo=!(e>0)}}void 0!==e.for&&"circle"==e.for.elType||(s=s.split("|").filter((t=>t)),JS.select("#"+t).classList.contains("plot")?void 0===e.for?s.push(e.X()+","+e.name):s.push(e.for.point2.X()+","+e.for.point1.X()+","+e.for.name):s.push(e.X()+","+e.Y()),void 0===a&&(JS.select("#"+t).setAttribute("data-userans",s.join("|")),JS.select("#"+t).classList.contains("polygon")&&0==e.board.points.length&&JS.select("#"+t).setAttribute("data-userans",GRAPH.getUnique(JS.select("#"+t).getAttribute("data-userans").split("|")).join("|"))))},GRAPH.getUnique=function(t){return t.filter((function(t,e,a){return a.indexOf(t)===e}))},GRAPH.checkAns=function(t){GRAPH.userAnsXML="<smans type='20'>\n",GRAPH.result=!0;let e=JS.selectAll("#mathmain > .drag-resize");for(let a=0;a<e.length;a++)GRAPH.userAnsXML=GRAPH.checkChildAnswer(t,e[a]);return GRAPH.userAnsXML+="</smans>",window.inNative&&(window.getHeight(),window.postMessage(JSON.stringify({userAnswers:GRAPH.userAnsXML,inNativeIsCorrect:GRAPH.result}),"*")),{uXml:GRAPH.userAnsXML,ans:GRAPH.result}},GRAPH.checkChildAnswer=function(t,e){let a,s,i;switch(JS.select(e).getAttribute("type")){case"plot":case"association":case"point":case"segment":a=JS.select(e).getAttribute("data-anskey").split("|").sort().join("|"),s=JS.select(e).getAttribute("data-userans").split("|").sort().join("|"),a!=s&&(GRAPH.result=!1);break;case"circle":case"vector":case"ray":JS.select(e).getAttribute("data-anskey")!=JS.select(e).getAttribute("data-userans")&&(GRAPH.result=!1);break;case"sine":case"cosine":a=JS.select(e).getAttribute("data-anskey").split("|").sort().join("|"),s=JS.select(e).getAttribute("data-userans").split("|").sort().join("|"),a!=s&&(GRAPH.result=!1);break;case"parabola":if(a=JS.select(e).getAttribute("data-anskey").split("|").filter((function(t){return""!=t})),s=JS.select(e).getAttribute("data-userans").split("|").filter((function(t){return""!=t})),a.length==s.length)for(i=0;i<s.length;i+=2){let t=a.indexOf(s[i]);if(t>-1){let e=(a[t+1].split(",")[1]-a[t].split(",")[1])/((a[t+1].split(",")[0]-a[t].split(",")[0])*(a[t+1].split(",")[0]-a[t].split(",")[0])),o=(s[i+1].split(",")[1]-s[i].split(",")[1])/((s[i+1].split(",")[0]-s[i].split(",")[0])*(s[i+1].split(",")[0]-s[i].split(",")[0]));GRAPH.result=e==o}else GRAPH.result=!1}else GRAPH.result=!1;break;case"line":try{if(a=JS.select(e).getAttribute("data-anskey").split("|"),s=JS.select(e).getAttribute("data-userans").split("|"),0==s.length||1==s.length){GRAPH.result=!1;break}{i=0;let t=0,e=0,o=0;for(;i<a.length;){for(e=0;t<s.length;){let r,n,l,c;if(r=(s[t].split(",")[1]-a[i].split(",")[1])*(a[i+1].split(",")[0]-a[i].split(",")[0]),l=(s[t].split(",")[0]-a[i].split(",")[0])*(a[i+1].split(",")[1]-a[i].split(",")[1]),n=(s[t+1].split(",")[1]-a[i].split(",")[1])*(a[i+1].split(",")[0]-a[i].split(",")[0]),c=(s[t+1].split(",")[0]-a[i].split(",")[0])*(a[i+1].split(",")[1]-a[i].split(",")[1]),parseFloat(r)!=parseFloat(l)||parseFloat(n)!=parseFloat(c)){GRAPH.result=!1,o=1;break}e+=1,t+=2}if(1==o)break;i+=2}GRAPH.result=0!=e}}catch(t){console.warn(t)}break;case"polygon":a=GRAPH.getUnique(JS.select(e).getAttribute("data-anskey").split("|").sort()).join("|"),s=GRAPH.getUnique(JS.select(e).getAttribute("data-userans").split("|").sort()).join("|"),a!=s&&(GRAPH.result=!1)}return GRAPH.userAnsXML+="<div id='"+JS.select(e).getAttribute("id")+"' userAns='"+JS.select(e).getAttribute("data-userans")+"'></div>\n",GRAPH.userAnsXML},GRAPH.showansdrag=function(t,e,a){void 0===a&&(a=0);let s=JS.selectAll("#mathmain > .drag-resize");for(let i=0;i<s.length;i++)GRAPH.showchildansdrag(t,s[i],e,a)},GRAPH.showchildansdrag=function(t,e,a,s){if(1==s){board=GRAPH.initBoardPreview(t,e);let a=JS.find(t,".footer_toolbox li","all");a.length>0&&a.forEach((function(t){t.disabled=!0,t.classList.add("btn_active_disabled"),t.classList.remove("btn_active")}))}let i,o=JS.select(e).getAttribute("type"),r=JS.select(e).getAttribute("id");""!=JS.select(e).getAttribute("data-anskey")&&(i=JS.select(e).getAttribute("data-anskey").split("|"));let n,l,c=JS.select(e).getAttribute("data-userans").split("|");if("c"==a){if(JS.select("#"+r).classList.contains("association"))for(let e=0;e<i.length;e++){l=i[e].split(","),GRAPH.updateNumberline(t,r,l[0],l[1],l[2]).setAttribute({cssClass:"cursor-down-active",highlightCssClass:"cursor-down-active",fixed:!0})}else if(JS.select("#"+r).classList.contains("plot")){n=1;for(let e=0;e<i.length;e++){let a;-1==i[e].indexOf(",")?(a=board.create("point",[parseInt(i[e]),n],{name:"",fixed:!0}),GRAPH.updateAndDrawPreview(t,r,a)):(l=i[e].split(","),a=board.create("point",[parseInt(l[0]),n],{name:"",fixed:!0}),a.Xjc=parseInt(l[1]),GRAPH.updateAndDrawPreview(t,r,a,l[2])),n++}}else for(let a=0;a<i.length;a++){l=i[a].split(",");let s=board.create("point",[parseInt(l[0]),parseInt(l[1])],{name:"",fixed:!0,strokeColor:"#0000FF",fillColor:"#0000FF"});JS.select(e).classList.contains("circle")?GRAPH.drawCirclePreview(t,r,i[a]):GRAPH.updateAndDrawPreview(t,r,s,i)}JS.setCss(t,{border:"1px solid #0000ff"})}else if("u"==a){let a=0,d=null,p=!1;if(n=1,JS.select("#"+r).classList.contains("association"))for(let e=0;e<c.length;e++){let o=c[e];l=o.split(",");let n=GRAPH.updateNumberline(t,r,parseFloat(l[0]),parseFloat(l[1]),l[2]);void 0!==s&&1==s&&("0.4"==l[1]?i.includes(o)?n.setAttribute({cssClass:"cursor-down-correct",highlightcssClass:"cursor-down-correct",fixed:!0}):(n.setAttribute({cssClass:"cursor-down-incorrect",highlightcssClass:"cursor-down-incorrect",fixed:!0}),a++):(n.setAttribute({fixed:!0}),a++),GRAPH.setCorrectAns(t,a))}else for(let u=0;u<c.length;u++){let f=c[u];if(JS.select("#"+r).classList.contains("plot")?""!=JS.select(e).getAttribute("data-userans")&&(-1==f.indexOf(",")?(point=board.create("point",[parseInt(f),n],{name:""}),GRAPH.updateAndDrawPreview(t,r,point)):(l=f.split(","),point=board.create("point",[parseInt(l[0]),n],{name:""}),point.Xjc=parseInt(l[1]),GRAPH.updateAndDrawPreview(t,r,point,l[2])),n++):(l=f.split(","),point=board.create("point",[parseInt(l[0]),parseInt(l[1])],{name:""}),""!=JS.select(e).getAttribute("data-userans")&&(JS.select(e).classList.contains("circle")?GRAPH.drawCirclePreview(t,r,f):GRAPH.updateAndDrawPreview(t,r,point,c))),void 0!==s&&1==s&&""!=JS.select(e).getAttribute("data-userans")){switch(point.setAttribute({fixed:!0}),o){case"point":i.includes(f)?point.setAttribute({strokeColor:"#00FF00",fillColor:"#00FF00"}):(point.setAttribute({strokeColor:"#FF0000",fillColor:"#FF0000"}),a++);break;case"circle":void 0!==point.for&&(p=!!i.includes(f),a=GRAPH.drawelem(r,p,a));break;case"plot":p=!!i.includes(f),a=GRAPH.drawelem(r,p,a);break;case"line":case"parabola":case"sine":case"cosine":void 0===point.for?prevPoint=point.board.prevPoint:a=GRAPH.drawelem(r,GRAPH.sinfo,a);break;case"segment":case"vector":case"ray":{let t;(JS.select(e).classList.contains("segment")||JS.select(e).classList.contains("polygon"))&&(t=!!i.includes(f)),(JS.select(e).classList.contains("ray")||JS.select(e).classList.contains("vector"))&&(t=i.indexOf(f)==c.indexOf(f)),void 0===point.for?(prevPoint=point.board.prevPoint,d=t):(p=!(!d||!t),a=GRAPH.drawelem(r,p,a));break}case"polygon":{let t=[...i],e=[...c];p=t.sort().join("|")==e.sort().join("|"),a=GRAPH.drawelem(r,p,a);break}}GRAPH.setCorrectAns(t,a)}else void 0!==s&&1==s&&""==JS.select(e).getAttribute("data-userans")&&JS.setCss(t,{border:"1px solid #ff0000"})}}},GRAPH.setCorrectAns=function(t,e){0==e?(JS.setCss(t,{border:"1px solid #00ff00"}),JS.select("#answer").checked=!0,JS.select(t).setAttribute("as",1)):(JS.setCss(t,{border:"1px solid #ff0000"}),JS.select("#answer").checked=!1,JS.select(t).setAttribute("as",-1))},GRAPH.drawelem=function(t,e,a){if(JS.select("#"+t).classList.contains("plot"))1==e?void 0===point.for?point.setAttribute({strokeColor:"#00FF00",fillColor:"#00FF00"}):(point.for.setAttribute({strokeColor:"#00FF00"}),point.for.point1.setAttribute({strokeColor:"#00FF00",fillColor:"#00FF00"}),point.for.point2.setAttribute({strokeColor:"#00FF00",fillColor:"#00FF00"})):(void 0===point.for?point.setAttribute({strokeColor:"#FF0000",fillColor:"#FF0000"}):(point.for.setAttribute({strokeColor:"#FF0000"}),point.for.point1.setAttribute({strokeColor:"#FF0000",fillColor:"#FF0000"}),point.for.point2.setAttribute({strokeColor:"#FF0000",fillColor:"#FF0000"})),a++);else if(JS.select("#"+t).classList.contains("polygon")){let t;if(1==e){if(void 0!==point.for)for(t=0;t<point.for.vertices.length;t++)point.for.vertices[t].setAttribute({strokeColor:"#00FF00",fillColor:"#00FF00"})}else{if(void 0!==point.for){for(t=0;t<point.for.vertices.length;t++)point.for.vertices[t].setAttribute({strokeColor:"#FF0000",fillColor:"#FF0000"});point.for.setAttribute({fillColor:"#FF0000",opacity:.5})}a++}}else 1==e?(point.setAttribute({strokeColor:"#00FF00",fillColor:"#00FF00"}),prevPoint.setAttribute({strokeColor:"#00FF00",fillColor:"#00FF00"}),point.for.setAttribute({strokeColor:"#00FF00"})):(point.setAttribute({strokeColor:"#FF0000",fillColor:"#FF0000"}),prevPoint.setAttribute({strokeColor:"#FF0000",fillColor:"#FF0000"}),point.for.setAttribute({strokeColor:"#FF0000"}),a++);return a},GRAPH.drawCirclePreview=function(t,e,a){let s=a.split("/");for(let a=0;a<s.length;a++){let i,o=s[0].split(",");if(-1!=s[a].indexOf(","))i=board.create("point",[parseInt(o[0]),parseInt(o[1])],{name:""}),prevPoint=i;else{let t=parseInt(o[0])-parseInt(s[1]);i=board.create("point",[parseInt(t),parseInt(o[1])],{name:""})}GRAPH.updateAndDrawPreview(t,e,i)}},GRAPH.labbinded=!0,GRAPH.modeOn=function(t){JS.selectAll(".test, .review","addClass","h"),t?(JS.selectAll(".review","removeClass","h"),GRAPH.unBindLab(),GRAPH.showansdrag(GRAPH.ajax_eId,"u",1)):(JS.selectAll(".test","removeClass","h"),GRAPH.bindLab(),GRAPH.showansdrag(GRAPH.ajax_eId,"u"),JS.setCss(GRAPH.ajax_eId).style.border="1px solid #CCCCCC")},GRAPH.bindLab=function(){GRAPH.labbinded=!0,GRAPH.readyThis(GRAPH.ajax_eId),JS.find(GRAPH.ajax_eId,".delElem").removeAttribute("style"),JS.find(GRAPH.ajax_eId,"#ADA_button").style.display="block"},GRAPH.unBindLab=function(){GRAPH.labbinded=!1,JS.find(GRAPH.ajax_eId,".delElem").style.display="none",JS.find(GRAPH.ajax_eId,"#ADA_button").style.display="none"};class GraphPreview extends SvelteComponent{constructor(t){super(),init(this,t,instance,create_fragment,safe_not_equal,{xml:7,uxml:8,isReview:0,showAns:9,editorState:10},add_css)}}export default GraphPreview;
//# sourceMappingURL=GraphPreview-bfee8438.js.map
