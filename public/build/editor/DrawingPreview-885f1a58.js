import{S as e,i as t,s,$ as l,e as r,b as i,u as a,ac as o,f as n,h as c,j as d,l as p,x as u,r as v,o as b,p as m,A as w,a0 as g,a1 as h,X as _,w as y}from"./main-a30cdebc.js";function f(e){let t,s,m,w,g,h,_,y,f,x,S,k,A,P,N,M,D,L,T,I,R,F,K,E,B,O,H,J,z,X,G,W,U,Y,Z,j,q,$,Q,V,ee,te,se,le,re,ie,ae,oe,ne,ce,de,pe,ue,ve,be,me,we,ge,he,_e,ye,fe,Ce,xe,Se,ke,Ae,Pe,Ne,Me,De,Le,Te,Ie,Re,Fe,Ke,Ee,Be,Oe,He,Je,ze,Xe,Ge,We,Ue,Ye,Ze,je,qe,$e,Qe,Ve,et,tt,st,lt,rt,it,at,ot,nt,ct,dt,pt,ut,vt,bt,mt,wt,gt,ht,_t,yt,ft,Ct,xt,St,kt,At,Pt,Nt,Mt,Dt,Lt,Tt,It,Rt,Ft,Kt,Et,Bt,Ot,Ht,Jt,zt,Xt,Gt,Wt,Ut,Yt,Zt,jt,qt,$t,Qt,Vt,es,ts,ss,ls,rs,is,as,os,ns,cs,ds,ps,us,vs,bs,ms,ws,gs,hs,_s,ys,fs,Cs,xs,Ss,ks,As,Ps,Ns,Ms,Ds,Ls,Ts,Is,Rs,Fs,Ks,Es,Bs,Os,Hs,Js,zs,Xs,Gs,Ws,Us,Ys,Zs,js,qs,$s,Qs,Vs,el,tl,sl,ll,rl,il,al,ol,nl,cl,dl,pl,ul,vl,bl,ml,wl,gl,hl,_l,yl,fl,Cl,xl,Sl,kl,Al,Pl,Nl,Ml,Dl,Ll,Tl,Il,Rl,Fl,Kl,El,Bl=l.mark_pnt+"",Ol=l.shortcuts+"",Hl=e[2].alt+"",Jl=l.compass_center+"",zl=l.shift_arrow_use+"",Xl=l.compass_radius+(.02649*e[0]).toFixed(2)+"",Gl=l.shift_arrow_radius+"",Wl=l.compass_angle+e[1]+l.degree+"",Ul=l.shift_arrow_angle+"",Yl=l.compass_draw+"",Zl=l.shift_arrow_draw+"";return{c(){t=r("main"),s=r("div"),m=r("div"),w=r("div"),g=r("div"),h=r("h4"),h.textContent=""+l.shortcuts,_=i(),y=r("button"),y.textContent="Ã—",f=i(),x=r("div"),S=r("table"),k=r("tbody"),A=r("tr"),P=r("td"),P.textContent=""+l.keys,N=r("td"),M=r("div"),D=r("span"),D.textContent=""+l.des_txt,L=i(),T=r("tr"),I=r("td"),I.textContent=""+l.ctrl_z,R=r("td"),F=r("div"),K=r("span"),K.textContent=""+l.undo,E=i(),B=r("tr"),O=r("td"),O.textContent=""+l.ctrl_x,H=r("td"),J=r("div"),z=r("span"),z.textContent=""+l.cut,X=i(),G=r("tr"),W=r("td"),W.textContent=""+l.ctrl_y,U=r("td"),Y=r("div"),Z=r("span"),Z.textContent=""+l.redo,j=i(),q=r("tr"),$=r("td"),$.textContent=""+l.enter,Q=r("td"),V=r("div"),ee=r("span"),ee.textContent=""+l.enable_tool,te=i(),se=r("tr"),le=r("td"),le.textContent=""+l.shift_enter,re=r("td"),ie=r("div"),ae=r("span"),ae.textContent=""+l.start_stop_tool,oe=i(),ne=r("tr"),ce=r("td"),ce.textContent=""+l.shift_arrow,de=r("td"),pe=r("div"),ue=r("span"),ue.textContent=""+l.compass_tools,ve=i(),be=r("tr"),me=r("td"),me.textContent=""+l.locking,we=r("td"),ge=r("div"),he=r("span"),he.textContent=""+l.locking_txt,_e=i(),ye=r("tr"),fe=r("td"),fe.textContent=""+l.draw_key,Ce=r("td"),xe=r("div"),Se=r("span"),Se.textContent=""+l.draw_txt,ke=i(),Ae=r("tr"),Pe=r("td"),Pe.textContent=""+l.tab,Ne=r("td"),Me=r("div"),De=r("span"),De.textContent=""+l.focus_next,Le=i(),Te=r("tr"),Ie=r("td"),Ie.textContent=""+l.shift_tab,Re=r("td"),Fe=r("div"),Ke=r("span"),Ke.textContent=""+l.focus_prev,Ee=i(),Be=r("tr"),Oe=r("td"),Oe.textContent=""+l.esc,He=r("td"),Je=r("div"),ze=r("span"),ze.textContent=""+l.exit_txt,Xe=i(),Ge=r("div"),We=r("button"),We.textContent=""+l.close,Ue=i(),Ye=r("div"),Ze=r("button"),je=i(),qe=r("button"),$e=i(),Qe=r("center"),Ve=r("div"),et=r("div"),tt=r("div"),st=r("button"),lt=r("i"),at=i(),ot=r("button"),nt=a("/"),pt=i(),ut=r("button"),vt=r("i"),gt=i(),ht=r("div"),_t=r("button"),yt=r("i"),xt=i(),St=r("button"),kt=r("i"),Nt=i(),Mt=r("button"),Dt=r("i"),It=i(),Rt=r("button"),Ft=r("i"),Ot=i(),Ht=r("div"),Jt=r("button"),zt=a(Bl),Ut=i(),Yt=r("div"),Zt=r("button"),jt=r("i"),Vt=i(),es=r("div"),ts=r("button"),ss=a(Ol),os=i(),ns=r("div"),cs=r("div"),ds=r("img"),us=i(),vs=r("div"),vs.innerHTML='<span class="icomoon-plus s2 move_icon position-absolute h" id="moveDrawIcon"></span>',bs=i(),ms=o("svg"),ws=o("title"),gs=a(Hl),hs=o("g"),_s=o("g"),ys=o("g"),fs=o("g"),Cs=o("g"),xs=o("svg"),Ss=o("svg"),ks=o("g"),As=o("circle"),Ps=o("g"),Ns=o("line"),Ms=o("g"),Ds=o("circle"),Ls=o("title"),Ts=a(Jl),Is=o("desc"),Rs=a(zl),Fs=o("defs"),Ks=o("pattern"),Es=o("svg"),Bs=o("path"),Os=o("path"),Hs=o("path"),Js=o("path"),zs=o("circle"),Xs=o("g"),Gs=o("circle"),Ws=o("title"),Us=a(Xl),Ys=o("desc"),Zs=a(Gl),js=o("defs"),qs=o("pattern"),$s=o("svg"),Qs=o("g"),Vs=o("g"),el=o("rect"),tl=o("g"),sl=o("rect"),ll=o("g"),rl=o("g"),il=o("path"),al=o("g"),ol=o("path"),nl=o("g"),cl=o("circle"),dl=o("title"),pl=a(Wl),ul=o("desc"),vl=a(Ul),bl=o("defs"),ml=o("pattern"),wl=o("svg"),gl=o("path"),hl=o("g"),_l=o("circle"),fl=o("circle"),Cl=o("title"),xl=a(Yl),Sl=o("desc"),kl=a(Zl),Al=o("g"),Pl=o("circle"),Nl=o("defs"),Ml=o("pattern"),Dl=o("svg"),Ll=o("g"),Tl=o("g"),Il=o("g"),Rl=o("g"),Fl=o("path"),n(h,"class","modal-title"),n(y,"type","button"),n(y,"class","close"),n(y,"data-bs-dismiss","modal"),n(g,"class","modal-header"),n(P,"class","py-1 font-weight-bold w-50 pr-0"),n(D,"class","pl-3 font-weight-bold"),n(M,"class","d-flex"),n(N,"class","py-1"),n(A,"tabindex","0"),n(A,"role","shortcut"),n(I,"class","py-1 font-weight-bold w-50 pr-0"),n(K,"class","pl-3"),n(F,"class","d-flex"),n(R,"class","py-1"),n(T,"tabindex","0"),n(T,"role","shortcut"),n(O,"class","py-1 font-weight-bold w-50 pr-0"),n(z,"class","pl-3"),n(J,"class","d-flex"),n(H,"class","py-1"),n(B,"tabindex","0"),n(B,"role","shortcut"),n(W,"class","py-1 font-weight-bold w-50 pr-0"),n(Z,"class","pl-3"),n(Y,"class","d-flex"),n(U,"class","py-1"),n(G,"tabindex","0"),n(G,"role","shortcut"),n($,"class","py-1 font-weight-bold w-50 pr-0"),n(ee,"class","pl-3"),n(V,"class","d-flex"),n(Q,"class","py-1"),n(q,"tabindex","0"),n(q,"role","shortcut"),n(le,"class","py-1 font-weight-bold w-50 pr-0"),n(ae,"class","pl-3"),n(ie,"class","d-flex"),n(re,"class","py-1"),n(se,"tabindex","0"),n(se,"role","shortcut"),n(ce,"class","py-1 font-weight-bold w-50 pr-0"),n(ue,"class","pl-3"),n(pe,"class","d-flex"),n(de,"class","py-1"),n(ne,"tabindex","0"),n(ne,"role","shortcut"),n(me,"class","py-1 font-weight-bold w-50 pr-0"),n(he,"class","pl-3"),n(ge,"class","d-flex"),n(we,"class","py-1"),n(be,"tabindex","0"),n(be,"role","shortcut"),n(fe,"class","py-1 font-weight-bold w-50 pr-0"),n(Se,"class","pl-3"),n(xe,"class","d-flex"),n(Ce,"class","py-1"),n(ye,"tabindex","0"),n(ye,"role","shortcut"),n(Pe,"class","py-1 font-weight-bold w-50 pr-0"),n(De,"class","pl-3"),n(Me,"class","d-flex"),n(Ne,"class","py-1"),n(Ae,"tabindex","0"),n(Ae,"role","shortcut"),n(Ie,"class","py-1 font-weight-bold w-50 pr-0"),n(Ke,"class","pl-3"),n(Fe,"class","d-flex"),n(Re,"class","py-1"),n(Te,"tabindex","0"),n(Te,"role","shortcut"),n(Oe,"class","py-1 font-weight-bold w-50 pr-0"),n(ze,"class","pl-3"),n(Je,"class","d-flex"),n(He,"class","py-1"),n(Be,"tabindex","0"),n(Be,"role","shortcut"),n(k,"tabindex","0"),n(k,"role","shortcut"),n(S,"role","shortcut"),n(S,"class","shortcutTable m-0 p-2 border-0 common-shortcut-table table-striped font15"),n(x,"class","modal-body overflow-y"),n(We,"type","button"),n(We,"class","btn btn-light"),n(We,"data-bs-dismiss","modal"),n(Ge,"class","modal-footer"),n(w,"class","modal-content"),n(m,"class","modal-dialog modal-dialog-centered"),n(s,"id","drawing_shortcut_modal"),n(s,"class","modal fade"),n(s,"tabindex","-1"),n(Ze,"type","button"),n(Ze,"class","h h-imp"),n(Ze,"id","set-review"),n(qe,"type","button"),n(qe,"class","h h-imp"),n(qe,"id","unset-review"),n(lt,"class","icomoon-pencil"),n(st,"type","button"),n(st,"data-title","scribble"),n(st,"tabindex","0"),n(st,"aria-label",rt=l.scribble_tool),n(st,"title",it=l.scribble),n(st,"name","preview_scribble"),n(st,"id","preview_scribble"),n(st,"class","geometryToolPreview tooltip_btn btn btn-light preview_toolbar preview_btn"),n(ot,"type","button"),n(ot,"data-title","line"),n(ot,"tabindex","0"),n(ot,"aria-label",ct=l.line_tool),n(ot,"title",dt=l.line),n(ot,"name","preview_line"),n(ot,"id","preview_line"),n(ot,"class","geometryToolPreview btn btn-light tooltip_btn preview_toolbar preview_btn"),n(vt,"class","icomoon-compass1"),n(ut,"type","button"),n(ut,"data-title","compass"),n(ut,"tabindex","0"),n(ut,"aria-label",bt=l.compass_tool),n(ut,"title",mt=l.compass),n(ut,"name","preview_compass"),n(ut,"id","preview_compass"),n(ut,"class","geometryToolPreview tooltip_btn btn btn-light preview_toolbar preview_btn"),n(tt,"class","btn-group mr-2"),n(tt,"role","group"),n(tt,"tabindex","0"),n(tt,"aria-label",wt=l.draw_tools),n(yt,"class","icomoon-delete-sm"),n(_t,"type","button"),n(_t,"data-title","eraser"),n(_t,"tabindex","0"),n(_t,"aria-label",ft=l.delete_tool),n(_t,"title",Ct=l.delete_tool),n(_t,"name","eraser"),n(_t,"id","preview_eraser"),n(_t,"class","btn btn-light tooltip_btn preview_toolbar preview_btn"),n(kt,"class","icomoon-close-2"),n(St,"type","button"),n(St,"title",At=l.clear_screen),n(St,"tabindex","0"),n(St,"aria-label",Pt=l.clear_screen),n(St,"name","clearScreen"),n(St,"id","preview_clearScreen"),St.disabled="disabled",n(St,"class","btn btn-light tooltip_btn"),n(Dt,"class","icomoon-redo-2"),n(Mt,"type","button"),n(Mt,"title",Lt=l.redo),n(Mt,"name","redo"),n(Mt,"tabindex","0"),n(Mt,"aria-label",Tt=l.redo),n(Mt,"id","preview_redo"),Mt.disabled="disabled",n(Mt,"class","btn btn-light tooltip_btn"),n(Ft,"class","icomoon-undo-2"),n(Rt,"type","button"),n(Rt,"title",Kt=l.undo),n(Rt,"name","undo"),n(Rt,"tabindex","0"),n(Rt,"aria-label",Et=l.undo),n(Rt,"id","preview_undo"),Rt.disabled="disabled",n(Rt,"class","btn btn-light tooltip_btn"),n(ht,"class","btn-group mr-2"),n(ht,"role","group"),n(ht,"tabindex","0"),n(ht,"aria-label",Bt=l.removing_tools),n(Jt,"type","button"),n(Jt,"title",Xt=l.mark_finish_point),n(Jt,"name","mark_points"),n(Jt,"tabindex","0"),n(Jt,"aria-label",Gt=l.mark_ans_point),n(Jt,"id","mark_points"),n(Jt,"class","btn tooltip_btn btn-light"),n(Ht,"class","btn-group mr-2 marking_group"),n(Ht,"role","group"),n(Ht,"aria-label",Wt=l.marking_tools),n(jt,"class","icomoon-new-24px-reset-1"),n(Zt,"type","button"),n(Zt,"title",qt=l.reset),n(Zt,"name","preview_reset_btn"),n(Zt,"tabindex","0"),n(Zt,"aria-label",$t=l.reset_btn),n(Zt,"id","preview_reset_btn"),n(Zt,"class","btn tooltip_btn btn-light"),n(Yt,"class","btn-group mr-2 reset_group"),n(Yt,"role","group"),n(Yt,"aria-label",Qt=l.reset),n(ts,"type","button"),n(ts,"title",ls=l.shortcuts),n(ts,"name","shortcut_modal_btn"),n(ts,"aria-label",rs=l.shortcuts),n(ts,"tabindex","0"),n(ts,"id","shortcut_modal_btn"),n(ts,"class","tooltip_btn btn btn-primary"),n(es,"class","btn-group mr-2"),n(es,"role","group"),n(es,"aria-label",is=l.shortcuts),n(et,"class","btn-toolbar preview_drawing_toolbar"),n(et,"role","toolbar"),n(et,"aria-label",as=l.drawing_tools),n(Ve,"class","mt-2 mb-3 previewBtnGrp"),n(ds,"class","border"),n(ds,"alt",""),ds.src!==(ps=C+e[2].bgImg)&&n(ds,"src",ps),n(ds,"id","svgImgPreview"),n(ws,"id","previewSvgTitle"),n(hs,"class","backgroundFocusPathPreview"),n(_s,"class","previewDrawingPaths"),n(ys,"class","correct_answer_container"),n(fs,"class","backgroundFocusPointPreview"),n(Cs,"class","previewMarkingPaths"),n(As,"class","drawingCompassRoute compass_route"),n(As,"cx","267.984375"),n(As,"cy","173"),n(As,"r","80"),n(Ns,"class","compassRotationBar compass_radius"),n(Ns,"x1","267.984375"),n(Ns,"y1","173"),n(Ns,"x2","267.984375"),n(Ns,"y2","253"),n(Ds,"tabindex","0"),n(Ds,"class","drawingCompassCenter compass_center"),n(Ds,"cx","267.984375"),n(Ds,"cy","173"),n(Ds,"r","17"),n(Ds,"aria-labelledby","compassCenterTitle compassCenterDesc"),n(Ds,"focusable","true"),n(Ds,"fill","url(#previewDrawingCenter)"),n(Ls,"id","compassCenterTitle"),n(Is,"id","compassCenterDesc"),n(Bs,"fill","#808080"),n(Bs,"class","st0"),n(Bs,"d","M3.22,15.1L1,12l2.22-3.1C3.22,10.97,3.22,13.03,3.22,15.1z"),n(Os,"fill","#808080"),n(Os,"class","st0"),n(Os,"d","M8.9,3.22L12,1l3.1,2.22C13.03,3.22,10.97,3.22,8.9,3.22z"),n(Hs,"fill","#808080"),n(Hs,"class","st0"),n(Hs,"d","M15.1,20.78L12,23l-3.1-2.22C10.97,20.78,13.03,20.78,15.1,20.78z"),n(Js,"fill","#808080"),n(Js,"class","st0"),n(Js,"d","M20.78,8.9L23,12l-2.22,3.1C20.78,13.03,20.78,10.97,20.78,8.9z"),n(zs,"cx","12"),n(zs,"cy","12"),n(zs,"r","2"),n(zs,"fill","#333333"),n(Es,"x","0px"),n(Es,"y","0px"),n(Es,"viewBox","1 -3 21 35"),n(Es,"width","33"),n(Es,"height","41"),n(Ks,"id","previewDrawingCenter"),n(Ks,"width","20"),n(Ks,"height","20"),n(Gs,"class","compass_radius_icon mid_circle"),n(Gs,"cx","267.984375"),n(Gs,"cy","213"),n(Gs,"r","17"),n(Gs,"fill","url(#previewDrawingRadius)"),n(Gs,"transform","rotate(90,160,168)"),n(Gs,"aria-labelledby","compassRadiusTitle compassRadiusDesc"),n(Gs,"tabindex","0"),n(Gs,"focusable","true"),n(Ws,"id","compassRadiusTitle"),n(Ys,"id","compassRadiusDesc"),n(el,"x","8.53"),n(el,"y","1.11"),n(el,"width","1.5"),n(el,"height","21.79"),n(sl,"x","13.97"),n(sl,"y","1.11"),n(sl,"width","1.5"),n(sl,"height","21.79"),n(il,"d","M5.87,16.87L1,12l4.87-4.87C5.87,10.38,5.87,13.62,5.87,16.87z"),n(ol,"d","M18.13,16.87L23,12l-4.87-4.87C18.13,10.38,18.13,13.62,18.13,16.87z"),n($s,"x","0px"),n($s,"y","0px"),n($s,"viewBox","1 -5 21 34"),n($s,"width","33"),n($s,"height","33"),n(qs,"id","previewDrawingRadius"),n(qs,"width","20"),n(qs,"height","20"),n(cl,"class","compass_rotation midSmallCircle"),n(cl,"cx","267.984375"),n(cl,"cy","233"),n(cl,"r","8"),n(cl,"fill","url(#previewMidSmallCircle_icon)"),n(cl,"area-label","Compass Angle Use Shift and arrow keys to increase or decrease the radius"),n(cl,"aria-labelledby","compassRotationTitle compassRotationDesc"),n(cl,"tabindex","0"),n(cl,"focusable","true"),n(cl,"transform","rotate(90,160,193)"),n(dl,"id","compassRotationTitle"),n(ul,"id","compassRotationDesc"),n(gl,"fill","#000"),n(gl,"opacity","0.8"),n(gl,"d","M7,14 C3.13400675,14 0,10.8659932 0,7 C0,3.13400675 3.13400675,0 7, 0 C10.8659932,0 14,3.13400675 14,7 C14,10.8659932 10.8659932,14 7, 14 Z M4.66666667,8.16666667 L7,11.6666667 L9.33333333,8.16666667 L4.66666667,8.16666667 Z M4.66666667,5.83333333 L9.33333333,5.83333333 L7,2.33333333 L4.66666667,5.83333333 Z"),n(wl,"width","16px"),n(wl,"height","16px"),n(wl,"viewBox","0 0 14 14"),n(wl,"version","1.1"),n(ml,"id","previewMidSmallCircle_icon"),n(ml,"width","20"),n(ml,"height","20"),n(_l,"class","drawing-compass-pointer lastCircle"),n(_l,"cx","267.984375"),n(_l,"cy","253"),n(_l,"r","3"),n(_l,"fill",yl=e[2].lineColor),n(fl,"class","drawing-compass-pointer-border lastCircle lastbigcircle"),n(fl,"aria-labelledby","compassAngleTitle compassAngleDesc"),n(fl,"cx","267.984375"),n(fl,"cy","253"),n(fl,"r","17"),n(fl,"tabindex","0"),n(fl,"focusable","true"),n(Cl,"id","compassAngleTitle"),n(Sl,"id","compassAngleDesc"),n(Pl,"class","lastCircleMid"),n(Pl,"fill","url(#previewLastCircleMid_icon)"),n(Pl,"transform","rotate(90,160,243)"),n(Pl,"cx","267.984375"),n(Pl,"cy","293"),n(Pl,"r","12"),n(Pl,"opacity","0"),n(Fl,"d","M3.76491276,22.4309727 C5.88207272,19.902578 7.10843487, 16.447736 7.10843487,12.7446281 C7.10843487,9.90533039 6.38974128, 7.20188959 5.07542401,4.93464319 L1.71316547,5.67221801 L4.9100909, 0.48305188 L10.1719173,3.81663137 L7.11351005,4.48755064 C8.4088902, 6.93966677 9.10843487,9.78181395 9.10843487,12.7446281 C9.10843487, 16.6677555 7.87827881,20.3638018 5.71250857,23.1972812 L8.63385425, 24.3467251 L2.93165771,26.8255625 L0.595287046,21.1838396 L3.76491276, 22.4309727 Z"),n(Fl,"class",""),n(Rl,"transform","translate(313.742737, 140.576561) rotate(-2.000000) translate(-313.742737, -140.576561) translate(308.242737, 127.076561)"),n(Il,"transform","translate(207.000000, 318.000000)"),n(Tl,"transform","translate(-516.000000, -445.000000)"),n(Tl,"fill","#333333"),n(Tl,"fillrule","nonzero"),n(Ll,"stroke","none"),n(Ll,"strokewidth","1"),n(Ll,"fill","none"),n(Ll,"fillrule","evenodd"),n(Ll,"opacity","0.5"),n(Dl,"width","24"),n(Dl,"height","23"),n(Dl,"viewBox","0 0 11 27"),n(Dl,"version","1.1"),n(Dl,"enablebackground","new 0 0 8 24"),n(Ml,"id","previewLastCircleMid_icon"),n(Ml,"width","20"),n(Ml,"height","20"),n(xs,"class","drawingCompassSvg h"),n(xs,"focusable","false"),n(ms,"width","100%"),n(ms,"height","100%"),n(ms,"id","previewSvg"),n(ms,"class","previewKeySvg"),n(ms,"tabindex","0"),n(ms,"aria-labelledby","previewSvgTitle"),n(cs,"id","centerImg"),n(cs,"class","centerImg centerImgPreview my-auto relative ml-0"),n(Qe,"class","preview_drawing_container"),n(Ye,"class","drawing_module_container"),n(t,"id","drawingPreviewMain")},m(l,r){c(l,t,r),d(t,s),d(s,m),d(m,w),d(w,g),d(g,h),d(g,_),d(g,y),d(w,f),d(w,x),d(x,S),d(S,k),d(k,A),d(A,P),d(A,N),d(N,M),d(M,D),d(k,L),d(k,T),d(T,I),d(T,R),d(R,F),d(F,K),d(k,E),d(k,B),d(B,O),d(B,H),d(H,J),d(J,z),d(k,X),d(k,G),d(G,W),d(G,U),d(U,Y),d(Y,Z),d(k,j),d(k,q),d(q,$),d(q,Q),d(Q,V),d(V,ee),d(k,te),d(k,se),d(se,le),d(se,re),d(re,ie),d(ie,ae),d(k,oe),d(k,ne),d(ne,ce),d(ne,de),d(de,pe),d(pe,ue),d(k,ve),d(k,be),d(be,me),d(be,we),d(we,ge),d(ge,he),d(k,_e),d(k,ye),d(ye,fe),d(ye,Ce),d(Ce,xe),d(xe,Se),d(k,ke),d(k,Ae),d(Ae,Pe),d(Ae,Ne),d(Ne,Me),d(Me,De),d(k,Le),d(k,Te),d(Te,Ie),d(Te,Re),d(Re,Fe),d(Fe,Ke),d(k,Ee),d(k,Be),d(Be,Oe),d(Be,He),d(He,Je),d(Je,ze),d(w,Xe),d(w,Ge),d(Ge,We),d(t,Ue),d(t,Ye),d(Ye,Ze),d(Ye,je),d(Ye,qe),d(Ye,$e),d(Ye,Qe),d(Qe,Ve),d(Ve,et),d(et,tt),d(tt,st),d(st,lt),d(tt,at),d(tt,ot),d(ot,nt),d(tt,pt),d(tt,ut),d(ut,vt),d(et,gt),d(et,ht),d(ht,_t),d(_t,yt),d(ht,xt),d(ht,St),d(St,kt),d(ht,Nt),d(ht,Mt),d(Mt,Dt),d(ht,It),d(ht,Rt),d(Rt,Ft),d(et,Ot),d(et,Ht),d(Ht,Jt),d(Jt,zt),d(et,Ut),d(et,Yt),d(Yt,Zt),d(Zt,jt),d(et,Vt),d(et,es),d(es,ts),d(ts,ss),d(Qe,os),d(Qe,ns),d(ns,cs),d(cs,ds),d(cs,us),d(cs,vs),d(cs,bs),d(cs,ms),d(ms,ws),d(ws,gs),d(ms,hs),d(ms,_s),d(ms,ys),d(ms,fs),d(ms,Cs),d(ms,xs),d(xs,Ss),d(Ss,ks),d(ks,As),d(ks,Ps),d(Ps,Ns),d(ks,Ms),d(Ms,Ds),d(Ms,Ls),d(Ls,Ts),d(Ms,Is),d(Is,Rs),d(Ms,Fs),d(Fs,Ks),d(Ks,Es),d(Es,Bs),d(Es,Os),d(Es,Hs),d(Es,Js),d(Es,zs),d(ks,Xs),d(Xs,Gs),d(Xs,Ws),d(Ws,Us),d(Xs,Ys),d(Ys,Zs),d(Xs,js),d(js,qs),d(qs,$s),d($s,Qs),d(Qs,Vs),d(Vs,el),d(Qs,tl),d(tl,sl),d($s,ll),d(ll,rl),d(rl,il),d(ll,al),d(al,ol),d(ks,nl),d(nl,cl),d(nl,dl),d(dl,pl),d(nl,ul),d(ul,vl),d(nl,bl),d(bl,ml),d(ml,wl),d(wl,gl),d(ks,hl),d(hl,_l),d(hl,fl),d(hl,Cl),d(Cl,xl),d(hl,Sl),d(Sl,kl),d(ks,Al),d(Al,Pl),d(Al,Nl),d(Nl,Ml),d(Ml,Dl),d(Dl,Ll),d(Ll,Tl),d(Tl,Il),d(Il,Rl),d(Rl,Fl),Kl||(El=p(ts,"click",e[3]),Kl=!0)},p(e,t){4&t[0]&&ds.src!==(ps=C+e[2].bgImg)&&n(ds,"src",ps),4&t[0]&&Hl!==(Hl=e[2].alt+"")&&u(gs,Hl),1&t[0]&&Xl!==(Xl=l.compass_radius+(.02649*e[0]).toFixed(2)+"")&&u(Us,Xl),2&t[0]&&Wl!==(Wl=l.compass_angle+e[1]+l.degree+"")&&u(pl,Wl),4&t[0]&&yl!==(yl=e[2].lineColor)&&n(_l,"fill",yl)},i:v,o:v,d(e){e&&b(t),Kl=!1,El()}}}let C="https://s3.amazonaws.com/jigyaasa_content_static/",x="http://www.w3.org/2000/svg";function S(e){let t=[];for(let s=0;s<e.length;s++)t.push({mode:"mode",order:2,type:"scribble_0",index:0,d:"path"}),t[s].mode=e[s].mode,t[s].order=e[s].order,t[s].type=e[s].type,t[s].index=e[s].index,t[s].d=e[s].d;return t}function k(e,t,s,l,r,i,a){let o=((s-=r)-(e-=r))*(s-e)+((l-=i)-(t-=i))*(l-t),n=2*(e*(s-e)+t*(l-t)),c=n*n-4*o*(e*e+t*t-a*a);if(c<=0)return!1;let d=(-n+Math.sqrt(c))/(2*o),p=(-n-Math.sqrt(c))/(2*o);return 0<d&&d<1||0<p&&p<1}function A(e,t,s){let r,i,a,o,n,c,d,p,u,v,b,f,A,P,N,{xml:M}=t,{uxml:D}=t,{isReview:L}=t,{showAns:T}=t,{editorState:I}=t,R=!1,F=!0,K=!1,E=0,B=0,O="scribble",H="#00BCD4",J=[],z=0,X=0,G=[],W=[],U=[],Y=1,Z=0,j=0,q=100,$=!1,Q=90,V=0,ee={x:null,y:null},te={x:null,y:null},se=0,le=50,re=50,ie="",ae="",oe=!1,ne=1,ce=[],de=[],pe='<smans type="41"></smans>',ue=[],ve=[],be=!1,me=[],we=!1,ge=y({correctAnswer:!1,xml:"",openImg:!1,openDrag:!1,bgImg:"useraccount_000ANv.png",cdata:"",focusDATA:"",userXML:"",lineColor:"#00BCD4",selectedTools:["_scribble","_line","_compass"],remediationMode:"off",imgWidth:"600",alt:"Triangle image",markPointColor:"#00ff00"}),he={};ge.subscribe((e=>{s(2,he=e)}));function _e(e){if(j&&Xe(),e.shiftKey){if(!F)return;F=!1,K=!0,w.selectAll("#previewSvg .lastCircle","addClass","lastCircle_hover")}("compass"==O&&"mousedown"==e.type||e.shiftKey)&&(Fe(),w.selectAll("#previewSvg .lastCircle","css",{cursor:"grabbing"}),(F||"mousedown"==e.type)&&(R=!0,se=1),Be(),r=document.createElementNS(x,"path"),Je(H,5),r.setAttributeNS(null,"data-type",O+"_"+z),r.setAttributeNS(null,"data-order",z),r.setAttributeNS(null,"d","M"+f+" "+A),r.setAttributeNS(null,"tabindex","0"),o=f,n=A,J.push({mode:"add",order:z,type:O+"_"+z,index:z,d:"M"+f+" "+A}))}function ye(){w.listenAll(".focusPoints","focus",(function(e){w.selectAll(".focusPoints","removeClass","currentFocusPoint"),e.target.classList.add("currentFocusPoint")})),w.listenAll(".focusPoints","blur",(function(){w.selectAll(".focusPoints","removeClass","currentFocusPoint")}))}function fe(e){null!=e.screenX&&(B&&E&&Xe(),13==e.keyCode||32==e.keyCode||0===e.screenX?(e.preventDefault(),Pe(),ne?(w.select("#moveDrawIcon","addClass","h"),w.select("#previewSvg","css",{cursor:"crosshair"})):(w.select("#moveDrawIcon","removeClass","h"),w.select("#previewSvg","css",{cursor:"auto"}))):"click"==e.type&&0!==e.screenX&&Pe())}function Ce(e,t){j&&Xe(),"click"!=t.type&&13!=t.keyCode&&32!=t.keyCode||(O=e.getAttribute("data-title"),w.select("#previewSvg","css",{cursor:"crosshair"}),w.select("#moveDrawIcon","addClass","h"),B=0,E=0,"eraser"==O?w.selectAll(".previewDrawingPaths path","addClass","eraserHover"):w.selectAll(".previewDrawingPaths path","removeClass","eraserHover"),w.selectAll(".drawingCompassSvg","addClass","h"),"compass"==O&&w.selectAll(".drawingCompassSvg","removeClass","h"),Fe()),13!=t.keyCode&&32!=t.keyCode||"eraser"==O||"compass"==O||(w.select("#moveDrawIcon","removeClass","h"),w.select("#previewSvg","css",{cursor:"auto"})),B&&E&&Xe()}function xe(e){switch(O){case"line":case"scribble":R&&(He(e),Z&&(o==i&&n==a&&"line"==O||"scribble"==O&&J[z].d.split("L").length-1<3)&&J.pop(),o==i&&n==a&&"line"==O||"scribble"==O&&J[z].d.split("L").length-1<3?J.pop():(r.setAttributeNS(null,"d",J[z].d+" L"+i+" "+a),J[z].d=J[z].d+" L"+i+" "+a,w.select(".previewDrawingPaths").prepend(r),z++,X++,G=[],w.select("#preview_clearScreen").disabled=!1,w.select("#preview_undo").disabled=!1,w.select("#preview_redo").disabled=!0)),R=!1;break;case"compass":V=0,se=0,$&&(He(e),c=i,d=a,s(0,q=w.select(".drawingCompassRoute").getAttribute("r")),Oe(c,d,q,Q),$=!1),R&&(J[z].d.split("L").length-1<4?J.pop():(r.setAttributeNS(null,"d",J[z].d+" L"+f+" "+A),J[z].d=J[z].d+" L"+f+" "+A,w.select(".previewDrawingPaths").prepend(r),z++,X++,G=[],w.select("#preview_clearScreen").disabled=!1,w.select("#preview_undo").disabled=!1,w.select("#preview_redo").disabled=!0),R=!1),w.selectAll("#previewSvg .lastCircle","css",{cursor:"grab"})}De(S(J))}function Se(){s(4,L=!0),(B&&E||Z)&&Xe(),!F&&K&&Re(),Ie(!0),O=he.selectedTools[0].substr(-(he.selectedTools[0].length-1)),w.selectAll(".preview_btn,#mark_points","removeClass","active"),w.select("#preview"+he.selectedTools[0],"addClass","active"),"compass"==O?w.selectAll(".drawingCompassSvg","removeClass","h"):w.selectAll(".drawingCompassSvg","addClass","h"),s(2,he.remediationMode="on",he),w.selectAll(".previewBtnGrp","addClass","h"),O="none",w.selectAll(".preview_drawing_container","css",{pointerEvents:"none"}),w.select("#previewSvg","removeClass","previewKeySvg"),w.selectAll(".previewMarkingPaths .answer_mark","remove"),Le(),Ne(JSON.parse(me)),w.selectAll("path.answer_mark","attr",{tabindex:"0","aria-labelledby":"answerLine"}),he.correctAnswer?(w.insert(".previewMarkingPaths",'<title id="answerLine">'+l.ans_correct+"</title>","beforeend"),w.selectAll(".answer_mark","css",{stroke:"#0F9D58"})):(w.insert(".previewMarkingPaths",'<title id="answerLine">'+l.ans_incorrect+"</title>","beforeend"),w.selectAll(".answer_mark","css",{stroke:"#FF0000"}),w.selectAll(".answer_circle","css",{stroke:"#0F9D58"}))}function ke(){s(4,L=!1),w.selectAll(".preview_drawing_container","css",{pointerEvents:""}),w.selectAll(".previewBtnGrp","removeClass","h"),w.select("#previewSvg","addClass","previewKeySvg"),O=he.selectedTools[0].substr(-(he.selectedTools[0].length-1)),w.selectAll(".preview_btn,#mark_points","removeClass","active"),w.select("#preview"+he.selectedTools[0],"addClass","active"),"compass"==O?(w.selectAll(".drawingCompassSvg","removeClass","h"),w.select("#previewSvg","css",{cursor:"crosshair"}),w.select("#moveDrawIcon","addClass","h")):w.selectAll(".drawingCompassSvg","addClass","h"),w.selectAll(".preview_btn,#mark_points","removeClass","active"),w.selectAll("#preview"+he.selectedTools[0],"addClass","active"),w.selectAll(".correct_answer_container .answer_mark","remove"),w.select("#mark_points").innerText="Mark Points",w.select("#mark_points").disabled=!1,ne=1,s(2,he.remediationMode="off",he),w.selectAll(".previewMarkingPaths title","remove"),w.selectAll(".answer_mark","css",{stroke:he.markPointColor}),w.selectAll(".answer_mark","removeAttr","tabindex")}function Ae(){try{ie=_(M),null==ie.smxml._markPointColor&&(ie.smxml._markPointColor="#00ff00"),null==ie.smxml._color&&(ie.smxml._color="rgb(0, 188, 212)"),ge.update((e=>(e.bgImg=ie.smxml._bgimg,e.alt=ie.smxml._imgAlt,e.imgWidth=ie.smxml._width,e.lineColor=ie.smxml._color,e.focusDATA=ie.smxml.backgroundPoint.__cdata,e.markPointColor=ie.smxml._markPointColor,e.selectedTools=ie.smxml.div._selectedDrawingType.split(","),e))),U=[],Y=1;let e=he.focusDATA;e="["+e.replace(/!/g,",")+"]",e=JSON.parse(e),w.selectAll(".backgroundFocusPointPreview circle,.backgroundFocusPathPreview path, .backgroundFocusPointPreview title","remove");for(let t=0;t<e.length;t++)U.push(e[t][t]);for(let t=0;t<e.length;t++){for(let s=0;s<e[t][t].length;s++)U[t][s].x=e[t][t][s].x,U[t][s].y=e[t][t][s].y,r=document.createElementNS(x,"circle"),Je("#808080",5),r.setAttributeNS(null,"aria-labelledby","focusPoint_"+Y+"_title focusPoint_"+Y+"_desc"),r.setAttributeNS(null,"tabindex","0"),r.setAttributeNS(null,"class","focusPoints"),r.setAttributeNS(null,"data-focusOrder",Y),r.setAttributeNS(null,"cx",U[t][s].x),r.setAttributeNS(null,"cy",U[t][s].y),r.setAttributeNS(null,"r","2px"),w.select(".backgroundFocusPointPreview").append(r),w.insert(".backgroundFocusPointPreview",'<title id="focusPoint_'+Y+'_title">You are on the '+Y+' Point </title><desc id="focusPoint_'+Y+'_desc">Press shift + tab to move towards the previous point or tab to move towards the next points</desc>',"beforeend"),Y++;Te(U[t],1)}H=he.lineColor,J=[],F=!0,K=!1,E=0,B=0,z=0,X=0,G=[],W=[],ne=1,ce=[],O=he.selectedTools[0].substr(-(he.selectedTools[0].length-1)),I&&w.selectAll(".previewMarkingPaths .answer_mark,.previewDrawingPaths path","remove"),"compass"==O?(w.selectAll(".drawingCompassSvg","removeClass","h"),w.select("#previewSvg","css",{cursor:"crosshair"}),w.select("#moveDrawIcon","addClass","h")):w.selectAll(".drawingCompassSvg","addClass","h"),w.select("#mark_points").disabled=!1,w.select("#mark_points").innerText="Mark Points",w.select("#preview_undo").disabled=!0,w.select("#preview_redo").disabled=!0,w.select("#preview_clearScreen").disabled=!0,w.selectAll(".geometryToolPreview","addClass","h");for(let e=0;e<he.selectedTools.length;e++)w.select("#preview"+he.selectedTools[e],"removeClass","h");w.selectAll(".preview_btn,#mark_points","removeClass","active"),w.select("#preview"+he.selectedTools[0],"addClass","active"),w.selectAll(".preview_drawing_toolbar, .centerImgPreview","attr",{style:"width:"+(Number(he.imgWidth)+2)+"px"}),w.select(".centerImg #svgImgPreview","attr",{src:C+""+he.bgImg,alt:he.alt,width:he.imgWidth}),w.enableBsAll(".tooltip_btn","Tooltip",{container:"body"})}catch(e){console.warn({error:e,func:"parseXMLForGettingData @271"})}}function Pe(){w.selectAll(".drawingCompassSvg","addClass","h"),w.selectAll("#previewSvg path","removeClass","eraserHover"),ne?(w.selectAll(".preview_btn","removeClass","active"),w.select("#mark_points").innerText="Finish Marking",w.select("#mark_points","addClass","active"),ne=0,w.selectAll(".previewMarkingPaths .answer_mark","remove"),ue=[],ce=[],I||w.selectAll(".correct_answer_container .answer_mark","remove"),O="markPoints"):(w.select("#mark_points").innerText="Mark Points",w.select("#mark_points","removeClass","active"),ce.length>=1&&(Te(ce),"on"==he.remediationMode&&Ie()),O=he.selectedTools[0].substr(-(he.selectedTools[0].length-1)),w.select("#moveDrawIcon","addClass","h"),w.select("#previewSvg","css",{cursor:"crosshair"}),w.select("#preview"+he.selectedTools[0],"addClass","active"),"compass"==O?w.selectAll(".drawingCompassSvg","removeClass","h"):w.selectAll(".drawingCompassSvg","addClass","h"),ne=1)}function Ne(e){for(let t=0;t<e.length;t++)r=document.createElementNS(x,"circle"),Je(he.markPointColor,5),r.setAttributeNS(null,"class","answer_mark"),r.setAttributeNS(null,"cx",e[t].x),r.setAttributeNS(null,"cy",e[t].y),r.setAttributeNS(null,"r","2px"),w.select(".previewMarkingPaths").prepend(r);Te(e)}function Me(e,t){if(null!=w.select(e).getAttribute("data-order")){G=[];let s="",l=t.indexOf(t[w.select(e).getAttribute("data-order")]),r="["+JSON.stringify(t[l])+"]";s=S(JSON.parse(r)),s[0].mode="remove",t.push(s[0]),De(S(t)),z++,X++,w.select(e,"remove"),w.select("#preview_redo").disabled=!0,w.select("#preview_undo").disabled=!1,0==w.selectAll(".previewDrawingPaths path").length&&(w.select("#preview_clearScreen").disabled=!0)}}function De(e){de=[];let t=0;for(let s=0;s<e.length;s++)for(t=s+1;t<e.length;)e[s].type==e[t].type&&"add"==e[s].mode&&"remove"==e[t].mode&&(e[s].mode=null,e[t].mode=null),t++;for(let t=0;t<e.length;t++)e=e.filter((function(e){return null!=e.mode}));de.push(e),Le()}function Le(){me=[],me=0==ce.length?JSON.stringify(ue):JSON.stringify(ce),pe='<smans type="41"><markpoints>'+me+"</markpoints><userDrawPath>"+JSON.stringify(de[0])+"</userDrawPath><ansCorrect>"+oe+"</ansCorrect></smans>",window.ISSPECIALMODULEUSERXMLCHANGE=1,w.select("#special_module_user_xml").value=pe}function Te(e,t){if(0==e.length)return;r=document.createElementNS(x,"path");let s="M "+e[0].x+" "+e[0].y,l="";for(let t=1;t<e.length;t++)l+=" L "+e[t].x+" "+e[t].y;r.setAttributeNS(null,"d",s+""+l),t?(Je("rgb(128, 128, 128)",5),w.select(".backgroundFocusPathPreview").prepend(r)):(Je(he.markPointColor,5),r.setAttributeNS(null,"class","answer_mark"),w.select(".previewMarkingPaths").prepend(r))}function Ie(e){ie=_(he.xml),ae=ie.smxml.div.__cdata,ae="["+ae.replace(/!/g,",")+"]",ae=JSON.parse(ae);let t=[];t=ce,I||D&&0==ce.length&&(t=ue),Ke(t,e),Ee(oe,t,e),e&&(w.select("#mark_points").innerText="Mark Points",w.select("#mark_points").disabled=!1,ne=1)}function Re(){w.selectAll("#previewSvg .lastCircle","removeClass","lastCircle_hover"),w.selectAll("#previewSvg .lastCircle","css",{cursor:"grab"}),F=!0,-1==J[z].d.indexOf("L")?J.pop():(r.setAttributeNS(null,"d",J[z].d+" L"+f+" "+A),J[z].d=J[z].d+" L"+f+" "+A,w.select(".previewDrawingPaths").prepend(r),z++,X++,G=[],w.select("#preview_undo").disabled=!1,w.select("#preview_clearScreen").disabled=!1,w.select("#preview_redo").disabled=!0),De(S(J))}function Fe(){w.selectAll(".previewMarkingPaths .answer_mark","remove"),I||w.selectAll(".correct_answer_container .answer_mark","remove"),ce=[],w.select("#mark_points").innerText="Mark Points",w.select("#mark_points").disabled=!1,ne=1}function Ke(e,t){let s=[];if(t)for(let e=0;e<ae.length;e++)r=document.createElementNS(x,"circle"),Je("#0F9D58","2"),r.setAttributeNS(null,"class","answer_mark answer_circle"),r.setAttributeNS(null,"cx",ae[e].x),r.setAttributeNS(null,"cy",ae[e].y),r.setAttributeNS(null,"r",ae[e].r),w.select(".correct_answer_container").prepend(r);if(0==ae.length||0==e.length)return void(oe=!1);let l=1==e.length?e.length:e.length-1;for(let t=0;t<ae.length;t++)for(let r=0;r<l;r++){if(1==l&&1==e.length&&k(e[r].x,e[r].y,0,0,ae[t].x,ae[t].y,ae[t].r)){s.push("Match");break}if(l>=1&&e.length>1&&k(e[r].x,e[r].y,e[r+1].x,e[r+1].y,ae[t].x,ae[t].y,ae[t].r)){s.push("Match");break}}oe=s.length==ae.length,s=[]}function Ee(e,t,r){e?(s(2,he.correctAnswer=!0,he),r&&(ae.length&&t.length&&Te(t),w.selectAll(".answer_mark","css",{stroke:"#0F9D58"}),I&&T(l.correct))):(s(2,he.correctAnswer=!1,he),r&&(ae.length&&t.length&&Te(t),w.selectAll(".answer_mark","css",{stroke:"#ff0000"}),w.selectAll(".answer_circle","css",{stroke:"#0F9D58"}),I&&T(l.incorrect))),w.select("#answer").checked=he.correctAnswer}function Be(){ee.x=Number(w.select(".compassRotationBar").getAttribute("x1")),ee.y=Number(w.select(".compassRotationBar").getAttribute("y1")),te.x=Number(w.select(".compassRotationBar").getAttribute("x2")),te.y=Number(w.select(".compassRotationBar").getAttribute("y2")),s(0,q=Number(w.select(".drawingCompassRoute").getAttribute("r"))),s(1,Q=180*Math.atan2(te.y-ee.y,te.x-ee.x)/Math.PI)}function Oe(e,t,s,l){p=e+s/2*Math.cos(l*(Math.PI/180)),u=t+s/2*Math.sin(l*(Math.PI/180)),v=e+3*s/4*Math.cos(l*(Math.PI/180)),b=t+3*s/4*Math.sin(l*(Math.PI/180)),f=e+s*Math.cos(l*(Math.PI/180)),A=t+s*Math.sin(l*(Math.PI/180)),P=e+5*s/4*Math.cos(l*(Math.PI/180)),N=t+5*s/4*Math.sin(l*(Math.PI/180)),w.selectAll(".drawingCompassRoute,.drawingCompassCenter","attr",{cx:e,cy:t}),w.selectAll(".drawingCompassRoute","attr",{r:s}),w.selectAll(".compassRotationBar","attr",{x1:e,y1:t,x2:f,y2:A}),w.selectAll("#previewSvg .lastCircleMid","attr",{cx:P,cy:N,transform:"rotate("+l+","+P+","+N+")"}),w.selectAll("#previewSvg .lastCircle","attr",{cx:f,cy:A}),w.selectAll("#previewSvg .midSmallCircle","attr",{cx:v,cy:b,transform:"rotate("+l+","+v+","+b+")"}),w.selectAll("#previewSvg .mid_circle","attr",{cx:p,cy:u,transform:"rotate("+l+","+p+","+u+")"});let r=l;r<0&&(r=360+r),w.select("#compassRotationTitle").innerText="Compass Angle, Your Current Angle is "+r.toFixed(0)+" degree",w.select("#compassRadiusTitle").innerText="Compass Radius, Your Current Radius is "+(.02649*s).toFixed(1)+"cm"}function He(e){let t=document.getElementById("previewSvg").getBoundingClientRect();i=e.clientX-t.left,a=e.clientY-t.top}function Je(e,t){r.style.stroke=e,r.style.strokeWidth=t,r.style.fill="none"}function ze(e,t){if(!w.select(".drawingCompassSvg").classList.contains("h")&&"compass"==O){let l=w.select("#svgImgPreview").clientWidth,i=w.select("#svgImgPreview").clientHeight;if(Be(),t.shiftKey&&(38==t.keyCode||37==t.keyCode||39==t.keyCode||40==t.keyCode)){if("radius"==e)switch(t.keyCode){case 38:s(0,q++,q);break;case 37:s(0,q--,q);break;case 39:s(0,q++,q);break;case 40:s(0,q--,q)}if("move"==e)switch(t.keyCode){case 38:ee.y--;break;case 37:ee.x--;break;case 39:ee.x++;break;case 40:ee.y++}if("rotate"==e||"draw"==e)switch(t.keyCode){case 38:s(1,Q++,Q);break;case 39:s(1,Q--,Q);break;case 37:s(1,Q++,Q);break;case 40:s(1,Q--,Q)}if("draw"==e&&(w.select("#previewSvg .lastCircle").classList.contains("lastCircle_hover")||w.select("#previewSvg .lastbigcircle").classList.contains("lastCircle_hover"))&&(r.setAttributeNS(null,"d",J[z].d+" L"+f+" "+A),J[z].d=J[z].d+" L"+f+" "+A,w.select(".previewDrawingPaths").prepend(r)),ee.x<10||q<80||q>360||ee.x>l||ee.y<10||ee.y>i)return;Oe(ee.x,ee.y,q,Q)}}}function Xe(){o==re&&n==le&&"line"==O||"scribble"==O&&-1==J[z].d.indexOf("L")?J.pop():(isNaN(re)&&isNaN(le)||(r.setAttributeNS(null,"d",J[z].d+" L"+re+" "+le),J[z].d=J[z].d+" L"+re+" "+le,w.select(".previewDrawingPaths").prepend(r)),z++,X++,G=[],w.select("#preview_undo").disabled=!1,w.select("#preview_clearScreen").disabled=!1,w.select("#preview_redo").disabled=!0),j=0,B=0,E=0,Z=0,De(S(J))}return m((async()=>{w.createLink(baseUrlTheme+"clsSMDrawing/css/drawing.css",{preload:!0,type:"stylesheet",as:"style"}),we=-1!=navigator.userAgent.indexOf("Mac"),Oe(160,118,100,90),w.listen("body","click","#set-review",(function(){Se()})),w.listen("body","click","#unset-review",(function(){ke()})),w.listen("body","click","#preview_reset_btn",(function(){g({text:l.reset_module,icon:"warning",buttons:!0}).then((e=>{e&&(Ae(),ye())}))})),w.bind("body","keydown",(function(e){if(!I&&(32==e.keyCode||37==e.keyCode||38==e.keyCode||39==e.keyCode||40==e.keyCode))return!1})),w.listen("body","keyup",".previewKeySvg .previewDrawingPaths path",(function(e,t){(46==t.keyCode||8==t.keyCode&&we)&&Me(e,J)})),w.listen("body","keyup",".previewKeySvg",(function(e,t){90==t.keyCode&&t.ctrlKey&&!w.select("#preview_undo").disabled&&(B&&E&&Xe(),w.select("#preview_undo").click()),89==t.keyCode&&t.ctrlKey&&!w.select("#preview_redo").disabled&&(B&&E&&Xe(),w.select("#preview_redo").click()),88==t.keyCode&&t.ctrlKey&&w.select("#preview_clearScreen").click(),13!=t.keyCode&&32!=t.keyCode||"compass"==O||"eraser"==O||(w.select("#moveDrawIcon","removeClass","h"),w.select(".previewKeySvg","css",{cursor:"auto"})),!t.shiftKey||13!=t.keyCode&&32!=t.keyCode||0==w.select("#moveDrawIcon").offsetHeight||("markPoints"==O?(r=document.createElementNS(x,"circle"),Je(he.markPointColor,5),r.setAttributeNS(null,"class","answer_mark"),r.setAttributeNS(null,"cx",re),r.setAttributeNS(null,"cy",le),r.setAttributeNS(null,"r","2px"),ce.push({x:re,y:le}),w.select(".previewMarkingPaths").prepend(r),Ie(!1),Le()):E?Xe():(B=1,Fe(),r=document.createElementNS(x,"path"),Je(H,5),r.setAttributeNS(null,"data-type",O+"_"+z),r.setAttributeNS(null,"data-order",z),r.setAttributeNS(null,"d","M"+re+" "+le),r.setAttributeNS(null,"tabindex","0"),o=re,n=le,J.push({mode:"add",order:z,type:O+"_"+z,index:z,d:"M"+re+" "+le}),E=1))})),w.listen("body","keydown",".previewKeySvg",(function(e,t){if(w.select("#moveDrawIcon").offsetHeight){let e=w.select("#svgImgPreview").clientWidth,s=w.select("#svgImgPreview").clientHeight;if(t.shiftKey&&(38==t.keyCode||37==t.keyCode||39==t.keyCode||40==t.keyCode)&&!Z){switch(t.keyCode){case 38:le--;break;case 40:le++;break;case 39:re++;break;case 37:re--}if(le<0||re>e||re<0||le>s)return;w.select("#moveDrawIcon","css",{top:le+"px",left:re+"px"}),B&&(r.setAttributeNS(null,"d",J[z].d+" L"+re+" "+le),"line"!=O&&(J[z].d=J[z].d+" L"+re+" "+le),w.select(".previewDrawingPaths").prepend(r),E=1)}if(t.shiftKey&&76==t.keyCode&&(Z?(Z=0,Xe()):(Z=1,B=1,Fe(),re=Number(w.select(".currentFocusPoint").getAttribute("cx")),le=Number(w.select(".currentFocusPoint").getAttribute("cy")),r=document.createElementNS(x,"path"),Je(H,5),r.setAttributeNS(null,"data-type",O+"_"+z),r.setAttributeNS(null,"data-order",z),r.setAttributeNS(null,"d","M"+re+" "+le),r.setAttributeNS(null,"tabindex","0"),o=re,n=le,J.push({mode:"add",order:z,type:O+"_"+z,index:z,d:"M"+re+" "+le}))),9==t.keyCode&&Z&&("line"==O||"scribble"==O)){let e=setTimeout((function(){w.select(".currentFocusPoint").nodeName&&(re=Number(w.select(".currentFocusPoint").getAttribute("cx")),le=Number(w.select(".currentFocusPoint").getAttribute("cy")),isNaN(re)&&isNaN(le)||("scribble"!=O&&"line"!=O||(j=1),r.setAttributeNS(null,"d",J[z].d+" L"+re+" "+le),w.select(".previewDrawingPaths").prepend(r),clearTimeout(e)))}),10)}if(68==t.keyCode&&Z&&j){let e=setTimeout((function(){isNaN(re)&&isNaN(le)||(J[z].d=J[z].d+" L"+re+" "+le,w.select(".previewDrawingPaths").prepend(r),clearTimeout(e),j=0)}),10)}}})),w.listen("body","keydown",".previewKeySvg .drawingCompassCenter",(function(e,t){ze("move",t)})),w.listen("body","keydown",".previewKeySvg .mid_circle",(function(e,t){ze("radius",t)})),w.listen("body","keydown",".previewKeySvg .midSmallCircle",(function(e,t){ze("rotate",t)})),w.listen("body","keydown",".previewKeySvg .lastCircle",(function(e,t){ze("draw",t)})),w.listen("body","keydown",".focusPoints",(function(e,t){if(t.shiftKey&&13==t.keyCode)return!1;13!=t.keyCode&&32!=t.keyCode||"markPoints"==O||"eraser"==O||(re=Number(w.select(".currentFocusPoint").getAttribute("cx")),le=Number(w.select(".currentFocusPoint").getAttribute("cy")),"compass"!=O?w.select("#moveDrawIcon","css",{top:le+"px",left:re+"px"}):Oe(re,le,q,Q))})),w.listen("body","keyup",".previewKeySvg .lastCircle",(function(e,t){!F&&K&&16==t.keyCode&&Re()})),w.bind(".previewKeySvg .lastCircle","blur",(function(){!F&&K&&Re()})),w.listen("body","mousedown","#previewSvg .midSmallCircle",(function(){"compass"==O&&(se=1,Be())})),w.listen("body","mousedown","#previewSvg .drawingCompassCenter",(function(){"compass"==O&&(He(event),c=i,d=a,s(0,q=w.select(".drawingCompassRoute").getAttribute("r")),Oe(c,d,q,Q),$=!0)})),w.listen("body","mousedown","#previewSvg .mid_circle",(function(){"compass"==O&&(V=1)})),w.listen("body","mousedown","#previewSvg .lastCircle",(function(e,t){_e(t)})),w.listen("body","keydown","#previewSvg .lastCircle",(function(e,t){_e(t)})),w.listen("body","mousedown","#previewSvg",(function(e,t){switch(w.select("#previewSvg","css",{cursor:"crosshair"}),w.select("#moveDrawIcon","addClass","h"),(B&&E||Z)&&Xe(),O){case"line":case"scribble":Fe(),R=!0,He(t),r=document.createElementNS(x,"path"),Je(H,5),r.setAttributeNS(null,"data-type",O+"_"+z),r.setAttributeNS(null,"data-order",z),r.setAttributeNS(null,"d","M"+i+" "+a),r.setAttributeNS(null,"tabindex","0"),o=i,n=a,J.push({mode:"add",order:z,type:O+"_"+z,index:z,d:"M"+i+" "+a});break;case"eraser":Me(".currentSvg",J);break;case"markPoints":ne||(He(t),r=document.createElementNS(x,"circle"),Je(he.markPointColor,5),r.setAttributeNS(null,"class","answer_mark"),r.setAttributeNS(null,"cx",i),r.setAttributeNS(null,"cy",a),r.setAttributeNS(null,"r","2px"),ce.push({x:i,y:a}),w.select(".previewMarkingPaths").prepend(r),Ie(!1),Le())}})),w.listen("body","mousemove","#previewSvg",(function(e,t){switch(O){case"line":R&&(He(t),r.setAttributeNS(null,"d",J[z].d+" L"+i+" "+a),o==i&&n==a||w.select(".previewDrawingPaths").prepend(r));break;case"scribble":R&&(He(t),r.setAttributeNS(null,"d",J[z].d+" L"+i+" "+a),J[z].d=J[z].d+" L"+i+" "+a,J[z].d.split("L").length-1<3||w.select(".previewDrawingPaths").prepend(r));break;case"compass":He(t),$&&(c=i,d=a,s(0,q=w.select(".drawingCompassRoute").getAttribute("r")),Oe(c,d,q,Q)),V&&(Be(),s(0,q=2*Math.sqrt(Math.pow(i-ee.x,2)+Math.pow(a-ee.y,2))),q<80&&s(0,q=80),q>360&&s(0,q=360),Oe(ee.x,ee.y,q,Q)),se&&(Be(),s(1,Q=180*Math.atan2(a-ee.y,i-ee.x)/Math.PI),Q<0&&s(1,Q=360+Q),Oe(ee.x,ee.y,q,Q)),R&&(w.select("#previewSvg .lastCircle").classList.contains("lastCircle_hover")||w.select("#previewSvg .lastbigcircle").classList.contains("lastCircle_hover")?(r.setAttributeNS(null,"d",J[z].d+" L"+f+" "+A),J[z].d=J[z].d+" L"+f+" "+A,J[z].d.split("L").length-1<4||w.select(".previewDrawingPaths").prepend(r)):xe(t))}})),w.listen("body","mouseup","#previewSvg",(function(e,t){xe(t)})),w.bind("#previewSvg","mouseleave",(function(e){xe(e)})),w.listen("body","click",".preview_toolbar",(function(e,t){Ce(e,t)})),w.listen("body","keyup",".preview_toolbar",(function(e,t){Ce(e,t)})),w.listen("body","mouseover",".previewDrawingPaths path",(function(e){"eraser"==O&&(w.selectAll(".previewDrawingPaths path","removeClass","currentSvg"),e.classList.add("currentSvg"))})),w.listen("body","mouseout",".previewDrawingPaths path",(function(e){"eraser"==O&&e.classList.remove("currentSvg")})),w.listen("body","mousemove","#previewSvg .lastCircle",(function(e){e.classList.add("lastCircle_hover"),w.selectAll("#previewSvg .lastCircleMid","attr",{opacity:1})})),w.listen("body","mouseout","#previewSvg .lastCircle",(function(e){e.classList.remove("lastCircle_hover"),w.selectAll("#previewSvg .lastCircleMid","attr",{opacity:0})})),w.listenAll("#previewSvg .lastCircle","focus",(function(e){e.target.classList.add("lastCircle_hover"),w.selectAll("#previewSvg .lastCircleMid","attr",{opacity:1})})),w.listenAll("#previewSvg .lastCircle","blur",(function(e){e.target.classList.remove("lastCircle_hover"),w.selectAll("#previewSvg .lastCircleMid","attr",{opacity:0})})),w.listen("body","click",".preview_btn",(function(e){w.selectAll(".preview_btn, #mark_points","removeClass","active"),e.classList.add("active")})),w.listen("body","click","#preview_clearScreen",(function(){w.selectAll(".previewDrawingPaths path","remove"),X=0,z=0,J=[],De(S(J)),w.select("#preview_undo").disabled=!0,w.select("#preview_redo").disabled=!0,w.select("#preview_clearScreen").disabled=!0})),w.listen("body","click","#preview_undo",(function(e){1==X&&(e.disabled=!0),w.select("#preview_redo").disabled=!1,"add"==J[J.length-1].mode?w.selectAll('#previewSvg [data-order="'+(J.length-1)+'"]',"remove"):"remove"==J[J.length-1].mode&&(r=document.createElementNS(x,"path"),Je(H,5),r.setAttributeNS(null,"data-type",J[J.length-1].type),r.setAttributeNS(null,"data-order",J[J.length-1].order),r.setAttributeNS(null,"d",J[J.length-1].d),r.setAttributeNS(null,"tabindex","0"),"eraser"==O&&r.setAttributeNS(null,"class","eraserHover"),w.select(".previewDrawingPaths").prepend(r)),G.push(J.pop()),De(S(J)),z--,X--,w.select("#preview_clearScreen").disabled=0==w.selectAll(".previewDrawingPaths path").length,0==J.length&&(e.disabled=!0)})),w.listen("body","click","#preview_redo",(function(e){z++,G.length>0&&W.push(G.pop()),"add"==W[W.length-1].mode?(r=document.createElementNS(x,"path"),Je(H,5),r.setAttributeNS(null,"data-type",W[W.length-1].type),r.setAttributeNS(null,"data-order",W[W.length-1].order),r.setAttributeNS(null,"d",W[W.length-1].d),r.setAttributeNS(null,"tabindex","0"),"eraser"==O&&r.setAttributeNS(null,"class","eraserHover"),w.select(".previewDrawingPaths").prepend(r)):"remove"==W[W.length-1].mode&&w.selectAll('#previewSvg [data-order="'+W[W.length-1].order+'"]',"remove"),X++,J.push(W.pop()),De(S(J)),w.select("#preview_clearScreen").disabled=0==w.selectAll(".previewDrawingPaths path").length,0==G.length&&(e.disabled=!0),w.select("#preview_undo").disabled=!1})),w.listen("body","click","#mark_points",(function(e,t){fe(t)})),w.listen("body","keyup","#mark_points",(function(e,t){fe(t)}))})),h((async()=>{var e,t;he.xml!=M&&(Ae(),s(2,he.xml=M,he),ye(),void 0===I&&(w.selectAll(".reset_group","remove"),D&&(-1==D.search('<smans type="41">')||0==D.search('<smans type="41"></smans>')||-1!=D.search("undefined")?w.select("#special_module_user_xml").value="":(L?(w.selectAll(".previewBtnGrp","addClass","h"),O="none",w.selectAll(".preview_drawing_container","css",{pointerEvents:"none"}),w.select("#previewSvg","removeClass","previewKeySvg")):(w.selectAll(".preview_drawing_container","css",{pointerEvents:""}),w.selectAll(".previewBtnGrp","removeClass","h"),w.select("#previewSvg","addClass","previewKeySvg"),O=he.selectedTools[0].substr(-(he.selectedTools[0].length-1)),w.selectAll(".preview_btn,#mark_points","removeClass","active"),w.select("#preview"+he.selectedTools[0],"addClass","active")),e=w.select("#special_module_user_xml").value,t=L,e=_(e),ue=JSON.parse(e.smans.markpoints),null==e.smans.userDrawPath&&(e.smans.userDrawPath=""),ve=JSON.parse(e.smans.userDrawPath),be="true"==e.smans.ansCorrect.toLowerCase(),ie=_(M),ae=ie.smxml.div.__cdata,ae="["+ae.replace(/!/g,",")+"]",ae=JSON.parse(ae),Ne(ue),function(){ve.length&&(w.select("#preview_undo").disabled=!1,w.select("#preview_undo").disabled=!1);for(let e=0;e<ve.length;e++)ve[e].type=ve[e].type.substr(0,ve[e].type.indexOf("_"))+"_"+e,ve[e].order=e,r=document.createElementNS(x,"path"),Je(H,5),r.setAttributeNS(null,"data-type",ve[e].type),r.setAttributeNS(null,"data-order",ve[e].order),r.setAttributeNS(null,"d",ve[e].d),r.setAttributeNS(null,"tabindex","0"),w.select(".previewDrawingPaths").prepend(r);z=ve.length,J=S(ve)}(),Ke(ue,t),Ee(be,ue,t))))),he.review!=L&&I&&(ge.update((e=>(e.review=L,e))),L?Se():ke())})),e.$$set=e=>{"xml"in e&&s(5,M=e.xml),"uxml"in e&&s(6,D=e.uxml),"isReview"in e&&s(4,L=e.isReview),"showAns"in e&&s(7,T=e.showAns),"editorState"in e&&s(8,I=e.editorState)},[q,Q,he,function(){w.getBS("#drawing_shortcut_modal","Modal").show()},L,M,D,T,I]}export default class extends e{constructor(e){super(),t(this,e,A,f,s,{xml:5,uxml:6,isReview:4,showAns:7,editorState:8},[-1,-1,-1])}}
//# sourceMappingURL=DrawingPreview-885f1a58.js.map
