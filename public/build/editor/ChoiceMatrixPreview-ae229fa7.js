import{S as e,i as t,s as a,F as n,e as l,j as s,q as i,h as c,u as r,f as o,Z as d,g as m,x as u,o as f,D as h,b as g,l as p,c as b,m as x,t as v,a as y,d as A,E as w,a5 as k,p as _,X as E,A as C,w as F,Y as N}from"./main-ce4abdd6.js";import{I as S}from"./ItemHelper-7f5401f1.js";import{l as $}from"./parseCSV-929be628.js";const{document:B}=n;function R(e,t,a){const n=e.slice();return n[26]=t[a],n[28]=a,n}function D(e,t,a){const n=e.slice();return n[29]=t[a],n[31]=a,n}function j(e,t,a){const n=e.slice();return n[26]=t[a],n[28]=a,n}function J(e){let t,a=e[2].cdata.option,n=[];for(let t=0;t<a.length;t+=1)n[t]=M(j(e,a,t));return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=i()},m(e,a){for(let t=0;t<n.length;t+=1)n[t].m(e,a);c(e,t,a)},p(e,l){if(20&l[0]){let s;for(a=e[2].cdata.option,s=0;s<a.length;s+=1){const i=j(e,a,s);n[s]?n[s].p(i,l):(n[s]=M(i),n[s].c(),n[s].m(t.parentNode,t))}for(;s<n.length;s+=1)n[s].d(1);n.length=a.length}},d(e){h(n,e),e&&f(t)}}}function M(e){let t,a,n,i,h,g=e[26].text.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"";return{c(){t=l("th"),a=r(g),o(t,"key",n=e[28]),o(t,"class",i=d("preview_header adjust_width "+("theme3"!==e[2].theme?e[26].id+"text-center text-white":e[26].id+"text-center"))+" svelte-i5n91f"),o(t,"tabindex",h=0),m(t,"background-color",e[4][e[2].theme],1)},m(e,n){c(e,t,n),s(t,a)},p(e,n){4&n[0]&&g!==(g=e[26].text.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"")&&u(a,g),4&n[0]&&i!==(i=d("preview_header adjust_width "+("theme3"!==e[2].theme?e[26].id+"text-center text-white":e[26].id+"text-center"))+" svelte-i5n91f")&&o(t,"class",i),4&n[0]&&m(t,"background-color",e[4][e[2].theme],1)},d(e){e&&f(t)}}}function O(e){let t,a=e[1].cdata.term,n=[];for(let t=0;t<a.length;t+=1)n[t]=z(R(e,a,t));return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=i()},m(e,a){for(let t=0;t<n.length;t+=1)n[t].m(e,a);c(e,t,a)},p(e,l){if(302&l[0]){let s;for(a=e[1].cdata.term,s=0;s<a.length;s+=1){const i=R(e,a,s);n[s]?n[s].p(i,l):(n[s]=z(i),n[s].c(),n[s].m(t.parentNode,t))}for(;s<n.length;s+=1)n[s].d(1);n.length=a.length}},d(e){h(n,e),e&&f(t)}}}function I(e){let t,a,n,i,r,d,u,h,b,x,v,y,A,w,k,_,E,C,F,N,S,$,B,R,D;return{c(){t=l("td"),a=l("i"),i=g(),r=l("i"),u=g(),h=l("input"),_=g(),E=l("label"),o(a,"class","fa fa-check svelte-i5n91f"),o(a,"aria-hidden","true"),o(a,"style",n=P(e[3])),o(r,"class","fa fa-close"),o(r,"aria-hidden","true"),o(r,"style",d=P(e[3])),o(h,"type","radio"),o(h,"class","test_radio CMRad"),o(h,"style",b="vertical-align:middle;"),h.value=x=e[29].id,o(h,"name",v="tm"+(e[28]+1)),o(h,"id",y="t"+e[28]+e[31]),o(h,"data-termid",A=e[26].id),o(h,"data-correct",w=e[26].correct),o(h,"data-userans",""),o(h,"data-role","none"),o(h,"tabindex",k=-1),o(E,"tabindex",C=0),o(E,"class",F="label_choice customRadCM "+(e[31]%2==0?"tureitemColorCM":"falseitemColorCM")),o(E,"for",N="t"+e[28]+e[31]),o(t,"key",S=e[31]),o(t,"id",$="tb"+e[28]+e[31]),o(t,"class",B="text-center test_area "+(e[29].id==e[26].correct?"dbg-success":"dbg-danger")+"  position-relative svelte-i5n91f"),m(t,"background-color",e[28]%2==0?e[5][e[2].theme]:"#FFF")},m(n,l){c(n,t,l),s(t,a),s(t,i),s(t,r),s(t,u),s(t,h),s(t,_),s(t,E),R||(D=p(h,"click",e[8]),R=!0)},p(e,a){2&a[0]&&x!==(x=e[29].id)&&(h.value=x),2&a[0]&&A!==(A=e[26].id)&&o(h,"data-termid",A),2&a[0]&&w!==(w=e[26].correct)&&o(h,"data-correct",w),2&a[0]&&B!==(B="text-center test_area "+(e[29].id==e[26].correct?"dbg-success":"dbg-danger")+"  position-relative svelte-i5n91f")&&o(t,"class",B),4&a[0]&&m(t,"background-color",e[28]%2==0?e[5][e[2].theme]:"#FFF")},d(e){e&&f(t),R=!1,D()}}}function z(e){let t,a,n,i,d,p,b,x,v=e[26].text.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"",y=e[1].cdata.option,A=[];for(let t=0;t<y.length;t+=1)A[t]=I(D(e,y,t));return{c(){t=l("tr"),a=l("td"),n=r(v),p=g();for(let e=0;e<A.length;e+=1)A[e].c();b=g(),o(a,"class",i=e[26].id+" position-relative svelte-i5n91f"),o(a,"tabindex",d=0),m(a,"background-color",e[28]%2==0?e[5][e[2].theme]:"#FFF",1),m(a,"font-size","14pt"),m(a,"vertical-align","middle"),m(a,"font-family",e[2].font),o(t,"key",x=e[28])},m(e,l){c(e,t,l),s(t,a),s(a,n),s(t,p);for(let e=0;e<A.length;e+=1)A[e].m(t,null);s(t,b)},p(e,l){if(2&l[0]&&v!==(v=e[26].text.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"")&&u(n,v),2&l[0]&&i!==(i=e[26].id+" position-relative svelte-i5n91f")&&o(a,"class",i),4&l[0]&&m(a,"background-color",e[28]%2==0?e[5][e[2].theme]:"#FFF",1),4&l[0]&&m(a,"font-family",e[2].font),302&l[0]){let a;for(y=e[1].cdata.option,a=0;a<y.length;a+=1){const n=D(e,y,a);A[a]?A[a].p(n,l):(A[a]=I(n),A[a].c(),A[a].m(t,b))}for(;a<A.length;a+=1)A[a].d(1);A.length=y.length}},d(e){e&&f(t),h(A,e)}}}function W(e){let t,a,n,i,h,p,w,k,_,E,C,F,N,$,B,R,D,j,M,I=e[2].stem.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"";n=new S({props:{handleReviewClick:e[9],reviewMode:e[0]}}),n.$on("setReview",e[6]),n.$on("unsetReview",e[7]);let z=e[2].cdata&&J(e),W=e[1].cdata&&O(e);return{c(){t=l("main"),a=l("div"),b(n.$$.fragment),i=g(),h=l("center"),p=l("table"),w=l("thead"),k=l("tr"),_=l("th"),E=r(I),N=g(),z&&z.c(),$=g(),B=l("tbody"),W&&W.c(),o(_,"class",C=d("preview_header "+("theme3"!==e[2].theme?"text-center text-white":"text-center"))+" svelte-i5n91f"),o(_,"tabindex",F=0),m(_,"background-color",e[4][e[2].theme],1),o(k,"class","table-head"),o(p,"class",R="table testmode_table "),o(p,"id","test_table"),o(p,"style",D="position:relative; margin-top:20px;width:"+e[2].maxWidth+"px;font-family: Georgia;"),o(a,"id","choicemain"),o(a,"style",j="margin-bottom:20px")},m(e,l){c(e,t,l),s(t,a),x(n,a,null),s(a,i),s(a,h),s(h,p),s(p,w),s(w,k),s(k,_),s(_,E),s(k,N),z&&z.m(k,null),s(p,$),s(p,B),W&&W.m(B,null),M=!0},p(e,t){const a={};1&t[0]&&(a.reviewMode=e[0]),n.$set(a),(!M||4&t[0])&&I!==(I=e[2].stem.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"")&&u(E,I),(!M||4&t[0]&&C!==(C=d("preview_header "+("theme3"!==e[2].theme?"text-center text-white":"text-center"))+" svelte-i5n91f"))&&o(_,"class",C),(!M||4&t[0])&&m(_,"background-color",e[4][e[2].theme],1),e[2].cdata?z?z.p(e,t):(z=J(e),z.c(),z.m(k,null)):z&&(z.d(1),z=null),e[1].cdata?W?W.p(e,t):(W=O(e),W.c(),W.m(B,null)):W&&(W.d(1),W=null),(!M||4&t[0]&&D!==(D="position:relative; margin-top:20px;width:"+e[2].maxWidth+"px;font-family: Georgia;"))&&o(p,"style",D)},i(e){M||(v(n.$$.fragment,e),M=!0)},o(e){y(n.$$.fragment,e),M=!1},d(e){e&&f(t),A(n),z&&z.d(),W&&W.d()}}}function q(){let e=document.getElementsByClassName("test_radio");for(let t=0;t<e.length;t++)e[t].getAttribute("id")==e[t].getAttribute("data-userans")?e[t].checked=!0:e[t].checked=!1}function G(){!function(){let e=document.querySelectorAll(" .test_radio");for(let t=0;t<e.length;t++)e[t].getAttribute("value")==e[t].getAttribute("data-correct")?e[t].checked=!0:e[t].checked=!1}(),L()}function L(){let e=document.getElementsByClassName("fa-check"),t=document.getElementsByClassName("fa-close");for(let a=0;a<e.length;a++)e[a].style.display="none",t[a].style.display="none"}function P(e){return 1==e?{paddingLeft:"14px",display:"inline-flex",position:"absolute"}:{paddingLeft:"15px",display:"none",position:"absolute"}}function V(e,t,a){let n,{showAns:l}=t,{editorState:s}=t,{xml:i}=t,{uxml:c}=t,{isReview:r}=t,o={cdata:""},d={},m=0;F({cdata:"",stem:"",xml:"",theme:"",font:"",maxWidth:"",totalcorrectans:""}).subscribe((e=>{a(2,d=e)}));function u(){let e=function(){let e=0,t=0,a=document.getElementsByClassName("test_radio");for(let t=0;t<a.length;t++)if(a[t].getAttribute("value")==a[t].getAttribute("data-correct")){if(1!=a[t].checked)return e=0,a[t].setAttribute("as",0),!1;a[t].setAttribute("as",1),e=1}for(let e=0;e<a.length;e++)a[e].getAttribute("value")==a[e].getAttribute("data-correct")&&1==a[e].checked&&t++,"undefined"!=typeof calculatePoint&&calculatePoint(d.totalcorrectans,t);return e}();e=1==e,c?C.select("#answer").checked=e:s&&l(e?"Correct":"Incorrect"),N({uXml:n,ans:e})}function f(){q(),C.select(".dbg-success input","checked").forEach((e=>{C.siblings(e,".fa-check").forEach((e=>{e.style.display="inline-flex"}))})),C.select(".dbg-danger input","checked").forEach((e=>{C.siblings(e,".fa-close").forEach((e=>{e.style.display="inline-flex"}))})),C.selectAll(".dbg-success input, .dbg-danger input","removeAttr","as"),C.select(".dbg-success input","checked").forEach((e=>{e.setAttribute("as",1)})),C.select(".dbg-success input","checked").forEach((e=>{e.setAttribute("as",0)})),C.select(".dbg-success input","checked").forEach((e=>{C.siblings(e,".label_choice").forEach((e=>{e.setAttribute("title","is marked as correct")}))})),C.select(".dbg-danger input","checked").forEach((e=>{C.siblings(e,".label_choice").forEach((e=>{e.setAttribute("title","is marked as incorrect")}))}))}function h(){a(0,r=!0);let e=C.selectAll(" .test_radio");for(let t=0;t<e.length;t++)e[t].disabled=!0;f()}function g(){a(0,r=!1);let e=document.getElementsByClassName("test_radio");for(let t=0;t<e.length;t++)e[t].disabled=!1;L()}return w((()=>{var e;i!=d.xml&&(a(2,d.xml=i,d),e=c,function(e,t){a(2,d.theme=e.smxml._theme,d),a(2,d.font=e.smxml._font,d),a(2,d.maxWidth=e.smxml._maxwidth?e.smxml._maxwidth:800,d);let n=$.parseCSVFormat(e.smxml.__cdata),l=[];l=JSON.parse(JSON.stringify(n)),a(2,d.cdata=l,d),a(2,d.stem=l.stem,d),a(1,o.cdata=l,o);let s=o.cdata.term.length;if(a(2,d.totalcorrectans=s,d),g(),t)try{t=JSON.parse(t);let e=[];e=JSON.parse(JSON.stringify(t)),setTimeout((function(){e.ans.map((function(e,t){C.selectAll(".test_area #"+e.userAns,"attr",{"data-userans":e.userAns})})),q()}),100)}catch(e){}else{let e=document.getElementsByClassName("test_radio");for(let t=0;t<e.length;t++)e[t].checked=!1,e[t].setAttribute("data-userans","")}}(E(i),e))})),k((()=>{r||L()})),_((()=>{AI.listen("body","keydown",".label_choice",(function(e,t){13===t.which&&e.click()}))})),e.$$set=e=>{"showAns"in e&&a(10,l=e.showAns),"editorState"in e&&a(11,s=e.editorState),"xml"in e&&a(12,i=e.xml),"uxml"in e&&a(13,c=e.uxml),"isReview"in e&&a(0,r=e.isReview)},e.$$.update=()=>{18433&e.$$.dirty[0]&&(r?(h(),s&&0==m&&(a(14,m=1),u())):(a(14,m=0),q(),g()))},[r,o,d,undefined,{theme1:"#5B9BD5",theme2:"#3B67BC",theme3:"#F6C3A2",theme4:"#70AD47",theme5:"#745998"},{theme1:"#DEEAF6",theme2:"#D4DEF1",theme3:"#FAE0CF",theme4:"#E2EFD9",theme5:"#E1DAE9"},function(){h()},function(){q(),g()},function(e){let t=e.target.id,a=e.target.name,l=document.querySelectorAll(" .test_area input[name="+a+"]");for(let e=0;e<l.length;e++)l[e].setAttribute("data-userans","");C.selectAll(" .test_area #"+t,"attr",{"data-userans":t});let s={type:"34",ans:[]},i=document.getElementsByClassName("test_radio");for(let e=0;e<i.length;e++)1==i[e].checked&&s.ans.push({id:i[e].getAttribute("data-termid"),userAns:i[e].getAttribute("id")});n=JSON.stringify(s),u()},function(e,t){"c"==e?G():f()},l,s,i,c,m]}export default class extends e{constructor(e){var n;super(),B.getElementById("svelte-i5n91f-style")||((n=l("style")).id="svelte-i5n91f-style",n.textContent=".fa-check{color:#46A546;position:relative;left:50px}.fa-close{color:#A80000;left:50px}.fa-close{margin-left:20px;font-size:18px;position:absolute;top:10px}.fa-check{margin-left:20px;font-size:18px;position:absolute;top:10px}.fa-close,.fa-check.svelte-i5n91f,.middle_align.svelte-i5n91f{vertical-align:middle!important}.middle_align{width:164px;min-width:164px}.topic_input{min-width:257px}.preview_header{font-size:16pt;font-weight:bold;vertical-align:middle}.adjust_width{width:10%;text-align:center}",s(B.head,n)),t(this,e,V,W,a,{showAns:10,editorState:11,xml:12,uxml:13,isReview:0},[-1,-1])}}
//# sourceMappingURL=ChoiceMatrixPreview-ae229fa7.js.map
