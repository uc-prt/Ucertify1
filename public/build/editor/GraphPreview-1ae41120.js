import{E as t,B as e,S as s,i,s as o,D as a,e as r,u as l,b as n,f as c,g as d,h as u,j as p,x as f,o as h,q as b,c as m,m as v,l as g,t as x,a as A,d as y,z as w,y as k,C as _,A as L,a4 as X,p as F,W as C,X as M,w as P}from"./main-a37adb17.js";import{I as j}from"./ItemHelper-8f2e5619.js";const Q=new t;let I,T,B,E,D={};function S(t){a(t,"svelte-e5vip7","#graph_modal.svelte-e5vip7 .modal-body.svelte-e5vip7{max-height:350px}")}function O(t,e,s){const i=t.slice();return i[24]=e[s],i}function R(t){let s,i,o,a,b,m,v,g,x,A,y,w,k,_,L,X,F,C,M,P,j=(void 0===t[1].QXML._type?"":t[1].QXML._type)+"";function Q(t,e){return t[1].QXML._reflection?H:Y}let I=Q(t),T=I(t);return{c(){s=r("div"),i=r("div"),o=r("ul"),a=r("li"),b=l(j),m=n(),v=r("button"),g=r("span"),y=n(),w=r("div"),k=r("button"),_=r("span"),C=n(),T.c(),M=n(),P=r("ul"),P.innerHTML='<li class="btn_active btn-point" rel="point" data-value="P"></li> \n                <li rel="segment" class="btn-segment" data-value="S"></li> \n                <li rel="segment_left_point_hollow" class="btn-SLH" data-value="SLH"></li> \n                <li rel="segment_right_point_hollow" class="btn-SRH" data-value="SRH"></li> \n                <li rel="segment_both_point_hollow" class="btn-SBH" data-value="SBH"></li> \n                <li rel="ray_left_direction" class="btn-RL" data-value="RL"></li> \n                <li rel="ray_right_direction" class="btn-RR" data-value="RR"></li> \n                <li rel="ray_left_direction_right_hollow" class="btn-RRH" data-value="RRH"></li> \n                <li rel="ray_right_direction_left_hollow" class="btn-RLH" data-value="RLH"></li>',a.value="plotgraph",c(a,"class","selected-option text-uppercase m-0"),c(o,"class","controls"),c(g,"data-bs-toggle","tooltip"),c(g,"title",x=e.ada_graph_msg),c(g,"class","icomoon-keyboard-2 s2"),c(v,"tabindex","0"),c(v,"id","ADA_button"),c(v,"class","ADAButton float-start mt-1 btn w-auto h-auto p-1 btn-light ml"),c(v,"aria-label",A=e.ada_graph_msg),c(_,"title",L=e.delete),c(_,"data-bs-toggle","tooltip"),c(_,"class",X="icomoon-new-24px-delete-1"),c(k,"type","button"),c(k,"class","btn btn-light p-1 focus_div"),c(k,"id","delButton"),c(k,"data-placement","right"),c(k,"tabindex","0"),c(k,"aria-label",F=e.ada_message),c(w,"class","btn-group tools delElem h-imp"),c(i,"id","option-toolbar"),c(i,"class","text-dark"),c(P,"class","footer_toolbox h"),c(s,"id","mathmain"),c(s,"class","userAns position-relative bg-white"),d(s,"height",Number(t[1].QXML._height)+2+"px"),d(s,"width",t[1].QXML._width+"px")},m(t,e){u(t,s,e),p(s,i),p(i,o),p(o,a),p(a,b),p(i,m),p(i,v),p(v,g),p(i,y),p(i,w),p(w,k),p(k,_),p(s,C),T.m(s,null),p(s,M),p(s,P)},p(t,e){2&e&&j!==(j=(void 0===t[1].QXML._type?"":t[1].QXML._type)+"")&&f(b,j),I===(I=Q(t))&&T?T.p(t,e):(T.d(1),T=I(t),T&&(T.c(),T.m(s,M))),2&e&&d(s,"height",Number(t[1].QXML._height)+2+"px"),2&e&&d(s,"width",t[1].QXML._width+"px")},d(t){t&&h(s),T.d()}}}function Y(t){let e,s,i,o,a,l,n,p,f,b,m,v;return{c(){e=r("div"),c(e,"id",s=t[1].QXML._id+"Preview"),c(e,"data-userans",i=t[1].userAns_data),c(e,"data-anskey",o=t[1].QXML._anskey),c(e,"type",a=t[1].QXML._type),c(e,"class",l="drag-resize dropable "+t[1].QXML._type),c(e,"data-xtickdistance",n=t[1].QXML._xtickdistance),c(e,"data-ytickdistance",p=t[1].QXML._ytickdistance),c(e,"data-xaxis",f=t[1].QXML._xaxis),c(e,"data-yaxis",b=t[1].QXML._yaxis),c(e,"data-snapsize",m=t[1].QXML._snapsize),c(e,"data-equation",v=t[1].QXML._equation),d(e,"height",t[1].QXML._height-40+"px"),d(e,"width",t[1].QXML._width+"px"),d(e,"border","1px solid #ccc")},m(t,s){u(t,e,s)},p(t,r){2&r&&s!==(s=t[1].QXML._id+"Preview")&&c(e,"id",s),2&r&&i!==(i=t[1].userAns_data)&&c(e,"data-userans",i),2&r&&o!==(o=t[1].QXML._anskey)&&c(e,"data-anskey",o),2&r&&a!==(a=t[1].QXML._type)&&c(e,"type",a),2&r&&l!==(l="drag-resize dropable "+t[1].QXML._type)&&c(e,"class",l),2&r&&n!==(n=t[1].QXML._xtickdistance)&&c(e,"data-xtickdistance",n),2&r&&p!==(p=t[1].QXML._ytickdistance)&&c(e,"data-ytickdistance",p),2&r&&f!==(f=t[1].QXML._xaxis)&&c(e,"data-xaxis",f),2&r&&b!==(b=t[1].QXML._yaxis)&&c(e,"data-yaxis",b),2&r&&m!==(m=t[1].QXML._snapsize)&&c(e,"data-snapsize",m),2&r&&v!==(v=t[1].QXML._equation)&&c(e,"data-equation",v),2&r&&d(e,"height",t[1].QXML._height-40+"px"),2&r&&d(e,"width",t[1].QXML._width+"px")},d(t){t&&h(e)}}}function H(t){let e,s,i,o,a,l,n,p,f,b,m,v,g;return{c(){e=r("div"),c(e,"id",s=t[1].QXML._id+"Preview"),c(e,"data-userans",i=t[1].userAns_data),c(e,"data-anskey",o=t[1].QXML._anskey),c(e,"type",a=t[1].QXML._type),c(e,"class",l="drag-resize dropable "+t[1].QXML._type),c(e,"data-xtickdistance",n=t[1].QXML._xtickdistance),c(e,"data-ytickdistance",p=t[1].QXML._ytickdistance),c(e,"data-xaxis",f=t[1].QXML._xaxis),c(e,"data-yaxis",b=t[1].QXML._yaxis),c(e,"data-snapsize",m=t[1].QXML._snapsize),c(e,"data-equation",v=t[1].QXML._equation),c(e,"data-reflection",g=t[1].QXML._reflection),d(e,"height",t[1].QXML._height-40+"px"),d(e,"width",t[1].QXML._width+"px"),d(e,"border","1px solid #ccc")},m(t,s){u(t,e,s)},p(t,r){2&r&&s!==(s=t[1].QXML._id+"Preview")&&c(e,"id",s),2&r&&i!==(i=t[1].userAns_data)&&c(e,"data-userans",i),2&r&&o!==(o=t[1].QXML._anskey)&&c(e,"data-anskey",o),2&r&&a!==(a=t[1].QXML._type)&&c(e,"type",a),2&r&&l!==(l="drag-resize dropable "+t[1].QXML._type)&&c(e,"class",l),2&r&&n!==(n=t[1].QXML._xtickdistance)&&c(e,"data-xtickdistance",n),2&r&&p!==(p=t[1].QXML._ytickdistance)&&c(e,"data-ytickdistance",p),2&r&&f!==(f=t[1].QXML._xaxis)&&c(e,"data-xaxis",f),2&r&&b!==(b=t[1].QXML._yaxis)&&c(e,"data-yaxis",b),2&r&&m!==(m=t[1].QXML._snapsize)&&c(e,"data-snapsize",m),2&r&&v!==(v=t[1].QXML._equation)&&c(e,"data-equation",v),2&r&&g!==(g=t[1].QXML._reflection)&&c(e,"data-reflection",g),2&r&&d(e,"height",t[1].QXML._height-40+"px"),2&r&&d(e,"width",t[1].QXML._width+"px")},d(t){t&&h(e)}}}function q(t){let s,i,o,a,d,f,b,m,v,g,x,A,y,w,k,_,L,X,F,C,M,P,j,Q,I,T,B,E,D=e.pointx1+"",S=e.pointy1+"",O=e.pointx2+"",R=e.pointy2+"";return{c(){s=r("div"),i=r("div"),o=r("label"),a=l(D),d=n(),f=r("input"),m=n(),v=r("label"),g=l(S),x=n(),A=r("input"),w=n(),k=r("label"),_=l(O),L=n(),X=r("input"),C=n(),M=r("label"),P=l(R),j=n(),Q=r("input"),T=n(),c(f,"type","number"),c(f,"resetvalue","1"),c(f,"class","point_x_1 getFieldVal form-control"),c(f,"id","setAnsByKey"),c(f,"placeholder",b=e.insert_numeric_data),c(o,"class","text-body"),c(A,"type","number"),c(A,"resetvalue","1"),c(A,"class","point_y_1 getFieldVal form-control"),c(A,"id","setAnsByKey"),c(A,"placeholder",y=e.insert_numeric_data),c(v,"class","ml-2 text-body"),c(X,"type","number"),c(X,"resetvalue","1"),c(X,"class","point_x_2 getFieldVal form-control"),c(X,"id","setAnsByKey"),c(X,"placeholder",F=e.insert_numeric_data),c(k,"class","text-body"),c(Q,"type","number"),c(Q,"resetvalue","1"),c(Q,"class","point_y_2 getFieldVal form-control"),c(Q,"id","setAnsByKey"),c(Q,"placeholder",I=e.insert_numeric_data),c(M,"class","ml-2 text-body"),c(i,"class","col-12 text-center"),c(s,"class","row mainDiv mt-4"),c(s,"key",B="divAllTextBox"+t[24].index),c(s,"id",E="divAllTextBox"+t[24].index)},m(t,e){u(t,s,e),p(s,i),p(i,o),p(o,a),p(o,d),p(o,f),p(i,m),p(i,v),p(v,g),p(v,x),p(v,A),p(i,w),p(i,k),p(k,_),p(k,L),p(k,X),p(i,C),p(i,M),p(M,P),p(M,j),p(M,Q),p(s,T)},p(t,e){2&e&&B!==(B="divAllTextBox"+t[24].index)&&c(s,"key",B),2&e&&E!==(E="divAllTextBox"+t[24].index)&&c(s,"id",E)},d(t){t&&h(s)}}}function z(t){let s,i,o,a,d,b,m,v,g,x,A,y,w,k,_,L,X,F,C,M,P=e.pointx+(t[24].index+1)+"",j=e.pointy+(t[24].index+1)+"";return{c(){s=r("div"),i=r("div"),o=r("label"),a=l(P),d=n(),b=r("input"),x=n(),A=r("label"),y=l(j),w=n(),k=r("input"),F=n(),c(b,"type","number"),c(b,"resetvalue","1"),c(b,"class","form-control getFieldVal"),c(b,"name",m="point_"+t[24].index),c(b,"id",v="x_"+t[24].index),c(b,"placeholder",g=e.insert_numeric_data),c(o,"class","text-body"),c(k,"type","number"),c(k,"resetvalue","1"),c(k,"class","form-control getFieldVal"),c(k,"name",_="point_"+t[24].index),c(k,"id",L="y_"+t[24].index),c(k,"placeholder",X=e.insert_numeric_data),c(A,"class","ml-2 text-body"),c(i,"class","col-12 text-center"),c(s,"class","row mainDiv mt-2"),c(s,"key",C="divAllTextBox"+t[24].index),c(s,"id",M="divAllTextBox"+t[24].index)},m(t,e){u(t,s,e),p(s,i),p(i,o),p(o,a),p(o,d),p(o,b),p(i,x),p(i,A),p(A,y),p(A,w),p(A,k),p(s,F)},p(t,i){2&i&&P!==(P=e.pointx+(t[24].index+1)+"")&&f(a,P),2&i&&m!==(m="point_"+t[24].index)&&c(b,"name",m),2&i&&v!==(v="x_"+t[24].index)&&c(b,"id",v),2&i&&j!==(j=e.pointy+(t[24].index+1)+"")&&f(y,j),2&i&&_!==(_="point_"+t[24].index)&&c(k,"name",_),2&i&&L!==(L="y_"+t[24].index)&&c(k,"id",L),2&i&&C!==(C="divAllTextBox"+t[24].index)&&c(s,"key",C),2&i&&M!==(M="divAllTextBox"+t[24].index)&&c(s,"id",M)},d(t){t&&h(s)}}}function N(t){let s,i,o,a,d,b,m,v,g,x,A,y,w,k,_,L,X,F,C,M,P,j,Q,I,T=e.pointx+(t[24].index+1)+"",B=e.pointy+(t[24].index+1)+"",E=e.pointx2+"";return{c(){s=r("div"),i=r("div"),o=r("span"),a=r("label"),d=l(T),b=n(),m=r("input"),g=n(),x=r("label"),A=l(B),y=n(),w=r("input"),_=n(),L=r("div"),X=r("label"),F=l(E),C=n(),M=r("input"),j=n(),c(m,"type","number"),c(m,"resetvalue","1"),c(m,"class","association_x_point getFieldVal form-control"),c(m,"placeholder",v=e.insert_numeric_data),c(a,"class","ml-2 text-body"),c(w,"type","number"),w.value="0.4",w.disabled="disabled",c(w,"class","point_y_1 pe-none getFieldVal form-control"),c(w,"placeholder",k=e.insert_numeric_data),c(x,"class","ml-2 text-body"),c(o,"class","text-justify"),c(i,"class","col-12 text-center"),c(M,"type","number"),c(M,"resetvalue","1"),c(M,"class","association_point getFieldVal form-control"),c(M,"placeholder",P=e.insert_numeric_data),c(X,"class","text-body"),c(L,"class","col-12 text-center"),c(s,"class","row mainDiv mt-2"),c(s,"key",Q="divAllTextBox"+t[24].index),c(s,"id",I="divAllTextBox"+t[24].index)},m(t,e){u(t,s,e),p(s,i),p(i,o),p(o,a),p(a,d),p(a,b),p(a,m),p(o,g),p(o,x),p(x,A),p(x,y),p(x,w),p(s,_),p(s,L),p(L,X),p(X,F),p(X,C),p(X,M),p(s,j)},p(t,i){2&i&&T!==(T=e.pointx+(t[24].index+1)+"")&&f(d,T),2&i&&B!==(B=e.pointy+(t[24].index+1)+"")&&f(A,B),2&i&&Q!==(Q="divAllTextBox"+t[24].index)&&c(s,"key",Q),2&i&&I!==(I="divAllTextBox"+t[24].index)&&c(s,"id",I)},d(t){t&&h(s)}}}function G(t){let s,i,o,a,d,b,m,v,g,x,A,y,w,k,_,L,X,F,C,M,P,j,Q,I,T=e.pointx+(t[24].index+1)+"",B=e.pointy+(t[24].index+1)+"",E="Radius "+(t[24].index+1);return{c(){s=r("div"),i=r("div"),o=r("span"),a=r("label"),d=l(T),b=n(),m=r("input"),g=n(),x=r("label"),A=l(B),y=n(),w=r("input"),_=n(),L=r("div"),X=r("label"),F=l(E),C=n(),M=r("input"),j=n(),c(m,"type","number"),c(m,"resetvalue","1"),c(m,"class","point_x_1 getFieldVal form-control "),c(m,"id","setAnsByKey"),c(m,"placeholder",v=e.insert_numeric_data),c(a,"class","ml-2 text-body"),c(w,"type","number"),c(w,"resetvalue","1"),c(w,"class","point_y_1 getFieldVal form-control"),c(w,"placeholder",k=e.insert_numeric_data),c(x,"class","ml-2 text-body"),c(o,"class","text-justify"),c(i,"class","col-12 text-center"),c(M,"type","number"),c(M,"resetvalue","1"),c(M,"class","point_x_2 getFieldVal form-control"),c(M,"placeholder",P=e.insert_numeric_data),c(X,"class","text-body"),c(L,"class","col-12 text-center"),c(s,"class","row mainDiv mt-4"),c(s,"key",Q="divAllTextBox"+t[24].index),c(s,"id",I="divAllTextBox"+t[24].index)},m(t,e){u(t,s,e),p(s,i),p(i,o),p(o,a),p(a,d),p(a,b),p(a,m),p(o,g),p(o,x),p(x,A),p(x,y),p(x,w),p(s,_),p(s,L),p(L,X),p(X,F),p(X,C),p(X,M),p(s,j)},p(t,i){2&i&&T!==(T=e.pointx+(t[24].index+1)+"")&&f(d,T),2&i&&B!==(B=e.pointy+(t[24].index+1)+"")&&f(A,B),2&i&&E!==(E="Radius "+(t[24].index+1))&&f(F,E),2&i&&Q!==(Q="divAllTextBox"+t[24].index)&&c(s,"key",Q),2&i&&I!==(I="divAllTextBox"+t[24].index)&&c(s,"id",I)},d(t){t&&h(s)}}}function J(t){let e;function s(t,e){return"circle"==t[24].moduleType?G:"association"==t[24].moduleType?N:"point"==t[24].moduleType||"polygon"==t[24].moduleType?z:q}let i=s(t),o=i(t);return{c(){o.c(),e=b()},m(t,s){o.m(t,s),u(t,e,s)},p(t,a){i===(i=s(t))&&o?o.p(t,a):(o.d(1),o=i(t),o&&(o.c(),o.m(e.parentNode,e)))},d(t){o.d(t),t&&h(e)}}}function V(t){let s,i,o,a,l,d,f,b,_,L,X,F,C,M,P,Q,I,T,B,E,D,S,Y,H,q,z,N,G,V,$,W;d=new j({props:{reviewMode:t[0],handleReviewClick:t[7],customReviewMode:t[2]}}),d.$on("setReview",t[5]),d.$on("unsetReview",t[6]);let K=null!=t[1].QXML._type&&R(t),U=t[1].modalViewLayout,Z=[];for(let e=0;e<U.length;e+=1)Z[e]=J(O(t,U,e));return{c(){s=r("div"),i=r("link"),a=n(),l=r("center"),m(d.$$.fragment),f=n(),K&&K.c(),b=n(),_=r("div"),L=r("div"),X=r("div"),F=r("div"),C=r("h5"),C.textContent=""+e.set_ans,M=n(),P=r("div"),Q=r("div"),I=r("div"),T=r("button"),T.textContent=""+e.add_point,B=n(),E=r("button"),E.textContent=""+e.del_row,D=n(),S=r("div"),Y=r("div");for(let t=0;t<Z.length;t+=1)Z[t].c();H=n(),q=r("div"),z=r("button"),z.textContent=""+e.cancel,N=n(),G=r("button"),G.textContent=""+e.ok_btn,c(i,"onload","this.rel='stylesheet'"),c(i,"rel","preload"),c(i,"as","style"),c(i,"href",o=itemUrl+"src/libs/Math.min.css"),c(C,"class","modal-title"),c(T,"class","btn btn-light"),c(T,"id","updateRow"),c(E,"class","btn btn-light ml-1"),c(E,"id","delete_btn"),c(I,"class","float-end"),c(Q,"class","col-12"),c(P,"class","row"),c(F,"class","modal-header"),c(Y,"class","row"),c(S,"class","modal-body overflow-y svelte-e5vip7"),c(z,"type","button"),c(z,"class","btn btn-light"),c(z,"data-bs-dismiss","modal"),c(G,"type","button"),c(G,"class","btn btn-secondary"),c(q,"class","modal-footer"),c(X,"class","modal-content"),c(L,"class","modal-dialog modal-dialog-centered"),c(_,"id","graph_modal"),c(_,"class","modal fade svelte-e5vip7"),c(_,"tabindex","-1")},m(e,o){u(e,s,o),p(s,i),p(s,a),p(s,l),v(d,l,null),p(l,f),K&&K.m(l,null),p(s,b),p(s,_),p(_,L),p(L,X),p(X,F),p(F,C),p(F,M),p(F,P),p(P,Q),p(Q,I),p(I,T),p(I,B),p(I,E),p(X,D),p(X,S),p(S,Y);for(let t=0;t<Z.length;t+=1)Z[t].m(Y,null);p(X,H),p(X,q),p(q,z),p(q,N),p(q,G),V=!0,$||(W=[g(T,"click",t[12]),g(E,"click",t[13]),g(G,"click",t[3])],$=!0)},p(t,[e]){const s={};if(1&e&&(s.reviewMode=t[0]),d.$set(s),null!=t[1].QXML._type?K?K.p(t,e):(K=R(t),K.c(),K.m(l,null)):K&&(K.d(1),K=null),2&e){let s;for(U=t[1].modalViewLayout,s=0;s<U.length;s+=1){const i=O(t,U,s);Z[s]?Z[s].p(i,e):(Z[s]=J(i),Z[s].c(),Z[s].m(Y,null))}for(;s<Z.length;s+=1)Z[s].d(1);Z.length=U.length}},i(t){V||(x(d.$$.fragment,t),V=!0)},o(t){A(d.$$.fragment,t),V=!1},d(t){t&&h(s),y(d),K&&K.d(),w(Z,t),$=!1,k(W)}}}function $(t,s,i){let{xml:o}=s,{uxml:a}=s,{isReview:r}=s,{showAns:l}=s,{editorState:n}=s,c=r,d={},u=P({xml:"",QXML:"",userAns_data:"",moduleType:"none",noOfRow:1,review:!1,init:!1,open:!1,modalViewLayout:[],checked:!0});u.subscribe((t=>{i(1,d=t)}));function p(){"undefined"!=typeof JXG&&L.select("#ID0Preview").nodeName&&L.select("#ID0Preview").offsetHeight&&f()}function f(){D.readyThis("#mathmain"),D.showansdrag("#mathmain","u",1),D.modeOn()}function h(){let t=D.checkAns("#mathmain");"undefined"!=typeof is_sm&&L.showmsg(t.ans?"Correct":"Incorrect",3e3),n&&l(t.ans?"Correct":"Incorrect"),C(t)}function b(){L.getBS("#graph_modal","Modal").show(),v(),L.selectAll('[resetValue="1"]',"value","")}function m(t){"add"==t?i(1,d.noOfRow=d.noOfRow+1,d):"remove"==t&&(1==d.noOfRow?L.alert("Default row can't be deleted"):i(1,d.noOfRow=d.noOfRow-1,d)),v()}function v(){let t=[];for(let e=0;e<d.noOfRow;e++)t=[...t,{moduleType:d.moduleType,index:e}];u.update((e=>(e.modalViewLayout=t,e)))}function g(){L.selectAll("#mathmain #delButton.active","removeClass","active"),i(0,r=!0),D.modeOn("on"),D.showansdrag("#mathmain","u",1),h()}function x(){L.selectAll("#mathmain #delButton.active","removeClass","active"),i(0,r=!1),D.modeOn(),D.showansdrag("#mathmain","u",0)}_((async()=>{d.init||("object"==typeof JXG&&n?i(1,d.init=!0,d):void 0===n&&L.addScript("",itemUrl+"src/libs/jsxgraph.min.js",{callback(){i(1,d.init=!0,d)}})),n&&n.stopPreviewUpdate&&i(8,o=L.select("#special_module_xml").value),d.init&&d.xml!=o&&function(t){e=t=M(t),u.update((t=>(t.QXML=e.smxml.plot,t.moduleType=e.smxml.plot._type,t)));var e;let s={};a&&(s=M(a),s&&s.smans&&s.smans.div&&s.smans.div._userAns&&u.update((t=>(t.userAns_data=s.smans.div._userAns,t))))}(o)})),X((async()=>{d.init&&(d.xml!=o&&(n&&(i(1,d.noOfRow=1,d),L.selectAll('[id^=divAllTextBox]:not([id="divAllTextBox0"])',"remove"),AI.selectAll(".getFieldVal:not(:disabled)","value",""),L.find("#mathmain","[id^=ID]").setAttribute("data-userans","")),f(),u.update((t=>(t.xml=o,t))),r&&void 0===n&&g()),d.review!=r&&n&&(u.update((t=>(t.review=r,t))),r?(D.modeOn(1),h()):D.modeOn(0),L.selectAll("#mathmain #delButton.active","removeClass","active")),d.checked&&void 0===l&&(D.checkAns("#mathmain"),i(1,d.checked=!1,d)),L.enableBsAll('[data-bs-toggle="tooltip"]',"Tooltip"))})),F((async()=>{window.inNative&&window.getHeight&&window.getHeight(),L.set("q_refresh",p),n||p(),L.listen("body","keydown","#mathmain #delButton",(function(t,e){e.ctrlKey&&e.altKey&&(49==e.which||49==e.keyCode)&&b()})),L.listen("body","keydown","#mathmain #ADA_button",(function(t,e){13==e.keyCode&&b()})),L.listen("body","click","#mathmain",(function(t,e){"delButton"!=e.target.parentNode.id&&"ADA_button"!=e.target.id&&"delButton"!=e.target.id&&"ADA_button"!=e.target.parentNode.id&&"option-toolbar"!=e.target.id&&h()})),L.listen("body","mouseup","#mathmain",(function(t,e){"delButton"!=e.target.parentNode.id&&"ADA_button"!=e.target.id&&"delButton"!=e.target.id&&"ADA_button"!=e.target.parentNode.id&&"option-toolbar"!=e.target.id&&h()})),L.listen("body","click",".delElem",(function(t){let s=t.children[0];s.classList.toggle("active"),"point"==L.select(".selected-option").innerHTML||"circle"==L.select(".selected-option").innerHTML||"association"==L.select(".selected-option").innerHTML?s.classList.contains("active")?(L.alert(e.delete_msg),L.find("#mathmain","#ID0Preview").style.cursor="pointer"):(L.find("#mathmain","#ID0Preview").style.cursor="default",s.style.color="black"):s.classList.contains("active")&&(s.style.color="black",L.alert(e.last_delete_msg),L.setCss(t,{backgroundColor:"transparent",boxShadow:"none"}),L.find("#mathmain","#ID0Preview").style.cursor="default")})),L.listen("body","click","#mathmain .footer_toolbox li",(function(t){t.classList.add("btn_active"),L.selectAll(L.siblings(t),"removeClass","btn_active")}))}));return t.$$set=t=>{"xml"in t&&i(8,o=t.xml),"uxml"in t&&i(9,a=t.uxml),"isReview"in t&&i(0,r=t.isReview),"showAns"in t&&i(10,l=t.showAns),"editorState"in t&&i(11,n=t.editorState)},[r,d,c,function(){let t,e=[];switch(d.moduleType){case"circle":t=document.querySelectorAll(".mainDiv"),t.forEach((function(t){let s=document.querySelectorAll(`#${t.id} .getFieldVal`),i=[s[0].value+","+s[1].value+"/"+s[2].value];e.push(i)})),L.find("#mathmain","[id^=ID]").setAttribute("data-userans",e.join("|")),x();break;case"point":case"polygon":t=document.querySelectorAll(".mainDiv"),t.forEach((function(t){let s=document.querySelectorAll(`#${t.id} .getFieldVal`),i=[s[0].value+","+s[1].value];e.push(i)})),L.find("#mathmain","[id^=ID]").setAttribute("data-userans",e.join("|")),x();break;case"sine":case"cosine":case"line":case"ray":case"segment":case"vector":case"parabola":t=document.querySelectorAll(".mainDiv"),t.forEach((function(t){let s=document.querySelectorAll(`#${t.id} .getFieldVal`),i=[s[0].value+","+s[1].value+"|"+s[2].value+","+s[3].value];e.push(i)})),L.find("#mathmain","[id^=ID]").setAttribute("data-userans",e.join("|")),x();break;case"association":t=document.querySelectorAll(".mainDiv"),t.forEach((function(t){let s=document.querySelectorAll(`#${t.id} .getFieldVal`),i=[s[0].value+","+s[1].value+","+s[2].value];e.push(i)})),L.find("#mathmain","[id^=ID]").setAttribute("data-userans",e.join("|")),x()}h(),L.getBS("#graph_modal","Modal").hide()},m,g,x,function(t){"c"==t?D.showansdrag("#mathmain","c",1):"u"==t&&D.showansdrag("#mathmain","u",1)},o,a,l,n,()=>{m("add")},()=>{m("remove")}]}D.userAnsXML="",D.sinfo=!1,D.ajax_eId="#mathmain",D.readyThis=function(t){D.plotgraphPreview(t)},D.initBoardPreview=function(t,e){JXG.Options.point.snapToGrid=!0,JXG.Options.point.snapSizeX=Q.select(e).getAttribute("data-xtickdistance"),JXG.Options.point.snapSizeY=Q.select(e).getAttribute("data-ytickdistance"),JXG.Options.point.showInfobox=!1;let s,i,o,a,r,l,n=Q.select(e).getAttribute("data-xaxis"),c=-n,d=Q.select(e).getAttribute("data-yaxis"),u=-d;for(let t in JXG.boards)JXG.boards[t].container.includes("Preview")&&Q.select(e).getAttribute("id")==JXG.boards[t].container&&JXG.JSXGraph.freeBoard(JXG.boards[t]);Q.find(t,".footer_toolbox").style.display="none",Q.find(t,".delElem").classList.remove("h-imp"),Q.select(e).classList.contains("association")?(s=JXG.JSXGraph.initBoard(Q.select(e).getAttribute("id"),{boundingbox:[c,3.4,n,-5.4],axis:!1,grid:!1,zoom:{factorX:1.25,factorY:1.25,wheel:!0,needshift:!0,eps:.1},showCopyright:!1,shownavigation:!1}),i=s.create("line",[[0,0],[1,0]],{firstArrow:!0,lastArrow:!0,strokecolor:"#3E3E3E",fillcolor:"#3E3E3E",fixed:!0}),s.axis=i,s.texts=[],s.create("ticks",[i,Q.select(e).getAttribute("data-xtickdistance")],{minorTicks:9,majorHeight:15,minorHeight:5,drawLabels:!0,label:{offset:[2,-10]},drawZero:!0}),Q.find(t,".delElem").classList.add("h-imp"),o=Math.abs(Q.select(e).getAttribute("data-xaxis"))+Math.abs(Q.select(e).getAttribute("data-xtickdistance")),a=Q.select(e).getAttribute("data-yaxis"),l=s.create("polygon",[[-o,-2.4],[-o,-5.4],[o,-5.4],[o,-2.4]],{fillcolor:"#ccc",highlightfillcolor:"#ccc",withLines:!1})):Q.select(e).classList.contains("plot")?(s=JXG.JSXGraph.initBoard(Q.select(e).getAttribute("id"),{boundingbox:[c,d,n,-1],axis:!1,grid:!1,zoom:{factorX:1.25,factorY:1.25,wheel:!0,needshift:!0,eps:.1},showCopyright:!1,shownavigation:!1}),i=s.create("line",[[0,0],[1,0]],{firstArrow:!0,lastArrow:!0,strokecolor:"#3E3E3E",fillcolor:"#3E3E3E",fixed:!0}),s.create("ticks",[i,Q.select(e).getAttribute("data-xtickdistance")],{minorTicks:0,majorHeight:15,minorHeight:5,drawLabels:!0,label:{offset:[-6,-16]},drawZero:!0}),s.xmax=n,Q.find(t,".delElem").classList.add("h-imp"),Q.find(t,".footer_toolbox").style.display="block"):(s=JXG.JSXGraph.initBoard(Q.select(e).getAttribute("id"),{boundingbox:[c,d,n,u],axis:!1,grid:!1,zoom:{factorX:1.25,factorY:1.25,wheel:!0,needshift:!0,eps:.1},showCopyright:!1,shownavigation:!1}),o=s.create("axis",[[-Math.abs(Q.select(e).getAttribute("data-xtickdistance"))/2,0],[Math.abs(Q.select(e).getAttribute("data-xtickdistance"))/2,0]]),o.removeAllTicks(),s.create("ticks",[o,Q.select(e).getAttribute("data-xtickdistance")],{strokeColor:"#ccc",majorHeight:-1,drawLabels:!0,label:{offset:[2,-10]},minorTicks:3,drawZero:!0}),a=s.create("axis",[[0,-Math.abs(Q.select(e).getAttribute("data-ytickdistance"))/2],[0,Math.abs(Q.select(e).getAttribute("data-ytickdistance"))/2]]),a.removeAllTicks(),s.create("ticks",[a,Q.select(e).getAttribute("data-ytickdistance")],{strokeColor:"#ccc",majorHeight:-1,drawLabels:!0,label:{offset:[4,-6]},minorTicks:3,drawZero:!1})),s.points=[],s.xtick=Q.select(e).getAttribute("data-xtickdistance"),s.ytick=Q.select(e).getAttribute("data-ytickdistance"),s.xaxis=Q.select(e).getAttribute("data-xaxis"),s.yaxis=Q.select(e).getAttribute("data-yaxis");let p=Q.find(t,"li.selected-option","all");if(p.length&&p.forEach((t=>{t.innerHTML=Q.select(e).getAttribute("type"),t.style.textTransform="capitalize"})),"polygon"==Q.select(e).getAttribute("type")&&Q.select(e).getAttribute("data-reflection")&&Q.select(e).getAttribute("data-reflection")){r=Q.select(e).getAttribute("data-reflection").split("|"),l=[];for(let t=0;t<r.length;t++){let e=r[t].split(","),i=s.create("point",[e[0],e[1]],{name:"",strokecolor:"darkgray",strokewidth:2,fillcolor:"darkgray"});l.push(i)}s.create("polygon",l,{withline:!0,fillcolor:"darkgray",borders:{strokecolor:"darkgray",strokewidth:2}})}return s},D.plotgraphPreview=function(t){let e=Q.find(t,".drag-resize","all");for(let s=0;s<e.length;s++){let i=e[s].getAttribute("id");I=D.initBoardPreview(t,e[s]),I.prevPoint=null;let o=1,a=function(t){let e=I.getCoordsTopLeftCorner(t),s=JXG.getPosition(t,0),i=s[0]-e[0],o=s[1]-e[1];return new JXG.Coords(JXG.COORDS_BY_SCREEN,[i,o],I)},r=function(e){let s,r,l=!0;for(r in s=a(e),I.objects)if(JXG.isPoint(I.objects[r])&&I.objects[r].hasPoint(s.scrCoords[1],s.scrCoords[2])){l=!1;break}if(l){let e,a;Q.select("#"+i).classList.contains("plot")?(e=I.create("point",[s.usrCoords[1],o],{name:"",showInfobox:!1}),e.Xjc=e.X()+Math.abs(e.board.xtick),a=Q.select(".footer_toolbox li.btn_active").getAttribute("data-value"),o++,o==e.board.yaxis&&I.off("down")):e=I.create("point",[s.usrCoords[1],s.usrCoords[2]],{name:""}),D.updateAndDrawPreview(t,i,e,a),D.updateAttrsPreview(i,e)}D.checkAns(t)};if(Q.select("#"+i).classList.contains("association")){if(""==Q.select("#"+i).getAttribute("data-userans")){let e=Q.select("#"+i).getAttribute("data-anskey").split("|"),s=-(Q.select("#"+i).getAttribute("data-xaxis")-Q.select("#"+i).getAttribute("data-xtickdistance")),o=-4.4;for(let a=0;a<e.length;a++){let r=e[a].split(","),l=D.updateNumberline(t,i,s,o,r[0]);D.updateNumbelineAttr(i,l),s=s+1+Math.abs(Q.select("#"+i).getAttribute("data-xtickdistance"))/10,D.checkAns(t)}}}else I.off("down").on("down",r)}},D.updateNumberline=function(t,e,s,i,o){if(I.texts.length<Q.select("#"+e).getAttribute("data-anskey").split("|").length){let a=I.create("text",[s,i,o],{cssClass:"cursor-down",fontSize:"20px",highlightCssClass:"cursor-down",display:"html",snapSizeX:Math.abs(Q.select("#"+e).getAttribute("data-xtickdistance"))/10,snapSizeY:.4,snapToGrid:!0,anchorX:"middle",anchorY:"bottom"});return I.texts.push(a),a.on("down",(function(){this.startPosition=this.X().toFixed(1)+","+this.Y()+","+this.htmlStr})),a.on("up",(function(){this.Y().toFixed(1)>.4?(I.removeObject(this),I.texts.pop(this),D.updateNumberline(t,e,parseFloat(this.X().toFixed(1)),.4,this.htmlStr),this.upPosition=this.X().toFixed(1)+",0.4,"+this.htmlStr):this.Y().toFixed(1)<.4?(I.removeObject(this),I.texts.pop(this),D.updateNumberline(t,e,parseFloat(this.X().toFixed(1)),-4.4,this.htmlStr),this.upPosition=this.X().toFixed(1)+","+"-4.4,"+this.htmlStr):this.upPosition=this.X().toFixed(1)+","+this.Y().toFixed(1)+","+this.htmlStr,D.updateNumbelineAttr(e,this,!0),D.checkAns(t)})),a.on("over",(function(){this.visProp.fixed||(I.containerObj.style.cursor="move",this.setAttribute({cssClass:"cursor-down-hover",highlightCssClass:"cursor-down-hover"}))})),a.on("out",(function(){this.visProp.fixed||(I.containerObj.style.cursor="default",this.setAttribute({cssClass:"cursor-down",highlightCssClass:"cursor-down"}))})),a}},D.updateNumbelineAttr=function(t,e,s){let i=Q.select("#"+t).getAttribute("data-userans");void 0===s?(i=i.split("|").filter((function(t){return""!=t})),i.push(e.X().toFixed(1)+","+e.Y()+","+e.htmlStr),Q.select("#"+t).setAttribute("data-userans",i.join("|"))):(i=Q.select("#"+t).getAttribute("data-userans").replace(e.startPosition,e.upPosition),Q.select("#"+t).setAttribute("data-userans",i))},D.updateAndDrawPreview=function(t,s,i,o){if(Q.select("#"+s).classList.contains("plot")){if(i.setAttribute({fillcolor:"#52A8EC",strokecolor:"#52A8EC"}),Q.select('[data-value="'+o+'"]').nodeName&&Q.select('[data-value="'+o+'"]').getAttribute("rel")&&0==Q.select('[data-value="'+o+'"]').getAttribute("rel").indexOf("segment"))switch(i.board.prevPoint=i.board.create("point",[i.Xjc,i.Y()],{name:"",fillcolor:"#52A8EC",strokecolor:"#52A8EC",fixed:!0}),i.for=i.board.create("line",[i.board.prevPoint,i],{straightFirst:!1,straightLast:!1,firstArrow:!1,lastArrow:!1,strokeWidth:"2",fillcolor:"#52A8EC",strokecolor:"#52A8EC"}),i.for.name=o,o){case"SLH":i.setAttribute({fillcolor:"#fff",strokecolor:"#52A8EC"});break;case"SRH":i.board.prevPoint.setAttribute({fillcolor:"#fff",strokecolor:"#52A8EC"});break;case"SBH":i.setAttribute({fillcolor:"#fff",strokecolor:"#52A8EC"}),i.board.prevPoint.setAttribute({fillcolor:"#fff",strokecolor:"#52A8EC"})}else if(Q.select('[data-value="'+o+'"]').nodeName&&Q.select('[data-value="'+o+'"]').getAttribute("rel")&&0==Q.select('[data-value="'+o+'"]').getAttribute("rel").indexOf("ray")){switch(o){case"RL":i.board.prevPoint=i.board.create("point",[-Math.abs(i.board.xmax),i.Y()],{visible:!1});break;case"RR":i.board.prevPoint=i.board.create("point",[Math.abs(i.board.xmax),i.Y()],{visible:!1});break;case"RRH":i.setAttribute({fillcolor:"#fff",strokecolor:"#52A8EC"}),i.board.prevPoint=i.board.create("point",[-Math.abs(i.board.xmax),i.Y()],{visible:!1});break;case"RLH":i.setAttribute({fillcolor:"#fff"}),i.board.prevPoint=i.board.create("point",[Math.abs(i.board.xmax),i.Y()],{visible:!1})}i.for=i.board.create("line",[i.board.prevPoint,i],{straightFirst:!0,straightLast:!1,firstArrow:!0,lastArrow:!1,strokeWidth:"2",fillcolor:"#52A8EC",strokecolor:"#52A8EC"}),i.for.name=o}I.on("move",(function(){null!=i.Yjc&&i.moveTo([i.X(),i.Yjc])})),i.on("over",(function(){this.visProp.fixed||(I.containerObj.style.cursor="e-resize")})),i.on("out",(function(){this.visProp.fixed||(I.containerObj.style.cursor="default")}))}else if(D.sinfo=!1,i.board.points.push(i),null==i.board.prevPoint)i.board.prevPoint=i;else{let t,e;if(Q.select("#"+s).classList.contains("line"))E=D.getEquationPreview(s,i.X(),i.Y(),i.board.prevPoint.X(),i.board.prevPoint.Y()),i.for=i.board.create("line",[i,i.board.prevPoint],{straightFirst:!0,straightLast:!0,firstArrow:!0,lastArrow:!0,strokeWidth:"2"}),D.sinfo=!!E;else if(Q.select("#"+s).classList.contains("circle"))i.for=i.board.create("circle",[i.board.prevPoint,i],{straightFirst:!0,straightLast:!0,firstArrow:!0,lastArrow:!0,strokeWidth:"2"}),i.for.center.for=i.for;else if(Q.select("#"+s).classList.contains("segment"))i.for=i.board.create("line",[i,i.board.prevPoint],{straightFirst:!1,straightLast:!1,firstArrow:!1,lastArrow:!1,strokeWidth:"2"});else if(Q.select("#"+s).classList.contains("vector"))i.for=i.board.create("line",[i,i.board.prevPoint],{straightFirst:!1,straightLast:!1,firstArrow:!0,lastArrow:!1,strokeWidth:"2"});else if(Q.select("#"+s).classList.contains("ray"))i.for=i.board.create("line",[i,i.board.prevPoint],{straightFirst:!0,straightLast:!1,firstArrow:!0,lastArrow:!1,strokeWidth:"2"});else if(Q.select("#"+s).classList.contains("parabola")){i.setAttribute({fixed:!0}),i.board.prevPoint.setAttribute({fixed:!0});let t=Q.select("#"+s).getAttribute("data-equation").split("="),e=D.getEquationPreview(s,i.X(),i.Y(),i.board.prevPoint.X(),i.board.prevPoint.Y()),o=I.jc.snippet(e,!0,"x",!0);i.for=i.board.create("functiongraph",[o]),D.sinfo=e==t[1],i.for.point1=i.board.prevPoint,i.for.point2=i,i.board.prevPoint=null}else Q.select("#"+s).classList.contains("polygon")?void 0===o?(i.for=i.board.create("polygon",[i.board.prevPoint,i]),i.board.prevPoint=i):o.length==i.board.points.length&&(i.for=i.board.create("polygon",i.board.points,{boadres:{strokecolor:"darkgray",strokeWidth:2}}),i.for.parents.for=i.for,i.board.prevPoint=null,i.board.points=[]):Q.select("#"+s).classList.contains("sine")?(E=D.getEquationPreview(s,i.X(),i.Y(),i.board.prevPoint.X(),i.board.prevPoint.Y()),t=i.board.prevPoint,e=i,i.for=i.board.create("curve",[function(t){return t},function(s){let i=t.coords.usrCoords,o=e.coords.usrCoords,a=i[1],r=i[2],l=1/(4*(o[1]-a));return(o[2]-r)*Math.sin(2*Math.PI*l*(s-a))+r}]),i.for.point1=i.board.prevPoint,i.for.point2=i,D.sinfo=!!E):Q.select("#"+s).classList.contains("cosine")&&(E=D.getEquationPreview(s,i.X(),i.Y(),i.board.prevPoint.X(),i.board.prevPoint.Y()),t=i.board.prevPoint,e=i,i.for=i.board.create("curve",[function(t){return t},function(s){let i=t.coords.usrCoords,o=e.coords.usrCoords,a=i[1],r=i[2],l=o[1],n=1/(4*(a-l));return(o[2]-r)*Math.cos(2*Math.PI*n*(s-l))+r}]),i.for.point1=i.board.prevPoint,i.for.point2=i,D.sinfo=!!E);Q.select("#"+s).classList.contains("polygon")||(i.board.prevPoint=null)}i.on("down",(function(){Q.select("#"+s).classList.contains("plot")?(this.Yjc=this.Y(),void 0===this.for?this.startPosition=this.X()+","+this.name:this.startPosition=this.for.point2.X()+","+this.for.point1.X()+","+this.for.name):(this.startPosition=this.X()+","+this.Y(),Q.select("#"+s).classList.contains("polygon")&&i.board.points.length>0&&this.X()+","+this.Y()==i.board.points[0].X()+","+i.board.points[0].Y()&&(i.for=i.board.create("polygon",i.board.points,{boadres:{strokecolor:"darkgray",strokeWidth:2}}),i.for.parents.for=i.for,i.board.prevPoint=null,i.board.points=[])),void 0!==this.for&&"circle"==this.for.elType&&(this.startPosition=Math.round(this.for.Radius()))})),i.on("up",(function(){let o=!1;if(Q.select(".delElem").children[0].classList.contains("active")){if(Q.select("#"+s).classList.contains("point"))I.removeObject(this),this.position=this.startPosition,o=!0;else if(Q.select("#"+s).classList.contains("circle"))I.removeObject(this),I.removeObject(this.for.center),I.removeObject(this.for.point2),D.modeOn(),this.position=this.for.center.X()+","+this.for.center.Y()+"/"+Math.round(this.for.Radius()),o=!0;else if(Q.select("#"+s).classList.contains("polygon")&&void 0!==this.for){let t=[];if(void 0!==this.for.parents.for){for(let e=0;e<i.for.vertices.length;e++)i.board.removeObject(this.for.parents.for.vertices[e]),t.push(this.for.parents.for.vertices[e].X()+","+this.for.parents.for.vertices[e].Y());i.board.removeObject(this.for.parents.for),t.pop(t[t.length-1]),this.position=t.join("|"),o=!0}}else void 0!==this.for?(I.removeObject(this.for),I.removeObject(this.for.point1),I.removeObject(this.for.point2),this.position=this.for.point1.X()+","+this.for.point1.Y()+"|"+this.for.point2.X()+","+this.for.point2.Y(),o=!0):Q.select("#"+s).classList.contains("parabola")&&Q&&Q.showmsg(e.curve_start_point,3e3);if(Q.select("#"+s).classList.contains("parabola")?void 0!==this.for?(D.updateDeleteAttrs(s,this.position),D.checkAns(t),Q.select(".delElem").children[0].classList.remove("active")):console.warn({msg:e.warning_this_for}):(D.updateDeleteAttrs(s,this.position),D.checkAns(t)),o){let t=setTimeout((function(){Q.selectAll("#mathmain #delButton.active","removeClass","active"),clearTimeout(t)}),100)}}else D.updateAttrsPreview(s,this,!0),D.checkAns(t)})),i.on("over",(function(){!this.visProp.fixed&&Q.select(".delElem").children[0].classList.contains("active")&&(Q.select("#"+s).classList.contains("point")?this.setAttribute({name:"Delete",showInfobox:!1,fillcolor:"#000",strokecolor:"#000"}):Q.select("#"+s).classList.contains("circle")&&void 0!==this.for?(this.for.center.setAttribute({name:"Delete",showInfobox:!1,fillcolor:"#000",strokecolor:"#000"}),this.for.point2.setAttribute({name:"Delete",showInfobox:!1,fillcolor:"#000",strokecolor:"#000"})):Q.select("#"+s).classList.contains("polygon")&&void 0!==this.for?void 0!==this.for.parents.for&&this.setAttribute({name:"Delete",showInfobox:!1,fillcolor:"#000",strokecolor:"#000"}):Q.select("#"+s).classList.contains("sine")||Q.select("#"+s).classList.contains("cosine")?void 0!==this.for&&this.for.point2.setAttribute({name:"Delete",showInfobox:!1,fillcolor:"#000",strokecolor:"#000"}):void 0!==this.for&&this.for.point1.setAttribute({name:"Delete",showInfobox:!1,fillcolor:"#000",strokecolor:"#000"}))})),i.on("out",(function(){!this.visProp.fixed&&Q.select(".delElem").children[0].classList.contains("active")&&(Q.select("#"+s).classList.contains("point")?this.setAttribute({name:"",showInfobox:!0,fillcolor:"#ff0000",strokecolor:"#ff0000"}):Q.select("#"+s).classList.contains("circle")&&void 0!==this.for?(this.for.center.setAttribute({name:"",showInfobox:!0,fillcolor:"#ff0000",strokecolor:"#ff0000"}),this.for.point2.setAttribute({name:"",showInfobox:!0,fillcolor:"#ff0000",strokecolor:"#ff0000"})):Q.select("#"+s).classList.contains("polygon")&&void 0!==this.for?void 0!==this.for.parents.for&&this.setAttribute({name:"",showInfobox:!0,fillcolor:"#ff0000",strokecolor:"#ff0000"}):Q.select("#"+s).classList.contains("sine")||Q.select("#"+s).classList.contains("cosine")?void 0!==this.for&&this.for.point2.setAttribute({name:"",showInfobox:!0,fillcolor:"#ff0000",strokecolor:"#ff0000"}):void 0!==this.for&&this.for.point1.setAttribute({name:"",showInfobox:!0,fillcolor:"#ff0000",strokecolor:"#ff0000"}))}))},D.getEquationPreview=function(t,e,s,i,o){let a,r,l,n=Q.select("#"+t).getAttribute("data-equation").split("="),c="";switch(Q.select("#"+t).getAttribute("type")){case"parabola":{n[0].includes("x")?(c="a*(y-h)^2+k",a=(0,eval)(e-o)/Math.pow(s-i,2)):(a=Math.round(10*(0,eval)((s-o)/Math.pow(e-i,2)))/10,c="a*(x-h)^2+k");let t=c.replace("a",a).replace("h",i).replace("k",o);return t=t.replace(/\\-\\-/g,"+").replace(/\\+\\-/g,"-"),t}case"sine":case"cosine":return Q.select("#"+t).classList.contains("sine")?r=n[1].replace("sin","Math.sin").replace("x","(x/180)*Math.PI"):Q.select("#"+t).classList.contains("cosine")&&(r=n[1].replace("cos","Math.cos").replace("x","(x/180)*Math.PI")),a=isNaN(parseFloat(n[1].charAt(0)))||!isFinite(n[1].charAt(0))?1:n[1].charAt(0),l=Math.round(100*(0,eval)(r.replace("x",e))/100)==s&&Math.round(100*(0,eval)(r.replace("x",i))/100)==o&&a==Math.abs(o),l;case"line":return l=Math.round((0,eval)(n[1].replace("x",e)))==Math.round((0,eval)(n[0].replace("y",s)))&&Math.round((0,eval)(n[1].replace("x",i)))==Math.round((0,eval)(n[0].replace("y",o))),l}},D.updateDeleteAttrs=function(t,e){let s=Q.select("#"+t).getAttribute("data-userans").split("|"),i=[];switch(Q.select("#"+t).getAttribute("type")){case"point":case"circle":for(let t=0;t<s.length;t++)s[t]!=e&&i.push(s[t]);break;case"segment":case"ray":case"vector":case"sine":case"cosine":case"line":case"parabola":if(null!=e){let t=e.split("|");i=s.filter((function(t){return!this.has(t)}),new Set(t))}}Q.select("#"+t).setAttribute("data-userans",i.join("|"))},D.updateAttrsPreview=function(t,e,s){let i=Q.select("#"+t).getAttribute("data-userans"),o=Q.select("#"+t).getAttribute("type");if(void 0!==e.for&&"circle"==e.for.elType){let s=e.for.center,o=s.X()+","+s.Y();void 0!==e.startPosition&&(o+="/"+e.startPosition),i=i.replace(o,s.X()+","+s.Y()+"/"+Math.round(e.for.Radius())),Q.select("#"+t).setAttribute("data-userans",i)}else if(s)switch(i=Q.select("#"+t).classList.contains("plot")?void 0===e.for?Q.select("#"+t).getAttribute("data-userans").replace(e.startPosition,e.X()+","+e.name):Q.select("#"+t).getAttribute("data-userans").replace(e.startPosition,e.for.point2.X()+","+e.for.point1.X()+","+e.for.name):Q.select("#"+t).getAttribute("data-userans").replace(e.startPosition,e.X()+","+e.Y()),Q.select("#"+t).setAttribute("data-userans",i),o){case"line":case"sine":case"cosine":{let e=0,s=null,o=i.split("|");for(let i=0;i<o.length;i++){let a=o[i].split(",");if(null==s)s=a;else{0==D.getEquationPreview(t,a[0],a[1],s[0],s[1])&&e++,s=null}}D.sinfo=!(e>0)}}void 0!==e.for&&"circle"==e.for.elType||(i=i.split("|").filter((t=>t)),Q.select("#"+t).classList.contains("plot")?void 0===e.for?i.push(e.X()+","+e.name):i.push(e.for.point2.X()+","+e.for.point1.X()+","+e.for.name):i.push(e.X()+","+e.Y()),void 0===s&&(Q.select("#"+t).setAttribute("data-userans",i.join("|")),Q.select("#"+t).classList.contains("polygon")&&0==e.board.points.length&&Q.select("#"+t).setAttribute("data-userans",D.getUnique(Q.select("#"+t).getAttribute("data-userans").split("|")).join("|"))))},D.getUnique=function(t){return t.filter((function(t,e,s){return s.indexOf(t)===e}))},D.checkAns=function(t){D.userAnsXML="<smans type='20'>\n",D.result=!0;let e=Q.selectAll("#mathmain > .drag-resize");for(let s=0;s<e.length;s++)D.userAnsXML=D.checkChildAnswer(t,e[s]);return D.userAnsXML+="</smans>",window.inNative&&(window.getHeight(),window.postMessage(JSON.stringify({userAnswers:D.userAnsXML,inNativeIsCorrect:D.result}),"*")),{uXml:D.userAnsXML,ans:D.result}},D.checkChildAnswer=function(t,e){let s,i,o;switch(Q.select(e).getAttribute("type")){case"plot":case"association":case"point":case"segment":s=Q.select(e).getAttribute("data-anskey").split("|").sort().join("|"),i=Q.select(e).getAttribute("data-userans").split("|").sort().join("|"),s!=i&&(D.result=!1);break;case"circle":case"vector":case"ray":Q.select(e).getAttribute("data-anskey")!=Q.select(e).getAttribute("data-userans")&&(D.result=!1);break;case"sine":case"cosine":s=Q.select(e).getAttribute("data-anskey").split("|").sort().join("|"),i=Q.select(e).getAttribute("data-userans").split("|").sort().join("|"),s!=i&&(D.result=!1);break;case"parabola":if(s=Q.select(e).getAttribute("data-anskey").split("|").filter((function(t){return""!=t})),i=Q.select(e).getAttribute("data-userans").split("|").filter((function(t){return""!=t})),s.length==i.length)for(o=0;o<i.length;o+=2){let t=s.indexOf(i[o]);if(t>-1){let e=(s[t+1].split(",")[1]-s[t].split(",")[1])/((s[t+1].split(",")[0]-s[t].split(",")[0])*(s[t+1].split(",")[0]-s[t].split(",")[0])),a=(i[o+1].split(",")[1]-i[o].split(",")[1])/((i[o+1].split(",")[0]-i[o].split(",")[0])*(i[o+1].split(",")[0]-i[o].split(",")[0]));D.result=e==a}else D.result=!1}else D.result=!1;break;case"line":try{if(s=Q.select(e).getAttribute("data-anskey").split("|"),i=Q.select(e).getAttribute("data-userans").split("|"),0==i.length||1==i.length){D.result=!1;break}{let t=0,e=0,o=0,a=0;for(;t<s.length;){for(o=0,e=0;e<i.length&&i.length==s.length;){let r,l,n,c;const d=parseFloat(s[t+1].split(",")[0])-parseFloat(s[t].split(",")[0]),u=parseFloat(s[t+1].split(",")[1])-parseFloat(s[t].split(",")[1]);if(r=(parseFloat(i[e].split(",")[1])-parseFloat(s[t].split(",")[1]))*d,n=u*(parseFloat(i[e].split(",")[0])-parseFloat(s[t].split(",")[0])),l=(parseFloat(i[e+1].split(",")[1])-parseFloat(s[t].split(",")[1]))*d,c=u*(parseFloat(i[e+1].split(",")[0])-parseFloat(s[t].split(",")[0])),parseFloat(r)==parseFloat(n)&&parseFloat(l)==parseFloat(c)){o+=1,a=0;break}D.result=!1,a=1,e+=2}if(1==a){o=0;break}t+=2}D.result=0!=o}}catch(t){console.warn(t)}break;case"polygon":s=D.getUnique(Q.select(e).getAttribute("data-anskey").split("|").sort()).join("|"),i=D.getUnique(Q.select(e).getAttribute("data-userans").split("|").sort()).join("|"),s!=i&&(D.result=!1)}return D.userAnsXML+="<div id='"+Q.select(e).getAttribute("id")+"' userAns='"+Q.select(e).getAttribute("data-userans")+"'></div>\n",D.userAnsXML},D.showansdrag=function(t,e,s){void 0===s&&(s=0);let i=Q.selectAll("#mathmain > .drag-resize");for(let o=0;o<i.length;o++)D.showchildansdrag(t,i[o],e,s)},D.showchildansdrag=function(t,e,s,i){if(1==i){I=D.initBoardPreview(t,e);let s=Q.find(t,".footer_toolbox li","all");s.length>0&&s.forEach((function(t){t.disabled=!0,t.classList.add("btn_active_disabled"),t.classList.remove("btn_active")}))}let o,a=Q.select(e).getAttribute("type"),r=Q.select(e).getAttribute("id");""!=Q.select(e).getAttribute("data-anskey")&&(o=Q.select(e).getAttribute("data-anskey").split("|"));let l,n,c=Q.select(e).getAttribute("data-userans").split("|");if("c"==s){if(Q.select("#"+r).classList.contains("association"))for(let e=0;e<o.length;e++){n=o[e].split(","),D.updateNumberline(t,r,n[0],n[1],n[2]).setAttribute({cssClass:"cursor-down-active",highlightCssClass:"cursor-down-active",fixed:!0})}else if(Q.select("#"+r).classList.contains("plot")){l=1;for(let e=0;e<o.length;e++){let s;-1==o[e].indexOf(",")?(s=I.create("point",[parseInt(o[e]),l],{name:"",fixed:!0}),D.updateAndDrawPreview(t,r,s)):(n=o[e].split(","),s=I.create("point",[parseInt(n[0]),l],{name:"",fixed:!0}),s.Xjc=parseInt(n[1]),D.updateAndDrawPreview(t,r,s,n[2])),l++}}else for(let s=0;s<o.length;s++){n=o[s].split(",");let i=I.create("point",[parseInt(n[0]),parseInt(n[1])],{name:"",fixed:!0,strokeColor:"#0000FF",fillColor:"#0000FF"});Q.select(e).classList.contains("circle")?D.drawCirclePreview(t,r,o[s]):D.updateAndDrawPreview(t,r,i,o)}Q.setCss(t,{border:"1px solid #0000ff"})}else if("u"==s){let s=0,d=null,u=!1;if(l=1,Q.select("#"+r).classList.contains("association"))for(let e=0;e<c.length;e++){let a=c[e];n=a.split(",");let l=D.updateNumberline(t,r,parseFloat(n[0]),parseFloat(n[1]),n[2]);void 0!==i&&1==i&&("0.4"==n[1]?o.includes(a)?l.setAttribute({cssClass:"cursor-down-correct",highlightcssClass:"cursor-down-correct",fixed:!0}):(l.setAttribute({cssClass:"cursor-down-incorrect",highlightcssClass:"cursor-down-incorrect",fixed:!0}),s++):(l.setAttribute({fixed:!0}),s++),D.setCorrectAns(t,s))}else for(let p=0;p<c.length;p++){let f=c[p];if(Q.select("#"+r).classList.contains("plot")?""!=Q.select(e).getAttribute("data-userans")&&(-1==f.indexOf(",")?(T=I.create("point",[parseInt(f),l],{name:""}),D.updateAndDrawPreview(t,r,T)):(n=f.split(","),T=I.create("point",[parseInt(n[0]),l],{name:""}),T.Xjc=parseInt(n[1]),D.updateAndDrawPreview(t,r,T,n[2])),l++):(n=f.split(","),T=I.create("point",[parseInt(n[0]),parseInt(n[1])],{name:""}),""!=Q.select(e).getAttribute("data-userans")&&(Q.select(e).classList.contains("circle")?D.drawCirclePreview(t,r,f):D.updateAndDrawPreview(t,r,T,c))),void 0!==i&&1==i&&""!=Q.select(e).getAttribute("data-userans")){switch(T.setAttribute({fixed:!0}),a){case"point":o.includes(f)?T.setAttribute({strokeColor:"#00FF00",fillColor:"#00FF00"}):(T.setAttribute({strokeColor:"#FF0000",fillColor:"#FF0000"}),s++);break;case"circle":void 0!==T.for&&(u=!!o.includes(f),s=D.drawelem(r,u,s));break;case"plot":u=!!o.includes(f),s=D.drawelem(r,u,s);break;case"line":case"parabola":case"sine":case"cosine":void 0===T.for?B=T.board.prevPoint:s=D.drawelem(r,D.result,s);break;case"segment":case"vector":case"ray":{let t;(Q.select(e).classList.contains("segment")||Q.select(e).classList.contains("polygon"))&&(t=!!o.includes(f)),(Q.select(e).classList.contains("ray")||Q.select(e).classList.contains("vector"))&&(t=o.indexOf(f)==c.indexOf(f)),void 0===T.for?(B=T.board.prevPoint,d=t):(u=!(!d||!t),s=D.drawelem(r,u,s));break}case"polygon":{let t=[...o],e=[...c];u=t.sort().join("|")==e.sort().join("|"),s=D.drawelem(r,u,s);break}}D.setCorrectAns(t,s)}else void 0!==i&&1==i&&""==Q.select(e).getAttribute("data-userans")&&Q.setCss(t,{border:"1px solid #ff0000"})}}},D.setCorrectAns=function(t,e){0==e?(Q.setCss(t,{border:"1px solid #00ff00"}),Q.select("#answer").checked=!0,Q.select(t).setAttribute("as",1)):(Q.setCss(t,{border:"1px solid #ff0000"}),Q.select("#answer").checked=!1,Q.select(t).setAttribute("as",-1))},D.drawelem=function(t,e,s){if(Q.select("#"+t).classList.contains("plot"))1==e?void 0===T.for?T.setAttribute({strokeColor:"#00FF00",fillColor:"#00FF00"}):(T.for.setAttribute({strokeColor:"#00FF00"}),T.for.point1.setAttribute({strokeColor:"#00FF00",fillColor:"#00FF00"}),T.for.point2.setAttribute({strokeColor:"#00FF00",fillColor:"#00FF00"})):(void 0===T.for?T.setAttribute({strokeColor:"#FF0000",fillColor:"#FF0000"}):(T.for.setAttribute({strokeColor:"#FF0000"}),T.for.point1.setAttribute({strokeColor:"#FF0000",fillColor:"#FF0000"}),T.for.point2.setAttribute({strokeColor:"#FF0000",fillColor:"#FF0000"})),s++);else if(Q.select("#"+t).classList.contains("polygon")){let t;if(1==e){if(void 0!==T.for)for(t=0;t<T.for.vertices.length;t++)T.for.vertices[t].setAttribute({strokeColor:"#00FF00",fillColor:"#00FF00"})}else{if(void 0!==T.for){for(t=0;t<T.for.vertices.length;t++)T.for.vertices[t].setAttribute({strokeColor:"#FF0000",fillColor:"#FF0000"});T.for.setAttribute({fillColor:"#FF0000",opacity:.5})}s++}}else 1==e?(T.setAttribute({strokeColor:"#00FF00",fillColor:"#00FF00"}),B.setAttribute({strokeColor:"#00FF00",fillColor:"#00FF00"}),T.for.setAttribute({strokeColor:"#00FF00"})):(T.setAttribute({strokeColor:"#FF0000",fillColor:"#FF0000"}),B.setAttribute({strokeColor:"#FF0000",fillColor:"#FF0000"}),T.for.setAttribute({strokeColor:"#FF0000"}),s++);return s},D.drawCirclePreview=function(t,e,s){let i=s.split("/");for(let s=0;s<i.length;s++){let o,a=i[0].split(",");if(-1!=i[s].indexOf(","))o=I.create("point",[parseInt(a[0]),parseInt(a[1])],{name:""}),B=o;else{let t=parseInt(a[0])-parseInt(i[1]);o=I.create("point",[parseInt(t),parseInt(a[1])],{name:""})}D.updateAndDrawPreview(t,e,o)}},D.labbinded=!0,D.modeOn=function(t){Q.selectAll(".test, .review","addClass","h"),t?(Q.selectAll(".review","removeClass","h"),D.unBindLab(),D.showansdrag(D.ajax_eId,"u",1)):(Q.selectAll(".test","removeClass","h"),D.bindLab(),D.showansdrag(D.ajax_eId,"u"),Q.setCss(D.ajax_eId).style.border="1px solid #CCCCCC")},D.bindLab=function(){D.labbinded=!0,D.readyThis(D.ajax_eId),Q.find(D.ajax_eId,".delElem").removeAttribute("style"),Q.find(D.ajax_eId,"#ADA_button").style.display="block"},D.unBindLab=function(){D.labbinded=!1,Q.find(D.ajax_eId,".delElem").style.display="none",Q.find(D.ajax_eId,"#ADA_button").style.display="none"};export default class extends s{constructor(t){super(),i(this,t,$,V,o,{xml:8,uxml:9,isReview:0,showAns:10,editorState:11},S)}}
//# sourceMappingURL=GraphPreview-1ae41120.js.map
