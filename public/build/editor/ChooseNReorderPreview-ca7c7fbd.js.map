{"version":3,"file":"ChooseNReorderPreview-ca7c7fbd.js","sources":["../../../clsSMChoose/chooseAuthString.js","../../../clsSMChoose/ChooseNReorderPreview.svelte"],"sourcesContent":["/**\r\n *  File Name   : chooseAuthString.js\r\n *  Description : Functions for all Choose and reorder AnswerChecking Module\r\n *\tAuthor      : Sundaram Tripathi\r\n *  Version     : 1.0\r\n *  Package     : pe-gold\r\n *  Last update : 31 Jan 2021\r\n */\r\nimport JUI from '../src/libs/javscript_helper/JUI';\r\nimport hotkeys from 'hotkeys-js';\r\nimport Sortable from 'sortablejs';\r\n\r\n\r\n\r\nconst AH = new JUI();\r\nvar ucChoose = {};\r\nucChoose.ajax_eId = \"#choose\";\r\nucChoose.userAnsXML = '';\r\n//ucChoose.a ='';\r\nucChoose.errorCatchFlag = 1;\r\n//var textarea_flag = false;\r\nlet ua, us, cs, ca;\r\n\r\n\r\nAH.listen('body', 'keyup', '.sm_input_text', function() {\r\n    if (document.querySelector(\".sm_input_text\").value == \"\" && document.querySelector(\".add-option\")) {\r\n        document.querySelector(\".add-option\").disabled = true;\r\n    } else {\r\n        if (document.querySelector(\".add-option\"))\r\n            document.querySelector(\".add-option\").disabled = false;\r\n    }\r\n})\r\n\r\n\r\nucChoose.update_XMLValue = function() {\r\n    var list = [];\r\n    // jQuery(\".choose_item_container textarea\").each(function(index, val) {\r\n    //     const _this = jQuery(this);\r\n    //     if (_this.val().length > 0) {\r\n    //         const new_val = _this.val().replace(/\\r?\\n/g, '||');\r\n    //         if (_this.prev('input').is(':checked'))\r\n    //             list.push('*' + new_val);\r\n    //         else\r\n    //             list.push(new_val);\r\n    //     }\r\n    // }); \r\n\r\n    AH.selectAll('.choose_item_container textarea').forEach((_this)=>{\r\n        if(_this.value.length > 0) {\r\n            const new_val = _this.value.replace(/\\r?\\n/g, '||');\r\n            if(AH.prevElm(_this,'input') && AH.prevElm(_this,'input').checked) {\r\n                list.push('*' + new_val);\r\n            } else {\r\n                list.push(new_val);\r\n            }\r\n        }\r\n    })\r\n\r\n\r\n\r\n    // var xmlDom = jQuery(jQuery(\"#special_module_xml\").val());\r\n    // xmlDom.find('list').attr(\"headingCorrect\",jQuery(\"#headingCorrect\").val());\r\n    // xmlDom.find('list').attr(\"allowSort\",jQuery(\"#\").attr(\"value\"));\r\n    // xmlDom.find('list').attr(\"isSentence\",jQuery(\"#isSentence\").attr(\"value\"));\r\n    // xmlDom.find('list').attr(\"isParagraph\",jQuery(\"#isParagraph\").attr(\"value\"));\r\n    // xmlDom.find('list').html(\"<!--[CDATA[\"+list.join('\\n')+\"]]-->\");\r\n    // jQuery(\"#special_module_xml\").val(formatXml(xmlDom.xml ? xmlDom.xml : (new XMLSerializer()).serializeToString(xmlDom[0]),true));\r\n\r\n    if (document.querySelector(\"#special_module_xml\")) {\r\n        var xmlDom = document.querySelector(\"#special_module_xml\").value;\r\n        AH.find(xmlDom, 'list').setAttribute(\"headingCorrect\", document.querySelector(\"#headingCorrect\").value);\r\n        AH.find(xmlDom, 'list').setAttribute(\"allowSort\", document.querySelector(\"#allowSort\").getAttribute(\"value\"));\r\n        AH.find(xmlDom, 'list').setAttribute(\"isSentence\", document.querySelector(\"#isSentence\").getAttribute(\"value\"));\r\n        AH.find(xmlDom, 'list').setAttribute(\"isParagraph\", document.querySelector(\"#isParagraph\").getAttribute(\"value\"));\r\n        AH.find(xmlDom, 'list').innerHTML = \"<!--[CDATA[\" + list.join('\\n') + \"]]-->\";\r\n        document.querySelector(\"#special_module_xml\").value = formatXml(xmlDom.xml ? xmlDom.xml : (new XMLSerializer()).serializeToString(xmlDom[0]), true);\r\n\r\n    }\r\n\r\n}\r\n\r\nucChoose.showAns = function(chid, elem, ansType) {\r\n    //jQuery('#show_ans_group .btn').removeClass(\"btn-primary active\");\r\n    //jQuery(elem).addClass(\"btn-primary\");\r\n    if (ansType == \"c\") {\r\n        ucChoose.review(chid, 1);\r\n        ucChoose.sortList(chid, \"correct_seq\");\r\n    } else if (ansType == \"u\") {\r\n        ucChoose.review(chid, 0);\r\n        ucChoose.sortList(chid, \"user_seq\");\r\n    }\r\n}\r\n\r\n\r\nucChoose.sortList = function(chid, sorting_attr) {\r\n    var eel = AH.selectAll(chid + ' ' + '#sortable > li');\r\n    var list = Array.from(eel);\r\n    list.sort(function(a, b) {\r\n        var seq1 = parseInt(a.getAttribute(sorting_attr));\r\n        if (seq1 === 0) seq1 = Number.MAX_VALUE;\r\n        var seq2 = parseInt(b.getAttribute(sorting_attr));\r\n        if (seq2 === 0) seq2 = Number.MAX_VALUE;\r\n        return (seq1 - seq2);\r\n    });\r\n    AH.selectAll(chid + \" #sortable > li\").forEach((_emt) => {\r\n        _emt.remove();\r\n    })\r\n    list.forEach((_this) => {\r\n        AH.find(chid, '#sortable').append(_this);\r\n    })\r\n}\r\n\r\n\r\n\r\nucChoose.togseq = function(chid) {\r\n    var cs = AH.find(chid, \"#sortable\").getAttribute(\"checkSeq\");\r\n    AH.find(chid, '#sortable').setAttribute(\"checkSeq\", ((cs == \"1\") ? \"0\" : \"1\"));\r\n    AH.find(chid, '#instruction').innerHTML = ((cs == \"1\") ? \"\" : \"Sequence Important\");\r\n}\r\n\r\n\r\n\r\n\r\nucChoose.review = function(chid, correctans) {\r\n    var cs = document.querySelector(chid)?.querySelector('#sortable')?.getAttribute(\"checkSeq\")\r\n    var cans = ((correctans == 1) ? \"is_correct\" : \"user_answer\");\r\n    var seq = ((correctans == 1) ? \"correct_seq\" : \"user_seq\");\r\n    if (AH.select(chid).getAttribute?.('type') == \"normal\") {\r\n        AH.find(chid, '#sortable li', 'all').forEach((_this) => {\r\n            if (cs == \"1\") {\r\n                if (_this.getAttribute(cans) == 1) {\r\n                    var cseq = _this.getAttribute(seq);\r\n                } else {\r\n                    cseq = 0;\r\n                }\r\n                if (cseq > 0) {\r\n                    AH.find(_this, '.prefix').innerHTML = cseq;\r\n                } else {\r\n                    AH.find(_this, '.prefix').innerHTML = \"\";\r\n                }\r\n                \r\n                AH.find(_this, '.prefix', {\r\n                    action: 'removeClass',\r\n                    actionData: 'tick'\r\n                })\r\n            } else {\r\n                if (_this.getAttribute(cans) == 1) {\r\n                    AH.find(_this, '.prefix', {\r\n                        action: 'addClass',\r\n                        actionData: 'tick'\r\n                    })\r\n                } else {\r\n                    AH.find(_this, '.prefix', {\r\n                        action: 'removeClass',\r\n                        actionData: 'tick'\r\n                    })\r\n                \r\n                }\r\n            }\r\n\r\n            if (_this.getAttribute(\"user_answer\") == 1 && correctans == 0) {\r\n                _this.classList.add(\"choose_sel\");\r\n            } else if (_this.getAttribute(\"is_correct\") == 1 && correctans == 1) {\r\n                _this.classList.add(\"choose_sel\");\r\n            } else {\r\n                _this.classList.remove(\"choose_sel\");\r\n            }\r\n        });\r\n    } else if (AH.select(chid).getAttribute?.('type') == \"sentence\" || AH.select(chid).getAttribute?.('type') == \"paragraph\") {\r\n        ucChoose.setActiveClass(chid, correctans);\r\n    }\r\n    //if(correctans == 1)sortList(chid, \"correct_seq\");\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nucChoose.CheckResultchoose = function(chid) {\r\n    let result = {}\r\n    var yourScore = true;\r\n    var temp = 0;\r\n    let temp_sort = AH.find(chid, '#sortable');\r\n    var cs = Array.isArray(temp_sort) ? '' : temp_sort.getAttribute(\"checkSeq\");\r\n    //var i = 1;\r\n    var ansxml = \"\";\r\n    AH.find(chid, '#sortable li', 'all').forEach((_this) => {\r\n\r\n        var us = _this.getAttribute(\"user_seq\");\r\n        var ua = _this.getAttribute(\"user_answer\");\r\n        if (cs == \"1\") {\r\n            if (us != _this.getAttribute(\"correct_seq\")) {\r\n                yourScore = false;\r\n            }\r\n\r\n            if (typeof calculatePoint !== \"undefined\") {\r\n                if (_this.getAttribute(\"correct_seq\") > 0) {\r\n                    if (us == _this.getAttribute(\"correct_seq\")) temp++;\r\n                    //temp = calculate_point(chid,us,jQuery(this).attr(\"correct_seq\"),jQuery(chid).find('#sortable').attr(\"totalCorrectAns\"),temp);\r\n                }\r\n            }\r\n        } else {\r\n            if (ua != _this.getAttribute(\"is_correct\")) {\r\n                yourScore = false;\r\n            }\r\n            if (typeof calculatePoint !== \"undefined\") {\r\n                if (_this.getAttribute(\"is_correct\") > 0) {\r\n                    if (ua == _this.getAttribute(\"is_correct\")) temp++;\r\n                    //temp = calculate_point(chid,ua,jQuery(this).attr(\"is_correct\"),jQuery(chid).find('#sortable').attr(\"totalCorrectAns\"),temp);\r\n                }\r\n            }\r\n        }\r\n        ansxml += _this.getAttribute(\"optID\") + \"|\" + us + \"|\" + ua + \",\";\r\n    });\r\n\r\n    if (typeof calculatePoint != \"undefined\") {\r\n        calculatePoint(AH.find(chid, '#sortable').getAttribute(\"totalCorrectAns\"), temp);\r\n    }\r\n\r\n    ucChoose.userAnsXML = '<SMANS type=\"6\"><list useranswer=\"' + ansxml + '\" /></SMANS>';\r\n    //ISSPECIALMODULEUSERXMLCHANGE = 1;\r\n    \r\n    \r\n    //AH.select(\"#special_module_user_xml\").value = ucChoose.userAnsXML;\r\n    result.u =  ucChoose.userAnsXML;\r\n    result.b = yourScore;\r\n    \r\n    \r\n    //AH.select(\"#answer\").checked = yourScore;\r\n    if (yourScore == true) {\r\n        //console.trace();\r\n        return (result);\r\n    } else {\r\n        //console.trace();\r\n        return (result);\r\n    }\r\n    \r\n}\r\n//touch handler\r\nucChoose.touchHandler = function(event) {\r\n    var touches = event.changedTouches,\r\n        first = touches[0],\r\n        type = \"\";\r\n    switch (event.type) {\r\n        case \"touchstart\":\r\n            type = \"mousedown\";\r\n            break;\r\n        case \"touchmove\":\r\n            type = \"mousemove\";\r\n            break;\r\n        case \"touchend\":\r\n            type = \"mouseup\";\r\n            break;\r\n        default:\r\n            return;\r\n    }\r\n    var simulatedEvent = document.createEvent(\"MouseEvent\");\r\n    simulatedEvent.initMouseEvent(\r\n        type, true, true, window, 1,\r\n        first.screenX, first.screenY,\r\n        first.clientX, first.clientY, false,\r\n        false, false, false, 0 /*left*/ , null);\r\n    first.target.dispatchEvent(simulatedEvent);\r\n}\r\n\r\nucChoose.init = function(chid) {\r\n    // /*in IE8 addEventListener is not working So Prem Check when IE8 then do nothing*/\r\n    // if (jQuery.browser !== undefined) {\r\n    // \tif (jQuery.browser.msie  && parseInt(jQuery.browser.version, 10) === 8) {\r\n    // \t//do nothing\r\n    // \t} else {\r\n    //     \tdocument.addEventListener(\"touchstart\", ucChoose.touchHandler, true);\r\n    //     \tdocument.addEventListener(\"touchmove\", ucChoose.touchHandler, true);\r\n    //     \tdocument.addEventListener(\"touchend\", ucChoose.touchHandler, true);\r\n    //     \tdocument.addEventListener(\"touchcancel\", ucChoose.touchHandler, true);\r\n    // \t}\r\n    // } else {\r\n    document.addEventListener(\"touchstart\", ucChoose.touchHandler, true);\r\n    document.addEventListener(\"touchmove\", ucChoose.touchHandler, true);\r\n    document.addEventListener(\"touchend\", ucChoose.touchHandler, true);\r\n    document.addEventListener(\"touchcancel\", ucChoose.touchHandler, true);\r\n    // }\r\n\r\n    // jQuery(chid).bind('touchstart', function(e) { e.preventDefault()});\r\n    // jQuery(chid).bind('touchmove', function(e) { e.preventDefault()});\r\n    AH.bind(chid, 'touchstart', function(e) {\r\n        e.preventDefault()\r\n    })\r\n    AH.bind(chid, 'touchmove', function(e) {\r\n        e.preventDefault()\r\n    })\r\n\r\n}\r\n\r\nucChoose.shouldselect = false;\r\n//var count = 1;//\r\n\r\n// ucChoose.readyThis = function(chid) {\r\n// \tif(isTouchable || isiPad) {\r\n// \t\tsetTimeout(function() {\r\n// \t\t\tjQuery(chid).find('#sortable').removeAttr('onmouseup');\r\n\r\n// \t\t\tjQuery('body').find(chid).on('click','#sortable',function() {\r\n// \t\t\t\tvar e = window.event;\r\n// \t\t\t\tucChoose.ow = e.srcElement? e.srcElement : e.target;\r\n// \t\t\t\tucChoose.t = setTimeout(function(){ucChoose.setUserAns(chid,ucChoose.ow,ucChoose.shouldselect)},100);\r\n// \t\t\t});\r\n// \t\t\tif(jQuery(\"#sortable\").attr(\"checkseq\") != \"0\") {\r\n// \t\t\t\tjQuery(chid).find(\"#sortable\").sortable({\r\n// \t\t\t\t\tstop: function(e,ui){\r\n// \t\t\t\t\t\tucChoose.ow = e.srcElement? e.srcElement : e.target;\r\n// \t\t\t\t\t\tucChoose.t = setTimeout(function(){\r\n// \t\t\t\t\t\t\tucChoose.setUserAns(chid,ucChoose.ow,ucChoose.shouldselect)},100);\r\n// \t\t\t\t\t}\r\n// \t\t\t\t});\r\n// \t\t\t}\r\n// \t\t},200);\r\n// \t}\r\n// }\r\n\r\nucChoose.readyThis = function(chid) {\r\n    if (typeof(isTouchable) != undefined || isiPad) {\r\n        setTimeout(function() {\r\n            //jQuery(chid).find('#sortable').removeAttr('onmouseup');\r\n            AH.find(chid, '#sortable').removeAttribute('onmouseup');\r\n            AH.listen(AH.find('body', chid), 'click', '#sortable', function() {\r\n                var e = window.event;\r\n                ucChoose.ow = e.srcElement ? e.srcElement : e.target;\r\n                ucChoose.t = setTimeout(function() {\r\n                    ucChoose.setUserAns(chid, ucChoose.ow, ucChoose.shouldselect)\r\n                }, 100);\r\n            })\r\n            if (document.querySelector(\"#sortable\").getAttribute(\"checkseq\") != \"0\") {\r\n                new Sortable(AH.find(chid, '#sortable'), {\r\n                    onEnd: function(evt) {\r\n                        ucChoose.ow = evt.srcElement ? evt.srcElement : evt.target; \r\n                        ucChoose.t = setTimeout(function() {\r\n                            ucChoose.setUserAns(chid, ucChoose.ow, ucChoose.shouldselect)\r\n                        }, 100);\r\n                    }\r\n                });\r\n            }\r\n        }, 200);\r\n    }\r\n}\r\n\r\nucChoose.bindKeyup = function(chid) {\r\n    var count = 0;\r\n\r\n    hotkeys.unbind('down,up,enter,alt+down,delete,left,right,tab,shift+tab,esc', 'choose' + chid);\r\n\r\n\r\n    AH.find(chid, '#sortable li', 'all').forEach((_this) => {\r\n        _this.classList.add(\"ks\")\r\n    })\r\n\r\n\r\n\r\n    AH.bind(document, 'click', function() {\r\n        if (!checkFocus())\r\n            AH.find(chid, \"#sortable .copied\", {\r\n                action: 'removeClass',\r\n                actionData: 'copied'\r\n            });\r\n    })\r\n\r\n    AH.listen(document, 'keydown', chid, function() {\r\n        hotkeys.setScope('choose' + chid);\r\n    })\r\n\r\n\r\n    function navigateDown() {\r\n        var selected_opt = AH.find(chid, \"#sortable .copied\");\r\n        var a = AH.find(chid, '.ks').length;\r\n        if (selected_opt.classList.contains(\"copied\")) {\r\n            if (count == 0) {\r\n                selected_opt.insertBefore(AH.find(chid, \".ks:nth(0)\"));\r\n            } else {\r\n                selected_opt.insertAfter(AH.find(chid, \".ks:nth(\" + count + \")\"));\r\n            }\r\n        }\r\n        //count_prev = ((count == 0) ? (a - 1) : (count - 1));\r\n        var ks_fill = AH.find(chid, \".ks:nth(\" + count + \")\");\r\n        //var prev_ks = AH.find(chid, \".ks:nth(\" + (count - 1) + \")\");\r\n        ks_fill.focus();\r\n        if (count == (a - 1)) {\r\n            count = 0\r\n        } else {\r\n            count++;\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n    function tabMove(element, type = 1) {\r\n        if (element.id) {\r\n            let ks_element = AH.selectAll('.ks');\r\n            let focus_index = -1;\r\n            for (let index = 0; index < ks_element.length; index++) {\r\n                if (element.id == ks_element[index].id) {\r\n                    if (type) {\r\n                        if (index == (ks_element.length - 1)) {\r\n                            focus_index = 0;\r\n                        } else {\r\n                            focus_index = index + 1;\r\n                        }\r\n                    } else {\r\n                        if (index == 0) {\r\n                            focus_index = ks_element.length - 1;\r\n                        } else {\r\n                            focus_index = index - 1;\r\n                        }\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (focus_index != -1) {\r\n                ks_element[focus_index].focus();\r\n            }\r\n        }\r\n    }  \r\n\r\n\r\n\r\n\r\n    function activateKs() {\r\n        count = 0;\r\n        //count_prev = 0;\r\n        //ks_activated = true;\r\n        navigateDown();\r\n    }\r\n\r\n    \r\n    function checkFocus() { // Fixed @eslint issue\r\n        var is_focus = false;\r\n        let elements = AH.selectAll(\"#sortable li\");\r\n        let focus_ele = AH.select(\":focus\");\r\n\r\n        if (focus_ele.nodeName) {\r\n            let focus_id = focus_ele.getAttribute('id');\r\n            for (let index = 0; index < elements.length; index++) {\r\n                if (focus_id == elements[index].getAttribute('id')) {\r\n                    is_focus = true;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        return is_focus;\r\n    }\r\n\r\n    \r\n    hotkeys('down, up, enter, alt+down, delete, left, right, tab, shift+tab, esc', 'choose' + chid, function(event, handler) {\r\n        switch (handler.key) {\r\n            case 'up' :\r\n            case 'left':\r\n                if (checkFocus()) {\r\n                    \r\n                    var selected_opt = AH.find(chid,\"#sortable .copied\");\r\n                    \r\n                    var b = AH.find(chid,'.ks').length;\r\n                    let focus_element = AH.select('.ks:focus');\r\n                    let ks_element = AH.selectAll('.ks')[0];\r\n                    \r\n                    if (focus_element.id == ks_element.id) {\r\n                        if (selected_opt && selected_opt.classList.contains(\"copied\")) {\r\n                            selected_opt.insertAfter(AH.find(chid,\".ks:nth(\"+(b-1)+\")\"));\r\n                            selected_opt.focus();\r\n                        } else {\r\n                            \r\n                            AH.selectAll(\".ks\")[AH.selectAll(\".ks\").length-1].focus();\r\n                        }\r\n                    } else {\r\n                        if (selected_opt &&  selected_opt.classList.contains(\"copied\")) {\r\n                            selected_opt.insertBefore(AH.find(chid,\"#sortable .copied\").previousElementSibling);\r\n                            selected_opt.focus();\r\n                        } else {\r\n                            tabMove(focus_element,0)\r\n                        }\r\n                    }\r\n                    event.preventDefault();\r\n                }\r\n            break;\r\n            case 'down' :\r\n            case 'right':\r\n                if (checkFocus())  {\r\n                    console.log('check');\r\n                    \r\n                    var selected_opt = AH.find(chid,'#sortable .copied');\r\n                    \r\n                    var a = AH.selectAll(chid+' .ks').length;\r\n                    \r\n                    let focus_element = AH.select('.ks:focus');\r\n                    let ks_last_element = AH.selectAll('.ks')[AH.selectAll('.ks').length - 1];\r\n                    if(focus_element.id == ks_last_element.id) {\r\n                        if (selected_opt && selected_opt.classList.contains(\"copied\")) {\r\n                            selected_opt.insertBefore(AH.find(chid,\".ks:nth(0)\"));\r\n                            selected_opt.focus();\r\n                        } else {\r\n                            \r\n                            AH.selectAll('.ks')[0].focus();\r\n                        }\r\n                    } else {\r\n                        \r\n                            if (selected_opt && selected_opt.classList.contains(\"copied\")) {\r\n                                \r\n                                var clone = AH.find(chid,'#sortable .copied').nextSibling.cloneNode(true);\r\n                                selected_opt.insertAfter(clone,AH.find(chid,'#sortable .copied').nextSibling)\r\n                                \r\n                                selected_opt.focus();\r\n                            } else {\r\n                                tabMove(focus_element,1);\r\n                            }\r\n                        \r\n                    }\r\n                    event.preventDefault();\r\n                }\r\n            break;\r\n            case 'enter':\r\n                if (checkFocus()) {\r\n                    event.preventDefault();\r\n                    \r\n                    if (AH.find(chid, \"#sortable\").getAttribute(\"checkseq\") == \"0\") {\r\n                        \r\n                        ucChoose.ow = AH.find(chid, '#sortable li:focus', 'all')[0];\r\n                        \r\n                        ucChoose.t = setTimeout(function() {\r\n                            ucChoose.setUserAns(chid, ucChoose.ow, true)\r\n                        }, 100);\r\n                        \r\n                    } else if (AH.find(chid, \"#sortable\").getAttribute(\"checkseq\") == \"1\") {\r\n                        \r\n                        if (AH.find(chid, '#sortable li:focus').classList.contains(\"copied\")) {\r\n                            \r\n                            ucChoose.ow = AH.find(chid, '#sortable li:focus', 'all')[0];\r\n                            \r\n                            ucChoose.t = setTimeout(function() {\r\n                                \r\n                                ucChoose.setUserAns(chid, ucChoose.ow, ((AH.find(chid, \"#sortable li:focus\").classList.contains(\"choose_sel\")) ? false : true));\r\n                            }, 100);\r\n                            \r\n                            AH.find(chid, '#sortable li:focus', {\r\n                                action: 'removeClass',\r\n                                actionData: 'copied'\r\n                            })\r\n                        } else {\r\n                            \r\n                            ucChoose.ow = AH.find(chid, '#sortable li:focus', 'all')[0];\r\n                            \r\n                            ucChoose.t = setTimeout(function() {\r\n                                \r\n                                ucChoose.setUserAns(chid, ucChoose.ow, ((AH.find(chid, \"#sortable li:focus\").classList.contains(\"choose_sel\")) ? false : true));\r\n                            }, 100);\r\n                            \r\n                            AH.find(chid, '#sortable li:focus', {\r\n                                action: 'addClass',\r\n                                actionData: 'copied'\r\n                            })\r\n                            //copied_id = jQuery(chid).find(\"#sortable li:focus\").attr('optid')\r\n                            //copied_id = AH.find(chid, '#sortable li:focus').getAttribute('optid');\r\n                        }\r\n                    }\r\n\r\n                }\r\n                break;\r\n            case 'alt+down':\r\n                activateKs();\r\n                break;\r\n            case 'delete':\r\n                if (checkFocus()) {\r\n                    \r\n                    ucChoose.ow = AH.find(chid, '#sortable li:focus', 'all')[0];\r\n                    \r\n                    ucChoose.t = setTimeout(function() {\r\n                        ucChoose.setUserAns(chid, ucChoose.ow, true)\r\n                    }, 100);\r\n                }\r\n                break;\r\n            case 'tab':\r\n                if (checkFocus()) {\r\n                    AH.find(chid, '#sortable .copied', {\r\n                        action: 'removeClass',\r\n                        actionData: 'copied'\r\n                    });\r\n                }\r\n                let focus_ele = AH.selectAll(\".ks:focus\");\r\n                let ks_last = AH.selectAll(\".ks\")[AH.selectAll(\".ks\").length - 1];\r\n                \r\n                if (focus_ele.id == ks_last.id) {\r\n                    event.preventDefault();\r\n                    \r\n                    AH.selectAll(\".ks\")[0].focus();\r\n                }\r\n                break;\r\n            case 'shift+tab':\r\n                if (checkFocus()) {\r\n                    \r\n                    AH.find(chid, '#sortable .copied', {\r\n                        action: 'removeClass',\r\n                        actionData: 'copied'\r\n                    })\r\n                }\r\n                focus_ele = AH.selectAll(\".ks:focus\");\r\n                ks_last = AH.selectAll(\".ks\")[AH.selectAll(\".ks\").length - 1];\r\n                if (focus_ele.id == ks_last.id) {\r\n                    event.preventDefault();\r\n                    //jQuery('.ks').last().focus();\r\n                    AH.selectAll(\".ks\")[AH.selectAll(\".ks\").length].focus();\r\n                }\r\n                break;\r\n            case 'esc':\r\n                if (checkFocus()) {\r\n                    event.preventDefault();\r\n                    \r\n                    AH.find(chid, '#sortable .copied', {\r\n                        action: 'removeClass',\r\n                        actionData: 'copied'\r\n                    })\r\n                    AH.selectAll(\".ks\")[AH.selectAll(\".ks\").length - 1].focus();\r\n                    AH.selectAll(\".ks\")[AH.selectAll(\".ks\").length - 1].blur();\r\n                }\r\n                break;\r\n        }\r\n    });\r\n    hotkeys.setScope('choose' + chid);\r\n}\r\n\r\nucChoose.cmd = function(obj, e) {\r\n    ucChoose.shouldselect = true;\r\n    if (!e) {\r\n        e = window.event\r\n    }\r\n    //var onwhich = e.srcElement ? e.srcElement : e.target;\r\n}\r\n\r\n\r\nucChoose.cmm = function(obj, e) {\r\n    if (!e) {\r\n        e = window.event\r\n    }\r\n    var onwhich = e.srcElement ? e.srcElement : e.target;\r\n    if (onwhich.classList.contains(\"prefix\")) {\r\n        onwhich = onwhich.parentElement;\r\n    }\r\n    if (onwhich) { // its fix not null\r\n        \r\n        var ua = onwhich.getAttribute(\"user_answer\");\r\n        ucChoose.shouldselect = false;\r\n        if (ua == \"0\") {\r\n            ucChoose.shouldselect = true;\r\n        }\r\n    }\r\n}\r\n\r\n\r\nucChoose.cmu = function(chid, e, from_sortable = false) {\r\n    if (from_sortable) {\r\n        ucChoose.ow = e;\r\n    } else {\r\n        if (!e) {\r\n            e = window.event\r\n        }\r\n        ucChoose.ow = e.srcElement ? e.srcElement : e.target;\r\n    }\r\n    if ((ucChoose.ow).classList.contains(\"prefix\")) {\r\n        ucChoose.ow = (ucChoose.ow).parentElement;\r\n    }\r\n    ucChoose.t = setTimeout(function() {\r\n        ucChoose.setUserAns(chid, ucChoose.ow, ucChoose.shouldselect)\r\n    }, 100)\r\n    //ucChoose.t=setTimeout(\"ucChoose.setUserAns('\"+chid+\"',ucChoose.ow,\"+ucChoose.shouldselect+\")\",100);\r\n}\r\n\r\n\r\n\r\n\r\nucChoose.setUserAns = function(chid, ow, select) {\r\n    if (ow.tagName == \"IMG\") {\r\n        \r\n        ua = AH.parent(ow, 'li').getAttribute(\"user_answer\");\r\n        \r\n        us = AH.parent(ow, 'li').getAttribute(\"user_seq\");\r\n        \r\n        cs = AH.find(chid, '#sortable').getAttribute(\"checkSeq\");\r\n    } else {\r\n        \r\n        ua = ow.getAttribute(\"user_answer\");\r\n        \r\n        us = ow.getAttribute(\"user_seq\");\r\n        \r\n        cs = AH.find(chid, \"#sortable\").getAttribute(\"checkSeq\");\r\n    }\r\n\r\n    if (ow.tagName == \"UL\") {\r\n        ucChoose.shouldselect = false;\r\n        return;\r\n    }\r\n\r\n    if (select) {\r\n        if (ua == \"1\") {\r\n            if (ow.tagName == \"IMG\") {\r\n                \r\n                let owLi = AH.parent(ow, 'li');\r\n                AH.setAttr(owLi, {\r\n                    \"user_answer\": 0\r\n                });\r\n                \r\n                owLi.classList.remove(\"choose_sel\");\r\n                if (cs != \"1\") {\r\n                    \r\n                    AH.find(owLi, '.prefix', 'all').classList.remove(\"tick\");\r\n                }\r\n            } else {\r\n                \r\n                AH.setAttr(ow, {\r\n                    \"user_answer\": 0\r\n                })\r\n                \r\n                ow.classList.remove('choose_sel');\r\n                if (cs != \"1\") {\r\n                    \r\n                    AH.find(ow, '.prefix', {\r\n                        action: 'removeClass',\r\n                        actionData: 'tick'\r\n                    })\r\n                }\r\n            }\r\n        } else {\r\n            if (ow.tagName == \"IMG\") {\r\n                \r\n                AH.find(document.querySelector(ow).parentElement, 'li', 'all').setAttribute(\"user_answer\", 1);\r\n                \r\n                AH.select(ow.parentElement).classList.add(\"choose_sel\");\r\n\r\n                if (cs != \"1\") {\r\n                    \r\n                    let owli = AH.parent(ow, 'li');\r\n                    AH.find(owli, '.prefix').classList.add(\"tick\");\r\n                }\r\n            } else {\r\n                \r\n                AH.setAttr(ow, {\r\n                    \"user_answer\": 1\r\n                })\r\n                \r\n                ow.classList.add('choose_sel');\r\n                if (cs != \"1\") {\r\n                    \r\n                    AH.find(ow, '.prefix', {\r\n                        action: 'addClass',\r\n                        actionData: 'tick'\r\n                    })\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    if (cs == \"1\") {\r\n        var count = 1;\r\n        AH.find(chid, '#sortable li', 'all').forEach((data) => {\r\n            if (data.getAttribute(\"user_answer\") == 1) {\r\n                AH.find(data, '.prefix').innerHTML = count;\r\n                AH.setAttr(data, {\r\n                    \"user_seq\": count\r\n                });\r\n                count++;\r\n            } else {\r\n                AH.find(data, '.prefix').innerHTML = \"\";\r\n                AH.setAttr(data, {\r\n                    \"user_seq\": 0\r\n                })\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n\r\n    ucChoose.CheckResultchoose(chid);\r\n    ucChoose.shouldselect = false;\r\n}\r\n\r\n\r\n\r\n\r\n\r\nucChoose.removeItem = function() { // fixed @eslint issue\r\n    AH.remove(e1.parentElement.parentElement);\r\n    let choose_item = document.querySelectorAll('.choose_item_container').innerHTML;\r\n    if (choose_item.trim().length <= 200) {\r\n        document.querySelector(\".message_content\").style.display = 'block';\r\n    } else {\r\n        document.querySelector(\".message_content\").style.display = 'none';\r\n    }\r\n}\r\n\r\n\r\n\r\nucChoose.addItem = function() {\r\n    \r\n    document.querySelector('.message_content').style.display = \"none\";\r\n    AH.insert('.choose_item_container', '<div class=\"clearfix mt choose_options\"><div class=\"col-md-12 mt-head\"><input class=\"choose_compls\" type=\"checkbox\"><textarea></textarea><span class=\"remove-item icomoon-24px-delete-1\"></span></div></div>', 'afterbegin');\r\n}\r\n\r\n\r\nucChoose.setDragSequence = function(chid, el, ty) {\r\n    var count = 1;\r\n    AH.find(chid, '#sortable li', 'all').forEach((_this) => {\r\n        AH.setAttr(_this, {\r\n            \"user_seq\": count\r\n        });\r\n        count++;\r\n    });\r\n\r\n    if (ty == 0) {\r\n        AH.find(chid, '#sortable li', 'all').forEach((_this) => {\r\n            _this.classList.remove('choose_sel');\r\n        });\r\n    }\r\n    ucChoose.CheckResultSentenceChoose(chid);\r\n}\r\n\r\n\r\nucChoose.CheckResultSentenceChoose = function(chid) {\r\n    var yourScore = true;\r\n    let res = {};\r\n    cs = AH.find(\"#choose\", \"#sortable\").getAttribute(\"checkSeq\");\r\n    //var i = 1\r\n    var ansxml = \"\";\r\n    AH.find(chid, '#sortable li', 'all').forEach((data) => {\r\n        us = data.getAttribute(\"user_seq\");\r\n        ca = data.getAttribute(\"correct_seq\");\r\n        ua = data.getAttribute(\"user_answer\");\r\n        if (us != ca && data.getAttribute(\"correct_seq\") != 0) {\r\n            yourScore = false;\r\n            //console.log('1');\r\n        }\r\n        ansxml += data.getAttribute(\"optID\") + \"|\" + us + \"|\" + ua + \",\";\r\n    });\r\n    ucChoose.userAnsXML = '<SMANS type=\"6\"><list useranswer=\"' + ansxml + '\" /></SMANS>';\r\n    ISSPECIALMODULEUSERXMLCHANGE = 1;\r\n    if (document.querySelector(\"#special_module_user_xml\"))\r\n        document.querySelector(\"#special_module_user_xml\").value = ucChoose.userAnsXML;\r\n    if (document.querySelector(\"#answer\"))\r\n        AH.setAttr(\"#answer\", {\r\n            \"checked\": yourScore\r\n        });\r\n\r\n        res.u = ucChoose.userAnsXML\r\n        res.ans = yourScore;\r\n\r\n    if (yourScore == true) {\r\n        return (res);\r\n    } else {\r\n        return (res);\r\n    }\r\n}\r\n\r\nucChoose.dragSenParItem = function(chid) {\r\n    \r\n\r\n    new Sortable(AH.find(chid, \"#sortable\"), {\r\n        // Element dragging started\r\n        onStart: function(evt) {\r\n            console.log('start =>' + evt);\r\n        // this.copyHelper = ui.clone().insertAfter(ui);\r\n    // \t    jQuery(this).data('copied', false);\r\n    // \t   \treturn ui.clone().css({'background':'#DCDCDC','max-height':'100px','max-width':'400px','opacity':'0.5','overflow':'hidden','min-height':'35px'});\r\n        \r\n\r\n        },\r\n        onEnd: function(evt) {\r\n\r\n            console.log('end =>' + evt);\r\n            //var copied = jQuery(this).data('copied');\r\n            // \t    if(!copied) {\r\n            // \t\t\tconsole.log(this.copyHelper);\r\n            // \t        this.copyHelper.remove();\r\n            // \t    }\t\t\t    \r\n            // \t    this.copyHelper = null;\r\n            ucChoose.setDragSequence(chid, evt.item);\r\n            \r\n        }\r\n    }) // Need to fixed it\r\n\r\n    \r\n    ucChoose.CheckResultchoose(chid);\r\n}\r\n\r\n\r\nucChoose.setActiveClass = function(chid, correctans) {\r\n    var cs = AH.find(chid, '#sortable').getAttribute(\"checkSeq\")\r\n    var cans = ((correctans == 1) ? \"is_correct\" : \"user_answer\");\r\n    var seq = ((correctans == 1) ? \"correct_seq\" : \"user_seq\");\r\n    AH.find(chid, '#sortable li', 'all').forEach((_this) => {\r\n        // if (correctans == 0 && _this.getAttribute('correct_seq') == _this.getAttribute('user_seq') && _this.getAttribute('correct_seq') != 0) {\r\n        //     _this.classList.add(\"choose_sel\");\r\n        // } else if (correctans == 1 && _this.getAttribute('is_correct') != 0) {\r\n        //     //_this.classList.add(\"choose_sel\");\r\n        //     AH.select(_this, 'addClass', 'choose_sel');\r\n        // } else {\r\n        //     //_this.classList.remove(\"choose_sel\");\r\n        //     AH.select(_this, 'removeClass', 'choose_sel');\r\n        // }\r\n\r\n        // if (cs == \"1\") {\r\n        //     if (_this.getAttribute(cans) == 1) {\r\n        //         var cseq = _this.getAttribute(seq);\r\n        //     } else {\r\n        //         cseq = 0;\r\n        //     }\r\n\r\n        //     if (cseq > 0) {\r\n        //         //_this.find('.prefix').html(cseq);\r\n        //         AH.find(_this, '.prefix').innerHTML = cseq;\r\n        //     } else {\r\n        //         //_this.find('.prefix').html(\"\");\r\n        //         AH.find(_this, '.prefix').innerHTML = \"\";\r\n        //     }\r\n        //     //_this.find('.prefix').removeClass(\"tick\");\r\n        //     AH.find(_this, '.prefix', {\r\n        //         action: 'removeClass',\r\n        //         actionData: 'tick'\r\n        //     })\r\n        //     // AH.select(_this,'removeClass','tick');\r\n        // } else {\r\n        //     if (_this.getAttribute(cans) == 1) {\r\n        //         //_this.find('.prefix').addClass(\"tick\");\r\n        //         AH.find(_this, '.prefix', {\r\n        //             action: 'addClass',\r\n        //             actionData: 'tick'\r\n        //         })\r\n        //         //_this.classList.add('tick');\r\n        //     } else {\r\n        //         //_this.find('.prefix').removeClass(\"tick\");\r\n        //         AH.find(_this, '.prefix', {\r\n        //             action: 'removeClass',\r\n        //             actionData: 'tick'\r\n        //         })\r\n        //         //AH.select(_this,'removeClass','tick');\r\n        //         // _this.classList.remove('tick');\r\n        //     }\r\n        // }\r\n\r\n        if (_this.getAttribute(\"user_answer\") == 1 && correctans == 0) {\r\n            \r\n            _this.classList.add(\"choose_sel\");\r\n        } else if (_this.getAttribute(\"is_correct\") == 1 && correctans == 1) {\r\n            _this.classList.add(\"choose_sel\");\r\n        } else {\r\n            \r\n            _this.classList.remove(\"choose_sel\");\r\n        }\r\n\r\n\r\n\r\n\r\n    });\r\n}\r\n\r\n\r\nucChoose.removeActive = function(chid) {\r\n    AH.find(chid, '#sortable li', 'all').forEach((_this) => {\r\n        _this.classList.remove(\"choose_sel\");\r\n    });\r\n}\r\n\r\n/*ajax based code*/\r\n\r\nucChoose.labBinded = true;\r\nucChoose.sortable = false;\r\n\r\n\r\n\r\nucChoose.modeOn = function(modeType) {\r\n\r\n    if (typeof modeType == 'undefined') {\r\n        //\r\n    }\r\n    AH.selectAll('.test', 'addClass', 'h');\r\n    AH.selectAll('.review', 'addClass', 'h');\r\n    if (modeType) {\r\n        AH.selectAll('.review', 'removeClass', 'h');\r\n        ucChoose.unBindLab();\r\n        if (typeof hotkeys != \"undefined\") hotkeys.unbind('down,up,enter,alt+down,delete,left,right,tab,shift+tab,esc', 'choose' + ucChoose.ajax_eId);\r\n        AH.find(ucChoose.ajax_eId, '.copied', 'all').forEach((_el) => {\r\n            _el.classList.remove(\"copied\");\r\n        })\r\n        if (document.querySelector('#show_ans_group button') != null) {\r\n            document.querySelector('#show_ans_group button').forEach((_this) => {\r\n                if (_this.classList.contains(\"correct-ans btn-primary\")) {\r\n                    ucChoose.showAns(ucChoose.ajax_eId, _this, 'c');\r\n                } else if (_this.classList.contains(\"your-ans btn-primary\")) {\r\n                    ucChoose.showAns(ucChoose.ajax_eId, _this, 'u');\r\n                }\r\n            })\r\n        }\r\n    } else {\r\n        AH.selectAll('.test', 'removeClass', 'h');\r\n        setTimeout(function() {\r\n            ucChoose.callBindKey();\r\n        }, 100);\r\n        ucChoose.review(ucChoose.ajax_eId, 0);\r\n        ucChoose.bindLab();\r\n    }\r\n}\r\n\r\nucChoose.callBindKey = function() {\r\n    if (typeof hotkeys != \"undefined\") {\r\n        ucChoose.bindKeyup(ucChoose.ajax_eId);\r\n    } else {\r\n        if (ucChoose.errorCatchFlag <= 50) {\r\n            setTimeout(function() {\r\n                ucChoose.callBindKey();\r\n            }, 100);\r\n        } else {\r\n            console.log(\"hotkeys not found\");\r\n        }\r\n        ucChoose.errorCatchFlag++;\r\n    }\r\n}\r\n\r\n\r\n\r\nucChoose.unBindLab = function() {\r\n    ucChoose.labBinded = false;\r\n    if (document.querySelector(ucChoose.ajax_eId).getAttribute('type') == \"normal\") {\r\n        AH.find(ucChoose.ajax_eId, '#sortable').removeAttribute('onmouseup onmousemove onmousedown');\r\n    }\r\n    if (AH.find(ucChoose.ajax_eId, '#sortable').classList.contains('ui-sortable')) {\r\n        ucChoose.sortable = true;\r\n        //jQuery(ucChoose.ajax_eId).find(\"#sortable\").sortable('destroy');\t// comment\r\n    }\r\n}\r\n\r\n\r\n\r\nucChoose.bindLab = function() {\r\n    ucChoose.labBinded = true;\r\n     //setTimeout(function() {\r\n         //if (document.querySelector(ucChoose.ajax_eId).getAttribute('type') == \"normal\") {\r\n            /*jQuery(ajax_eId).find(\"#sortable\").attr({\r\n                \"onmouseup\":\"ucChoose.cmu('\"+ajax_eId+\"',event);\",\r\n                \"onmousemove\":\"ucChoose.cmm('\"+ajax_eId+\"',event);\",\r\n                \"onmousedown\":\"ucChoose.cmd('\"+ajax_eId+\"',event);\"\r\n            });*/\r\n\r\n        \r\n\r\n            AH.bind(document.querySelector(\"#sortable\"), 'mouseup', function(e) {\r\n                ucChoose.cmu(ucChoose.ajax_eId, e);\r\n            })\r\n\r\n\r\n            AH.bind(document.querySelector(\"#sortable\"), 'mousemove', function(e) {\r\n                ucChoose.cmm(ucChoose.ajax_eId, e);\r\n            })\r\n\r\n\r\n            AH.bind(document.querySelector(\"#sortable\"), 'mousedown', function(e) {\r\n                ucChoose.cmd(ucChoose.ajax_eId, e);\r\n                \r\n            })\r\n\r\n        //}\r\n    //}, 200);\r\n\r\n    if (!Array.isArray(AH.find(ucChoose.ajax_eId, \"#sortable\"))) {\r\n        // commented\r\n        new Sortable(AH.find(ucChoose.ajax_eId, \"#sortable\"), {\r\n            animation: 150,\r\n            onEnd: function (/**Event*/evt) {\r\n                \r\n                ucChoose.cmu(ucChoose.ajax_eId, evt.item, true);\r\n                AH.select(ucChoose.ajax_eId).click();\r\n                \r\n\r\n                \r\n                \r\n            },\r\n            \r\n        });\r\n        // jQuery(ucChoose.ajax_eId).find(\"#sortable\").disableSelection(); // It's not using\r\n    }\r\n\r\n    if (document.querySelector(ucChoose.ajax_eId)?.getAttribute?.('type') == \"sentence\" || document.querySelector(ucChoose.ajax_eId)?.getAttribute?.('type') == \"paragraph\") {\r\n        ucChoose.dragSenParItem(ucChoose.ajax_eId);\r\n    }\r\n}\r\n/*ajax based code*/\r\nexport default ucChoose; ","\r\n<!-- \r\n*  File Name   : ChooseNPreview.js\r\n*  Description : Show the module according to authoring side.\r\n*  Author      : Sundaram Tripathi\r\n*  Version     : 1.0 \r\n*  Package     : svelte_items\r\n*  Last update :  -->\r\n\r\n<script>\r\n\timport { afterUpdate, onMount } from \"svelte\";\r\n\timport ucChoose from './chooseAuthString';\r\n\timport { writable } from \"svelte/store\";\r\n\timport ItemHelper from '../helper/ItemHelper.svelte';\r\n\timport {AH,XMLToJSON,onUserAnsChange} from \"../helper/HelperAI.svelte\";\r\n\timport Sortable from 'sortablejs';\r\n\timport './css/choose.min.css';\r\n    export let cmed;\r\n    export let showAns;\r\n    export let xml; \r\n\texport let stopPreviewUpdate;\r\n\texport let editorState;\r\n\texport let isReview; \r\n\texport let uxml;\r\n\tlet customIsReview = isReview;\r\n\r\n    let containerID = (cmed)?\"choose\"+cmed:\"choose\";\r\n    ucChoose.ajax_eId = (cmed)?\"#choose\"+cmed:\"#choose\";\r\n    var localCData = [];\r\n    let state = {};\r\n    let stateData = writable({\r\n        xml                         :\"\",\r\n        headingCorrect              :\"\",\r\n        allowSort                   :\"\",\r\n        isSentence                  :\"\",\r\n        isParagraph                 :\"\",\r\n        chooseClass                 :\"\",\r\n        totalcorrectans             :\"\",\r\n\t\tstateXMLToJSON\t\t\t\t:\"\",\r\n    })\r\n\r\n    //let onError = \"\";\r\n\r\n    let unsubscribe = stateData.subscribe((items)=>{\r\n        state = items;\r\n    })\r\n\r\n\r\n    // for displaying the answer\r\n\tfunction displayAns() {\r\n\t\tvar ans = \"\";\r\n\t\t// create smans and return correct if answer is correct\r\n\t\tif (state.isSentence == \"1\" || state.isParagraph == \"1\") {\r\n\t\t\tans = ucChoose.CheckResultchoose(\"#\"+containerID);\r\n\t\t} else {\r\n\t\t\tans = ucChoose.CheckResultchoose(\"#\"+containerID);\r\n\t\t}\r\n\t\tonUserAnsChange({uXml:ans.u,ans:ans.b});\r\n\t\t\r\n\t\t// show the answer wether the answer is correct or not\r\n\t\tif (editorState) {\r\n\t\t\tshowAns(ans.b ? \"Correct\" : \"Incorrect\");\r\n\t\t}\r\n    } \r\n\t$:{\r\n\t\tsetTimeout(function(){\r\n\t\t\tif (isReview) {\r\n\t\t\t\t\tsetReview();\r\n\t\t\t} else {\r\n\t\t\t\t\tunsetReview();\r\n\t\t\t}\r\n\t\t},200)\r\n\t}\r\n    \r\n\r\n    // this function executes just after render\r\n    onMount(()=>{ \r\n        getHeight();\r\n        // binding up the events\r\n        AH.listen(document,'click',\"#\"+containerID,function(){\r\n\t\t\tsetTimeout(function(){ displayAns() },100);\r\n\t\t\t\r\n\t\t})\r\n\r\n\t\t\r\n\r\n\t\tAH.listen(document,'click','#show_ans_group button',(_this)=>{\r\n\t\t\tAH.removeClass('#show_ans_group button','active');\r\n\t\t\tAH.addClass(_this,'active');\r\n\t\t})\r\n\r\n    })\r\n\r\n\t\r\n\t\t\r\n\t\t\r\n\r\n\r\n    // this function returns the height of editorRender class\t\r\n\tfunction getHeight() {\r\n\t\t\r\n\r\n\t\tAH.bind(document,'click',function(){\r\n\t\t\tif(document.querySelector(\".editorRender\")) {\r\n\t\t\t\tlet heights = document.querySelector(\".editorRender\").clientHeight;\r\n\t\t\t\treturn heights;\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\r\n    }\r\n    \r\n    // calls when review mode is on\r\n\tfunction setReview() {\r\n\t\tdisableMouse(\"none\");\r\n\t\tucChoose.modeOn(\"on\");\r\n\t\tisReview = true;\r\n\t\tucChoose.review(\"#\"+containerID, 0);\r\n\t\t\r\n\t\tAH.removeClass('#show_ans_group button','active');\r\n\r\n\t\t\r\n\t\tAH.removeClass('#show_ans_group .your-ans','active');\r\n\t\tdisplayAns();\r\n    }\r\n    \r\n    // calls jsut after review mode is off from the setReview\r\n\tfunction unsetReview() {\r\n\t\tdisableMouse(\"auto\");\r\n\t\tisReview = false;\r\n\t\tucChoose.modeOn();\r\n\t\tucChoose.review(\"#\"+containerID, 0); \r\n    }\r\n    \r\n    // this function added the pointerEvents property in all li of element having id sortable\r\n\tfunction disableMouse(event) {\r\n\t\t//alert('check');\r\n\t\t\r\n\t\tAH.selectAll(\"#sortable li\").forEach((_this)=>{\r\n\t\t\t_this.style.pointerEvents = event;\r\n\t\t})\r\n    }\r\n    \r\n    // this function calls whenever there is change in state or props\r\n    afterUpdate(()=>{\r\n\r\n\t\t// for the change in xml \r\n\t\tif (xml != state.xml) {\r\n\t\t\tif (stopPreviewUpdate == true) return false;\r\n\t\t\tif (cmed) { \r\n\t\t\t\tcontainerID = \"choose\"+cmed; \r\n\t\t\t\tucChoose.ajax_eId = \"#choose\"+cmed;\r\n\t\t\t}\r\n\t\t\tstate.xml = xml;\r\n\t\t\t// convert xml to json using XMLToJSON func\r\n\t\t\tstate.stateXMLToJSON = XMLToJSON(xml)\r\n\t\t\t// load the module on the basis of the basis of updated xml\r\n\t\t\tloadModule(state.stateXMLToJSON);\r\n\t\t\t\r\n\t\t\tvar timer = setTimeout(function() {\r\n\t\t\t\t// if there isno user ans found then remove tha nas\r\n\t\t\t\tif (!uxml) {\r\n\t\t\t\t\tremoveUserAns();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tucChoose.removeActive(\"#\"+containerID);\r\n\t\t\t\t//ucChoose.readyThis(\"#\"+containerID);\r\n\t\t    \tucChoose.review(\"#\"+containerID, 0); \r\n\t\t\t\tucChoose.init(\"#\"+containerID);\r\n\t\t    \tucChoose.CheckResultchoose(\"#\"+containerID);\r\n\t\t\t\t\r\n\t\t\t\tlet sortable = new Sortable(AH.find(\"#\"+containerID,\"#sortable\"),{\r\n\t\t\t\t\tanimation: 150\r\n\t\t\t\t});\r\n\r\n\t\t    \t\r\n\t\t    \tif (state.allowSort != \"1\" || state.isSentence == \"1\" || state.isParagraph == \"1\") {\r\n\t\t\t\t\t\r\n\t\t\t\t\tnew Sortable(AH.find(\"#\"+containerID,\"#sortable\"),{\r\n\t\t\t\t\t\tonEnd: function(evt) {\r\n\t\t\t\t\t\t\tvar itemEl = evt.item;\r\n\t\t\t\t\t\t\tevt.to;\r\n\t\t\t\t\t\t\tevt.from;\r\n\t\t\t\t\t\t\tevt.oldIndex; \r\n\t\t\t\t\t\t\tevt.newIndex;\r\n\t\t\t\t\t\t\tevt.oldDraggableIndex;\r\n\t\t\t\t\t\t\tevt.newDraggableIndex;\r\n\t\t\t\t\t\t\tevt.clone\r\n\t\t\t\t\t\t\tevt.pullMode;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t    \t}\r\n\t\t    \tif (state.isSentence == \"1\" || state.isParagraph == \"1\") {\r\n\t\t    \t\tucChoose.dragSenParItem(\"#\"+containerID);\r\n        \t\t\t//ucChoose.removeActive(\"#\"+containerID);\r\n\t\t\t\t}\r\n\t\t\t\tclearTimeout(timer);\r\n\r\n\t\t\t},200);\r\n\t\t}\r\n\r\n\t\t\r\n\t\t\r\n    })\r\n\r\n\r\n    // function loads the module from the xml\r\n\tfunction loadModule(loadXml) {\r\n\t\t\r\n\t\t// parsing the xml for the preview\r\n\t\tparseXMLPreview(loadXml);\r\n\r\n\t\t// checking for user ans (uaXML)\r\n\t\tif (uxml) {\r\n\t\t\t//let uaXML = uxml;\r\n\t\t\tlet uaXML = XMLToJSON(uxml);\r\n\t\t\t// if in uxml smans and list is found\r\n\t\t\tif (uaXML && uaXML.SMANS && uaXML.SMANS && uaXML.SMANS.list) {\r\n\t\t\t\t// split the user answer with ,\r\n\t\t\t\tlet userans = uaXML.SMANS.list._useranswer.split(\",\");\r\n\t\t\t\tlet newCData = [];\r\n\t\t\t\t// iterating through the userans and store the information in localCData\r\n\t\t\t\tfor (let i in userans) {\r\n\t\t\t\t\tif (userans[i]) {\r\n\t\t\t\t\t\tlet singleuxml = userans[i].split(\"|\");\r\n\t\t\t\t\t\tfor (let j in localCData) {\r\n\t\t\t\t\t\t\tif (localCData[j]['optid'] == singleuxml[0]) {\r\n\t\t\t\t\t\t\t\tlocalCData[j]['user_answer'] = singleuxml[2];\r\n\t\t\t\t\t\t\t\tlocalCData[j]['user_seq'] = singleuxml[1];\r\n\t\t\t\t\t\t\t\tnewCData.push(localCData[j]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tlocalCData = newCData;\r\n\t\t\t}\r\n\t\t} \r\n    }\r\n    \r\n    // this function parse the xml for preview\r\n\tfunction parseXMLPreview(MYXML) {\r\n\t\ttry {\r\n\t\tlocalCData = [];\r\n\t\t//forceUpdate();\r\n\t\tlet cdata = MYXML.smxml.list.__cdata.split(\"\\n\");\r\n\t\tlet corrSeqCount = 1;\r\n\t\tlet countCorrectAns = 0;\r\n\t\tlet optid = 0;\r\n\t\t// iterating through the cdata\r\n\t\t\r\n\t\tcdata.forEach(function(data,i) {\r\n\t\t\tif (cdata[i].trim() != \"\") {\r\n\t\t\t\t// if found * at first pos then means correctans\r\n\t\t\t\tif (cdata[i].trim().charAt(0) == \"*\") {\r\n\t\t\t\t\tcountCorrectAns++;\r\n\t\t\t\t}\r\n\t\t\t\t// storing the value in localCData\r\n\t\t\t\tlocalCData.push({\r\n\t\t\t\t\tvalue:cdata[i].trim(),\r\n\t\t\t\t\tisCorrect:((cdata[i].trim().charAt(0) == \"*\") ? \"1\" : \"0\"),\r\n\t\t\t\t\tseq:((cdata[i].trim().charAt(0) == \"*\") ? corrSeqCount : \"0\"),\r\n\t\t\t\t\tuser_answer:\"0\",\r\n\t\t\t\t\toptid:optid\r\n\t\t\t\t});\r\n\t\t\t\t((cdata[i].trim().charAt(0) == \"*\") ? corrSeqCount++ : \"\");\r\n\t\t\t\toptid++;\t\r\n\t\t\t}\r\n\t\t});\r\n\t\t// shuffling the array\r\n\t\tshuffleArray(localCData);\r\n\t\t// updating all the xml attributes to the lower case\r\n\t\tMYXML = updateAttrToLower(MYXML);\r\n\t\t// setting state \r\n\t\t\r\n        state.headingCorrect = MYXML.smxml.list._headingcorrect;\r\n        state.allowSort = ((MYXML.smxml.list._allowsort)? MYXML.smxml.list._allowsort :\"0\");\r\n        state.isSentence = ((MYXML.smxml.list._issentence)? MYXML.smxml.list._issentence :\"0\");\r\n        state.isParagraph = ((MYXML.smxml.list._isparagraph)? MYXML.smxml.list._isparagraph : \"0\");\r\n        state.totalcorrectans = countCorrectAns;\r\n\t\t\r\n\r\n\t\t//this.forceUpdate();\r\n\t\tvar timer = setTimeout(function() {\r\n\r\n\t\t\t//adding user_seq to each li\r\n\t\t\tAH.find(\"#sortable\",\".sentence_li\",\"all\").forEach(function(data,i){\r\n\t\t\t\tdata.setAttribute(\"user_seq\",i+1);\r\n\t\t\t})\r\n\t\t\t//forceUpdate();\r\n\t\t\tclearTimeout(timer);\r\n\t\t}.bind(this),200)\r\n\t\t} catch(error) {\r\n\t\t\tthis.onError = error;\r\n\t\t\tconsole.warn({'error':error.message,'function name':'parseXMLPreview','File name':'ChooseNReorderPreview.js'});\r\n\t\t}\t\r\n    }\r\n    \r\n    // update the attribute to lower case\r\n\tfunction updateAttrToLower(data) {\r\n\t\tlet xml = data;\r\n\t\t// convert headingCorrect attribute to headingcorrect\r\n\t\tif (xml.smxml.list._headingCorrect) {\r\n\t\t\txml.smxml.list._headingcorrect = xml.smxml.list._headingCorrect;\r\n\t\t\tdelete xml.smxml.list._headingCorrect;\r\n\t\t}\r\n\t\t// convert allowSort attribute to allowsort\r\n\t\tif (xml.smxml.list._allowSort) {\r\n\t\t\txml.smxml.list._allowsort = xml.smxml.list._allowSort;\r\n\t\t\tdelete xml.smxml.list._allowSort;\r\n\t\t}\r\n\t\t// convert isParagraph attribute to isparagraph\r\n\t\tif (xml.smxml.list._isParagraph) {\r\n\t\t\txml.smxml.list._isparagraph = xml.smxml.list._isParagraph;\r\n\t\t\tdelete xml.smxml.list._isParagraph;\r\n\t\t}\r\n\t\t// convert isSentence attribute to issentence\r\n\t\tif (xml.smxml.list._isSentence) {\r\n\t\t\txml.smxml.list._issentence = xml.smxml.list._isSentence;\r\n\t\t\tdelete xml.smxml.list._isSentence;\r\n\t\t}\r\n\t\treturn xml;\r\n    }\r\n    \r\n    function cmu(e) {\r\n\t\tif (state.isSentence != \"1\" && state.isParagraph != \"1\") {\r\n\t\t\tucChoose.cmu(\"#\"+containerID,e);\r\n\t\t}\r\n    }\r\n    \r\n    function cmm(_this,e) {\r\n\t\tif (state.isSentence != \"1\" && state.isParagraph != \"1\") {\r\n\t\t\tucChoose.cmm(_this,e);\r\n\t\t}\r\n    }\r\n    \r\n    function cmd(_this,e) {\r\n\t\tif (state.isSentence != \"1\" && state.isParagraph != \"1\") {\r\n\t\t\tucChoose.cmd(_this,e);\r\n\t\t\tISSPECIALMODULEUSERXMLCHANGE = 1;\r\n\t\t}\r\n    }\r\n    \r\n    // returns the shuffled array\r\n\tfunction shuffleArray(array) {\r\n\t    for (var i = array.length - 1; i > 0; i--) {\r\n\t        var j = Math.floor(Math.random() * (i + 1));\r\n\t        var temp = array[i];\r\n\t        array[i] = array[j];\r\n\t        array[j] = temp;\r\n\t    }\r\n\t    return array;\r\n    }\r\n    \r\n    \r\n    // for removing the userans\r\n\tfunction removeUserAns() {\r\n\t\t\r\n\t\tAH.selectAll(\"#sortable li\").forEach((_this)=>{\r\n\t\t\t_this.setAttribute(\"user_answer\",\"0\");\r\n\t\t\t_this.setAttribute(\"style\",\"\")\r\n\t\t})\r\n\r\n\t\t\r\n\t\tAH.selectAll(\"#sortable li .prefix\").forEach((_this)=>{\r\n\t\t\t_this.innerHTML = \"\";\r\n\t\t})\r\n    }\r\n    \r\n\r\n    // Return the html and css\r\n    function setInnerHtml(item) { \r\n        \r\n        let htmlContent = '<div class=\"prefix pl-1 mr-2\"'+((state.isSentence == \"1\")?\"nw\":\"\")+'\"></div>'+((state.isParagraph == \"1\")?'<div class=\"pg_handle\">&equiv;</div>':\"\")+((item.value.charAt(0) == \"*\")? item.value.slice(1) :item.value)\r\n        \r\n        return htmlContent;\r\n\t}\r\n\r\n\tfunction handleReviewMode(mode , e){\r\n\t\t//alert(mode);\r\n\t\tif (mode == 'c') {\r\n\t\t\tucChoose.showAns('#'+containerID,e.currentTarget,'c')\r\n\t\t} else {\r\n\t\t\tucChoose.showAns('#'+containerID,e.currentTarget,'u')\r\n\t\t}\r\n\t}\r\n\t//alert(isReview);\r\n\t\r\n</script>\r\n<main>\r\n    <div>\r\n        <center>\r\n\t\t<ItemHelper \r\n\t\t\ton:setReview = {setReview}\r\n\t\t\ton:unsetReview = {unsetReview}\r\n\t\t\thandleReviewClick={handleReviewMode}\r\n\t\t\treviewMode={isReview}\r\n\t\t\tcustomReviewMode={customIsReview}\r\n\t\t/>\r\n            \r\n\r\n        </center>\r\n        <center>\r\n            <div id={containerID} type={(state.isSentence == \"1\")?\"sentence\":(state.isParagraph==\"1\")?\"paragraph\":'normal'} class=\"bg-white\">\r\n                <div class=\"choose_header font17 pl-4\">{state.headingCorrect}</div>\r\n                <ul\r\n                     \r\n                    id=\"sortable\"\r\n                    totalcorrectans={state.totalcorrectans}\r\n                    checkseq={state.allowSort}\r\n                    class=\"ui-sortable w-auto mt-0 p-2\"\r\n                    on:mouseup={cmu.bind(this)}\r\n                    on:mousemove = {cmm.bind(this)}\r\n                    on:mousedown = {cmd.bind(this)} \r\n                    style = {'border-left:10px solid #d9e7fd;border-right: 10px solid #d9e7fd'}\r\n                >\r\n                    {#each localCData as data,i} \r\n                    \r\n                            <li\r\n                                \r\n                                key={i}\r\n                                class={(state.isSentence == \"1\")?\"sentence_li\":(state.isParagraph==\"1\")?\"paragraph_li\":''}\r\n                                is_correct={data.isCorrect}\r\n                                optid={data.optid}\r\n                                correct_seq={data.seq}\r\n                                user_answer={data.user_answer}\r\n                                u={data.user_answer}\r\n                                user_seq={(data.user_seq)?data.user_seq:i}\r\n                                id={'id'+i}\r\n                                tabIndex=\"0\"\r\n                            >{@html setInnerHtml(data)}</li>\r\n                    \r\n                    {/each}\r\n                </ul>\r\n                <div class=\"choose_bottom pl-4\" id=\"instruction\">\r\n\t\t\t\t\t{#if state.allowSort == 1 || state.isSentence == 1 || state.isParagraph == 1}\r\n\t\t\t\t\t\tClick to select. Drag and Drop to set sequence.\r\n\t\t\t\t\t{:else}\r\n\t\t\t\t\t\tSequencing of the selected item is not required. Click to select items.\r\n\t\t\t\t\t{/if}\r\n                </div>\r\n            </div>\r\n        </center>\r\n    </div>\r\n</main>"],"names":["AH","JUI","ucChoose","ua","us","cs","ca","ctx","isSentence","isParagraph","isCorrect","optid","seq","user_answer","user_seq","insert","headingCorrect","length","allowSort","totalcorrectans","append","bind","this","cmed","showAns","xml","stopPreviewUpdate","editorState","isReview","uxml","customIsReview","containerID","ajax_eId","localCData","state","writable","chooseClass","stateXMLToJSON","subscribe","items","displayAns","ans","CheckResultchoose","onUserAnsChange","uXml","u","b","setReview","disableMouse","modeOn","review","removeClass","unsetReview","event","selectAll","forEach","_this","style","pointerEvents","onMount","document","querySelector","clientHeight","listen","setTimeout","addClass","afterUpdate","XMLToJSON","loadXml","MYXML","cdata","smxml","list","__cdata","split","corrSeqCount","countCorrectAns","data","i","trim","charAt","push","value","array","j","Math","floor","random","temp","shuffleArray","_headingCorrect","_headingcorrect","_allowSort","_allowsort","_isParagraph","_isparagraph","_isSentence","_issentence","updateAttrToLower","timer","find","setAttribute","clearTimeout","error","onError","console","warn","message","function name","File name","parseXMLPreview","uaXML","SMANS","userans","_useranswer","newCData","singleuxml","loadModule","innerHTML","removeActive","init","Sortable","animation","[object Object]","evt","item","to","from","oldIndex","newIndex","oldDraggableIndex","newDraggableIndex","clone","pullMode","dragSenParItem","e","cmu","cmm","cmd","ISSPECIALMODULEUSERXMLCHANGE","slice","mode","currentTarget","userAnsXML","errorCatchFlag","disabled","update_XMLValue","new_val","replace","prevElm","checked","xmlDom","getAttribute","join","formatXml","XMLSerializer","serializeToString","chid","elem","ansType","sortList","sorting_attr","eel","Array","sort","a","seq1","parseInt","Number","MAX_VALUE","seq2","_emt","remove","togseq","correctans","cans","select","cseq","action","actionData","classList","add","setActiveClass","result","yourScore","temp_sort","isArray","ansxml","calculatePoint","touchHandler","first","changedTouches","type","simulatedEvent","createEvent","initMouseEvent","window","screenX","screenY","clientX","clientY","target","dispatchEvent","addEventListener","preventDefault","shouldselect","readyThis","undefined","isiPad","removeAttribute","ow","srcElement","t","setUserAns","onEnd","bindKeyup","count","tabMove","element","id","ks_element","focus_index","index","focus","activateKs","selected_opt","contains","insertBefore","insertAfter","checkFocus","is_focus","elements","focus_ele","nodeName","focus_id","hotkeys","unbind","setScope","handler","key","focus_element","previousElementSibling","log","ks_last_element","nextSibling","cloneNode","ks_last","blur","obj","onwhich","parentElement","from_sortable","tagName","parent","owLi","setAttr","owli","removeItem","e1","querySelectorAll","display","addItem","setDragSequence","el","ty","CheckResultSentenceChoose","res","onStart","labBinded","sortable","modeType","unBindLab","_el","callBindKey","bindLab","click"],"mappings":"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"}