import{S as e,i as t,s as a,F as l,e as n,j as c,q as s,h as r,u as i,f as o,g as d,x as m,o as u,D as h,b as f,l as g,c as p,m as b,t as x,a as y,d as A,E as k,a3 as w,p as _,X as v,A as E,w as C,R as F}from"./main-7eab066b.js";import{I as N}from"./ItemHelper-874227c7.js";import{p as S}from"./parseCSV-2b69d250.js";const{document:$}=l;function B(e,t,a){const l=e.slice();return l[28]=t[a],l[30]=a,l}function R(e,t,a){const l=e.slice();return l[25]=t[a],l[27]=a,l}function D(e,t,a){const l=e.slice();return l[25]=t[a],l[27]=a,l}function j(e){let t,a=e[2].cdata.option,l=[];for(let t=0;t<a.length;t+=1)l[t]=J(D(e,a,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=s()},m(e,a){for(let t=0;t<l.length;t+=1)l[t].m(e,a);r(e,t,a)},p(e,n){if(20&n[0]){let c;for(a=e[2].cdata.option,c=0;c<a.length;c+=1){const s=D(e,a,c);l[c]?l[c].p(s,n):(l[c]=J(s),l[c].c(),l[c].m(t.parentNode,t))}for(;c<l.length;c+=1)l[c].d(1);l.length=a.length}},d(e){h(l,e),e&&u(t)}}}function J(e){let t,a,l,s,h,f=e[25].text.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"";return{c(){t=n("th"),a=i(f),o(t,"key",l=e[27]),o(t,"class",s="preview_header adjust_width "+("theme3"!==e[2].theme?e[25].id+"text-center text-white":e[25].id+"text-center")),o(t,"tabindex",h=0),d(t,"background-color",e[4][e[2].theme],1)},m(e,l){r(e,t,l),c(t,a)},p(e,l){4&l[0]&&f!==(f=e[25].text.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"")&&m(a,f),4&l[0]&&s!==(s="preview_header adjust_width "+("theme3"!==e[2].theme?e[25].id+"text-center text-white":e[25].id+"text-center"))&&o(t,"class",s),4&l[0]&&d(t,"background-color",e[4][e[2].theme],1)},d(e){e&&u(t)}}}function M(e){let t,a=e[1].cdata.term,l=[];for(let t=0;t<a.length;t+=1)l[t]=q(R(e,a,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=s()},m(e,a){for(let t=0;t<l.length;t+=1)l[t].m(e,a);r(e,t,a)},p(e,n){if(302&n[0]){let c;for(a=e[1].cdata.term,c=0;c<a.length;c+=1){const s=R(e,a,c);l[c]?l[c].p(s,n):(l[c]=q(s),l[c].c(),l[c].m(t.parentNode,t))}for(;c<l.length;c+=1)l[c].d(1);l.length=a.length}},d(e){h(l,e),e&&u(t)}}}function O(e){let t,a,l,s,i,m,h,p,b,x,y,A,k,w,_,v,E,C,F,N,S,$,B,R,D;return{c(){t=n("td"),a=n("i"),s=f(),i=n("i"),h=f(),p=n("input"),v=f(),E=n("label"),o(a,"class","fa fa-check"),o(a,"aria-hidden","true"),o(a,"style",l=L(e[3])),o(i,"class","fa fa-close"),o(i,"aria-hidden","true"),o(i,"style",m=L(e[3])),o(p,"type","radio"),o(p,"class","test_radio CMRad"),o(p,"style",b="vertical-align:middle;"),p.value=x=e[28].id,o(p,"name",y="tm"+(e[27]+1)),o(p,"id",A="t"+e[27]+e[30]),o(p,"data-termid",k=e[25].id),o(p,"data-correct",w=e[25].correct),o(p,"data-userans",""),o(p,"data-role","none"),o(p,"tabindex",_=-1),o(E,"tabindex",C=0),o(E,"class",F="label_choice customRadCM "+(e[30]%2==0?"tureitemColorCM":"falseitemColorCM")),o(E,"for",N="t"+e[27]+e[30]),o(t,"key",S=e[30]),o(t,"id",$="tb"+e[27]+e[30]),o(t,"class",B="text-center test_area "+(e[28].id==e[25].correct?"dbg-success":"dbg-danger")),d(t,"background-color",e[27]%2==0?e[5][e[2].theme]:"#FFF")},m(l,n){r(l,t,n),c(t,a),c(t,s),c(t,i),c(t,h),c(t,p),c(t,v),c(t,E),R||(D=g(p,"click",e[8]),R=!0)},p(e,a){2&a[0]&&x!==(x=e[28].id)&&(p.value=x),2&a[0]&&k!==(k=e[25].id)&&o(p,"data-termid",k),2&a[0]&&w!==(w=e[25].correct)&&o(p,"data-correct",w),2&a[0]&&B!==(B="text-center test_area "+(e[28].id==e[25].correct?"dbg-success":"dbg-danger"))&&o(t,"class",B),4&a[0]&&d(t,"background-color",e[27]%2==0?e[5][e[2].theme]:"#FFF")},d(e){e&&u(t),R=!1,D()}}}function q(e){let t,a,l,s,g,p,b,x,y=e[25].text.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"",A=e[1].cdata.option,k=[];for(let t=0;t<A.length;t+=1)k[t]=O(B(e,A,t));return{c(){t=n("tr"),a=n("td"),l=i(y),p=f();for(let e=0;e<k.length;e+=1)k[e].c();b=f(),o(a,"class",s=e[25].id),o(a,"tabindex",g=0),d(a,"background-color",e[27]%2==0?e[5][e[2].theme]:"#FFF",1),d(a,"font-size","14pt"),d(a,"vertical-align","middle"),d(a,"font-family",e[2].font),o(t,"key",x=e[27])},m(e,n){r(e,t,n),c(t,a),c(a,l),c(t,p);for(let e=0;e<k.length;e+=1)k[e].m(t,null);c(t,b)},p(e,n){if(2&n[0]&&y!==(y=e[25].text.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"")&&m(l,y),2&n[0]&&s!==(s=e[25].id)&&o(a,"class",s),4&n[0]&&d(a,"background-color",e[27]%2==0?e[5][e[2].theme]:"#FFF",1),4&n[0]&&d(a,"font-family",e[2].font),302&n[0]){let a;for(A=e[1].cdata.option,a=0;a<A.length;a+=1){const l=B(e,A,a);k[a]?k[a].p(l,n):(k[a]=O(l),k[a].c(),k[a].m(t,b))}for(;a<k.length;a+=1)k[a].d(1);k.length=A.length}},d(e){e&&u(t),h(k,e)}}}function I(e){let t,a,l,s,h,g,k,w,_,v,E,C,F,S,$,B,R,D,J,O=e[2].stem.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"";l=new N({props:{handleReviewClick:e[9],reviewMode:e[0]}}),l.$on("setReview",e[6]),l.$on("unsetReview",e[7]);let q=e[2].cdata&&j(e),I=e[1].cdata&&M(e);return{c(){t=n("main"),a=n("div"),p(l.$$.fragment),s=f(),h=n("center"),g=n("table"),k=n("thead"),w=n("tr"),_=n("th"),v=i(O),F=f(),q&&q.c(),S=f(),$=n("tbody"),I&&I.c(),o(_,"class",E="preview_header "+("theme3"!==e[2].theme?"text-center text-white":"text-center")),o(_,"tabindex",C=0),d(_,"background-color",e[4][e[2].theme],1),o(w,"class","table-head"),o(g,"class",B="table table-bordered testmode_table "),o(g,"id","test_table"),o(g,"style",R="position:relative; margin-top:20px;width:"+e[2].maxWidth+"px;font-family: Georgia;"),o(a,"id","choicemain"),o(a,"style",D="margin-bottom:20px")},m(e,n){r(e,t,n),c(t,a),b(l,a,null),c(a,s),c(a,h),c(h,g),c(g,k),c(k,w),c(w,_),c(_,v),c(w,F),q&&q.m(w,null),c(g,S),c(g,$),I&&I.m($,null),J=!0},p(e,t){const a={};1&t[0]&&(a.reviewMode=e[0]),l.$set(a),(!J||4&t[0])&&O!==(O=e[2].stem.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"")&&m(v,O),(!J||4&t[0]&&E!==(E="preview_header "+("theme3"!==e[2].theme?"text-center text-white":"text-center")))&&o(_,"class",E),(!J||4&t[0])&&d(_,"background-color",e[4][e[2].theme],1),e[2].cdata?q?q.p(e,t):(q=j(e),q.c(),q.m(w,null)):q&&(q.d(1),q=null),e[1].cdata?I?I.p(e,t):(I=M(e),I.c(),I.m($,null)):I&&(I.d(1),I=null),(!J||4&t[0]&&R!==(R="position:relative; margin-top:20px;width:"+e[2].maxWidth+"px;font-family: Georgia;"))&&o(g,"style",R)},i(e){J||(x(l.$$.fragment,e),J=!0)},o(e){y(l.$$.fragment,e),J=!1},d(e){e&&u(t),A(l),q&&q.d(),I&&I.d()}}}function W(){let e=document.getElementsByClassName("test_radio");for(let t=0;t<e.length;t++)e[t].getAttribute("id")==e[t].getAttribute("data-userans")?e[t].checked=!0:e[t].checked=!1}function z(){!function(){let e=document.querySelectorAll(" .test_radio");for(let t=0;t<e.length;t++)e[t].getAttribute("value")==e[t].getAttribute("data-correct")?e[t].checked=!0:e[t].checked=!1}(),G()}function G(){let e=document.getElementsByClassName("fa-check"),t=document.getElementsByClassName("fa-close");for(let a=0;a<e.length;a++)e[a].style.display="none",t[a].style.display="none"}function L(e){return 1==e?{paddingLeft:"14px",display:"inline-flex",position:"absolute"}:{paddingLeft:"15px",display:"none",position:"absolute"}}function P(e,t,a){let l,{showAns:n}=t,{editorState:c}=t,{xml:s}=t,{uxml:r}=t,{isReview:i}=t,o={cdata:""},d={};C({cdata:"",stem:"",xml:"",theme:"",font:"",maxWidth:"",totalcorrectans:""}).subscribe((e=>{a(2,d=e)}));function m(){W(),E.select(".dbg-success input","checked").forEach((e=>{E.siblings(e,".fa-check").forEach((e=>{e.style.display="inline-flex"}))})),E.select(".dbg-danger input","checked").forEach((e=>{E.siblings(e,".fa-close").forEach((e=>{e.style.display="inline-flex"}))})),E.selectAll(".dbg-success input, .dbg-danger input","removeAttr","as"),E.select(".dbg-success input","checked").forEach((e=>{e.setAttribute("as",1)})),E.select(".dbg-success input","checked").forEach((e=>{e.setAttribute("as",0)})),E.select(".dbg-success input","checked").forEach((e=>{E.siblings(e,".label_choice").forEach((e=>{e.setAttribute("title","is marked as correct")}))})),E.select(".dbg-danger input","checked").forEach((e=>{E.siblings(e,".label_choice").forEach((e=>{e.setAttribute("title","is marked as incorrect")}))}))}function u(){a(0,i=!0);let e=E.selectAll(" .test_radio");for(let t=0;t<e.length;t++)e[t].disabled=!0;m()}function h(){a(0,i=!1);let e=document.getElementsByClassName("test_radio");for(let t=0;t<e.length;t++)e[t].disabled=!1;G()}return k((()=>{var e;s!=d.xml&&(a(2,d.xml=s,d),e=r,function(e,t){a(2,d.theme=e.smxml._theme,d),a(2,d.font=e.smxml._font,d),a(2,d.maxWidth=e.smxml._maxwidth?e.smxml._maxwidth:800,d);let l=S.parseCSVFormat(e.smxml.__cdata),n=[];n=JSON.parse(JSON.stringify(l)),a(2,d.cdata=n,d),a(2,d.stem=n.stem,d),a(1,o.cdata=n,o);let c=o.cdata.term.length;if(a(2,d.totalcorrectans=c,d),h(),t)try{t=JSON.parse(t);let e=[];e=JSON.parse(JSON.stringify(t)),setTimeout((function(){e.ans.map((function(e,t){E.selectAll(".test_area #"+e.userAns,"attr",{"data-userans":e.userAns})})),W()}),100)}catch(e){}else{let e=document.getElementsByClassName("test_radio");for(let t=0;t<e.length;t++)e[t].checked=!1,e[t].setAttribute("data-userans","")}}(v(s),e))})),w((()=>{i||G()})),_((()=>{AI.listen("body","keydown",".label_choice",(function(e,t){13===t.which&&e.click()}))})),e.$$set=e=>{"showAns"in e&&a(10,n=e.showAns),"editorState"in e&&a(11,c=e.editorState),"xml"in e&&a(12,s=e.xml),"uxml"in e&&a(13,r=e.uxml),"isReview"in e&&a(0,i=e.isReview)},e.$$.update=()=>{1&e.$$.dirty[0]&&(i?u():(W(),h()))},[i,o,d,undefined,{theme1:"#5B9BD5",theme2:"#3B67BC",theme3:"#F6C3A2",theme4:"#70AD47",theme5:"#745998"},{theme1:"#DEEAF6",theme2:"#D4DEF1",theme3:"#FAE0CF",theme4:"#E2EFD9",theme5:"#E1DAE9"},function(){u()},function(){W(),h()},function(e){let t=e.target.id,a=e.target.name,s=document.querySelectorAll(" .test_area input[name="+a+"]");for(let e=0;e<s.length;e++)s[e].setAttribute("data-userans","");E.selectAll(" .test_area #"+t,"attr",{"data-userans":t});let i={type:"34",ans:[]},o=document.getElementsByClassName("test_radio");for(let e=0;e<o.length;e++)1==o[e].checked&&i.ans.push({id:o[e].getAttribute("data-termid"),userAns:o[e].getAttribute("id")});l=JSON.stringify(i),function(){let e=function(){let e=0,t=0,a=document.getElementsByClassName("test_radio");for(let t=0;t<a.length;t++)if(a[t].getAttribute("value")==a[t].getAttribute("data-correct")){if(1!=a[t].checked)return e=0,a[t].setAttribute("as",0),!1;a[t].setAttribute("as",1),e=1}for(let e=0;e<a.length;e++)a[e].getAttribute("value")==a[e].getAttribute("data-correct")&&1==a[e].checked&&t++,"undefined"!=typeof calculatePoint&&calculatePoint(d.totalcorrectans,t);return e}();e=1==e,r?E.select("#answer").checked=e:c&&n(e?"Correct":"Incorrect");F({uXml:l,ans:e})}()},function(e,t){"c"==e?z():m()},n,c,s,r]}export default class extends e{constructor(e){var l;super(),$.getElementById("svelte-qkuer1-style")||((l=n("style")).id="svelte-qkuer1-style",l.textContent=".fa-check{color:#46A546;position:relative;left:50px}.fa-close{color:#A80000;left:50px}.fa-close,.fa-check{margin-left:-26px;font-size:18px;position:relative;bottom:10px}.fa-close,.fa-check,.middle_align{vertical-align:middle!important}.middle_align{width:164px;min-width:164px}.topic_input{min-width:257px}.preview_header{font-size:16pt;font-weight:bold;vertical-align:middle}.adjust_width{width:10%;text-align:center}",c($.head,l)),t(this,e,P,I,a,{showAns:10,editorState:11,xml:12,uxml:13,isReview:0},[-1,-1])}}
//# sourceMappingURL=ChoiceMatrixPreview-faf7f14b.js.map
