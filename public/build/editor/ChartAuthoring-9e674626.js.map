{"version":3,"file":"ChartAuthoring-9e674626.js","sources":["../../../clsSMChart/lib/chartAuthoringScript.js","../../../clsSMChart/lib/ChartModalBox.svelte","../../../clsSMChart/ChartAuthoring.svelte"],"sourcesContent":["/**\r\n *  File Name   : chartAuthoringScript.js\r\n *  Author      : Ayush Srivastava\r\n *  Function    : Chart\r\n *  Version     : 1.0\r\n *  Packege     : clsSMChart (Authoring)\r\n *  Last update : 15 Mar 2021\r\n *  Dependency  : JUI\r\n */\r\n\r\n// importing JUI\r\nimport JUI from '../../src/libs/javscript_helper/JUI';\r\nimport l from '../../src/libs/editorLib/language.js';\r\nconst JS = new JUI();\r\nlet CHART_AUTH = {};\r\nCHART_AUTH.isValid = true;\r\nCHART_AUTH.visible_class = '';\r\n\r\n// function for data storage of chart\r\nCHART_AUTH.storage = {\r\n    store: function(obj, key, val) {\r\n        if (!obj) {\r\n            return this.state;\r\n        } else if (!key) {\r\n            if (!(obj in this.state)) {\r\n                return {};\r\n            }\r\n            return this.state[obj];\r\n        } else if (arguments.length < 3) {\r\n            if (!(obj in this.state)) {\r\n                return undefined;\r\n            }\r\n            return this.state[obj][key];\r\n        } else {\r\n            if (!(obj in this.state)) {\r\n                this.state[obj] = {};\r\n            }\r\n            this.state[obj][key] = val;\r\n        }\r\n    },\r\n    remove: function(obj) {\r\n        if (this.state[obj]) {\r\n            delete this.state[obj]\r\n        }\r\n    },\r\n    state: {}\r\n}\r\n\r\n// function used for initiating the chart and drawing the chart\r\nCHART_AUTH.initChart = function () {\r\n    if (JS.select('#special_module_xml').value && JS.select('#special_module_xml').value.trim() != '') {\r\n        CHART_AUTH.bind_data(JS.parseHtml(JS.select('#special_module_xml').value));\r\n    }\r\n    let chart_main = JS.selectAll('#chartmain [type]');\r\n    for (let index = 0; index < chart_main.length; index++) {\r\n        // object that contains the attributes as key and their values as value of chart tag inside smxml tag of xml\r\n        let attrs = CHART_AUTH.setInAssoc(CHART_AUTH.storage.store('#'+chart_main[index].id,'attributes'));\r\n        // // draw the chart according to the value of variable 'attrs'\r\n        CHART_AUTH.drawChart(attrs);\r\n    }\r\n}\r\n\r\n// function for checking inNumeric in js\r\nCHART_AUTH.isNumeric = function (num) {\r\n    return !isNaN(parseFloat(num)) && isFinite(num);\r\n}\r\n\r\n/* for checking that everything is perfect and under validation criteria then removes the showError class from each elements where it was exist before */\r\nCHART_AUTH.checkAndRemove = function () {\r\n    // used for check that validation is ok or not\r\n    let check_count = 0;\r\n    // contains all element where validation needed\r\n    let elem_data = JS.selectAll('#authoring-modal .validate');\r\n    for (let index_no = 0; index_no < elem_data.length; index_no += 1) {\r\n        if ((elem_data[index_no].value == '') || (elem_data[index_no].classList.contains('num') && elem_data[index_no].value < 1) || (!(CHART_AUTH.isNumeric(elem_data[index_no].value)) && elem_data[index_no].classList.contains('num'))) {\r\n            check_count += 1;\r\n        }\r\n    }\r\n\r\n    let check_count_condition = (parseInt(JS.select('#xinterval').value) >= parseInt(JS.select('#xmax').value)) || (parseInt(JS.select('#yinterval').value) >= parseInt(JS.select('#ymax').value)) || (parseInt(JS.select('#xmin').value) >= parseInt(JS.select('#xmax').value)) || (parseInt(JS.select('#ymin').value) >= parseInt(JS.select('#ymax').value)) ;\r\n\r\n    if (check_count_condition) {\r\n        check_count += 1;\r\n    }\r\n\r\n    if (check_count == 0) {\r\n        // removes 'showError' class from all elements where it was exist before if values are under validation\r\n        JS.selectAll('.showError', 'removeClass','showError');\r\n    }\r\n}\r\n\r\n// returns an object containing keys as attributes name and values as their values of the element passed in argument at the time of function calling\r\nCHART_AUTH.setInAssoc = function (attrs) {\r\n    let ret = {};\r\n    if (attrs) {\r\n        for (let index = 0; index < attrs.length; index++) {\r\n            ret[attrs[index].name] = attrs[index].value;\r\n        }\r\n    }\r\n    return ret;\r\n}\r\n\r\n// used for bind the attributes and their values of chart tag defined in smxml tag of xml in chart board containers attributes and values\r\nCHART_AUTH.bind_data = function (xml) {\r\n    let elem = '[type=\"' + xml.getAttribute('type') + '\"]', attrs = [];\r\n    if (xml) {\r\n        if (xml.nodeName == \"SMXML\") {\r\n            elem = \"#chartmain\";\r\n        }\r\n        \r\n        // assign the data of available attributes and their value in attrs array in form of object\r\n        for (let index = 0; index < xml.attributes.length; index++) {\r\n            attrs[index] = {\r\n                \"name\": xml.attributes[index].name,\r\n                \"value\": xml.attributes[index].value\r\n            }\r\n        }\r\n\r\n        if (typeof elem != \"undefined\") {\r\n            // assign the value of attrs array in the xml tag's attributes according to their type attribute\r\n            CHART_AUTH.storage.store('#'+ JS.select(elem).id, \"attributes\", attrs)\r\n        }\r\n\r\n        // checks if perticular xml tag have any other tag then also assign it's attributes and values and so on\r\n        if (xml.children.length > 0) {\r\n            for (let index = 0; index < xml.children.length; index++) {\r\n                CHART_AUTH.bind_data(xml.children[index]);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n// used for removing error messages\r\nCHART_AUTH.resetModal = function () {\r\n    CHART_AUTH.isValid = true;\r\n    JS.selectAll('input', 'removeAttr', 'style');\r\n    JS.selectAll('.error', 'remove');\r\n    JS.selectAll('.showError', 'removeClass','showError');\r\n}\r\n\r\n// shows the edit modalbox when it is clicked\r\nCHART_AUTH.elemModal = function (type, key) {\r\n    CHART_AUTH.resetModal();\r\n    // hides the body content of the edit modalbox\r\n    JS.selectAll('#authoring-modal .modal-body>.h', 'addClass', 'h');\r\n    JS.listen('body', 'click', '.addElement', function () {\r\n        if (CHART_AUTH.isValid == true && JS.selectAll('#authoring-modal .showError').length == 0) {\r\n            // hides the edit modalbox if edited all field are under validation criteria\r\n            JS.getBS('#authoring-modal', 'Modal').hide();\r\n            if (JS.select('#authoring-modal #chart-type').value == 'dotplot') {\r\n                // it will not work in any condition as there are only 3 types of chart used here column, line, histogram              \r\n                JS.selectAll('#chartmain .setData', 'addClass', 'h');\r\n            } else {\r\n                // shows the '+' (add) and 'delete' button     \r\n                JS.selectAll('#chartmain .setData', 'removeClass', 'h');\r\n            }\r\n            // updates the values of chart board container and also of xml according to the values changed in edit modalbox\r\n            CHART_AUTH.updateElem(type, key);\r\n        } else {\r\n            if (JS.select('#authoring-modal .showError').nodeName) {\r\n                JS.select('#authoring-modal .showError').focus();\r\n                CHART_AUTH.validate(JS.select('#authoring-modal .showError'));\r\n            }\r\n        }\r\n    });\r\n\r\n    if (type == 'plotchart') {\r\n        // changed the title of the edit modalbox\r\n        JS.select('#authoring-modal .title').innerText = 'Plot Chart';\r\n        // shows the edit modalbox body            \r\n        JS.selectAll('#authoring-modal .plotchart', 'removeClass', 'h');\r\n    }\r\n    CHART_AUTH.visible_class = type;\r\n    // shows the edit modalbox\r\n    JS.getBS('#authoring-modal', 'Modal').show();\r\n    if (key) {\r\n        // used for set the data of elements exist in edit modalbox\r\n        CHART_AUTH.setData(CHART_AUTH.storage.store('#' + key, 'attributes'));\r\n    }\r\n    CHART_AUTH.changeType(JS.select('#authoring-modal #chart-type'));\r\n}\r\n\r\n// updates the values of chart board container and also of xml according to the values changed in edit modalbox\r\nCHART_AUTH.updateElem = function (type, key) {\r\n    let attributes_list = JS.find(JS.select('#authoring-modal .' + CHART_AUTH.visible_class), 'select, textarea, input', 'all');\r\n    let attributes = CHART_AUTH.serialize(attributes_list);\r\n    let charttype, title, xlab, ylab, xval = '', yval, xmin, xmax, xint, ymin, ymax, yint, defans, color, snapTo, where;\r\n    let attr = [], wd, hd;\r\n    // used for define the x-axis values\r\n    let interval_array = [];\r\n    // find_index used for contain the xmax index in attributes array and defaultans_index used for contain the index of the defaultans field\r\n    let find_index, defaultans_index;\r\n    // loops through all existing array of object containing the name and value of selectbox, textarea and inputbox and assign their values in defined variables\r\n    for (let index = 0; index < attributes.length; index++) {\r\n        let value = attributes[index];\r\n        // used for contain the value of width\r\n        if (value.name == \"width\") wd = value.value;\r\n        // used for contain the value of height\r\n        if (value.name == \"height\") hd = value.value;\r\n        // used for contain the value of chart type\r\n        if (value.name == \"type\") charttype = value.value;\r\n        // used for contain the value of color\r\n        if (value.name == \"color\") color = value.value;\r\n        // used for contain the value of snapTo\r\n        if (value.name == \"snapto\") snapTo = value.value;\r\n        // used for contain the value of title\r\n        if (value.name == \"title\") title = value.value;\r\n        // used for contain the value of x-axis label\r\n        if (value.name == \"xlabel\") xlab = value.value;\r\n        // used for contain the value of y-axis label\r\n        if (value.name == \"ylabel\") ylab = value.value;\r\n        // used for contain the value of xval\r\n        if (value.name == \"xval\") xval = value.value;\r\n        // used for contain the value of yval\r\n        if (value.name == \"yval\") yval = value.value;\r\n        // used for contain the minimum value of x-axis\r\n        if (value.name == \"xmin\") xmin = value.value;\r\n        // used for contain the value of xmax field and also contain the index of xmax field in 'find_index' variable\r\n        if (value.name == \"xmax\") {\r\n            xmax = value.value;\r\n            find_index = index;\r\n        }\r\n        // used for contain the value of x-axis interval\r\n        if (value.name == \"xinterval\") xint = value.value;\r\n        // used for contain the value of yman field\r\n        if (value.name == \"ymin\") ymin = value.value;\r\n        // used for contain the value of ymax field\r\n        if (value.name == \"ymax\") ymax = value.value;\r\n        // used for contain the value of y-axis interval\r\n        if (value.name == \"yinterval\") yint = value.value;\r\n        // used for contain the value of defaultans field and also contain the index of defaultans field in 'defaultans_index' variable\r\n        if (value.name == \"defaultans\") {\r\n            defans = value.value;\r\n            defaultans_index = index;\r\n        }\r\n        // assign the name of the fields as keys and their values as values in attr array \r\n        attr[value.name] = value.name;\r\n    }\r\n    // parses ymin field value into interger value\r\n    ymin = parseInt(ymin);\r\n    // parses yint variable value into interger value\r\n    yint = parseInt(yint);\r\n    // For update the x-axis interval according to update the min, max, interval value using chartModalbox\r\n    let int_interval = parseInt(xint);\r\n    for (let index_no = parseInt(xmin); index_no <= parseInt(xmax); index_no += int_interval) {\r\n        // pushes the value of variable 'index_no' into array 'interval_array' for define the x-axis values\r\n        interval_array.push(index_no);\r\n    }\r\n    if (interval_array.length <= defans.split(',').length) {\r\n        // changed the value of xmax after adding the value of variable 'int_interval' into its previous value\r\n        xmax = parseInt(xmax) + int_interval;\r\n        if (xmax % int_interval != 0) {\r\n            // change the value of xmax when reminder is greater than 0 after division of xmax by int_interval\r\n            xmax = (xmax - (xmax % int_interval)) + int_interval;\r\n        }\r\n        // change the xmax value defined in attributes array\r\n        attributes[find_index].value = xmax.toString();\r\n    }\r\n    // change the defaultans value defined in attributes array to escape non visibilty when interval value is 100 or 1000 times greater than default adding value when added after click on add button\r\n    attributes[defaultans_index].value = (Math.ceil(ymin + yint / 5) + ',' + Math.ceil(ymin + yint / 4) + ',' + Math.ceil(ymin + yint / 3)).toString();\r\n    if (xval == '') {\r\n        for (let i = parseInt(xmin); i <= parseInt(xmax); i = i + parseInt(xint)) {\r\n            xval = (xval == '') ? i : xval + ',' + i;\r\n        }\r\n        // wraps the value of the variable 'xval'\r\n        xval = '[' + xval + ']';\r\n    }\r\n\r\n    if (key && type == \"plotchart\") {\r\n        // selects chart board container\r\n        where = '[id=\"' + key + '\"]';\r\n        // assign the attributes and their values of chart board container\r\n        JS.setAttr(where, {\r\n            \"type\": charttype,\r\n            \"class\": charttype,\r\n            \"color\": color,\r\n            \"title\": title,\r\n            \"xlabel\": xlab,\r\n            \"ylabel\": ylab,\r\n            \"xval\": xval,\r\n            \"yval\": yval,\r\n            \"xmin\": xmin,\r\n            \"xmax\": xmax,\r\n            \"xinterval\": xint,\r\n            \"ymin\": ymin,\r\n            \"ymax\": ymax,\r\n            \"yinterval\": yint,\r\n            \"snapTo\": snapTo,\r\n            \"defaultans\": defans\r\n        })\r\n\r\n        CHART_AUTH.storage.store('#' + key, 'attributes', attributes);\r\n        CHART_AUTH.storage.store('#chartmain', 'attributes', attributes);\r\n\r\n        JS.setCss('#chartmain', {\r\n            width: wd + 'px',\r\n            height: parseInt(hd) + 41 + 'px'\r\n        })\r\n\r\n        JS.selectAll('#chartmain [id^=\"ID\"]', 'css', {\r\n            width: wd + 'px',\r\n            height: hd + 'px'\r\n        });\r\n\r\n        // object containing keys as attributes name and values as their values of chart board container\r\n        attr = CHART_AUTH.setInAssoc(CHART_AUTH.storage.store('#chartmain', 'attributes'));\r\n        // updates id and xval keys value of object attr\r\n        attr.id = key;\r\n        attr.xval = xval;\r\n        // draw the chart according to the value of attributes defined in object attr\r\n        CHART_AUTH.drawChart(attr);\r\n    }\r\n    // updates the xml after removing the unnecessary attributes and also that one which have blank value\r\n    CHART_AUTH.updateXML(where, attributes);\r\n}\r\n\r\n// function used for serializing\r\nCHART_AUTH.serialize = function(element) {\r\n    let serialize = [];\r\n    for (let index = 0; index < element.length; index++) {\r\n        if (element[index].getAttribute('type') == 'radio' || element[index].getAttribute('type') == 'checkbox') {\r\n            if (element[index].checked) {\r\n                serialize[serialize.length] = {\r\n                    \"name\": element[index].name,\r\n                    \"value\": 1\r\n                }\r\n            }\r\n        } else if (element[index].name && !element[index].disabled) {\r\n            serialize[serialize.length] = {\r\n                \"name\": element[index].name,\r\n                \"value\": element[index].value\r\n            };\r\n        }\r\n    }\r\n    return serialize;\r\n}\r\n\r\n// used for set the data of elements exist in edit modalbox\r\nCHART_AUTH.setData = function(attributes) {\r\n    for (let index = 0; index < attributes.length; index += 1) {\r\n        // select the input field according to attributes at perticular index\r\n        let element = JS.select('#authoring-modal .' + CHART_AUTH.visible_class + ' [name=\"' + attributes[index]['name'] + '\"]')\r\n        // sets the value of input fields \r\n        element.value = attributes[index]['value'];\r\n    }\r\n}\r\n\r\n// updates the xml after removing the unnecessary attributes and also that one which have blank value\r\nCHART_AUTH.updateXML = function(where, attributes) {\r\n    if (JS.select('#special_module_xml').value && JS.select('#special_module_xml').value.trim() != '') {\r\n        let xmlDom = JS.parseHtml(JS.select('#special_module_xml').value);\r\n        let insert;\r\n        if (where == \"#chartmain\") {\r\n            // selects the smxml element\r\n            insert = xmlDom;\r\n        } else {\r\n            // selects the chart element\r\n            insert = JS.find(xmlDom, where);\r\n        }\r\n        if (insert.nodeName) {\r\n            for (let index_no = 0; index_no < attributes.length; index_no += 1) {\r\n                if (attributes[index_no].value !== \"\") {\r\n                    // sets the attributes and their values with the name and value as defined in array of object 'attributes' at index  that is equals to the value of variable 'i'\r\n                    insert.setAttribute(attributes[index_no].name, attributes[index_no].value);\r\n                    if (attributes[index_no].name == 'xaxis_radio') {\r\n                        // removes the attribute if their name is 'xaxis_radio'\r\n                        insert.removeAttribute(attributes[index_no].name);\r\n                    }\r\n                } else {\r\n                    // removes the attributes which values are blank\r\n                    insert.removeAttribute(attributes[index_no].name);\r\n                }\r\n            }\r\n            // defines the value of correct answer\r\n            insert.setAttribute('correctans', CHART_AUTH.resetCorrectans(insert.getAttribute('type'), insert.getAttribute('defaultans')));\r\n        }\r\n        // update the xml\r\n        JS.select(\"#special_module_xml\").value = CHART_AUTH.formatXml(xmlDom.xml ? xmlDom.xml : (new XMLSerializer()).serializeToString(xmlDom));\r\n    }\r\n}\r\n\r\n// used for set the format of correct answer values \r\nCHART_AUTH.resetCorrectans = function (type, defans) {\r\n    // contains the value of variable defans in json format\r\n    defans = JSON.parse(\"[\" + defans + \"]\");\r\n    // contains string '|'\r\n    let res = '|';\r\n    // loops through the each values of json assigned into variable 'defans'\r\n    for (let index = 0; index < defans.length; index++) {\r\n        // need to check\r\n        if (type == 'dotplot') {\r\n            res = res + index + ',' + defans[index] * 10 + '|';\r\n        } else {\r\n            res = res + index + ',' + defans[index] + '|'; \r\n        }\r\n    }\r\n    // returns the formatted data\r\n    return res;\r\n}\r\n\r\n// used for draw the chart\r\nCHART_AUTH.drawChart  = function (attrs) {\r\n    let xaxis = [],\r\n    id = attrs.id,\r\n    type = attrs.type,\r\n    color = attrs.color,\r\n    cans = '',\r\n    gpad = 0.2,\r\n    lspace,\r\n    snapTo = attrs.snapto,\r\n    defaultans = JSON.parse(\"[\" + attrs.defaultans + \"]\"),\r\n    correctAns = [],\r\n    multiColor = false,\r\n    simple_plot = true;\r\n    \r\n    if (attrs.correctans && attrs.correctans.length > 0) {\r\n        // contain the correct answer value in array\r\n        let tempCorrectAns = attrs.correctans.split('|');\r\n        tempCorrectAns.map(function(item) {\r\n            item = item.split(',');\r\n            if (item[1]) {\r\n                correctAns.push(+item[1]);\r\n            }\r\n        });\r\n    }\r\n    // contains the xmin value \r\n    let initial_point = parseInt(attrs.xmin);\r\n    // contains the xmax value \r\n    let end_point = parseInt(attrs.xmax);\r\n    // contains the xinterval value \r\n    let inc_interval = parseInt(attrs.xinterval);\r\n    for (let index_no = initial_point; index_no <= end_point; index_no += inc_interval) {\r\n        // used for update the x-axis value\r\n        xaxis.push(index_no);\r\n    }\r\n\r\n    if (type == 'histogram') {\r\n        multiColor = true;\r\n        type = 'column';\r\n        gpad = 0;\r\n        color = 'transparent';\r\n    }\r\n    // it is not in use as there are only 3 type which are used here and they are: bar/column, line, histogram\r\n    if (type == 'dotplot') {\r\n        simple_plot = false;\r\n        type = 'column';\r\n        attrs.ylabel = '';\r\n        lspace = 40;\r\n        for (let index_no = 0; index_no < defaultans.length; index_no += 1) {\r\n            defaultans[index_no] = parseInt(defaultans[index_no]) * 10;\r\n        }\r\n    }\r\n    // placeholder for all other members, and various utility functions. The most important member of the namespace would be the chart constructor.\r\n    let chart = new Highcharts.Chart({\r\n        chart: {\r\n            // The HTML element where the chart will be rendered\r\n            renderTo: id,\r\n            // disabled the animation throughout the chart\r\n            animation: false,\r\n            // An explicit width for the chart\r\n            width: attrs.width - 2,\r\n            // An explicit height for the chart\r\n            height: attrs.height - 2,\r\n            // The space between the right edge of the chart and the content (plot area, axis title and labels, title, subtitle or legend in top position)\r\n            spacingRight: 40,\r\n            // The space between the left edge of the chart and the content (plot area, axis title and labels, title, subtitle or legend in top position)\r\n            spacingLeft: lspace\r\n        },\r\n        credits: {\r\n            // Highchart by default puts a credits label in the lower right corner of the chart. This option changed this feature\r\n            enabled: false\r\n        },\r\n        legend: {\r\n            // The legend is a box containing a symbol and name for each series item or point item in the chart. By setting value 'false' it disable the legend\r\n            enabled: false\r\n        },\r\n        title: {\r\n            // Adds title on top of the legend\r\n            text: attrs.title\r\n        },\r\n        // Options for the tooltip that appears when the user hovers over a series or point\r\n        tooltip: {\r\n            // Enable the tooltip\r\n            enabled: true,\r\n            // Used for how many decimals to show in each series' y value\r\n            valueDecimals: 0,\r\n            // Used for format the cluster tooltip\r\n            formatter: function() {\r\n                return Math.round(this.y)\r\n            }\r\n        },\r\n        xAxis: {\r\n            // defines x-axis categories\r\n            categories: xaxis,\r\n            // defines the width of the grid lines extending the ticks across the plot area\r\n            gridLineWidth: simple_plot,\r\n            // defines the color of the line marking the axis itself\r\n            lineColor: 'black',\r\n            // Used for categorized axes only. Here it denotes that the tick mark is placed in the center of the category\r\n            tickmarkPlacement: 'on',\r\n            // denotes the minimum value of the axis\r\n            min: 0,\r\n            // The axis title, showing next to the axis line\r\n            title: {\r\n                text: attrs.xlabel\r\n            }\r\n        },\r\n        yAxis: [{\r\n                // defines the width of the grid lines extending the ticks across the plot area\r\n                gridLineWidth: simple_plot,\r\n                // defines the width of the line marking the axis itself\r\n                lineWidth: simple_plot,\r\n                // defines the color of the line marking the axis itself\r\n                lineColor: 'black',\r\n                // not allow decimals in this axis' ticks\r\n                allowDecimals: false,\r\n                // defines the lowest allowed value for automatically computed axis extremes\r\n                floor: parseInt(attrs.ymin),\r\n                // defines the maximum value of the axis\r\n                max: parseInt(attrs.ymax),\r\n                // defines the minimum value of the axis\r\n                min: parseInt(attrs.ymin),\r\n                // defines the interval of the tick marks in axis units\r\n                tickInterval: parseInt(attrs.yinterval),\r\n                // defines the minimum tick interval allowed in axis values\r\n                minTickInterval: 0,\r\n                // defines the axis title, showing next to the axis line\r\n                title: {\r\n                    text: attrs.ylabel\r\n                },\r\n                // shows the number or category for each tick\r\n                labels: {\r\n                    enabled: simple_plot\r\n                }\r\n            },\r\n            {\r\n                // define the width of the line marking the axis itself\r\n                lineWidth: simple_plot,\r\n                // defines the color of the line marking the axis itself\r\n                lineColor: '#C0C0C0',\r\n                // allow to display the axis on the opposite side of the normal  \r\n                opposite: true,\r\n                // used for actual text of the axis title\r\n                title: {\r\n                    text: ''\r\n                }\r\n            }\r\n        ],\r\n        series: [{\r\n            // An array of data points for the series\r\n            data: (correctAns.length > 0) ? correctAns : defaultans,\r\n            // Enable dragging in the Y dimension      \r\n            draggableY: true,\r\n            // Used as main color of the series\r\n            color: color,\r\n            // Set the minimum Y value the points can be moved to\r\n            dragMinY: parseInt(attrs.ymin),\r\n            // not clear why it is used\r\n            snapgrid: snapTo,\r\n            // Set the maximum Y value the points can be moved to\r\n            dragMaxY: parseInt(attrs.ymax),\r\n            // define the type of series\r\n            type: type,\r\n            // The minimal height for a column or width for a bar\r\n            minPointLength: 1\r\n        }],\r\n        plotOptions: {\r\n            series: {\r\n                // Enable the mouse tracking for a specific series\r\n                enableMouseTracking: true,\r\n                // When using automatic point colors pulled from the global colors or series-specific 'plotOptions.column.colors' collections, this option determines whether the chart should receive one color per series or one color per point\r\n                colorByPoint: multiColor,\r\n                // used for style the cursor\r\n                cursor: 'ns-resize',\r\n                // defines the color of the border surrounding each column or bar\r\n                borderColor: color,\r\n                // Padding between each column or bar, in x axis units\r\n                pointPadding: 0,\r\n                // Padding between each value groups, in x axis units\r\n                groupPadding: gpad,\r\n                // The width of the border surrounding each column or bar\r\n                borderWidth: simple_plot,\r\n                // dashStyle:'dot',\r\n                point: {\r\n                    events: {\r\n                        // Callback that fires when the point is dropped\r\n                        drop: function() {\r\n                            // contains the x and y value separated by comma (,)\r\n                            cans = this.x + ',' + Math.round(this.y);\r\n                            // sets the value of correctans attribute of chart tag exist in xml when position of column or point changes\r\n                            CHART_AUTH.setAnswerkey(id, cans);\r\n                        },\r\n                        // Callback that fires while dragging a point\r\n                        drag: function() {\r\n                            if (!simple_plot) {\r\n                                // calculate the height\r\n                                let ht = (100 * snapTo) / this.y + '%';\r\n                                // updates the pattern, width, height, dotcolor etc\r\n                                chart.series[0].data[this.x].update({\r\n                                    color: {\r\n                                        pattern: ' ',\r\n                                        width: '100%',\r\n                                        height: ht,\r\n                                        dotClr: color,\r\n                                        cxWdth: cxWdth\r\n                                    }\r\n                                });\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    });\r\n    if (!simple_plot) {\r\n        let cxWdth = JS.select('.highcharts-series-group rect').getAttribute('width');\r\n        for (let index = 0; index < defaultans.length; index++) {\r\n            // calculates the height\r\n            let ht = (100 * snapTo) / defaultans[index] + '%';\r\n            // updates the value of y, pattern, width, height, dotcolor etc\r\n            chart.series[0].data[index].update({\r\n                y: parseInt(defaultans[index]),\r\n                color: {\r\n                    pattern: ' ',\r\n                    width: '100%',\r\n                    height: ht,\r\n                    dotClr: color,\r\n                    cxWdth: cxWdth\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\n// used for add or remove the columns or points on the chart board or from chart board\r\nCHART_AUTH.updatePoint = function (type, id) {\r\n    // selects smxml tag of xml\r\n    if (JS.select('#special_module_xml').value && JS.select('#special_module_xml').value.trim() != '') {\r\n        // getting instance of chart\r\n        \r\n        let charts = Highcharts.charts, chart1;\r\n        charts.forEach(function(chart) {\r\n            if (chart && chart.renderTo.id === id) {\r\n                chart1 = chart;\r\n            }\r\n        });\r\n        if (typeof chart1 == \"object\") {\r\n            let xmlDom = JS.parseHtml(JS.select('#special_module_xml').value),\r\n            insert = JS.find(xmlDom, '#' + id),\r\n            // A series is a set of data, for example a line graph or one set of columns. All data plotted on a chart comes from the series object\r\n            series = chart1.series[0],\r\n            // contains the value of attribute 'correctans' of chart tag\r\n            cans = insert.getAttribute('correctans'),\r\n            // contains the value of attribute 'xmax' of chart tag after parsing it in integer\r\n            xmax_val = parseInt(insert.getAttribute('xmax')),\r\n            // contains the value of attribute 'xinterval' of chart tag after parsing it in integer\r\n            xinterval_val = parseInt(insert.getAttribute('xinterval')),\r\n            // used to manage the xmax value when it goes over its defined xmax value\r\n            arr_data = [],\r\n            // contains the value of attribute 'ymin' of chart tag after parsing it in integer\r\n            ymin_val = parseInt(insert.getAttribute('ymin')),\r\n            // contains the value of attribute 'xmin' of chart tag after parsing it in integer\r\n            xmin_val = parseInt(insert.getAttribute('xmin')),\r\n            // contains the value of attribute 'yinterval' of chart tag after parsing it in integer\r\n            yinterval_val = parseInt(insert.getAttribute('yinterval')),\r\n            // contains the no of column or point plotted on chart board\r\n            xaxisVal = series.data.length;\r\n\r\n            if (type == 'addPoint') {\r\n                // sets the default value of column/point\r\n                let val = (ymin_val < yinterval_val / 10) ? yinterval_val / 10 : ymin_val + yinterval_val / 10;\r\n                // rounds up the column/point value\r\n                val = Math.ceil(val);\r\n                // adds the points to the series\r\n                series.addPoint([xaxisVal, val]);\r\n                // adds the index and value of added column/point in correctans attribute of chart tag of xml\r\n                insert.setAttribute('correctans', cans + (series.data.length - 1) + ',' + val + '|');\r\n                /* Managed Interval Issue Performed Using Add Button In Case Of More Than Max Value Of X-Interval On Authoring Area */\r\n                for (let index_no = xmin_val; index_no <= xmax_val; index_no += xinterval_val) {\r\n                    // pushes the value from min value to max value in interval defined in variable 'xinterval_val' in array 'arr_data'\r\n                    arr_data.push(index_no.toString());\r\n                }\r\n                if (xaxisVal >= arr_data.length) {\r\n                    // contains value after adding the interval value in last value of array 'arr_data'\r\n                    let auth_last_value = (parseInt(arr_data[arr_data.length - 1]) + xinterval_val).toString();\r\n                    // pushes the value of variable 'auth_last_value' in 'arr_data' array\r\n                    arr_data.push(auth_last_value);\r\n                    // sets the value of xmax attribute of chart tag of xml\r\n                    insert.setAttribute('xmax', auth_last_value);\r\n                    // Set new axis categories and optionally redraw\r\n                    chart1.xAxis[0].setCategories(arr_data);\r\n                }\r\n            }\r\n            if (type == 'removePoint') {\r\n                // need to check\r\n                let ans, idx, str;\r\n                if (xaxisVal > 1) {\r\n                    // removes the last plotted column or point on chart board\r\n                    let point_id = chart1.series[0].data[xaxisVal - 1].id;\r\n                    chart1.series[0].data[xaxisVal - 1].remove();\r\n                    point_id && JS.select('[point-id = \"' + point_id + '\"]', 'remove');\r\n                    // contains value with '|' + exist no of plotted column/point on chart board  \r\n                    ans = '|' + series.data.length;\r\n                    // find the index of sting defined in variable 'ans' in string defined in variable 'cans' \r\n                    idx = cans.indexOf(ans);\r\n                    if (idx >= 0) {\r\n                        // contains the string extracted from string defined in variable 'cans' that starts with index defined in variable 'idx' and goes to index'|' + value of variable 'idx' after adding value 1 in its previous value\r\n                        str = cans.slice(idx, cans.indexOf('|', idx + 1));\r\n                        // replaces string defined in variable 'str' with blank in variable 'cans'\r\n                        cans = cans.replace(str, '');\r\n                        // removes '|' symbol from start and end of the string exist in 'cans' variable\r\n                        cans = cans.substring(1, cans.length - 1);\r\n                    }\r\n                    // sets the correctans attribute value of chart tag of xml\r\n                    insert.setAttribute('correctans', '|' + cans + '|');\r\n                } else {\r\n                    // warning messege when tried to delete the column or point that is only left on chart board and no any more column/point exist\r\n                    //JS.showmsg(\"Default Item(s) can not be Deleted\", 3000);\r\n                    JS.alert(\"Default Item(s) cannot be deleted\");\r\n                }\r\n            }\r\n\r\n            // update the xml\r\n            JS.select(\"#special_module_xml\").value = CHART_AUTH.formatXml(xmlDom.xml ? xmlDom.xml : (new XMLSerializer()).serializeToString(xmlDom));\r\n        }\r\n    }\r\n}\r\n\r\n// sets the value of correctans attribute of chart tag exist in xml when position of column or point changes\r\nCHART_AUTH.setAnswerkey = function (mid, cans) {\r\n    // selects smxml tag of xml\r\n    if (JS.select('#special_module_xml').value && JS.select('#special_module_xml').value.trim() != '') {\r\n        let xmlDom = JS.parseHtml(JS.select('#special_module_xml').value);\r\n        // selects chart tag of xml\r\n        let insert = JS.find(xmlDom ,'#' + mid);\r\n        // finds the index of column or point that is re-positioned, plotted on chart board\r\n        let temp = cans.split(',')[0];\r\n        // contains the all plotted points or column with their index and value separated by comma and wrapped within '|' symbol\r\n        let set = insert.getAttribute(\"correctans\"), idx;\r\n        temp = '|' + temp + ',';\r\n        if (set == undefined || set == \"\") {\r\n            // wraps the value of variable 'cans' with symbol '|' and assign in correctans attribute\r\n            insert.setAttribute('correctans', '|' + cans + '|');\r\n        } else {\r\n            // finds the index of re-positioned column/point in correct answer string\r\n            idx = set.indexOf(temp);\r\n            if (idx >= 0) {\r\n                // contains the previous 'x' and 'y' value separated by comma with prefix '|' of the column/point which is re-positioned\r\n                let str = set.slice(idx, set.indexOf('|', idx + 1));\r\n                // replaces previous value of x and y separated by comma with prefix '|' of column/point that is re-positioned with value store in variable 'cans' with prefix '|' of correct answer string \r\n                set = set.replace(str, '|' + cans);\r\n                // sets the value of variable 'cans' with value of variable 'set' after removing the symbol '|' from start and end \r\n                cans = set.substring(1, set.length - 1);\r\n            } else {\r\n                // sets the value of variable 'cans' with value of variable 'set' after removing the symbol '|' from start and end and also add the value of variable 'cans' with prefix '|'\r\n                cans = set.substring(1, set.length - 1) + '|' + cans;\r\n            }\r\n        }\r\n        // senotes array of object containing keys as name and value which contains the value of attribute name and value of attribute\r\n        let attributes = CHART_AUTH.storage.store('#' + mid, 'attributes');\r\n        for (let index = 0; index < attributes.length; index++) {\r\n            if (attributes[index].value !== \"\") {\r\n                // sets the attribute name and value with value of key 'name' and 'value' defined in array of object 'attributes' at index that is equals to the value of variable 'i'\r\n                insert.setAttribute(attributes[index].name, attributes[index].value);\r\n            }\r\n        }\r\n        // sets the attribute 'correctans' with value wraped in symbol '|' defined in variable 'cans' \r\n        insert.setAttribute(\"correctans\", '|' + cans + '|');\r\n        // update the xml\r\n        JS.select(\"#special_module_xml\").value = CHART_AUTH.formatXml(xmlDom.xml ? xmlDom.xml : (new XMLSerializer()).serializeToString(xmlDom));\r\n    }\r\n}\r\n\r\n// used to format the xml and according to this can be seen an updated graph view.\r\nCHART_AUTH.formatXml = function (xml) {\r\n    /* pattern of finding data where closing, opening angular bracket found together and optionally backslash meets but i think pattern is wrong */\r\n    let reg = /(>)(<)(\\/*)/g;\r\n    /* pattern to match all spaces and then any characters and then one or more numbers of spaces and character back slash and n meets together */\r\n    let wsexp = / *(.*) +\\n/g;\r\n    /* pattern for matching any data between open and closing angular bracket and one or more number of back slash and n character where meets together */\r\n    let contexp = /(<.+>)(.+\\n)/g;\r\n    // replaces back slash and t characters where both meets together to blank\r\n    xml = xml.replace(/\\t/g, \"\");\r\n    // replaces the matching pattern from xml to given data\r\n    xml = xml.replace(reg, '$1\\n$2$3').replace(wsexp, '$1\\n').replace(contexp, '$1\\n$2');\r\n    let formatted = '';\r\n    let lines = xml.split('\\n');\r\n    let indent = 0;\r\n    let lastType = 'other';\r\n    // 4 types of tags - single, closing, opening, other (text, doctype, comment) - 4*4 = 16 transitions \r\n    let transitions = {\r\n        'single->single': 0,\r\n        'single->closing': -1,\r\n        'single->opening': 0,\r\n        'single->other': 0,\r\n        'closing->single': 0,\r\n        'closing->closing': -1,\r\n        'closing->opening': 0,\r\n        'closing->other': 0,\r\n        'opening->single': 1,\r\n        'opening->closing': 0,\r\n        'opening->opening': 1,\r\n        'opening->other': 1,\r\n        'other->single': 0,\r\n        'other->closing': -1,\r\n        'other->opening': 0,\r\n        'other->other': 0\r\n    };\r\n    for (let i = 0; i < lines.length; i++) {\r\n        let ln = lines[i];\r\n        if (ln != '') {\r\n            let single = Boolean(ln.match(/<.+\\/>/)); // is this line a single tag? ex. <br />\r\n            let closing = Boolean(ln.match(/<\\/.+>/)); // is this a closing tag? ex. </a>\r\n            let opening = Boolean(ln.match(/<[^!].*>/)); // is this even a tag (that's not <!something>)\r\n            let type = single ? 'single' : closing ? 'closing' : opening ? 'opening' : 'other';\r\n            let fromTo = lastType + '->' + type;\r\n            lastType = type;\r\n            let padding = '';\r\n            indent += transitions[fromTo];\r\n            for (let j = 0; j < indent; j++) {\r\n                padding += '\\t';\r\n            }\r\n            if (fromTo == 'opening->closing') {\r\n                formatted = formatted.substr(0, formatted.length - 1) + ln + '\\n'; // substr removes line break (\\n) from prev loop\r\n            } else {\r\n                // if opening and closing tab not found then adds tab then charaters and line break character\r\n                formatted += padding + ln + '\\n';\r\n            }\r\n        }\r\n    }\r\n    // returns formatted xml\r\n    return formatted;\r\n}\r\n\r\n// function for validating the inputs\r\nCHART_AUTH.validate = function (current) {\r\n    if (current.nodeName) {\r\n        CHART_AUTH.isValid = false;\r\n        JS.selectAll('.error', 'remove');\r\n        JS.setCss(current, {\r\n            //border: '1px solid red',\r\n            //background:  \"#FFCECE\"\r\n        })\r\n        if (current.value == '') {\r\n            current.classList.add('showError');\r\n            JS.insert(current.parentElement, '<span class=\"error text-danger\">' + l.fill_field + '</span>', 'beforeend');\r\n        } else if ( current.classList.contains('num') && current.value < 1) {\r\n            current.classList.add('showError');\r\n            JS.insert(current.parentElement, '<span class=\"error text-danger\">' + l.value_gt_one + '</span>', 'beforeend');\r\n        } else if (parseInt(JS.select('#xinterval').value) >= parseInt(JS.select('#xmax').value)) {\r\n            JS.insert(JS.select('#xmax').parentElement, '<span class=\"error text-danger\">' + l.value_gt_interval + '</span>', 'beforeend');\r\n            JS.select('#xmax').classList.add('showError');\r\n        } else if (parseInt(JS.select('#yinterval').value) >= parseInt(JS.select('#ymax').value)) {\r\n            JS.insert(JS.select('#ymax').parentElement, '<span class=\"error text-danger\">' + l.value_gt_interval + '</span>', 'beforeend');\r\n            JS.select('#ymax').classList.add('showError');\r\n        } else if (parseInt(JS.select('#xmin').value) >= parseInt(JS.select('#xmax').value)) {\r\n            JS.insert(JS.select('#xmax').parentElement, '<span class=\"error text-danger\">' + l.value_gt_min + '</span>', 'beforeend');\r\n            JS.select('#xmax').classList.add('showError');\r\n        } else if (parseInt(JS.select('#ymin').value) >= parseInt(JS.select('#ymax').value)) {\r\n            JS.insert(JS.select('#ymax').parentElement, '<span class=\"error text-danger\">' + l.value_gt_min + '</span>', 'beforeend');\r\n            JS.select('#ymax').classList.add('showError');\r\n        } else if (!CHART_AUTH.isNumeric(current.value) && current.classList.contains('num')) {\r\n            JS.insert(current.parentElement, '<span class=\"error text-danger\">' + l.enter_number + '</span>', 'beforeend');\r\n            current.classList.add('showError');\r\n        } else {\r\n            CHART_AUTH.isValid = true;\r\n            current.classList.remove('showError');\r\n            JS.setCss(current, {\r\n                border: '1px solid #ced4da',\r\n                background:  \"none\"\r\n            });\r\n            if (JS.selectAll('.showError').length > 0) {\r\n                // removes the 'showError' class from each element if all the elements passes the validation criteria\r\n                CHART_AUTH.checkAndRemove();\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n// function for changing the chart type\r\nCHART_AUTH.changeType = function (current) {\r\n    if (current.nodeName) {\r\n        let value = current.value;\r\n        JS.select('#snapto').readOnly = (value == 'dotplot');\r\n        JS.select('#ylabel').readOnly = (value == 'dotplot');\r\n        JS.select('#ymin').readOnly = (value == 'dotplot');\r\n        JS.select('#ymax').readOnly = (value == 'dotplot');\r\n        JS.select('#yinterval').readOnly = (value == 'dotplot');\r\n        if (value == 'dotplot') {\r\n            JS.select('#color').readOnly = false;\r\n        } else {\r\n            JS.select('.details').style.display = 'block';\r\n            JS.select('#color').disabled = (value == 'histogram');\r\n        }\r\n        //JS.select('#chart_title').value = (value == 'histogram') ? 'Histogram' : ((value == 'line') ? 'Line Chart' : 'Bar Chart');\r\n    }\r\n}\r\n\r\nexport default CHART_AUTH;","<!--\r\n *  File Name   : ChartModalBox.svelte\r\n *  Description : Responsible for authoring modal box\r\n *  Author      : Ayush Srivastava\r\n *  Package     : clsSMChart (Modal box)\r\n *  Last update : 15-MAR-2021\r\n *  Last Updated By : Ayush Srivastava\r\n-->\r\n<script>\r\n    import l from '../../src/libs/editorLib/language.js';\r\n</script>\r\n\r\n<div id=\"authoring-modal\" class=\"modal fade\" tabindex=\"-1\">\r\n    <div class=\"modal-dialog\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h4 class=\"modal-title\">{l.chart_label}</h4>\r\n                <button type=\"button\" class=\"close\" data-bs-dismiss=\"modal\">&times;</button>\r\n            </div>\r\n            <div class=\"modal-body modal_height overflow-y\">\r\n                <div class=\"plotchart h\">\r\n                    <div class=\"row mx-0\">\r\n                        <div class=\"col-sm-6 col-12 px-1\">\r\n                            <div class=\"form-group\">\r\n                                <label class=\"control-label font-weight-normal mb-0 d-inline-flex\" for=\"chart-width\"><div class=\"mendatory_label float-left\">{l.width_label}</div><div class=\"mendatory_field\"></div></label>\r\n                                <input type=\"text\" class=\"num validate form-control form-control-md\" id=\"chart-width\" name=\"width\" placeholder=\"Width of chart\" defaultValue=\"500\" data-dwidth = \"550\" />\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"col-sm-6 col-12 px-1\">\r\n                            <div class=\"form-group\">\r\n                                <label class=\"control-label font-weight-normal mb-0 d-inline-flex\" for=\"chart-height\"><div class=\"mendatory_label float-left\">{l.height_label}</div><div class=\"mendatory_field\"></div></label>\r\n                                <input type=\"text\" class=\"num validate form-control form-control-md\" id=\"chart-height\" name=\"height\" placeholder=\"Height of chart\" defaultValue=\"500\" data-dheight = \"500\"/>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"row mx-0\">\r\n                        <div class=\"form-group col-sm-6 col-12 px-1\">\r\n                            <label class=\"control-label font-weight-normal mb-0 d-inline-flex\" for=\"chart-type\"><div class=\"mendatory_label float-left\">{l.type}</div><div class=\"mendatory_field\"></div></label>\r\n                            <select  class=\"form-select\" id=\"chart-type\" name=\"type\">\r\n                                <option value=\"column\">{l.column_label}</option>\r\n                                <option value=\"line\">{l.line_label}</option>\r\n                                <option value=\"histogram\">{l.histogram_label}</option>\r\n                            </select>\r\n                        </div>\r\n                        <div class=\"form-group col-sm-6 col-12 px-1\">\r\n                            <label class=\"control-label font-weight-normal mb-0\" for=\"chart_title\">{l.chart_title}</label>\r\n                            <input type=\"text\" class=\"form-control form-control-md\" id=\"chart_title\" name=\"title\" placeholder=\"Enter Chart Title\" />\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"row mx-0\">\r\n                        <div class=\"form-group col-sm-6 col-12 px-1\">\r\n                            <label class=\"control-label font-weight-normal mb-0\" for=\"xlabel\">{l.xaxis_title}</label>\r\n                            <input type=\"text\" class=\"form-control form-control-md\" id=\"xlabel\" name=\"xlabel\" placeholder=\"Enter Text\" data-dxtitle =\"Hours\" />\r\n                        </div>\r\n                        <div class=\"form-group col-sm-6 col-12 px-1\">\r\n                            <label class=\"control-label font-weight-normal mb-0\" for=\"ylabel\">{l.yaxis_title}</label>\r\n                            <input type=\"text\" class=\"form-control form-control-md\" id=\"ylabel\" name=\"ylabel\" placeholder=\"Enter Text\" data-dytitle =\"Values\"/>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"row mx-0\">\r\n                        <div class=\"form-group col-sm-6 col-12 px-1\">\r\n                            <label class=\"control-label font-weight-normal mb-0 d-inline-flex\" for=\"defaultans\"><div class=\"mendatory_label float-left\">{l.default_answer}</div><div class=\"mendatory_field\"></div></label>\r\n                            <input type=\"text\" class=\"validate form-control form-control-md\" id=\"defaultans\" name=\"defaultans\" placeholder=\"Enter answer\" data-dans = \"10,20,30\" readonly = \"readonly\" aria-describedby=\"defaultAnsHelpBlock\" />\r\n                            <small id=\"defaultAnsHelpBlock\" class=\"text-danger font-weight-bold\"> {l.default_representation}</small>\t\r\n                        </div>\t\t\t\t\t\t\t\t\r\n                        <div class=\"col-sm-6 col-12 form-group px-1\">\r\n                            <label class=\"control-label font-weight-normal mb-0\" for=\"color\">{l.set_color}</label>\r\n                                <select class=\"form-select\" id=\"color\" name=\"color\">\r\n                                <option value=\"#7cb5ec\" selected = \"selected\">{l.default}</option> \r\n                                <option value=\"#c5d0fa\">{l.primary_color}</option>\r\n                                <option value=\"#ffa354\">{l.warning_color}</option>\r\n                                <option value=\"#f5785d\">{l.danger_color}</option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\t\t\t\t\t\t\t\t\t\r\n                    <div class=\"row mx-0 show_values\">\t\t\t\t\t\t\t\t\t\t\t\r\n                        <div class=\"form-group col-sm-6 col-12 px-0 xmultiple\">\r\n                            <label class=\"control-label font-weight-normal mb-0 w-100 px-1\" for=\"xaxisValues\">\t\t\t\t\t\t\t\t\t\t\t\t\r\n                            {l.xinterval_val}</label>\t\t\t\t\t\t\t\t\t\t\r\n                            <div class=\"col-md-4 px-1 d-inline-block float-start\">\r\n                                <label class=\"control-label font-weight-normal mb-0\" for=\"xmin\">{l.min}</label>\r\n                                <input type=\"number\" class=\"num validate form-control form-control-md\" id=\"xmin\" name=\"xmin\" placeholder=\"No.\" data-dxmin = \"10\" />\r\n                            </div>\r\n                            <div class=\"col-md-4 px-1 d-inline-block float-start\">\r\n                                <label class=\"control-label font-weight-normal mb-0\" for=\"xmax\">{l.max}</label>\r\n                                <input type=\"number\" class=\"num validate form-control form-control-md\" id=\"xmax\" name=\"xmax\" placeholder=\"No.\" data-dxmax = \"60\" />\r\n                            </div>\r\n                            <div class=\"col-md-4 px-1 d-inline-block float-start\">\r\n                                <label class=\"control-label font-weight-normal mb-0\" for=\"xinterval\">{l.interval_txt}</label>\r\n                                <input type=\"number\" class=\"num validate form-control form-control-md\" id=\"xinterval\" name=\"xinterval\" placeholder=\"No.\" data-dxinterval = \"10\" />\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"form-group col-sm-6 col-12 px-1 ymultiple details\">\r\n                            <!-- svelte-ignore a11y-label-has-associated-control -->\r\n                            <label class=\"control-label font-weight-normal mb-0 w-100 px-1\">{l.yinterval_val}</label>\t\t\t\t\t\t\t\t\t\t\r\n                            <div class=\"col-md-4 px-1 d-inline-block float-start\">\r\n                                <label class=\"control-label font-weight-normal mb-0\" for=\"ymin\">{l.min}</label>\r\n                                <input type=\"number\" class=\"num validate form-control form-control-md\" id=\"ymin\" name=\"ymin\" placeholder=\"No.\" data-dymin = \"1\" />\r\n                            </div>\r\n                            <div class=\"col-md-4 px-1 d-inline-block float-start\">\r\n                                <label class=\"control-label font-weight-normal mb-0\" for=\"ymax\">{l.max}</label>\r\n                                <input type=\"number\" class=\"num validate form-control form-control-md\" id=\"ymax\" name=\"ymax\" placeholder=\"No.\" data-dymax = \"50\" />\r\n                            </div>\r\n                            <div class=\"col-md-4 px-1 d-inline-block float-start\">\r\n                                <label class=\"control-label font-weight-normal mb-0\" for=\"yinterval\">{l.interval_txt}</label>\r\n                                <input type=\"number\" class=\"num validate form-control form-control-md\" id=\"yinterval\" name=\"yinterval\" placeholder=\"No.\" data-dyinterval = \"5\" />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"row mx-0 show_values d-none\">\r\n                        <div class=\"col-sm-6 col-12 px-1 form-group\">\r\n                            <label class=\"control-label font-weight-normal mb-0 d-inline-flex\" for=\"snapto\"><div class=\"mendatory_label float-left\">{l.snap_to}</div><div class=\"mendatory_field\"></div></label>\r\n                            <input type=\"text\" class=\"num validate form-control form-control-md\" id=\"snapto\" name=\"snapto\" placeholder=\"Enter Number Only\" data-dsnapto = \"10\" />\r\n                        </div>\t\t\t\t\t\t\t\t\t\t\t\r\n                    </div>\t\t\t\t\t\t\r\n                    <input type=\"hidden\" id=\"chart-anskey\" name=\"chart-anskey\" placeholder=\"anskey\"/>\r\n                </div>\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary resetElement\">{l.reset}</button>\r\n                <button type=\"button\" class=\"btn btn-secondary addElement\">{l.ok_btn}</button>\r\n                <button type=\"button\" class=\"btn btn-light\" data-bs-dismiss=\"modal\">{l.cancel}</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<style>\r\n    input[type=number]::-webkit-inner-spin-button, \r\n    input[type=number]::-webkit-outer-spin-button { \r\n        -webkit-appearance: none;\r\n        -moz-appearance: none;\r\n        appearance: none; \r\n    }\r\n    .modal_height {\r\n        max-height: 350px;\r\n    }\r\n</style>","<!--\r\n *  File Name   : ChartAuthoring.svelte\r\n *  Description : Responsible for Authoring Side functionality\r\n *  Author      : Ayush Srivastava\r\n *  Package     : clsSMChart (Authoring)\r\n *  Last update : 15-Mar-2021\r\n *  Last Updated By : Ayush Srivastava\r\n-->\r\n<script>\r\n    import { afterUpdate, beforeUpdate, onMount } from \"svelte\";\r\n\timport { writable } from \"svelte/store\";\r\n\timport { XMLToJSON, AH } from '../helper/HelperAI.svelte';\r\n    import CHART_AUTH from './lib/chartAuthoringScript';\r\n    import l from '../src/libs/editorLib/language.js';\r\n    import ChartModalBox from \"./lib/ChartModalBox.svelte\";\r\n    export let xml;\r\n    export let editorState;\r\n    export let getChildXml;\r\n    let state = {};\r\n    let width = '600px', cid = 'ID0';\r\n    let is_resource_added = false;\r\n    // created writable store\r\n    let auth_store = writable({\r\n        // used for contain the xml\r\n        xml: '',\r\n        // used for contain the type of chart used\r\n        moduleType: '',\r\n        // contains the height of the chart board\r\n        height: \"500\",\r\n        // contains the width of the chart board\r\n        width: \"550\",\r\n        // contains the xval value of the xml\r\n        xval: \"\",\r\n        // contains the yinterval value of the xml\r\n        yinterval: \"\",\r\n        // contains the ymax value of the xml\r\n        ymax: \"500\",\r\n        // contains the ymin value of the xml\r\n        ymin: \"\",\r\n        // contains the xmax value of the xml\r\n        xmax: \"\",\r\n        // contains the xmin value of the xml\r\n        xmin: \"\",\r\n        // contains the xinterval value of the xml\r\n        xinterval: \"\",\r\n        // contains the defaultans value of the xml\r\n        defaultans: \"\",\r\n        // contains the snapTo value of the xml\r\n        snapTo: \"\",\r\n        // contains the correctans value of the xml\r\n        correctans: \"\",\r\n        // contains the xlabel value of the xml\r\n        xlabel: \"\",\r\n        // contains the ylabel value of the xml\r\n        ylabel: \"\",\r\n        // contains the title value of the xml\r\n        title: \"\",\r\n        // contains the color value of the xml\r\n        color: \"\"\r\n\t});\r\n    // for subscribing the store\r\n    const unsubscribe = auth_store.subscribe(value => {\r\n\t\tstate = value;\r\n\t});\r\n    // for updating the module/xml whenever there is change in the xml\r\n    beforeUpdate(async() => {\r\n\t\tif (state.xml != xml) {\r\n            AH.select('#special_module_xml').value = xml;\r\n            updateXmlAuthData(xml);\r\n\t\t}\r\n\t});\r\n    // for binding some events\r\n    onMount(async() => {\r\n        AH.listen('body','keyup', '#authoring-modal .validate', function (current, event) {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            if (event.keyCode == 13) {\r\n                if (AH.selectAll('#authoring-modal .showError').length == 0) {\r\n                    AH.select('#authoring-modal .addElement').click();\r\n                } else {\r\n                    AH.select('#authoring-modal .showError').focus();\r\n                }\r\n            }\r\n            CHART_AUTH.validate(current);\r\n        });\r\n        AH.listen('body','change', 'select', function (current) {\r\n            CHART_AUTH.changeType(current);\r\n        });\r\n        AH.listen('body','click', '.resetElement', function () {\r\n            CHART_AUTH.resetModal();\r\n            AH.select(\"#chart-width\").value = AH.select(\"#chart-width\").getAttribute(\"data-dwidth\");\r\n            AH.select(\"#chart-height\").value = AH.select(\"#chart-height\").getAttribute(\"data-dheight\");\r\n            AH.select(\"#xlabel\").value = AH.select(\"#xlabel\").getAttribute(\"data-dxtitle\");\r\n            AH.select(\"#ylabel\").value = AH.select(\"#ylabel\").getAttribute(\"data-dytitle\");\r\n            AH.select(\"#defaultans\").value = AH.select(\"#defaultans\").getAttribute(\"data-dans\");\r\n            AH.select(\"#color\").selectedIndex = 0;\r\n            AH.select(\"#snapto\").value = AH.select(\"#snapto\").getAttribute(\"data-dsnapto\");\r\n            AH.select(\"#ymin\").value = AH.select(\"#ymin\").getAttribute(\"data-dymin\");\r\n            AH.select(\"#ymax\").value = AH.select(\"#ymax\").getAttribute(\"data-dymax\");\r\n            AH.select(\"#yinterval\").value = AH.select(\"#yinterval\").getAttribute(\"data-dyinterval\");\r\n            AH.select(\"#xmin\").value = AH.select(\"#xmin\").getAttribute(\"data-dxmin\");\r\n            AH.select(\"#xmax\").value = AH.select(\"#xmax\").getAttribute(\"data-dxmax\");\r\n            AH.select(\"#xinterval\").value = AH.select(\"#xinterval\").getAttribute(\"data-dxinterval\");\r\n            if (AH.select(\"#chart-type\").value == \"dotplot\") {\r\n                AH.select(\"#authoring-modal #chart_title\").value = \"Dot Plot\";\r\n            } else if (AH.select(\"#chart-type\").value == \"column\") {\r\n                AH.select(\"#authoring-modal #chart_title\").value = \"Column\";\r\n            } else if (AH.select(\"#chart-type\").value == \"line\") {\r\n                AH.select(\"#authoring-modal #chart_title\").value = \"Line Chart\";\r\n            } else if (AH.select(\"#chart-type\").value == \"histogram\") {\r\n                AH.select(\"#authoring-modal #chart_title\").value = \"Histogram\";\r\n            }\r\n        });\r\n        AH.listen('body','mousemove', '#chartmain', function () {\r\n            updateXML();\r\n        });\r\n        AH.listen('body','click', '#chartmain, .addElement, .updateGraph', function () {\r\n            updateXML();\r\n        });\r\n        AH.listen('body', 'click', '#xmlDone', function () {\r\n            CHART_AUTH.initChart();\r\n        });\r\n    });\r\n    // for adding the highchart draggable plugin and initiating the chart\r\n    afterUpdate(async() => {\r\n        if (!is_resource_added && xml) {\r\n            AH.addScript('', itemUrl + 'src/libs/highchart_draggable.js', { callback: function () {\r\n                CHART_AUTH.initChart();\r\n                editorState.links = true;\r\n            }});\r\n            is_resource_added = true;\r\n        }\r\n    })\r\n    // function for updating the xml\r\n    function updateXML() {\r\n       if (state.xml != AH.select('#special_module_xml').value) {\r\n           getChildXml(AH.select('#special_module_xml').value);\r\n        }\r\n    }\r\n    // updates all states value according to the value of xml\r\n    function updateXmlAuthData(xml_data) {\r\n        // contains the json data of the xml\r\n        let newXml = XMLToJSON(xml_data);\r\n        console.log(\"newXML\",newXml);\r\n        // parses the xml and updates the value of all states except 'xml' and 'moduleType'\r\n        parseXml(newXml);\r\n        auth_store.update( (item) => {\r\n            item.xml = xml_data;\r\n            item.moduleType = newXml.smxml.chart._type;\r\n            return item;\r\n        });\r\n        // this block will not execute as there are only 3 types of chart used and they are line, column, histogram\r\n        if (newXml.smxml.chart._type == 'dotplot') {\r\n            AH.selectAll('#chartmain .setdata', 'css', {\r\n                display: 'none'\r\n            });\r\n        }\r\n    }\r\n    // function for updating the state and parsing the xml\r\n    function parseXml(QXML) {\r\n        // updates the value of the states\r\n        auth_store.update( (item) => {\r\n            // updates the value of state 'color' with color attribute value of chart tag of xml\r\n            item.color = QXML.smxml.chart._color;\r\n            // updates the value of state 'correctans' with correctans attribute value of chart tag of xml\r\n            item.correctans = QXML.smxml.chart._correctans;\r\n            // updates the value of state 'defaultans' with defaultans attribute value of chart tag of xml\r\n            item.defaultans = QXML.smxml.chart._defaultans;\r\n    \r\n            // updates the value of state 'height' with height attribute value of chart tag of xml\r\n            item.height = QXML.smxml.chart._height;\r\n            // updates the value of state 'snapTo' with snapTo attribute value of chart tag of xml\r\n            item.snapTo = QXML.smxml.chart._snapTo;\r\n            // updates the value of state 'title' with title attribute value of chart tag of xml\r\n            item.title = QXML.smxml.chart._title;\r\n            // updates the value of state 'width' with width attribute value of chart tag of xml\r\n            item.width = QXML.smxml.chart._width;\r\n            // updates the value of state 'xinterval' with xinterval attribute value of chart tag of xml\r\n            item.xinterval = QXML.smxml.chart._xinterval;\r\n            // updates the value of state 'xlabel' with xlabel attribute value of chart tag of xml\r\n            item.xlabel = QXML.smxml.chart._xlabel;\r\n            // updates the value of state 'xmax' with xmax attribute value of chart tag of xml\r\n            item.xmax = QXML.smxml.chart._xmax;\r\n            // updates the value of state 'xmin' with xmin attribute value of chart tag of xml\r\n            item.xmin = QXML.smxml.chart._xmin;\r\n            // updates the value of state 'xval' with xval attribute value of chart tag of xml\r\n            item.xval = QXML.smxml.chart._xval;\r\n            // updates the value of state 'yinterval' with yinterval attribute value of chart tag of xml\r\n            item.yinterval = QXML.smxml.chart._yinterval;\r\n            // updates the value of state 'ylabel' with ylabel attribute value of chart tag of xml\r\n            item.ylabel = QXML.smxml.chart._ylabel;\r\n            // updates the value of state 'ymax' with ymax attribute value of chart tag of xml\r\n            item.ymax = QXML.smxml.chart._ymax;\r\n            // updates the value of state 'ymin' with ymin attribute value of chart tag of xml\r\n            item.ymin = QXML.smxml.chart._ymin;\r\n            return item;\r\n        });\r\n    }\r\n</script>\r\n\r\n<main>\r\n    <div id=\"authoringDiv\">\r\n        <ChartModalBox />\r\n        <center>\r\n            <div id=\"chartmain\" style=\"width: {width}; background: #e8e8e8;\" class=\"position-relative\">\r\n                <div style=\"height: 41px\" class=\"position-relative w-100\">\r\n                    <div class=\"float-end mr-2 pt-1\">\r\n                        <span>\r\n                            <button title={l.add} data-bs-toggle=\"tooltip\" aria-label={l.add} data-original-title={l.add} tabindex=\"0\" class=\"setdata btn-light btn m-0 w-auto h-auto p-1 bg-white border ml\"  on:click={() => { CHART_AUTH.updatePoint('addPoint', cid) }}  >\r\n                                <span class=\"icomoon-plus s2 updateGraph\"></span>\r\n                            </button>\r\n                            <button  title={l.delete} data-bs-toggle=\"tooltip\" aria-label={l.delete} data-original-title={l.delete} tabindex=\"0\" class=\"setdata btn btn-light m-0 w-auto h-auto p-1 bg-white border ml\" on:click={() => { CHART_AUTH.updatePoint('removePoint', cid) }}>\r\n                                <span class=\"icomoon-new-24px-delete-1 s2 updateGraph\"></span>\r\n                            </button>\r\n                        </span>\r\n                        <span id=\"option-toolbar\">\r\n                            <span class=\"btn-group model-icon tools\" on:click={() => { CHART_AUTH.elemModal('plotchart', cid) }} data-t=\"plotchart\">\r\n                                <button title={l.edit_chart} aria-label={l.edit_chart} tabindex=\"0\" data-bs-toggle=\"tooltip\" data-original-title={l.edit_chart}  class=\"bg-white btn btn-light p-1\"><i class=\"icomoon-24px-edit-1\"></i></button>\r\n                            </span>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <div id=\"ID0\" type={state.moduleType} width={state.width} height={state.height} class={'drag-resize ' + state.moduleType} snapTo={state.snapTo} xval={state.xval} yval={state.yval} yinterval={state.yinterval} ymin={state.ymin} ymax={state.ymax} defaultans={state.defaultans} correctans={state.correctans} xlabel={state.xlabel} ylabel={state.ylabel} title={state.title} color={state.color} style=\"width: {width}; border: 1px solid #ccc;\"></div>\r\n            </div>\r\n        </center>\r\n        <textarea class=\"h\" id=\"special_module_xml\" name=\"special_module_xml\" value={state.xml} data-xml=\"\"></textarea>\r\n    </div>\r\n</main>"],"names":["JS","JUI","CHART_AUTH","l","chart_label","width_label","height_label","type","column_label","line_label","histogram_label","chart_title","xaxis_title","yaxis_title","default_answer","default_representation","set_color","default","primary_color","warning_color","danger_color","xinterval_val","min","max","interval_txt","yinterval_val","snap_to","reset","ok_btn","cancel","isValid","visible_class","storage","store","obj","key","val","this","state","arguments","length","remove","initChart","select","value","trim","bind_data","parseHtml","chart_main","selectAll","index","attrs","setInAssoc","id","drawChart","isNumeric","num","isNaN","parseFloat","isFinite","checkAndRemove","check_count","elem_data","index_no","classList","contains","parseInt","ret","name","xml","elem","getAttribute","nodeName","attributes","children","resetModal","elemModal","listen","getBS","hide","updateElem","focus","validate","innerText","show","setData","changeType","charttype","title","xlab","ylab","yval","xmin","xmax","xint","ymin","ymax","yint","defans","color","snapTo","where","wd","hd","find_index","defaultans_index","attributes_list","find","serialize","xval","attr","interval_array","int_interval","push","split","toString","Math","ceil","i","setAttr","class","xlabel","ylabel","xinterval","yinterval","defaultans","setCss","width","height","updateXML","element","checked","disabled","insert","xmlDom","setAttribute","removeAttribute","resetCorrectans","formatXml","XMLSerializer","serializeToString","JSON","parse","res","lspace","xaxis","cans","gpad","snapto","correctAns","multiColor","simple_plot","correctans","map","item","initial_point","end_point","inc_interval","chart","Highcharts","Chart","renderTo","animation","spacingRight","spacingLeft","credits","enabled","legend","text","tooltip","valueDecimals","formatter","round","y","xAxis","categories","gridLineWidth","lineColor","tickmarkPlacement","yAxis","lineWidth","allowDecimals","floor","tickInterval","minTickInterval","labels","opposite","series","data","draggableY","dragMinY","snapgrid","dragMaxY","minPointLength","plotOptions","enableMouseTracking","colorByPoint","cursor","borderColor","pointPadding","groupPadding","borderWidth","point","events","drop","x","setAnswerkey","drag","ht","update","pattern","dotClr","cxWdth","updatePoint","chart1","charts","forEach","xmax_val","arr_data","ymin_val","xmin_val","xaxisVal","addPoint","auth_last_value","setCategories","ans","idx","str","point_id","indexOf","slice","replace","substring","alert","mid","temp","set","undefined","formatted","lines","indent","lastType","transitions","single->single","single->closing","single->opening","single->other","closing->single","closing->closing","closing->opening","closing->other","opening->single","opening->closing","opening->opening","opening->other","other->single","other->closing","other->opening","other->other","ln","single","Boolean","match","closing","opening","fromTo","padding","j","substr","current","add","parentElement","fill_field","value_gt_one","value_gt_interval","value_gt_min","enter_number","border","background","readOnly","style","display","delete","edit_chart","ctx","moduleType","editorState","getChildXml","is_resource_added","auth_store","writable","subscribe","AH","beforeUpdate","xml_data","newXml","XMLToJSON","console","log","QXML","smxml","_color","_correctans","_defaultans","_height","_snapTo","_title","_width","_xinterval","_xlabel","_xmax","_xmin","_xval","_yinterval","_ylabel","_ymax","_ymin","_type","updateXmlAuthData","onMount","event","preventDefault","stopPropagation","keyCode","click","selectedIndex","afterUpdate","addScript","itemUrl","[object Object]","links"],"mappings":"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"}