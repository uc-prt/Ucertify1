import{S as e,i as t,s,F as a,e as l,j as n,q as i,h as c,u as r,f as o,T as d,g as m,x as h,o as u,D as f,b as g,l as p,c as b,m as x,t as v,a as y,d as _,E as A,a1 as w,p as k,X as E,A as z,w as C}from"./main-a1cb066e.js";import{I as F}from"./ItemHelper-4ba8e744.js";import{p as N}from"./parseCSV-2b69d250.js";const{document:S}=a;function $(e,t,s){const a=e.slice();return a[27]=t[s],a[29]=s,a}function B(e,t,s){const a=e.slice();return a[24]=t[s],a[26]=s,a}function R(e,t,s){const a=e.slice();return a[24]=t[s],a[26]=s,a}function D(e){let t,s=e[2].cdata.option,a=[];for(let t=0;t<s.length;t+=1)a[t]=j(R(e,s,t));return{c(){for(let e=0;e<a.length;e+=1)a[e].c();t=i()},m(e,s){for(let t=0;t<a.length;t+=1)a[t].m(e,s);c(e,t,s)},p(e,l){if(20&l){let n;for(s=e[2].cdata.option,n=0;n<s.length;n+=1){const i=R(e,s,n);a[n]?a[n].p(i,l):(a[n]=j(i),a[n].c(),a[n].m(t.parentNode,t))}for(;n<a.length;n+=1)a[n].d(1);a.length=s.length}},d(e){f(a,e),e&&u(t)}}}function j(e){let t,s,a,i,f=e[24].text.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"";return{c(){t=l("th"),s=r(f),o(t,"key",a=e[26]),o(t,"class",i=d("preview_header adjust_width "+("theme3"!==e[2].theme?e[24].id+"text-center text-white":e[24].id+"text-center"))+" svelte-1mishsz"),o(t,"tab-index","0"),m(t,"background-color",e[4][e[2].theme])},m(e,a){c(e,t,a),n(t,s)},p(e,a){4&a&&f!==(f=e[24].text.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"")&&h(s,f),4&a&&i!==(i=d("preview_header adjust_width "+("theme3"!==e[2].theme?e[24].id+"text-center text-white":e[24].id+"text-center"))+" svelte-1mishsz")&&o(t,"class",i),4&a&&m(t,"background-color",e[4][e[2].theme])},d(e){e&&u(t)}}}function I(e){let t,s=e[1].cdata.term,a=[];for(let t=0;t<s.length;t+=1)a[t]=M(B(e,s,t));return{c(){for(let e=0;e<a.length;e+=1)a[e].c();t=i()},m(e,s){for(let t=0;t<a.length;t+=1)a[t].m(e,s);c(e,t,s)},p(e,l){if(302&l){let n;for(s=e[1].cdata.term,n=0;n<s.length;n+=1){const i=B(e,s,n);a[n]?a[n].p(i,l):(a[n]=M(i),a[n].c(),a[n].m(t.parentNode,t))}for(;n<a.length;n+=1)a[n].d(1);a.length=s.length}},d(e){f(a,e),e&&u(t)}}}function J(e){let t,s,a,i,r,h,f,b,x,v,y,_,A,w,k,E,z,C,F,N,S,$,B,R;return{c(){t=l("td"),s=l("i"),i=g(),r=l("i"),f=g(),b=l("input"),k=g(),E=l("label"),o(s,"class","fa fa-check svelte-1mishsz"),o(s,"aria-hidden","true"),o(s,"style",a=L(e[3])),o(r,"class","fa fa-close svelte-1mishsz"),o(r,"aria-hidden","true"),o(r,"style",h=L(e[3])),o(b,"type","radio"),o(b,"class","test_radio CMRad"),o(b,"style",x="vertical-align:middle;"),b.value=v=e[27].id,o(b,"name",y="tm"+(e[26]+1)),o(b,"id",_="t"+e[26]+e[29]),o(b,"data-termid",A=e[24].id),o(b,"data-correct",w=e[24].correct),o(b,"data-userans",""),o(b,"data-role","none"),o(E,"tab-index","0"),o(E,"class",z="label_choice customRadCM "+(e[29]%2==0?"tureitemColorCM":"falseitemColorCM")),o(E,"for",C="t"+e[26]+e[29]),o(t,"key",F=e[29]),o(t,"id",N="tb"+e[26]+e[29]),o(t,"tabindex",S=0),o(t,"class",$=d("text-center test_area "+(e[27].id==e[24].correct?"dbg-success":"dbg-danger"))+" svelte-1mishsz"),m(t,"background-color",e[26]%2==0?e[5][e[2].theme]:"#FFF")},m(a,l){c(a,t,l),n(t,s),n(t,i),n(t,r),n(t,f),n(t,b),n(t,k),n(t,E),B||(R=p(b,"click",e[8]),B=!0)},p(e,s){2&s&&v!==(v=e[27].id)&&(b.value=v),2&s&&A!==(A=e[24].id)&&o(b,"data-termid",A),2&s&&w!==(w=e[24].correct)&&o(b,"data-correct",w),2&s&&$!==($=d("text-center test_area "+(e[27].id==e[24].correct?"dbg-success":"dbg-danger"))+" svelte-1mishsz")&&o(t,"class",$),4&s&&m(t,"background-color",e[26]%2==0?e[5][e[2].theme]:"#FFF")},d(e){e&&u(t),B=!1,R()}}}function M(e){let t,s,a,i,p,b,x,v=e[24].text.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"",y=e[1].cdata.option,_=[];for(let t=0;t<y.length;t+=1)_[t]=J($(e,y,t));return{c(){t=l("tr"),s=l("td"),a=r(v),p=g();for(let e=0;e<_.length;e+=1)_[e].c();b=g(),o(s,"class",i=d(e[24].id)+" svelte-1mishsz"),o(s,"tab-index","0"),m(s,"background-color",e[26]%2==0?e[5][e[2].theme]:"#FFF"),m(s,"font-size","14pt"),m(s,"vertical-align","middle"),m(s,"font-family",e[2].font),o(t,"key",x=e[26])},m(e,l){c(e,t,l),n(t,s),n(s,a),n(t,p);for(let e=0;e<_.length;e+=1)_[e].m(t,null);n(t,b)},p(e,l){if(2&l&&v!==(v=e[24].text.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"")&&h(a,v),2&l&&i!==(i=d(e[24].id)+" svelte-1mishsz")&&o(s,"class",i),4&l&&m(s,"background-color",e[26]%2==0?e[5][e[2].theme]:"#FFF"),4&l&&m(s,"font-family",e[2].font),302&l){let s;for(y=e[1].cdata.option,s=0;s<y.length;s+=1){const a=$(e,y,s);_[s]?_[s].p(a,l):(_[s]=J(a),_[s].c(),_[s].m(t,b))}for(;s<_.length;s+=1)_[s].d(1);_.length=y.length}},d(e){e&&u(t),f(_,e)}}}function O(e){let t,s,a,i,f,p,A,w,k,E,z,C,N,S,$,B,R,j,J=e[2].stem.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"";a=new F({props:{handleReviewClick:e[9],reviewMode:e[0]}}),a.$on("setReview",e[6]),a.$on("unsetReview",e[7]);let M=e[2].cdata&&D(e),O=e[1].cdata&&I(e);return{c(){t=l("main"),s=l("div"),b(a.$$.fragment),i=g(),f=l("center"),p=l("table"),A=l("thead"),w=l("tr"),k=l("th"),E=r(J),C=g(),M&&M.c(),N=g(),S=l("tbody"),O&&O.c(),o(k,"class",z=d("preview_header "+("theme3"!==e[2].theme?"text-center text-white":"text-center"))+" svelte-1mishsz"),o(k,"tab-index","0"),m(k,"background-color",e[4][e[2].theme]),o(w,"class","table-head"),o(p,"class",$="table table-bordered testmode_table "),o(p,"id","test_table"),o(p,"style",B="position:relative, margin-top:20px,width:"+e[2].maxWidth+"px};font-family: Georgia;"),o(s,"id","choicemain"),o(s,"style",R="margin-bottom:20px")},m(e,l){c(e,t,l),n(t,s),x(a,s,null),n(s,i),n(s,f),n(f,p),n(p,A),n(A,w),n(w,k),n(k,E),n(w,C),M&&M.m(w,null),n(p,N),n(p,S),O&&O.m(S,null),j=!0},p(e,[t]){const s={};1&t&&(s.reviewMode=e[0]),a.$set(s),(!j||4&t)&&J!==(J=e[2].stem.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"")&&h(E,J),(!j||4&t&&z!==(z=d("preview_header "+("theme3"!==e[2].theme?"text-center text-white":"text-center"))+" svelte-1mishsz"))&&o(k,"class",z),(!j||4&t)&&m(k,"background-color",e[4][e[2].theme]),e[2].cdata?M?M.p(e,t):(M=D(e),M.c(),M.m(w,null)):M&&(M.d(1),M=null),e[1].cdata?O?O.p(e,t):(O=I(e),O.c(),O.m(S,null)):O&&(O.d(1),O=null),(!j||4&t&&B!==(B="position:relative, margin-top:20px,width:"+e[2].maxWidth+"px};font-family: Georgia;"))&&o(p,"style",B)},i(e){j||(v(a.$$.fragment,e),j=!0)},o(e){y(a.$$.fragment,e),j=!1},d(e){e&&u(t),_(a),M&&M.d(),O&&O.d()}}}function W(){let e=document.getElementsByClassName("test_radio");for(let t=0;t<e.length;t++)e[t].getAttribute("id")==e[t].getAttribute("data-userans")?e[t].checked=!0:e[t].checked=!1}function q(){!function(){let e=document.querySelectorAll(" .test_radio");for(let t=0;t<e.length;t++)e[t].getAttribute("value")==e[t].getAttribute("data-correct")?e[t].checked=!0:e[t].checked=!1}(),G()}function G(){let e=document.getElementsByClassName("fa-check"),t=document.getElementsByClassName("fa-close");for(let s=0;s<e.length;s++)e[s].style.display="none",t[s].style.display="none"}function L(e){return 1==e?{paddingLeft:"14px",display:"inline-flex",position:"absolute"}:{paddingLeft:"15px",display:"none",position:"absolute"}}function P(e,t,s){let{showAns:a}=t,{editorState:l}=t,{xml:n}=t,{uxml:i}=t,{isReview:c}=t,r={cdata:""},o={};C({cdata:"",stem:"",xml:"",theme:"",font:"",maxWidth:"",totalcorrectans:""}).subscribe((e=>{s(2,o=e)}));function d(){W(),z.select(".dbg-success input","checked").forEach((e=>{z.siblings(e,".fa-check").forEach((e=>{e.style.display="inline-flex"}))})),z.select(".dbg-danger input","checked").forEach((e=>{z.siblings(e,".fa-close").forEach((e=>{e.style.display="inline-flex"}))})),z.selectAll(".dbg-success input, .dbg-danger input","removeAttr","as"),z.select(".dbg-success input","checked").forEach((e=>{e.setAttribute("as",1)})),z.select(".dbg-success input","checked").forEach((e=>{e.setAttribute("as",0)})),z.select(".dbg-success input","checked").forEach((e=>{z.siblings(e,".label_choice").forEach((e=>{e.setAttribute("title","is marked as correct")}))})),z.select(".dbg-danger input","checked").forEach((e=>{z.siblings(e,".label_choice").forEach((e=>{e.setAttribute("title","is marked as incorrect")}))}))}function m(){s(0,c=!0);let e=z.selectAll(" .test_radio");for(let t=0;t<e.length;t++)e[t].disabled=!0;d()}function h(){s(0,c=!1);let e=document.getElementsByClassName("test_radio");for(let t=0;t<e.length;t++)e[t].disabled=!1;G()}return A((()=>{var e;n!=o.xml&&(s(2,o.xml=n,o),e=i,function(e,t){s(2,o.theme=e.smxml._theme,o),s(2,o.font=e.smxml._font,o),s(2,o.maxWidth=e.smxml._maxwidth?e.smxml._maxwidth:800,o);let a=N.parseCSVFormat(e.smxml.__cdata),l=[];l=JSON.parse(JSON.stringify(a)),s(2,o.cdata=l,o),s(2,o.stem=l.stem,o),s(1,r.cdata=l,r);let n=r.cdata.term.length;if(s(2,o.totalcorrectans=n,o),h(),t)try{t=JSON.parse(t);let e=[];e=JSON.parse(JSON.stringify(t)),setTimeout((function(){e.ans.map((function(e,t){z.selectAll(".test_area #"+e.userAns,"attr",{"data-userans":e.userAns})})),W()}),100)}catch(e){}else{let e=document.getElementsByClassName("test_radio");for(let t=0;t<e.length;t++)e[t].checked=!1,e[t].setAttribute("data-userans","")}}(E(n),e))})),w((()=>{c||G()})),k((()=>{AI.listen("body","keydown",".label_choice",(function(e,t){13===t.which&&e.click()}))})),e.$$set=e=>{"showAns"in e&&s(10,a=e.showAns),"editorState"in e&&s(11,l=e.editorState),"xml"in e&&s(12,n=e.xml),"uxml"in e&&s(13,i=e.uxml),"isReview"in e&&s(0,c=e.isReview)},e.$$.update=()=>{1&e.$$.dirty&&(c?m():(W(),h()))},[c,r,o,undefined,{theme1:"#5B9BD5",theme2:"#3B67BC",theme3:"#F6C3A2",theme4:"#70AD47",theme5:"#745998"},{theme1:"#DEEAF6",theme2:"#D4DEF1",theme3:"#FAE0CF",theme4:"#E2EFD9",theme5:"#E1DAE9"},function(){m()},function(){W(),h()},function(e){let t=e.target.id,s=e.target.name,n=document.querySelectorAll(" .test_area input[name="+s+"]");for(let e=0;e<n.length;e++)n[e].setAttribute("data-userans","");z.selectAll(" .test_area #"+t,"attr",{"data-userans":t});let c={type:"34",ans:[]},r=document.getElementsByClassName("test_radio");for(let e=0;e<r.length;e++)1==r[e].checked&&c.ans.push({id:r[e].getAttribute("data-termid"),userAns:r[e].getAttribute("id")});document.getElementById("special_module_user_xml")&&(document.getElementById("special_module_user_xml").value=JSON.stringify(c)),function(){let e=function(){let e=0,t=0,s=document.getElementsByClassName("test_radio");for(let t=0;t<s.length;t++)if(s[t].getAttribute("value")==s[t].getAttribute("data-correct")){if(1!=s[t].checked)return e=0,s[t].setAttribute("as",0),!1;s[t].setAttribute("as",1),e=1}for(let e=0;e<s.length;e++)s[e].getAttribute("value")==s[e].getAttribute("data-correct")&&1==s[e].checked&&t++,"undefined"!=typeof calculatePoint&&calculatePoint(o.totalcorrectans,t);return e}();i?z.select("#answer").checked=e:l&&a(e?"Correct":"Incorrect")}()},function(e,t){"c"==e?q():d()},a,l,n,i]}export default class extends e{constructor(e){var a;super(),S.getElementById("svelte-1mishsz-style")||((a=l("style")).id="svelte-1mishsz-style",a.textContent=".fa-check.svelte-1mishsz{color:#46A546;position:relative;left:50px}.fa-close.svelte-1mishsz{color:#A80000;left:50px}.fa-close.svelte-1mishsz,.fa-check.svelte-1mishsz{margin-left:-26px;font-size:18px;position:relative;bottom:10px}.fa-close.svelte-1mishsz,.fa-check.svelte-1mishsz,.middle_align.svelte-1mishsz{vertical-align:middle!important}.middle_align.svelte-1mishsz{width:164px;min-width:164px}.topic_input.svelte-1mishsz{min-width:257px}.preview_header.svelte-1mishsz{font-size:16pt;font-weight:bold;vertical-align:middle}.adjust_width.svelte-1mishsz{width:10%;text-align:center}",n(S.head,a)),t(this,e,P,O,s,{showAns:10,editorState:11,xml:12,uxml:13,isReview:0})}}
//# sourceMappingURL=ChoiceMatrixPreview-b6b076c0.js.map
