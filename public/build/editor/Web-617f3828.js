import{S as SvelteComponent,i as init,s as safe_not_equal,F as append_styles,H as Dialog,I as binding_callbacks,K as bind,e as element,b as space,c as create_component,f as attr,h as insert,j as append,m as mount_component,l as listen,P as add_flush_callback,t as transition_in,a as transition_out,o as detach,d as destroy_component,y as run_all,E as beforeUpdate,p as onMount,A as AH,Z as onUserAnsChange,C as l,r as noop,w as writable,a7 as Loader,u as text,g as set_style,W as Button,x as set_data,a3 as Checkbox,k as group_outros,n as check_outros,Y as tick}from"./main-4096fa33.js";import{s as styleInject}from"./style-inject.es-1f59c1d0.js";import"./codemirror.min-f062d10a.js";import"./simplescrollbars-78bfa70b.js";var css_248z=".splitter_panel {\r\n  position: relative;\r\n}\r\n.splitter_panel .vsplitter {\r\n    background-color: grey;\r\n    cursor: col-resize;\r\n    z-index: 10;\r\n    width: 7px;\r\n}\r\n\r\n.splitter_panel .hsplitter {\r\n    background-color: #5F5F5F;\r\n    cursor: row-resize;\r\n    z-index: 98;\r\n    height: 7px;\r\n}\r\n.splitter_panel .vsplitter.splitter-invisible,\r\n.splitter_panel .hsplitter.splitter-invisible {\r\n    background: none;\r\n}\r\n.splitter_panel .vsplitter, .splitter_panel .left_panel, .splitter_panel .right_panel,\r\n.splitter_panel .hsplitter, .splitter_panel .top_panel, .splitter_panel .bottom_panel {\r\n    position: absolute;\r\n    overflow: auto;\r\n}\r\n.splitter_panel .vsplitter, .splitter_panel .left_panel, .splitter_panel .right_panel {\r\n  height: 100%;\r\n}\r\n.splitter_panel .hsplitter, .splitter_panel .top_panel, .splitter_panel .bottom_panel {\r\n  width: 100%;\r\n}\r\n.splitter_panel .top_panel, .splitter_panel .left_panel, .splitter_panel .vsplitter {\r\n   top: 0;\r\n}\r\n.splitter_panel .top_panel, .splitter_panel .bottom_panel, .splitter_panel .left_panel, .splitter_panel .hsplitter {\r\n   left: 0;\r\n}\r\n.splitter_panel .bottom_panel {\r\n   bottom: 0;\r\n}\r\n.splitter_panel .right_panel {\r\n   right: 0;\r\n}\r\n.splitterMask {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  z-index: 1000;\r\n}";function add_css(e){append_styles(e,"svelte-gqd0n6",".height44{height:44px}.cancel_btn_pop{background-color:lightgray!important}")}function create_if_block_1(e){let t;return{c(){t=element("div"),t.textContent=""+l.es6_warining,attr(t,"class","alert alert-danger")},m(e,a){insert(e,t,a)},p:noop,d(e){e&&detach(t)}}}function create_else_block(e){let t,a,n,s,r,i,o,c,d,p,m,u,g,h,_,f,b,v,y,x,w,A,k,S,C,H,$,E,j,T,M,O,L,D,I,q,B,N,z,R,V,W,X,J,F,P,U,Q,G,K,Y,Z,ee,te,ae,ne,le,se,re=(e[0].goDark?l.normal_mode:l.dark_mode)+"";return{c(){t=element("div"),a=element("div"),n=element("div"),s=element("div"),r=element("span"),i=element("span"),i.textContent=""+l.html_css_js,o=space(),c=element("div"),d=element("div"),p=element("button"),p.textContent=""+l.run,m=space(),u=element("div"),g=element("button"),g.innerHTML='<span class="icomoon-menu-2 s3 text-secondary pt-s d-block" id="dropdownMenuButton1"></span>',h=space(),_=element("ul"),f=element("li"),b=element("label"),v=element("input"),x=space(),w=element("span"),A=text(re),k=space(),S=element("div"),C=element("div"),H=element("div"),$=element("div"),E=element("div"),j=element("span"),j.textContent=""+l.html,T=space(),M=element("div"),M.innerHTML='<textarea name="html" id="html_editor"></textarea>',L=space(),D=element("div"),I=element("div"),q=element("span"),q.textContent=""+l.css,B=space(),N=element("div"),N.innerHTML='<textarea name="css" id="css_editor"></textarea>',R=space(),V=element("div"),W=element("div"),X=element("span"),X.textContent=""+l.js,J=space(),F=element("div"),F.innerHTML='<textarea name="js" id="js_editor"></textarea>',U=space(),Q=element("div"),G=element("div"),K=element("div"),Y=element("span"),Y.textContent=""+l.result,Z=space(),ee=element("div"),attr(r,"class","icomoon-coding-44px s3 align-middle mr-1"),attr(i,"class","align-middle"),attr(s,"class","mt-2 pt-1 pl-2 float-left"),attr(p,"type","button"),attr(p,"class","btn btn-primary runcode_btn ml mt-1"),attr(d,"class","inline-block pull-right"),attr(g,"class","btn border-0 px-0 ml-2 mr-2"),attr(g,"type","button"),attr(g,"data-bs-toggle","dropdown"),attr(v,"type","checkbox"),v.checked=y=e[0].goDark,attr(v,"id","goDark"),attr(v,"class","transparent h"),attr(b,"for","goDark"),attr(b,"class","dropdown-item mb-0 pointer"),attr(_,"class","dropdown-menu dropdown-menu-right"),attr(_,"x-placement","bottom-end"),attr(_,"aria-labelledby","dropdownMenuButton1"),attr(u,"class","float-right mt-2"),attr(c,"class","d-flex"),attr(n,"id","web_toolbar"),attr(n,"class","bg-light w-100 height44 web_toolbar text-dark d-flex justify-content-between"),attr(E,"class","card-header rounded-0"),attr(M,"id","html"),attr(M,"class","card-body code_box content-div m-0 p-0"),attr(M,"style",O="height: 347px "),attr($,"id","html_panel"),attr($,"class","card m-0 p-0 rounded-0"),attr(I,"class","card-header rounded-0"),attr(N,"id","css"),attr(N,"class","card-body code_box content-div m-0 p-0"),attr(N,"style",z="height: 347px"),attr(D,"id","css_panel"),attr(D,"class","card m-0 p-0 rounded-0"),attr(W,"class","card-header rounded-0"),attr(F,"id","js"),attr(F,"class","card-body code_box content-div m-0 p-0"),attr(F,"style",P="height: 347px "),attr(V,"id","js_panel"),attr(V,"class","card m-0 p-0 rounded-0"),attr(H,"id","firstEditorDiv"),set_style(H,"display","flex"),attr(C,"id","top_content"),attr(K,"class","card-header rounded-0"),attr(ee,"id","result_div"),attr(ee,"style",te="height: 347px"),attr(ee,"class","card-body content-div m-0 p-0 rounded-0"),attr(G,"class","card rounded-0 nm"),attr(Q,"id","bottom_content"),attr(Q,"style",ae="overflow: hidden"),attr(S,"id","accordion"),attr(S,"style",ne="width:100%; background:white; padding:0px;"),attr(a,"class","row"),attr(t,"class","container-fluid")},m(l,y){insert(l,t,y),append(t,a),append(a,n),append(n,s),append(s,r),append(s,i),append(n,o),append(n,c),append(c,d),append(d,p),append(c,m),append(c,u),append(u,g),append(u,h),append(u,_),append(_,f),append(f,b),append(b,v),append(b,x),append(b,w),append(w,A),append(a,k),append(a,S),append(S,C),append(C,H),append(H,$),append($,E),append(E,j),append($,T),append($,M),append(H,L),append(H,D),append(D,I),append(I,q),append(D,B),append(D,N),append(H,R),append(H,V),append(V,W),append(W,X),append(V,J),append(V,F),append(S,U),append(S,Q),append(Q,G),append(G,K),append(K,Y),append(G,Z),append(G,ee),le||(se=[listen(p,"click",e[4]),listen(v,"click",e[3])],le=!0)},p(e,t){1&t[0]&&y!==(y=e[0].goDark)&&(v.checked=y),1&t[0]&&re!==(re=(e[0].goDark?l.normal_mode:l.dark_mode)+"")&&set_data(A,re)},d(e){e&&detach(t),le=!1,run_all(se)}}}function create_if_block(e){let t,a,n,s,r,i,o,c,d,p,m,u,g,h,_,f,b,v,y,x,w,A,k,S,C,H,$,E,j,T,M,O,L,D,I,q,B,N,z,R,V,W,X,J,F,P,U=(e[0].goDark?l.normal_mode:l.dark_mode)+"";return{c(){t=element("div"),a=element("div"),n=element("div"),s=element("div"),r=element("span"),i=element("span"),i.textContent=""+l.html_css_js,o=space(),c=element("div"),d=element("button"),d.innerHTML='<span class="icomoon-menu-2 s3 text-secondary pt-s d-block"></span>',p=space(),m=element("ul"),u=element("li"),g=element("label"),h=element("input"),f=space(),b=element("span"),v=text(U),y=space(),x=element("div"),w=text("x`\r\n                        "),A=element("button"),A.textContent=""+l.run,k=space(),S=element("div"),C=element("ul"),H=element("li"),$=element("a"),$.textContent=""+l.html,E=space(),j=element("li"),T=element("a"),T.textContent=""+l.css,M=space(),O=element("li"),L=element("a"),L.textContent=""+l.js,D=space(),I=element("div"),I.innerHTML='<div id="firstEditorDiv"><div id="html_panel" class="m-0 p-0 rounded-0 tab-pane fade show active" role="tabpanel"><div id="html" class="card-body code_box content-div m-0 p-0" style="height: 347px"><textarea name="html" id="html_editor"></textarea></div></div> \n                            <div id="css_panel" class="m-0 p-0 rounded-0 tab-pane fade show" role="tabpanel"><div id="css" class="card-body code_box content-div m-0 p-0" style="height: 347px"><textarea name="css" class="css_text" id="css_editor"></textarea></div></div></div> \n                        <div id="jsEditorDiv"><div id="js_panel" class="m-0 p-0 rounded-0 tab-pane fade show" role="tabpanel"><div id="js" class="card-body code_box content-div m-0 p-0" style="height: 347px"><textarea name="js" id="js_editor"></textarea></div></div></div>',q=space(),B=element("div"),N=element("div"),z=element("div"),R=element("span"),R.textContent=""+l.result,V=space(),W=element("div"),attr(r,"class","icomoon-coding-44px s3 align-middle mr-1"),attr(i,"class","align-middle"),attr(s,"class","mt-2 pt pl-3 float-left"),attr(d,"class","btn border-0 px-0 ml-2 mr-2"),attr(d,"type","button"),attr(d,"data-toggle","dropdown"),attr(d,"id","dropdownMenuButton1"),attr(h,"type","checkbox"),h.checked=_=e[0].goDark,attr(h,"id","goDark"),attr(h,"class","position-absolute bg-transparent"),attr(g,"for","goDark"),attr(g,"class","dropdown-item mb-0 pointer"),attr(m,"class","dropdown-menu dropdown-menu-right"),attr(m,"x-placement","bottom-end"),attr(m,"aria-labelledby","dropdownMenuButton1"),attr(c,"class","float-right mt-2 mr-2"),attr(A,"type","button"),attr(A,"class","btn btn-primary runcode_btn ml"),attr(x,"class","inline-block pull-right"),attr(n,"id","web_toolbar"),attr(n,"class","bg-gray height44 web_toolbar text-dark"),attr($,"class","nav-link active text-white"),attr($,"href","#html_panel"),attr($,"role","tab"),attr($,"data-toggle","tab"),attr(H,"class","nav-item"),attr(H,"id","html_pane"),attr(T,"class","nav-link text-white"),attr(T,"href","#css_panel"),attr(T,"role","tab"),attr(T,"data-toggle","tab"),attr(j,"class","nav-item"),attr(j,"id","css_pane"),attr(L,"class","nav-link text-white"),attr(L,"href","#js_panel"),attr(L,"role","tab"),attr(L,"data-toggle","tab"),attr(O,"class","nav-item"),attr(O,"id","js_pane"),attr(C,"class","nav nav-pills nav-fill"),attr(C,"role","tablist"),attr(I,"id","top_content"),attr(I,"class","tab-content"),attr(z,"class","card-header rounded-0"),attr(W,"id","result_div"),attr(W,"style",X="min-height: 347px"),attr(W,"class","card-body content-div m-0 p-0 rounded-0"),attr(N,"class","card rounded-0 nm"),attr(B,"id","bottom_content"),attr(S,"style",J="width: 100%;background: white;"),attr(S,"class","content_parent"),attr(a,"class","row"),attr(t,"class","container-fluid"),attr(t,"id","mainContainer")},m(l,_){insert(l,t,_),append(t,a),append(a,n),append(n,s),append(s,r),append(s,i),append(n,o),append(n,c),append(c,d),append(c,p),append(c,m),append(m,u),append(u,g),append(g,h),append(g,f),append(g,b),append(b,v),append(n,y),append(n,x),append(x,w),append(x,A),append(a,k),append(a,S),append(S,C),append(C,H),append(H,$),append(C,E),append(C,j),append(j,T),append(C,M),append(C,O),append(O,L),append(S,D),append(S,I),append(S,q),append(S,B),append(B,N),append(N,z),append(z,R),append(N,V),append(N,W),F||(P=[listen(h,"click",e[3]),listen(A,"click",e[4])],F=!0)},p(e,t){1&t[0]&&_!==(_=e[0].goDark)&&(h.checked=_),1&t[0]&&U!==(U=(e[0].goDark?l.normal_mode:l.dark_mode)+"")&&set_data(v,U)},d(e){e&&detach(t),F=!1,run_all(P)}}}function create_default_slot_1(e){let t,a,n,s,r,i,o,c,d,p,m,u,g,h,_,f=l.calculate_answer+"",b=l.please_wait+"";return c=new Loader({props:{size:70}}),{c(){t=element("h4"),a=element("div"),n=element("div"),n.textContent=""+l.remediation,s=space(),r=element("div"),i=element("div"),o=element("center"),create_component(c.$$.fragment),d=space(),p=element("h4"),m=text(f),u=element("br"),g=space(),h=text(b),attr(a,"class","d-flex justify-content-between"),attr(t,"class","mt-1 font21 mb-4"),attr(i,"id","remediationModel"),set_style(r,"overflow-y","auto")},m(e,l){insert(e,t,l),append(t,a),append(a,n),insert(e,s,l),insert(e,r,l),append(r,i),append(i,o),mount_component(c,o,null),append(o,d),append(o,p),append(p,m),append(p,u),append(p,g),append(p,h),_=!0},p:noop,i(e){_||(transition_in(c.$$.fragment,e),_=!0)},o(e){transition_out(c.$$.fragment,e),_=!1},d(e){e&&detach(t),e&&detach(s),e&&detach(r),destroy_component(c)}}}function create_default_slot(e){let t,a=l.cancel+"";return{c(){t=text(a)},m(e,a){insert(e,t,a)},p:noop,d(e){e&&detach(t)}}}function create_footer_slot(e){let t,a,n;return a=new Button({props:{key:"cancel_btn",style:"float:right;margin:10px;b;",class:"cancel_btn_pop",variant:"contained",$$slots:{default:[create_default_slot]},$$scope:{ctx:e}}}),a.$on("click",e[11]),{c(){t=element("div"),create_component(a.$$.fragment),attr(t,"slot","footer"),attr(t,"class","footer"),set_style(t,"border-top","1px solid var(--divider, rgba(0, 0, 0, 0.1))")},m(e,l){insert(e,t,l),mount_component(a,t,null),n=!0},p(e,t){const n={};524288&t[1]&&(n.$$scope={dirty:t,ctx:e}),a.$set(n)},i(e){n||(transition_in(a.$$.fragment,e),n=!0)},o(e){transition_out(a.$$.fragment,e),n=!1},d(e){e&&detach(t),destroy_component(a)}}}function create_fragment(e){let t,a,n,l,s,r,i,o,c,d,p,m,u,g,h,_,f=(window.isIE||window.isIEEleven)&&create_if_block_1();let b=(window.inNative?create_if_block:create_else_block)(e);function v(t){e[12](t)}let y={width:"650",style:"background: #fff; border-radius: 5px;",$$slots:{footer:[create_footer_slot],default:[create_default_slot_1]},$$scope:{ctx:e}};return void 0!==e[0].remediationToggle&&(y.visible=e[0].remediationToggle),d=new Dialog({props:y}),binding_callbacks.push((()=>bind(d,"visible",v))),d.$on("close",e[13]),{c(){t=element("div"),a=element("div"),f&&f.c(),n=space(),l=element("button"),l.textContent="set review",s=space(),r=element("button"),r.textContent="unset review",i=space(),o=element("div"),b.c(),c=space(),create_component(d.$$.fragment),m=space(),u=element("input"),attr(l,"type","button"),attr(l,"class","h h-imp"),attr(l,"id","set-review"),attr(r,"type","button"),attr(r,"class","h h-imp"),attr(r,"id","unset-review"),attr(u,"type","hidden"),attr(u,"id","ansModeAnswer"),u.value="",attr(a,"id","authoringArea"),attr(a,"class","font14")},m(p,v){insert(p,t,v),append(t,a),f&&f.m(a,null),append(a,n),append(a,l),append(a,s),append(a,r),append(a,i),append(a,o),b.m(o,null),append(a,c),mount_component(d,a,null),append(a,m),append(a,u),g=!0,h||(_=[listen(l,"click",e[9]),listen(r,"click",e[10])],h=!0)},p(e,t){(window.isIE||window.isIEEleven)&&f.p(e,t),b.p(e,t);const a={};1&t[0]|524288&t[1]&&(a.$$scope={dirty:t,ctx:e}),!p&&1&t[0]&&(p=!0,a.visible=e[0].remediationToggle,add_flush_callback((()=>p=!1))),d.$set(a)},i(e){g||(transition_in(d.$$.fragment,e),g=!0)},o(e){transition_out(d.$$.fragment,e),g=!1},d(e){e&&detach(t),f&&f.d(),b.d(),destroy_component(d),h=!1,run_all(_)}}}function checkNewTestCase(e,t,a){let n=1;return e?t<a&&(n=0):t>a&&(n=0),0==t&&(n=0),n}function stringBetween(e,t,a){let n;n=a?new RegExp(t+"([\\s\\S]*?)"+a,"gm"):new RegExp("<"+t+">([\\s\\S]*?)</"+t+">","gm");let l=n.exec(e);return l?l[1]:null}function findAttribute(e,t,a=""){let n=new RegExp("<"+a+".*?"+t+'="(\\w.*?)".*?>',"gm").exec(e);return n?n[1]:null}function instance($$self,$$props,$$invalidate){let{inQuizPlayer:inQuizPlayer}=$$props,{xml:xml}=$$props,{uxml:uxml}=$$props,{isReview:isReview}=$$props;xml=uxml&&!/smans/gi.test(uxml)?uxml:xml;let rendered=0,mode="",htmlEditor,cssEditor,jsEditor,showHTML=1,readHTML=1,showCSS=1,readCSS=1,showJS=1,readJS=1,userAnswer="",isOldTestcase=!1,resultSaving,state={},stateData=writable({xml:"",uxml:"",module:"",toggle:!1,snackback:!1,lang_type:"php",xmlArr:[],remediationToggle:!1,qxml:"",titleData:"",stemData:"",remediationData:"",goDark:!(!window.sessionStorage.goDark||"true"!=window.sessionStorage.goDark)}),unsubscribe=stateData.subscribe((e=>{$$invalidate(0,state=e)}));function setReview(){answerCheckWeb(),htmlEditor&&htmlEditor.setOption("readOnly",!0),cssEditor&&cssEditor.setOption("readOnly",!0),jsEditor&&jsEditor.setOption("readOnly",!0)}function unsetReview(){"function"==typeof CodeMirror&&(htmlEditor&&htmlEditor.setOption("readOnly",!readHTML),cssEditor&&cssEditor.setOption("readOnly",!readCSS),jsEditor&&jsEditor.setOption("readOnly",!readJS))}function splitter(){if(window.inNative)return!0;if(showJS&&(showHTML||showCSS)){Split(["#top_content"],{sizes:[50],direction:"vertical"})}if(showHTML&&showCSS){Split(["#firstEditorDiv"],{sizes:[100],direction:"vertical"});Split(["#html_panel","#css_panel","#js_panel"],{sizes:[50,50,50]})}if(showHTML+showCSS+showJS==1){Split(["#accordion"],{sizes:[100],direction:"vertical"})}}function changeStyle(){window.inNative||(showJS&&(showHTML||showCSS)&&(document.getElementById("firstEditorDiv").style.cssText="float:left;width:50%",document.getElementById("jsEditorDiv").style.cssText="float:left;width:50%",document.getElementById("top_content").style.cssText="clear:both;overflow:auto"),showHTML&&showCSS&&(document.querySelector("#top_content").style.cssText="clear:both;overflow:auto",document.querySelector("#html_panel").style.cssText="float:left;width:50%",document.querySelector("#css_panel").style.cssText="float:left;width:50%"),showHTML+showCSS+showJS==1&&(document.querySelector("#top_content").style.cssText="float:left;width:60%",document.querySelector("#bottom_content").style.cssText="float:left;width:40%"))}function changeTheme(){console.log();let e=document.querySelector("#goDark").checked;$$invalidate(0,state.goDark=e,state),window.sessionStorage.goDark=e,e?(htmlEditor.setOption("theme","monokai"),cssEditor.setOption("theme","monokai"),jsEditor.setOption("theme","monokai")):(htmlEditor.setOption("theme","default"),cssEditor.setOption("theme","default"),jsEditor.setOption("theme","default"))}function newSource(){let e=htmlEditor.getValue(),t=["mp4","ogg","webm","mp3","wav"],a=["gif","tif","png","jpg","js"];return e=e.replace(/src[ ]*=[ ]*['"](.*?)['"]/gm,(function(e,n){if(n){for(let a=0;a<t.length;a++)if(n.indexOf(t[a])>-1)return e.replace(n,"https://s3.amazonaws.com/jigyaasa_content_stream/"+n);for(let t=0;t<a.length;t++)if(n.indexOf(a[t])>-1)return e.replace(n,"https://s3.amazonaws.com/jigyaasa_content_static/"+n)}return e})),e}function prepareSource(){try{let e="<div id='loader' style='position: fixed;width: 100%;height: 100vh;z-index: 9999;background-color:#fff;'>Loading...</div>"+newSource(),t=cssEditor.getValue(),a=jsEditor.getValue();return t=t.replace(/url\(['"](.*?)['"]\)/g,'url("https://s3.amazonaws.com/jigyaasa_content_static/$1")'),a=a.replace(/src.*?["'](.*?)["']/gi,'src = "https://s3.amazonaws.com/jigyaasa_content_static/$1"'),a="window.addEventListener(\"load\", function(ev) {\n                document.getElementById('loader').style.display = 'none';\n            });"+a,e+"<style>"+t+"</style><script>"+a+"<\/script>"}catch(e){return console.log({e:e,func:"prepareSource@393"}),""}}function renderCodeMirror(){if(rendered)return!0;if(cssEditor=CodeMirror.fromTextArea(document.getElementById("css_editor"),{lineNumbers:!0,mode:"css",styleActiveLine:!0,autoCloseBrackets:!0,lineWrapping:!0,scrollbarStyle:"simple",matchBrackets:!0,gutters:["CodeMirror-linenumbers","breakpoints"]}),htmlEditor=CodeMirror.fromTextArea(document.getElementById("html_editor"),{lineNumbers:!0,mode:"text/html",styleActiveLine:!0,autoCloseBrackets:!0,lineWrapping:!0,scrollbarStyle:"simple",matchBrackets:!0,gutters:["CodeMirror-linenumbers","breakpoints"]}),jsEditor=CodeMirror.fromTextArea(document.getElementById("js_editor"),{lineNumbers:!0,mode:"text/javascript",styleActiveLine:!0,autoCloseBrackets:!0,lineWrapping:!0,scrollbarStyle:"simple",matchBrackets:!0,gutters:["CodeMirror-linenumbers","breakpoints"]}),parseXML(),window.inNative&&window.getHeight&&window.getHeight(),"object"!=typeof htmlEditor||window.isReviewMode||htmlEditor.on("change",(function(){saveWebAnswer(htmlEditor.getValue(),"html")})),"object"!=typeof cssEditor||window.isReviewMode||cssEditor.on("change",(function(){saveWebAnswer(cssEditor.getValue(),"css")})),"object"!=typeof jsEditor||window.isReviewMode||jsEditor.on("change",(function(){saveWebAnswer(jsEditor.getValue(),"js")})),document.getElementById("aXml")){CodeMirror.fromTextArea(document.getElementById("aXml"),{lineNumbers:!1,mode:"application/xml",autoCloseBrackets:!0,lineWrapping:!0,matchBrackets:!0})}htmlEditor.setOption("extraKeys",{Tab(e){let t=Array(e.getOption("indentUnit")+3).join(" ");e.replaceSelection(t)},F11(e){e.setOption("fullScreen",!e.getOption("fullScreen"))},Esc(e){e.getOption("fullScreen")&&e.setOption("fullScreen",!1)}}),rendered=1}function remediationMode(){$$invalidate(0,state.remediationToggle=!0,state),runCode()}function answerCheckWeb(e=!0){let t={};t.u=resultSaving;let a=[];e&&runCode();let n=stringBetween(state.xml,'<autograde type="testcase">',"</autograde>");if(n){n=n?n.trim():"",n=n.replace(/<\/case>[\s\S]*?<case>/gm,";").replace(/<\/case>|<case>/g,""),n=n.split(";");for(let e in n)testcaseCheck(n[e])?a.push("<tr><td>Test Case"+(parseInt(e)+1)+"</td><td>Passed</td></tr>"):a.push("<tr><td>Test Case"+(parseInt(e)+1)+"</td><td>Failed</td></tr>")}let l=stringBetween(state.xml,'<autograde type="internal">',"</autograde>");if(l){l=l?l.trim():"",l=l.replace(/<\/case>[\s\S]*?<case>/gm,";").replace(/<\/case>|<case>/g,""),l=l.split(";");for(let e in l)internalCheck(l[e])?a.push("<tr><td>Internal Case"+(parseInt(e)+1)+"</td><td>Passed</td></tr>"):a.push("<tr><td>Internal Case"+(parseInt(e)+1)+"</td><td>Failed</td></tr>")}let s=stringBetween(state.xml,'<autograde type="custom">',"</autograde>");if(s){externalCheck(s.replace(/<case>|<\/case>/gm,""))?a.push("<tr><td>External Case</td><td>Passed</td></tr>"):a.push("<tr><td>External Case</td><td>Failed</td></tr>")}let r=a.join(""),i=null;/Failed/gi.test(r)?(t.a=!1,AI.select("#answer").checked=!1,i=!1):(t.a=!0,AI.select("#answer").checked=!0,i=!0),window.inNative&&window.getHeight&&window.getHeight(),window.inNative&&window.postMessage(JSON.stringify({userAnswers:document.getElementById("special_module_user_xml").value,inNativeIsCorrect:i}));let o='<table style="width:500px;" class="table"><thead class="thead-inverse"><tr style=\'background-color:#4285F4\'><th style=\'background-color:#4285F4\'>Test Case</th><th>Result</th></tr></thead>'+r+"</table>";return state.remediationToggle&&(document.getElementById("remediationModel").innerHTML=o),onUserAnsChange({uXml:t.u,ans:t.a}),o}function testcaseCheck(get_cases){let caseArr=get_cases.split("|"),fInp=0,test_func=caseArr[0],test_inp=caseArr[1],test_oup=caseArr[2],error={},js_data="";try{if("string"==typeof caseArr[1]&&caseArr[1].indexOf("{arr")<0?test_inp=caseArr[1].replace("{pip}","|").split(","):caseArr[1].indexOf("{arr")>-1?(test_inp=caseArr[1].replace(/\{arr|\}/g,"").split(","),fInp=1):test_inp=caseArr[1],js_data=jsEditor.getValue().trim(),js_data=js_data.replace(/document\.write.*/gm,""),!test_func||!test_inp||!test_oup)return error.validation="Invalid Test Cases",!1;if(null==typeof test_func)return error.func_check="Function case is undefined",!1;let e=new RegExp("function "+test_func+".*?\\)","g"),t=[];t=e.exec(js_data),t=t.join()}catch(e){error.function_exist="Given Function doesn't exist"}let eval_str="";try{eval_str="array"==typeof inp||"object"==typeof inp&&!fInp?js_data+"\n"+test_func+"("+test_inp.join()+");":fInp?js_data+"\n"+test_func+"(["+test_inp+"]);":js_data+"\n"+test_func+"("+test_inp+");";let actual_outp=eval(eval_str);return actual_outp==test_oup}catch(e){return error.output_error=e,!1}}function splitCase(e,t){return"style"==t?e.includes("$")?(isOldTestcase=!1,e.split("$")):(isOldTestcase=!0,e.split("{")):e.includes("?")?(isOldTestcase=!1,e.split("?")):(isOldTestcase=!0,e.split("|"))}function checkOldAttrTestCase(e,t,a,n){let l=htmlEditor.getValue().match(e),s=0;if(l){if(n){let e=[];l.map((t=>{t.replace(/\s/g,"").includes(n.replace(/\s/g,""))?e.push(t):console.log(t,n)})),l=e}s=a?l.length<t?0:1:l.length>t?0:1}return s}function internalCheck(e){let t,a=splitCase(e),n="";if(a[0].indexOf("style_match")>-1)return style_match(a[1],a[2],a[3]);if(a[0].indexOf("attr_match")>-1){if(a.length>4){for(t=2;t<a.length-1;t++)2==t?n+=a[t]:n=n+"?"+a[t];return attr_match(a[1],n,a[a.length-1])}return attr_match(a[1],a[2],a[3])}if(a.length>4){for(t=2;t<a.length-1;t++)2==t?n+=a[t]:n=n+"?"+a[t];return str_match(a[1],n,a[a.length-1])}return str_match(a[1],a[2],a[3])}function style_match(e,t,a){let n,l,s,r,i,o=1,c=document.getElementsByClassName("result_frame")[0].contentWindow.document;if(t.indexOf("::")>-1){let e=t.split("::");e[1],e[0]}if(t.indexOf(":hover")>-1||t.indexOf(":visited")>-1||t.indexOf(":active")>-1){n=t.lastIndexOf(":"),s=t.substring(0,n);let e=t.substring(n+1,t.length);if(l="."+e,!c.querySelector(s))return!1;{r=c.querySelector(s).nodeName.toLowerCase();let t=document.createElement(r);t.setAttribute("class",e),c.querySelector("body").appendChild(t)}let a=new RegExp(t+"[ ]*{([\\s\\S]*?)}","");if(!c.querySelector("style").innerHTML.replace(/\\n/,"").match(a))return!1;{let e=c.querySelector("style").innerHTML.replace(/\\n/,"").match(a)[0].replace(a,(function(e,t){return t})),t=document.createTextNode(l+"{"+e+"}");c.querySelector("style").appendChild(t)}}i=l&&c.querySelector("style").innerHTML.replace(/\\n/,"").match(l)?c.querySelector(l):c.querySelector(t);let d,p=splitCase(a,"style"),m=p[1];if(i&&(d=window.getComputedStyle(i).getPropertyValue(p[0])),t.indexOf(":hover")>-1||t.indexOf(":visited")>-1||t.indexOf(":active")>-1){let e=c.getElementsByClassName(class_name)[0];e.parentNode.removeChild(e),c.querySelector("style").innerHTML=c.querySelector("style").innerHTML.replace(/\\n/gm,"").replace(txt.textContent,"")}return d!=m&&(o=0),!!o}function attr_match(e,t,a){let n,l=1,s=0,r=0,i=0,o=0,c=!1,d=!1;try{if(t.indexOf("{1}")>-1&&(s=1,t=t.replace("{1}","")),t.indexOf("{2}")>-1&&(r=1,t=t.replace("{2}","")),t.indexOf("{3}")>-1&&(i=1,t=t.replace("{3}","")),t.indexOf("{4}")>-1&&(o=1,t=t.replace("{4}","")),a.indexOf("min")>-1?(d=!0,a=parseInt(a.replace("min",""))):a.indexOf("max")>-1&&(c=!0,a=parseInt(a.replace("max",""))),"HTML"==e){let e=document.getElementsByClassName("result_frame")[0].contentWindow.document;if(s){let n=e.getElementsByTagName(t).length;d?n<a&&(l=0):n>a&&(l=0)}else{let s,c,p=0,m="",u="";if(r){if(s=t.split("{"),s.length>2){for(n=1;n<s.length;n++)1==n?m+=s[n]:m=m+"{"+s[n];u+=m}else u+=s[1];if(isOldTestcase){l=checkOldAttrTestCase(new RegExp(`<.*?>(${s[0]})</.*?>`,"gi"),a,d)}else{for(c=e.querySelectorAll(s[0]),n=0;n<c.length;n++)c[n].innerHTML.toLowerCase().replace(/\s+/gm,"").trim().indexOf(u.toLowerCase().replace(/\s+/gm,"").trim())>-1&&p++;l=checkNewTestCase(d,p,a)}}else if(i)if(s=t.split("{"),isOldTestcase){if(l=checkOldAttrTestCase(new RegExp(s[0]+"(\\s*=\\s*)[\"']?((?:.(?![\"']?\\s+(?:\\S+)=|[>\"']))+.)[\"']?","gi"),a,d),!l){let e=new RegExp("<(\\w+)(.*?)>","gi"),t=htmlEditor.getValue().match(e);l=!(!t[0]||!t[0].includes(s[0]))}}else{for(c=e.querySelectorAll(s[0]),n=0;n<c.length;n++)c[n].hasAttribute(s[1])&&p++;l=checkNewTestCase(d,p,a)}else if(o)if(s=t.split("{"),isOldTestcase){s=t.split("$"),l=checkOldAttrTestCase(new RegExp(s[0]+"(\\s*=\\s*)[\"']?((?:.(?![\"']?\\s+(?:\\S+)=|[>\"']))+.)[\"']?","gi"),a,d,s[1])}else{for(c=e.querySelectorAll(s[0]),n=0;n<c.length;n++){let e=c[n].getAttribute(s[1])?c[n].getAttribute(s[1]):"";e=e.replace(/;/g,""),e.replace(/\s+/g,"").trim()==s[2].replace(/\s+/g,"").trim()&&p++}l=checkNewTestCase(d,p,a)}}}return!!l}catch(e){return console.log({error:e,func:"attr_match",Cause:"Old Case, need to convert like attr_match?HTML?TAG{ATTR{Value{MatchType}?MAX/MIN"}),!1}}function str_match(e,t,a){let n=1,l=0,s=0,r=0,i="",o=!1,c=!1,d=t;t.indexOf("{1}")>-1&&(l=1,t=t.replace("{1}","")),t.indexOf("{2}")>-1&&(s=1,t=t.replace("{2}","")),t.indexOf("{3}")>-1&&(r=1,t=t.replace("{3}","")),a.indexOf("min")>-1?(c=!0,a=parseInt(a.replace("min",""))):a.indexOf("max")>-1&&(o=!0,a=parseInt(a.replace("max","")));let p=t.split("");for(let e=0;e<p.length;e++)p[e].match(/\W/g)&&(p[e]="\\"+p[e]);t=p.join(""),"HTML"==e&&(i=t,t=s?t:r?"<"+t+".*?>.*?</"+t+">":l?"<"+t.replace("["," ").replace("]","")+"(| |/| /)>":"<"+t.replace("["," ").replace("]","")+">.*?</"+i+">");let m="",u="",g="",h="";try{m=new RegExp(t,"g"),u=htmlEditor.getValue().trim(),g=cssEditor.getValue().trim(),h=jsEditor.getValue().trim(),g=g.replace(/\n/gm,""),h=h.replace(/\ /g,"")}catch(e){return!1}if("HTML"==e)n=u.match(m)&&(u.match(m).length==a&&u||u.match(m).length<=a&&u&&u.match(m).length&&o||u.match(m).length>=a&&u&&u.match(m).length&&c)?1:0;else{if("CSS"==e){d=d.split("{");let e=[],t=0;g=g.replace(/\(.*?\)/gm,(function(e){return e.replace(/[ ]/gm,"")})),g=g.replace(/@/gm,"\n@"),g=g.replace(/@([\s\S]*?){([\s\S]*?){([\s\S]*?)}([\s\S]*?)}/gm,(function(t,a){let n=a;n=n.split(" ");let l=[];for(let e=0;e<n.length;e++)""!=n[e]&&l.push(n[e]);return l=l.join(" "),t=t.replace(a,l),e.push(t),t}));for(let a=0;a<e.length;a++){if(e[a].indexOf(d[0].trim())>-1){let n;if(d[1].indexOf(",")>-1){let t=d[1].split(",");for(let l=0;l<t.length&&(n=e[a].indexOf(t[l].trim()),!(n<0));l++);}else n=e[a].indexOf(d[1].trim());if(n>-1){let n=!1;if(e[a].indexOf(d[2].trim())>-1){let t=e[a].indexOf(d[2].trim());"-"!==e[a].charAt(t-1)&&(n=!0)}n&&(t+=1)}}}return t==a}n=h.match(m)&&(h.match(m).length==a||h.match(m).length<=a&&h&&h.match(m).length&&o||h.match(m).length>=a&&h&&h.match(m).length&&c)?1:0}return!!n}function externalCheck(get_cases){try{let re=/var flagONN/gm,js_data=jsEditor.getValue().trim(),result;return js_data=js_data.replace(/^.*?body.*?\\n/gm,""),js_data=js_data.replace(/document\.write.*/gm,""),result=re.test(get_cases)?eval(get_cases):eval(js_data+"\n"+get_cases),result}catch(e){return console.log({msg:e,func:"externalCheck@1108"}),!1}}function runCode(){window.scroll({top:500,behavior:"smooth"});let e=new Date;e=e.getTime();let t="uC"+e;AH.select("#result_div").innerHTML='<iframe class="result_frame w-100 border-0" style="height:347px" id="'+t+'"></iframe>';let a=prepareSource(),n=document.querySelector("#uC"+e);n.onload=answerCheckWeb.bind(this,!1);let l=n.contentDocument;l.open(),l.write(a),l.close()}function parseXML(e){console.log("checking");let t=stringBetween(e=e||state.xml,"tag");htmlEditor.setValue(t?t.trim():"");let a=stringBetween(e,"css");cssEditor.setValue(a?a.trim():"");let n=stringBetween(e,"js");jsEditor.setValue(n?n.trim():"");let l=findAttribute(e,"disable","web");/html/g.test(l)&&(readHTML=0,htmlEditor.setOption("readOnly",!0)),/js/g.test(l)&&(readJS=0,jsEditor.setOption("readOnly",!0)),/css/g.test(l)&&(readCSS=0,cssEditor.setOption("readOnly",!0));let s=findAttribute(e,"hide","web");s=s||",,",s=s.split(","),hideEditors(parseInt(s[0]),parseInt(s[1]),parseInt(s[2])),setTimeout((function(){changeTheme()}),100)}function hideEditors(e=1,t=1,a=1){if(showHTML=isNaN(e)?1:e,showCSS=isNaN(t)?1:t,showJS=isNaN(a)?1:a,window.inNative)return showHTML||AH.selectAll("#html_panel,#html_pane,#css_panel","hide"),showCSS||AH.selectAll("#css_panel,#css_pane,#js_panel","hide"),showJS||AH.selectAll("#js_panel,#js_pane,#css_panel","hide"),void(showHTML&&showCSS&&showJS&&AH.selectAll("#css_panel,#js_panel","hide"));showHTML||(AH.select("#html_panel","hide"),Split(["#css_panel","#js_panel"],{sizes:[50,50]})),showCSS||(AH.select("#css_panel","hide"),Split(["#html_panel","#js_panel"],{sizes:[50,50]})),showJS||(AH.selectAll("#js_panel","hide"),Split(["#css_panel","#html_panel"],{sizes:[50,50]})),showCSS||showJS||(AH.selectAll("#css_panel,#js_panel","hide"),Split(["#top_content","#bottom_content"],{sizes:[50,50]}),AH.select("#accordion","css",{display:"flex"}),Split(["#html_panel"],{sizes:[100]}),AH.select("#top_content","css",{height:"100%"}),AH.select("#firstEditorDiv","removeAttr","display")),showCSS||showHTML||(AH.selectAll("#css_panel,#html_panel","hide"),Split(["#top_content","#bottom_content"],{sizes:[50,50]}),AH.select("#accordion","css",{display:"flex"}),Split(["#js_panel"],{sizes:[100]}),AH.select("#top_content","css",{height:"100%"}),AH.select("#firstEditorDiv","removeAttr","display")),showHTML||showJS||(AH.select("#firstEditorDiv","removeAttr","display"),AH.selectAll("#js_panel,#html_panel","hide"),Split(["#top_content","#bottom_content"],{sizes:[50,50]}),AH.select("#accordion","css",{display:"flex"}),Split(["#css_panel"],{sizes:[100]}),AH.select("#top_content","css",{height:"100%"}),AH.select("#firstEditorDiv","removeAttr","display"))}function saveWebAnswer(e,t){let a,n=!/smans/g.test(uxml)&&uxml?uxml:xml,l="";l="html"==t?n.replace(/<tag>[\s\S]*?<\/tag>/g,"<tag>"+e+"</tag>"):"css"==t?n.replace(/<css>[\s\S]*?<\/css>/g,"<css>"+e+"</css>"):n.replace(/<js>[\s\S]*?<\/js>/g,"<js>"+e+"</js>"),window.inNative&&window.getHeight&&window.getHeight(),ISSPECIALMODULEUSERXMLCHANGE=1,AH.select("#special_module_user_xml").value=l,a=userAnswer=AH.select("#special_module_user_xml").value,window.inNative&&(window.postMessage("height___"+document.getElementsByClassName("container-fluid")[0].offsetHeight,"*"),window.postMessage(JSON.stringify({userAnswers:a,inNativeIsCorrect:!1}),"*")),$$invalidate(6,uxml=l),resultSaving=l}beforeUpdate((()=>{if(xml!=state.xml)if($$invalidate(0,state.xml=xml,state),isReview){let e=setTimeout(function(){setReview(),clearTimeout(e)}.bind(this),1e3)}else{let e=setTimeout(function(){unsetReview(),clearTimeout(e)}.bind(this),200)}})),onMount((()=>{mode=document.querySelector(".switch-input.switch-input"),window.inNative&&(window.getHeight&&window.getHeight(),document.querySelector("#html_pane").addEventListener("click",(function(e){AI.select(e).querySelector("a").classList.remove("active"),AH.select("#css_panel","css",{display:"none"}),AH.select("#js_panel","css",{display:"none"}),AH.select("#html_panel","css",{display:"block"}),document.querySelect("#html_panel").querySelector("a").classList.add("active");let t=htmlEditor.getValue();htmlEditor.setValue(t)})),document.querySelector("#html_pane").addEventListener("click",(function(e){AI.select(e).querySelect("a").classList.remove("active"),AH.select("#html_panel","css",{display:"none"}),AH.select("#js_panel","css",{display:none});let t=document.getElementById("css_panel");t.style.display="block",t.querySelector("a").classList.add("active");let a=cssEditor.getValue();cssEditor.setValue(a)})),document.querySelector("#js_pane").addEventListener("click",(function(e){AI.select(e).querySelector("a").classList.remove("active"),AH.select("#css_panel","css",{display:"none"}),AH.select("#html_panel","css",{display:"none"});let t=AH.select("#js_panel");t.style.display="block",t.querySelect("a").classlist.add("active");let a=jsEditor.getValue();jsEditor.setValue(a)})),window.inNative&&setTimeout((function(){window.postMessage("height___"+document.getElementById("#mainContainer").offsetHeight,"*")}),500)),"function"==typeof CodeMirror?renderCodeMirror():AI.ajax({url:itemUrl+"src/libs/codemirror.js"}).then((function(e){let t=document.createElement("script");t.innerHTML=e,document.body.appendChild(t),renderCodeMirror()})),AI.ajax({url:itemUrl+"src/libs/split.js"}).then((function(e){if(document.querySelector("#splitterWeb"))return splitter(),!0;let t=document.createElement("script");t.innerHTML=e,document.body.appendChild(t),inQuizPlayer?changeStyle():splitter()})),AI.listen(document,"click","#answerCheck",(function(){remediationMode()})),window.save_data=function(){"function"==typeof CodeMirror&&answerCheckWeb()}}));const click_handler=()=>{setReview()},click_handler_1=()=>{unsetReview()},click_handler_2=()=>$$invalidate(0,state.remediationToggle=!1,state);function dialog_visible_binding(e){$$self.$$.not_equal(state.remediationToggle,e)&&(state.remediationToggle=e,$$invalidate(0,state))}const close_handler=()=>$$invalidate(0,state.remediationToggle=!1,state);return $$self.$$set=e=>{"inQuizPlayer"in e&&$$invalidate(7,inQuizPlayer=e.inQuizPlayer),"xml"in e&&$$invalidate(5,xml=e.xml),"uxml"in e&&$$invalidate(6,uxml=e.uxml),"isReview"in e&&$$invalidate(8,isReview=e.isReview)},[state,setReview,unsetReview,changeTheme,runCode,xml,uxml,inQuizPlayer,isReview,click_handler,click_handler_1,click_handler_2,dialog_visible_binding,close_handler]}styleInject(css_248z);class WebPreview extends SvelteComponent{constructor(e){super(),init(this,e,instance,create_fragment,safe_not_equal,{inQuizPlayer:7,xml:5,uxml:6,isReview:8},add_css,[-1,-1])}}function create_default_slot$1(e){let t;return{c(){t=text("Dark Theme")},m(e,a){insert(e,t,a)},d(e){e&&detach(t)}}}function create_fragment$1(e){let t,a,n,s,r,i,o,c,d,p,m,u,g,h,_,f,b,v,y,x,w,A,k,S,C,H,$,E,j,T,M,O,L,D,I,q,B,N,z,R,V,W,X,J,F,P,U,Q,G,K,Y,Z,ee,te,ae,ne,le,se,re,ie,oe,ce,de,pe,me,ue,ge,he,_e,fe,be,ve,ye,xe,we,Ae,ke,Se,Ce,He,$e,Ee,je,Te,Me,Oe,Le,De,Ie,qe,Be,Ne,ze,Re,Ve,We,Xe,Je,Fe,Pe,Ue,Qe,Ge,Ke,Ye,Ze,et,tt,at,nt,lt,st,rt,it,ot,ct,dt,pt,mt,ut,gt,ht,_t,ft,bt,vt,yt,xt,wt,At,kt,St,Ct,Ht,$t,Et,jt,Tt,Mt,Ot,Lt=l.run+"";return b=new Checkbox({props:{checked:e[0].goDark,id:"goDark",$$slots:{default:[create_default_slot$1]},$$scope:{ctx:e}}}),b.$on("click",e[1]),{c(){t=element("div"),a=element("div"),n=element("div"),s=element("div"),r=element("div"),i=element("div"),o=element("button"),o.textContent=""+l.autograde,c=space(),d=element("div"),p=element("button"),p.textContent=""+l.disable,m=space(),u=element("div"),g=element("input"),h=space(),_=element("div"),f=element("span"),create_component(b.$$.fragment),v=space(),y=element("div"),x=element("button"),w=element("i"),A=space(),k=text(Lt),S=space(),C=element("div"),H=element("div"),$=element("div"),E=element("div"),j=element("div"),T=element("span"),T.textContent=""+l.html,M=space(),O=element("div"),O.innerHTML='<textarea name="html" id="html_editor"></textarea>',L=space(),D=element("div"),I=element("div"),q=element("span"),q.textContent=""+l.css,B=space(),N=element("div"),N.innerHTML='<textarea name="css" id="css_editor"></textarea>',z=space(),R=element("div"),V=element("div"),W=element("span"),W.textContent=""+l.js,X=space(),J=element("div"),J.innerHTML='<textarea name="js" id="js_editor"></textarea>',F=space(),P=element("div"),U=element("div"),Q=element("div"),G=element("span"),G.textContent=""+l.result,K=space(),Y=element("div"),Z=space(),ee=element("div"),te=element("div"),ae=element("div"),ne=element("div"),le=element("h4"),se=element("label"),se.textContent=""+l.autograde,re=space(),ie=element("input"),oe=space(),ce=element("button"),ce.textContent="×",de=space(),pe=element("div"),me=element("div"),ue=element("div"),ge=element("div"),he=element("h4"),_e=element("a"),_e.textContent=""+l.testcases,fe=space(),be=element("span"),ve=space(),ye=element("div"),xe=element("div"),we=element("textarea"),Ae=space(),ke=element("div"),Se=element("div"),Ce=element("h4"),He=element("a"),He.textContent=""+l.internalScript,$e=space(),Ee=element("span"),je=space(),Te=element("div"),Me=element("div"),Oe=element("textarea"),Le=space(),De=element("div"),Ie=element("div"),qe=element("h4"),Be=element("a"),Be.textContent=""+l.externalScript,Ne=space(),ze=element("span"),Re=space(),Ve=element("div"),We=element("div"),Xe=element("textarea"),Je=space(),Fe=element("div"),Fe.innerHTML='<button type="button" class="btn btn-primary" data-bs-dismiss="modal" name="done_grading_btn" id="done_grading_btn">Done</button>',Pe=space(),Ue=element("div"),Qe=element("div"),Ge=element("div"),Ke=element("div"),Ye=element("h4"),Ye.textContent=""+l.disable,Ze=space(),et=element("button"),et.textContent="×",tt=space(),at=element("div"),nt=element("div"),lt=element("label"),lt.textContent=l.html+":",st=space(),rt=element("select"),it=element("option"),it.textContent=""+l.editable,ot=element("option"),ot.textContent=""+l.hidden,ct=element("option"),ct.textContent=""+l.disabled,dt=space(),pt=element("div"),mt=element("label"),mt.textContent=l.css+":",ut=space(),gt=element("select"),ht=element("option"),ht.textContent=""+l.editable,_t=element("option"),_t.textContent=""+l.hidden,ft=element("option"),ft.textContent=""+l.disabled,bt=space(),vt=element("div"),yt=element("label"),yt.textContent=l.js+":",xt=space(),wt=element("select"),At=element("option"),At.textContent=""+l.editable,kt=element("option"),kt.textContent=""+l.hidden,St=element("option"),St.textContent=""+l.disabled,Ct=space(),Ht=element("div"),$t=element("button"),$t.textContent=""+l.done,Et=space(),jt=element("input"),attr(o,"type","button"),attr(o,"data-bs-toggle","modal"),attr(o,"data-bs-target","#autograde_modal"),attr(o,"data-cy","autograde_modal"),attr(o,"class","btn btn-primary mr-2"),attr(i,"class","inline-block pull-left"),attr(p,"type","button"),attr(p,"data-bs-toggle","modal"),attr(p,"data-bs-target","#disable_modal"),attr(p,"data-cy","disable_modal"),attr(p,"class","btn btn-primary mr-2"),attr(d,"class","inline-block pull-left"),attr(g,"type","text"),attr(g,"id","launch_caption"),attr(g,"class","form-control"),attr(g,"placeholder","Caption"),attr(u,"class","inline-block pull-left width150"),attr(f,"class","themeStyle form-check form-check-inline"),attr(_,"class","inline-block width150 relative bottom6 pull-left ml-lg"),attr(_,"data-cy","goDark"),attr(w,"class","fa fa-code"),attr(x,"type","button"),attr(x,"class","btn btn-primary ml"),attr(y,"class","inline-block pull-right"),attr(r,"id","web_toolbar"),set_style(r,"height","50px"),attr(r,"class","bg-light w-100 p-2"),attr(j,"class","card-header rounded-0"),attr(O,"id","html"),attr(O,"class","card-body code_box content-div m-0 p-0"),set_style(O,"height","347px"),attr(E,"id","html_panel"),attr(E,"class","card m-0 p-0 rounded-0"),attr(I,"class","card-header rounded-0"),attr(N,"id","css"),attr(N,"class","card-body code_box content-div m-0 p-0"),set_style(N,"height","347px"),attr(D,"id","css_panel"),attr(D,"class","card m-0 p-0 rounded-0"),attr(V,"class","card-header rounded-0"),attr(J,"id","js"),attr(J,"class","card-body code_box content-div m-0 p-0"),set_style(J,"height","347px"),attr(R,"id","js_panel"),attr(R,"class","card m-0 p-0 rounded-0"),attr($,"id","firstEditorDiv"),set_style($,"display","flex"),attr(H,"id","top_content"),attr(Q,"class","card-header rounded-0"),attr(Y,"id","result_div"),set_style(Y,"min-height","351px"),attr(Y,"class","card-body content-div m-0 p-0 rounded-0"),attr(U,"class","card rounded-0 nm"),attr(P,"id","bottom_content"),attr(C,"id","wrap"),set_style(C,"width","100%"),set_style(C,"background","white"),set_style(C,"padding","0px"),attr(s,"class","row"),attr(n,"class","container-fluid"),attr(se,"for","autograde_cb"),attr(se,"class","form-check-label pr-2"),attr(ie,"type","checkbox"),attr(ie,"name","autograde_cb"),attr(ie,"id","autograde_cb"),attr(ie,"class","form-check-input"),attr(le,"class","modal-title form-check form-check-inline"),attr(ce,"type","button"),attr(ce,"class","close"),attr(ce,"data-bs-dismiss","modal"),attr(ce,"aria-hidden","true"),attr(ce,"id","close_dialog_btn"),attr(ce,"auto:focus","autofocus"),attr(ne,"class","modal-header"),attr(_e,"class","text-dark"),attr(_e,"data-bs-toggle","collapse"),attr(_e,"data-bs-parent","#grade_accordion"),attr(_e,"href","#test_case_collapse"),attr(be,"class","icomoon-help float-right s4"),attr(be,"data-bs-toggle","tooltip"),attr(be,"title","custom function name|input1,input2,..inputN|Output"),attr(be,"data-bs-placement","left"),attr(he,"class","panel-title"),attr(ge,"class","card-header"),attr(ge,"data-bs-toggle","collapse"),attr(ge,"data-bs-target","#test_case_collapse"),attr(we,"id","test_case_text"),attr(we,"class","form-control"),set_style(we,"maxHeight","150px"),set_style(we,"minHeight","80px"),attr(we,"placeholder","custom function name|input1,input2,..inputN|Output"),we.disabled="disabled",attr(xe,"class","card-body p-md"),attr(ye,"id","test_case_collapse"),attr(ye,"class","collapse in"),attr(ue,"class","card mb-2"),attr(He,"class","text-dark"),attr(He,"data-bs-toggle","collapse"),attr(He,"data-bs-parent","#grade_accordion"),attr(He,"href","#internal_script_collapse"),attr(Ee,"class","icomoon-help float-right s4"),attr(Ee,"data-bs-toggle","tooltip"),attr(Ee,"title","1. attr_match?HTML?tag name{1}?occurance.(for tag match)\r2. attr_match?HTML?tag name{string that has to be check inside tag's innerHTML{2}?occurance.(for string match inside perticular tag) \r3. attr_match?HTML?tag name{attribute{3}?occurance.(for attribute match of perticular tag) \r4. attr_match?HTML?tag name{attribute{value{4}?occurance.(for match attribute with value of particular tag) \r5. str_match?HTML?string to be match in hole html part{2}?occurence.(for string match in hole HTML document)\r6. str_match?CSS?media query's string{selector{property?occurence.(for string match in hole css document only for media query) \r7. style_match?CSS?selector?property{value.(match property with value for CSS of perticular CSS selector) \r8. str_match?JS?string to be match in hole JS part?occurance.(for string match in hole js part) \rNote: occurance => \r (i) For HTML it should be 'min+number' or 'max+number' such as 'min1' or 'max1' and so on. \r(ii) For CSS it should be number such as 1 or 2 or .... \r(iii) For JS it should be 'min+number', 'max+number' or 'only number' according to condition for match. \r(iv) Here {1}  is flag for check tag, {2} is flag for check string but with attr_match it checks string inside given tag's innerHTML but with str_match it checks in hole document, flag {3} is for check attribute, flag {4} is for check attribute with value For match in HTML document."),attr(Ee,"data-bs-placement","left"),attr(Ce,"class","panel-title"),attr(Se,"class","card-header"),attr(Se,"data-bs-toggle","collapse"),attr(Se,"data-bs-target","#internal_script_collapse"),attr(Oe,"id","occurence_text"),attr(Oe,"class","form-control"),set_style(Oe,"max-height","150px"),set_style(Oe,"min-height","80px"),attr(Oe,"placeholder","function as suggested in help block?Lang?keyword?occurance"),Oe.disabled="disabled",attr(Me,"class","card-body p-md"),attr(Te,"id","internal_script_collapse"),attr(Te,"class","panel-collapse collapse"),attr(ke,"class","card mb-2"),attr(Be,"class","text-dark"),attr(Be,"data-bs-toggle","collapse"),attr(Be,"data-bs-parent","#grade_accordion"),attr(Be,"href","#external_script_collapse"),attr(ze,"class","icomoon-help float-right s4"),attr(ze,"data-bs-toggle","tooltip"),attr(ze,"title","Write your own script"),attr(ze,"data-bs-placement","left"),attr(qe,"class","panel-title"),attr(Ie,"class","card-header"),attr(Ie,"data-bs-toggle","collapse"),attr(Ie,"data-bs-target","#external_script_collapse"),attr(Xe,"id","exscript_text"),attr(Xe,"class","form-control"),set_style(Xe,"max-height","150px"),set_style(Xe,"min-height","80px"),attr(Xe,"placeholder","Write your own script"),Xe.disabled="disabled",Xe.value="\r\n                                    ",attr(We,"class","card-body p-md"),attr(Ve,"id","external_script_collapse"),attr(Ve,"class","panel-collapse collapse"),attr(De,"class","card mb-2"),attr(me,"class","panel-group"),attr(me,"id","grade_accordion"),attr(pe,"class","modal-body overflow-auto"),attr(Fe,"class","modal-footer"),attr(ae,"class","modal-content"),attr(te,"class","modal-dialog modal-lg modal-dialog-centered"),attr(ee,"id","autograde_modal"),attr(ee,"class","modal fade"),attr(ee,"role","dialog"),attr(Ye,"class","modal-title"),attr(et,"type","button"),attr(et,"class","close"),attr(et,"data-bs-dismiss","modal"),attr(et,"aria-hidden","true"),attr(Ke,"class","modal-header"),attr(lt,"for","html_disable"),it.__value="",it.value=it.__value,ot.__value="0",ot.value=ot.__value,ct.__value="1",ct.value=ct.__value,attr(rt,"class","form-control"),attr(rt,"id","html_disable"),attr(rt,"data-cy","html_disable"),attr(rt,"auto:focus","autofocus"),attr(nt,"class","form-group"),attr(mt,"for","css_disable"),ht.__value="",ht.value=ht.__value,_t.__value="0",_t.value=_t.__value,ft.__value="1",ft.value=ft.__value,attr(gt,"class","form-control"),attr(gt,"id","css_disable"),attr(gt,"data-cy","css_disable"),attr(pt,"class","form-group"),attr(yt,"for","js_disable"),At.__value="",At.value=At.__value,kt.__value="0",kt.value=kt.__value,St.__value="1",St.value=St.__value,attr(wt,"class","form-control"),attr(wt,"id","js_disable"),attr(wt,"data-cy","js_disable"),attr(vt,"class","form-group"),attr($t,"type","button"),attr($t,"class","btn btn-primary"),attr($t,"data-cy","close_modal"),attr($t,"data-bs-dismiss","modal"),attr(Ht,"class","float-right"),attr(at,"class","modal-body"),attr(Ge,"class","modal-content"),attr(Qe,"class","modal-dialog modal-sm modal-dialog-centered"),attr(Ue,"id","disable_modal"),attr(Ue,"class","modal fade"),attr(Ue,"role","dialog"),attr(jt,"type","hidden"),attr(jt,"id","ansModeAnswer"),jt.value="",attr(t,"id","authoringArea"),set_style(t,"line-height","20px"),set_style(t,"font-size","14px")},m(l,Lt){insert(l,t,Lt),append(t,a),append(a,n),append(n,s),append(s,r),append(r,i),append(i,o),append(r,c),append(r,d),append(d,p),append(r,m),append(r,u),append(u,g),append(r,h),append(r,_),append(_,f),mount_component(b,f,null),append(r,v),append(r,y),append(y,x),append(x,w),append(x,A),append(x,k),append(s,S),append(s,C),append(C,H),append(H,$),append($,E),append(E,j),append(j,T),append(E,M),append(E,O),append($,L),append($,D),append(D,I),append(I,q),append(D,B),append(D,N),append($,z),append($,R),append(R,V),append(V,W),append(R,X),append(R,J),append(C,F),append(C,P),append(P,U),append(U,Q),append(Q,G),append(U,K),append(U,Y),append(t,Z),append(t,ee),append(ee,te),append(te,ae),append(ae,ne),append(ne,le),append(le,se),append(le,re),append(le,ie),append(ne,oe),append(ne,ce),append(ae,de),append(ae,pe),append(pe,me),append(me,ue),append(ue,ge),append(ge,he),append(he,_e),append(he,fe),append(he,be),append(ue,ve),append(ue,ye),append(ye,xe),append(xe,we),append(me,Ae),append(me,ke),append(ke,Se),append(Se,Ce),append(Ce,He),append(Ce,$e),append(Ce,Ee),append(ke,je),append(ke,Te),append(Te,Me),append(Me,Oe),append(me,Le),append(me,De),append(De,Ie),append(Ie,qe),append(qe,Be),append(qe,Ne),append(qe,ze),append(De,Re),append(De,Ve),append(Ve,We),append(We,Xe),append(ae,Je),append(ae,Fe),append(t,Pe),append(t,Ue),append(Ue,Qe),append(Qe,Ge),append(Ge,Ke),append(Ke,Ye),append(Ke,Ze),append(Ke,et),append(Ge,tt),append(Ge,at),append(at,nt),append(nt,lt),append(nt,st),append(nt,rt),append(rt,it),append(rt,ot),append(rt,ct),append(at,dt),append(at,pt),append(pt,mt),append(pt,ut),append(pt,gt),append(gt,ht),append(gt,_t),append(gt,ft),append(at,bt),append(at,vt),append(vt,yt),append(vt,xt),append(vt,wt),append(wt,At),append(wt,kt),append(wt,St),append(at,Ct),append(at,Ht),append(Ht,$t),append(t,Et),append(t,jt),Tt=!0,Mt||(Ot=[listen(g,"keyup",e[2]),listen(x,"click",e[3]),listen(ie,"click",e[4]),listen(we,"keyup",e[2]),listen(Oe,"keyup",e[2]),listen(Xe,"keyup",e[2]),listen(rt,"blur",e[2]),listen(gt,"blur",e[2]),listen(wt,"blur",e[2])],Mt=!0)},p(e,[t]){const a={};1&t&&(a.checked=e[0].goDark),134217728&t&&(a.$$scope={dirty:t,ctx:e}),b.$set(a)},i(e){Tt||(transition_in(b.$$.fragment,e),Tt=!0)},o(e){transition_out(b.$$.fragment,e),Tt=!1},d(e){e&&detach(t),destroy_component(b),Mt=!1,run_all(Ot)}}}function handleDisable(){let e=parseInt(document.querySelector("#html_disable").value),t=parseInt(document.querySelector("#css_disable").value),a=parseInt(document.querySelector("#js_disable").value),n=(e?"html ":"")+(t?"css ":"")+(a?"js":"");n=n.trim(),n=n?'disable="'+n.split(" ").join()+'"':"";let l=(0==e?"0 ":"1 ")+(0==t?"0 ":"1 ")+(0==a?"0 ":"1 ");return l=l.trim(),l=l?'hide="'+l.split(" ").join()+'"':"",n+" "+l}function splitter(){Split(["#top_content"],{sizes:[50],direction:"vertical"});Split(["#firstEditorDiv"],{sizes:[100],direction:"vertical"});Split(["#html_panel","#css_panel","#js_panel"],{sizes:[50,50,50]})}function stringBetween$1(e,t,a){let n;n=a?new RegExp(t+"([\\s\\S]*?)"+a,"gm"):new RegExp("<"+t+">([\\s\\S]*?)</"+t+">","gm");let l=n.exec(e);return l?l[1]:null}function findAttribute$1(e,t,a=""){let n=new RegExp("<"+a+".*?"+t+'="(\\w.*?)".*?>',"gm").exec(e);return n?n[1]:null}function getCase(e){return e=e.replace(/\n/gm,"").replace(/<\/case><case>/gm,";").replace(/<\/case>|<case>/g,"")}function instance$1(e,t,a){let n,l,s,{xml:r}=t,{getChildXml:i}=t,{toggleMode:o}=t,{isReview:c}=t,d='<smxml type="22" addhtml="0" name="Web">',p="",m="",u=(document.querySelector(".switch-input.switch-input"),{}),g=writable({xml:"",uxml:"",module:"",toggle:!1,snackback:!1,lang_type:"php",xmlArr:[],remediationToggle:!1,goDark:!(!window.sessionStorage.goDark||"true"!=window.sessionStorage.goDark)});g.subscribe((e=>{a(0,u=e)}));function h(){let e=document.querySelector("#goDark").checked;a(0,u.goDark=e,u),g.update((t=>(t.goDark=e,t))),window.sessionStorage.goDark=e,e?(n&&n.setOption("theme","monokai"),l&&l.setOption("theme","monokai"),s&&s.setOption("theme","monokai")):(n&&n.setOption("theme","default"),l&&l.setOption("theme","default"),s&&s.setOption("theme","default"))}function _(e){let t="";return null!=document.querySelector("#launch_caption")&&(p=AH.select("#launch_caption").value),p&&(d=`<smxml type="22" addhtml="0" name="Web" launch_caption="${p}">`),t=d+function(){if(!m)return"";let e=document.querySelector("#test_case_text").value,t=document.querySelector("#occurence_text").value,a=document.querySelector("#exscript_text").value,n=0,l=0,s=0;e&&(n=1,e="<case>"+e.split(";").join("</case><case>")+"</case>",e='\n<autograde type="testcase">'+e+"</autograde>");t&&(l=1,t="<case>"+t.split(";").join("</case><case>")+"</case>",t='\n<autograde type="internal">'+t+"</autograde>");a&&(s=1,a='\n<autograde type="custom">'+a+"</autograde>");return'<webautograde active="1" testcase="'+n+'" internal="'+l+'" custom="'+s+'">'+e+t+a+"\n</webautograde>"}()+`\n<web libs="" files=",," ${handleDisable()}>\n<![CDATA[\n${function(){try{return"<tag>"+n.getValue()+"</tag>\n<css>"+l.getValue()+"</css>\n<js>"+s.getValue()+"</js>"}catch(e){return""}}()}\n]]>\n</web>\n</SMXML>`,!0===e||i(t),t}function f(){if(AI.get("renderCodeMirror"))return!0;l=CodeMirror.fromTextArea(document.getElementById("css_editor"),{lineNumbers:!0,mode:"css",styleActiveLine:!0,autoCloseBrackets:!0,lineWrapping:!0,scrollbarStyle:"simple",matchBrackets:!0,gutters:["CodeMirror-linenumbers","breakpoints"]}),n=CodeMirror.fromTextArea(document.getElementById("html_editor"),{lineNumbers:!0,mode:"text/html",styleActiveLine:!0,autoCloseBrackets:!0,lineWrapping:!0,scrollbarStyle:"simple",matchBrackets:!0,gutters:["CodeMirror-linenumbers","breakpoints"]}),s=CodeMirror.fromTextArea(document.getElementById("js_editor"),{lineNumbers:!0,mode:"text/javascript",styleActiveLine:!0,autoCloseBrackets:!0,lineWrapping:!0,scrollbarStyle:"simple",matchBrackets:!0,gutters:["CodeMirror-linenumbers","breakpoints"]}),"object"!=typeof n||c||n.on("change",(function(){_()})),"object"!=typeof l||c||l.on("change",(function(){_()})),"object"!=typeof s||c||s.on("change",(function(){_()})),n.setOption("extraKeys",{Tab(e){let t=Array(e.getOption("indentUnit")+3).join(" ");e.replaceSelection(t)},F11(e){e.setOption("fullScreen",!e.getOption("fullScreen"))},Esc(e){e.getOption("fullScreen")&&e.setOption("fullScreen",!1)}}),b(),AI.set("renderCodeMirror",!0)}function b(){let e=stringBetween$1(r,"tag");null!=e&&n.setValue(e?e.trim():"");let t=stringBetween$1(r,"css");null!=t&&l.setValue(t?t.trim():"");let a=stringBetween$1(r,"js");null!=a&&s.setValue(a?a.trim():"");let i=findAttribute$1(r,"disable","web"),o=document.querySelector("#html_disable"),c=document.querySelector("#css_disable"),d=document.querySelector("#js_disable");/html/g.test(i)&&(o.value=1),/js/g.test(i)&&(d.value=1),/css/g.test(i)&&(c.value=1);let p=findAttribute$1(r,"launch_caption","smxml");AH.select("#launch_caption","value",p);let u=findAttribute$1(r,"hide","web");u=u||",,",u=u.split(","),0==parseInt(u[0])&&(o.value=0),0==parseInt(u[1])&&(c.value=0),0==parseInt(u[2])&&(d.value=0);let g=stringBetween$1(r,'<autograde type="testcase">',"</autograde>"),_=stringBetween$1(r,'<autograde type="internal">',"</autograde>"),f=stringBetween$1(r,'<autograde type="custom">',"</autograde>");g=g?getCase(g):"",_=_?getCase(_):"",f=f?f.replace(/<\/case>|<case>/g,""):"",document.querySelector("#test_case_text")&&(document.querySelector("#test_case_text").value=g,document.querySelector("#occurence_text").value=_,document.querySelector("#exscript_text").value=f.replace(/<\/case>|<case>/g,"")),(g||_||f)&&(m=1,document.querySelector("#test_case_text").disabled=!1,document.querySelector("#occurence_text").disabled=!1,document.querySelector("#exscript_text").disabled=!1,document.querySelector("#autograde_cb").checked=!0),h()}return beforeUpdate((()=>{a(5,r=r||u.xml)})),onMount((()=>{AH.enableBsAll("[data-bs-toggle='tooltip']","Tooltip",{container:"body"}),AH.bind(".modal","show.bs.modal",(()=>{setTimeout((function(){AH.select("#disable_modal","visible").length>0?AH.select("#html_disable").focus():AH.select("#close_dialog_btn").focus()}),500)})),AH.listen(document,"keydown","body",((e,t)=>{t.ctrlkey&&t.altkey&&(85==t.which||85==t.keyCode)&&(AH.select("#disable_modal","visible").length>0?AH.selectAll("#html_disable").focus():AH.selectAll("#close_dialog_btn").focus())})),AH.listen(document,"click","#grade_accordion .card",((e,t)=>{let a=document.getElementsByClassName("card");for(let e=0;e<a.length;e++)AH.select(a[e],"css",{border:"none"});AH.select(e,"css",{border:"1px solid #000"})})),AH.listen(document,"click","#autograde_cb, #close_dialog_btn, #done_grading_btn",(()=>{let e=document.getElementsByClassName("card");for(let t=0;t<e.length;t++)AH.select(e[t],"css",{border:"none"})})),AH.select("#preview","hide"),"function"==typeof CodeMirror?(f(),b()):AI.ajax({type:"GET",url:itemUrl+"src/libs/codemirror.js",dataType:"script"}).then((function(e){let t=document.createElement("script");t.innerHTML=e,document.body.appendChild(t),f(),b()})),AI.ajax({type:"GET",url:itemUrl+"src/libs/split.js",async:!0,dataType:"script"}).then((e=>{if(AH.activate(0),document.querySelector("#splitterWeb"))return splitter(),!0;let t=document.createElement("script");t.id="splitterWeb",t.innerHTML=e,document.body.appendChild(t),splitter()})),AH.select("#authoringDiv","css",{marginLeft:"7px",width:"99%"})})),e.$$set=e=>{"xml"in e&&a(5,r=e.xml),"getChildXml"in e&&a(6,i=e.getChildXml),"toggleMode"in e&&a(7,o=e.toggleMode),"isReview"in e&&a(8,c=e.isReview)},[u,h,_,function(){window.scroll({top:500,behavior:"smooth"});let e=new Date;e=e.getTime(),AH.selectAll("#result_div","html",'<iframe class="result_frame w-100 border-0" style="height:344px" id="uC'+e+'"></iframe>');let t=function(){try{let e=n.getValue(),t=l.getValue(),a=s.getValue();return e=function(){let e=n.getValue(),t=["mp4","ogg","webm","mp3","wav"],a=["gif","tif","png","jpg"];return e=e.replace(/src[ ]*=[ ]*['"](.*?)['"]/gm,(function(e,n){if(n){for(let a=0;a<t.length;a++)if(n.indexOf(t[a])>-1)return e.replace(n,"https://s3.amazonaws.com/jigyaasa_content_stream/"+n);for(let t=0;t<a.length;t++)if(n.indexOf(a[t])>-1)return e.replace(n,"https://s3.amazonaws.com/jigyaasa_content_static/"+n)}})),e}(),t=t.replace(/url\(['"](.*?)['"]\)/g,"url('https://s3.amazonaws.com/jigyaasa_content_static/$1')"),a=a.replace(/src.*?["'](.*?)["']/gi,"src = 'https://s3.amazonaws.com/jigyaasa_content_static/$1'"),e+"<style>"+t+"</style><script>"+a+"<\/script>"}catch(e){return""}}(),a=AH.select("#uC"+e).contentDocument;a.open(),a.write(t),a.close()},function(e){e.target.checked?(m='active="1"',AH.selectAll("#test_case_text, #occurence_text, #exscript_text").forEach((e=>{e.disabled=!1}))):(m="",AH.selectAll("#test_case_text, #occurence_text, #exscript_text").forEach((e=>{e.disabled=!0}))),_()},r,i,o,c]}class WebAuthoring extends SvelteComponent{constructor(e){super(),init(this,e,instance$1,create_fragment$1,safe_not_equal,{xml:5,getChildXml:6,toggleMode:7,isReview:8})}}function create_if_block_2(e){let t,a;return t=new WebAuthoring({props:{key:"2",xml:e[0],toggleMode:e[3],getChildXml:e[4],showAns:e[5],editorState:e[2],isReview:e[6]}}),{c(){create_component(t.$$.fragment)},m(e,n){mount_component(t,e,n),a=!0},p(e,a){const n={};1&a&&(n.xml=e[0]),8&a&&(n.toggleMode=e[3]),16&a&&(n.getChildXml=e[4]),32&a&&(n.showAns=e[5]),4&a&&(n.editorState=e[2]),64&a&&(n.isReview=e[6]),t.$set(n)},i(e){a||(transition_in(t.$$.fragment,e),a=!0)},o(e){transition_out(t.$$.fragment,e),a=!1},d(e){destroy_component(t,e)}}}function create_if_block_1$1(e){let t,a;return t=new WebPreview({props:{key:"1",xml:e[0],inQuizPlayer:e[2]?0:1,editorState:e[2],uaXML:e[1]}}),{c(){create_component(t.$$.fragment)},m(e,n){mount_component(t,e,n),a=!0},p(e,a){const n={};1&a&&(n.xml=e[0]),4&a&&(n.inQuizPlayer=e[2]?0:1),4&a&&(n.editorState=e[2]),2&a&&(n.uaXML=e[1]),t.$set(n)},i(e){a||(transition_in(t.$$.fragment,e),a=!0)},o(e){transition_out(t.$$.fragment,e),a=!1},d(e){destroy_component(t,e)}}}function create_if_block$1(e){let t;return{c(){t=text("Loading...")},m(e,a){insert(e,t,a)},p:noop,i:noop,o:noop,d(e){e&&detach(t)}}}function create_fragment$2(e){let t,a,n,l,s;const r=[create_if_block$1,create_if_block_1$1,create_if_block_2],i=[];function o(e,t){return 2==e[7].currentComponent?0:1==e[7].currentComponent?1:0==e[7].currentComponent?2:-1}return~(n=o(e))&&(l=i[n]=r[n](e)),{c(){t=element("main"),a=element("div"),l&&l.c(),attr(a,"id","webModule")},m(e,l){insert(e,t,l),append(t,a),~n&&i[n].m(a,null),s=!0},p(e,[t]){let s=n;n=o(e),n===s?~n&&i[n].p(e,t):(l&&(group_outros(),transition_out(i[s],1,1,(()=>{i[s]=null})),check_outros()),~n?(l=i[n],l?l.p(e,t):(l=i[n]=r[n](e),l.c()),transition_in(l,1),l.m(a,null)):l=null)},i(e){s||(transition_in(l),s=!0)},o(e){transition_out(l),s=!1},d(e){e&&detach(t),~n&&i[n].d()}}}function instance$2(e,t,a){let{xml:n}=t,{uaXML:s}=t,{inEditor:r}=t,{editorState:i}=t,{toggleMode:o}=t,{getChildXml:c}=t,{showAns:d}=t,{setInlineEditor:p}=t,{isReview:m}=t,u=0,g={};writable({currentComponent:2,titleData:"",stemData:"",remediationData:"",toggle:o}).subscribe((e=>{a(7,g=e)}));function h(){i?setTimeout((()=>{a(7,g.currentComponent=1==u?1:0,g)}),1e3):a(7,g.currentComponent=1,g)}return beforeUpdate((()=>{if(i){if(o!=g.toggle)if(console.log({toggleMode:o}),a(7,g.toggle=o,g),1==o){AI.set("renderCodeMirror",!1),u=1,AH.empty("#authoringDiv player"),AH.find("#authoringDiv","player",{action:"addClass",actionData:"hidecontent"}),AH.selectAll("#editor img").forEach((e=>{e.getAttribute("header-logo")||e.getAttribute("src").match(/\/\/s3.amazonaws.com\/jigyaasa_content_static/gm)||e.setAttribute("src","//s3.amazonaws.com/jigyaasa_content_static/"+e.getAttribute("src"))})),AH.select("#headerTitle","html",l.preview),AH.select("#answerCheck","css",{visibility:"visible",display:"inline-block"}),AH.enableBsAll('[data-bs-toggle="tooltip"]',"Tooltip");let e=AH.select("#title").innerHTML,t=AH.select("#stem").innerHTML,n=AH.select("#remediation").innerHTML;a(7,g.titleData=e,g),a(7,g.stemData=t,g),a(7,g.remediationData=n,g),AH.empty("#title"),AH.selectAll("#title","css",{position:"relative",top:"5px"}),AH.select("#title","html",`<div id="tilteShow">${e}</div>`),AH.empty("#stem"),AH.selectAll("#stem","css",{position:"relative",top:"5px"}),AH.select("#stem","html",`<div id="stemShow">${get_ucsyntax(t)}</div>`),AH.empty("#remediation"),AH.selectAll("#remediation","css",{position:"relative",top:"5px"}),AH.select("#remediation","html",`<div id="remediationShow">${get_ucsyntax(n)}</div>`),AH.selectAll("#externalInputs, #authoringActions, #addTestCase","hide"),a(7,g.currentComponent=1,g)}else{u=0,AH.select("#answerCheck","css",{visibility:"hidden",display:"none"}),AH.select("#headerTitle","html",l.authoring),AH.find("#authoringArea","form",{action:"remove"}),AH.selectAll("#tilteShow, #stemShow, #remediationShow","remove"),AH.select("#title","html",g.titleData),AH.select("#stem","html",g.stemData),AH.select("#remediation","html",g.remediationData),AH.selectAll("#title, #stem, #remediation, #externalInputs, #authoringActions, #addTestCase","show","block"),AH.empty("#authoringDiv player"),AH.find("#authoringDiv","player",{action:"removeClass",actionData:"hidecontent"}),AH.selectAll("#editor img").forEach((e=>{e.getAttribute("header-logo")||e.getAttribute("src").match(/\/\/s3.amazonaws.com\/jigyaasa_content_static/gm)||e.setAttribute("src",e.getAttribute("src"))})),a(7,g.currentComponent=0,g);try{p("#stem"),p("#remediation")}catch(e){console.log(e)}}}else h()})),onMount((async()=>{await tick(),i?(h(),console.log("Web in editormode")):(AH.listen(document,"mouseover","#webModule",(()=>{0==isHover&&(isHover=1,a(7,g.currentComponent=1,g))})),a(7,g.currentComponent=1,g)),await tick()})),e.$$set=e=>{"xml"in e&&a(0,n=e.xml),"uaXML"in e&&a(1,s=e.uaXML),"inEditor"in e&&a(8,r=e.inEditor),"editorState"in e&&a(2,i=e.editorState),"toggleMode"in e&&a(3,o=e.toggleMode),"getChildXml"in e&&a(4,c=e.getChildXml),"showAns"in e&&a(5,d=e.showAns),"setInlineEditor"in e&&a(9,p=e.setInlineEditor),"isReview"in e&&a(6,m=e.isReview)},[n,s,i,o,c,d,m,g,r,p]}class Web extends SvelteComponent{constructor(e){super(),init(this,e,instance$2,create_fragment$2,safe_not_equal,{xml:0,uaXML:1,inEditor:8,editorState:2,toggleMode:3,getChildXml:4,showAns:5,setInlineEditor:9,isReview:6})}}export default Web;
//# sourceMappingURL=Web-617f3828.js.map
