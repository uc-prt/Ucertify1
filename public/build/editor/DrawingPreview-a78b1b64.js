import{S as e,i as t,s,$ as l,e as r,b as i,u as a,ab as o,f as n,h as c,j as d,l as p,x as u,r as v,o as b,p as m,A as w,a0 as g,a1 as h,X as _,R as y,w as f}from"./main-464952be.js";function C(e){let t,s,m,w,g,h,_,y,f,C,S,k,A,P,N,M,D,L,T,I,R,F,K,E,B,O,H,J,z,X,G,W,U,Y,Z,j,q,$,Q,V,ee,te,se,le,re,ie,ae,oe,ne,ce,de,pe,ue,ve,be,me,we,ge,he,_e,ye,fe,Ce,xe,Se,ke,Ae,Pe,Ne,Me,De,Le,Te,Ie,Re,Fe,Ke,Ee,Be,Oe,He,Je,ze,Xe,Ge,We,Ue,Ye,Ze,je,qe,$e,Qe,Ve,et,tt,st,lt,rt,it,at,ot,nt,ct,dt,pt,ut,vt,bt,mt,wt,gt,ht,_t,yt,ft,Ct,xt,St,kt,At,Pt,Nt,Mt,Dt,Lt,Tt,It,Rt,Ft,Kt,Et,Bt,Ot,Ht,Jt,zt,Xt,Gt,Wt,Ut,Yt,Zt,jt,qt,$t,Qt,Vt,es,ts,ss,ls,rs,is,as,os,ns,cs,ds,ps,us,vs,bs,ms,ws,gs,hs,_s,ys,fs,Cs,xs,Ss,ks,As,Ps,Ns,Ms,Ds,Ls,Ts,Is,Rs,Fs,Ks,Es,Bs,Os,Hs,Js,zs,Xs,Gs,Ws,Us,Ys,Zs,js,qs,$s,Qs,Vs,el,tl,sl,ll,rl,il,al,ol,nl,cl,dl,pl,ul,vl,bl,ml,wl,gl,hl,_l,yl,fl,Cl,xl,Sl,kl,Al,Pl,Nl,Ml,Dl,Ll,Tl,Il,Rl,Fl,Kl,El,Bl=l.mark_pnt+"",Ol=l.shortcuts+"",Hl=e[2].alt+"",Jl=l.compass_center+"",zl=l.shift_arrow_use+"",Xl=l.compass_radius+(.02649*e[0]).toFixed(2)+"",Gl=l.shift_arrow_radius+"",Wl=l.compass_angle+e[1]+l.degree+"",Ul=l.shift_arrow_angle+"",Yl=l.compass_draw+"",Zl=l.shift_arrow_draw+"";return{c(){t=r("main"),s=r("div"),m=r("div"),w=r("div"),g=r("div"),h=r("h4"),h.textContent=""+l.shortcuts,_=i(),y=r("button"),y.textContent="Ã—",f=i(),C=r("div"),S=r("table"),k=r("tbody"),A=r("tr"),P=r("td"),P.textContent=""+l.keys,N=r("td"),M=r("div"),D=r("span"),D.textContent=""+l.des_txt,L=i(),T=r("tr"),I=r("td"),I.textContent=""+l.ctrl_z,R=r("td"),F=r("div"),K=r("span"),K.textContent=""+l.undo,E=i(),B=r("tr"),O=r("td"),O.textContent=""+l.ctrl_x,H=r("td"),J=r("div"),z=r("span"),z.textContent=""+l.cut,X=i(),G=r("tr"),W=r("td"),W.textContent=""+l.ctrl_y,U=r("td"),Y=r("div"),Z=r("span"),Z.textContent=""+l.redo,j=i(),q=r("tr"),$=r("td"),$.textContent=""+l.enter,Q=r("td"),V=r("div"),ee=r("span"),ee.textContent=""+l.enable_tool,te=i(),se=r("tr"),le=r("td"),le.textContent=""+l.shift_enter,re=r("td"),ie=r("div"),ae=r("span"),ae.textContent=""+l.start_stop_tool,oe=i(),ne=r("tr"),ce=r("td"),ce.textContent=""+l.shift_arrow,de=r("td"),pe=r("div"),ue=r("span"),ue.textContent=""+l.compass_tools,ve=i(),be=r("tr"),me=r("td"),me.textContent=""+l.locking,we=r("td"),ge=r("div"),he=r("span"),he.textContent=""+l.locking_txt,_e=i(),ye=r("tr"),fe=r("td"),fe.textContent=""+l.draw_key,Ce=r("td"),xe=r("div"),Se=r("span"),Se.textContent=""+l.draw_txt,ke=i(),Ae=r("tr"),Pe=r("td"),Pe.textContent=""+l.tab,Ne=r("td"),Me=r("div"),De=r("span"),De.textContent=""+l.focus_next,Le=i(),Te=r("tr"),Ie=r("td"),Ie.textContent=""+l.shift_tab,Re=r("td"),Fe=r("div"),Ke=r("span"),Ke.textContent=""+l.focus_prev,Ee=i(),Be=r("tr"),Oe=r("td"),Oe.textContent=""+l.esc,He=r("td"),Je=r("div"),ze=r("span"),ze.textContent=""+l.exit_txt,Xe=i(),Ge=r("div"),We=r("button"),We.textContent=""+l.close,Ue=i(),Ye=r("div"),Ze=r("button"),je=i(),qe=r("button"),$e=i(),Qe=r("center"),Ve=r("div"),et=r("div"),tt=r("div"),st=r("button"),lt=r("i"),at=i(),ot=r("button"),nt=a("/"),pt=i(),ut=r("button"),vt=r("i"),gt=i(),ht=r("div"),_t=r("button"),yt=r("i"),xt=i(),St=r("button"),kt=r("i"),Nt=i(),Mt=r("button"),Dt=r("i"),It=i(),Rt=r("button"),Ft=r("i"),Ot=i(),Ht=r("div"),Jt=r("button"),zt=a(Bl),Ut=i(),Yt=r("div"),Zt=r("button"),jt=r("i"),Vt=i(),es=r("div"),ts=r("button"),ss=a(Ol),os=i(),ns=r("div"),cs=r("div"),ds=r("img"),us=i(),vs=r("div"),vs.innerHTML='<span class="icomoon-plus s2 move_icon position-absolute h" id="moveDrawIcon"></span>',bs=i(),ms=o("svg"),ws=o("title"),gs=a(Hl),hs=o("g"),_s=o("g"),ys=o("g"),fs=o("g"),Cs=o("g"),xs=o("svg"),Ss=o("svg"),ks=o("g"),As=o("circle"),Ps=o("g"),Ns=o("line"),Ms=o("g"),Ds=o("circle"),Ls=o("title"),Ts=a(Jl),Is=o("desc"),Rs=a(zl),Fs=o("defs"),Ks=o("pattern"),Es=o("svg"),Bs=o("path"),Os=o("path"),Hs=o("path"),Js=o("path"),zs=o("circle"),Xs=o("g"),Gs=o("circle"),Ws=o("title"),Us=a(Xl),Ys=o("desc"),Zs=a(Gl),js=o("defs"),qs=o("pattern"),$s=o("svg"),Qs=o("g"),Vs=o("g"),el=o("rect"),tl=o("g"),sl=o("rect"),ll=o("g"),rl=o("g"),il=o("path"),al=o("g"),ol=o("path"),nl=o("g"),cl=o("circle"),dl=o("title"),pl=a(Wl),ul=o("desc"),vl=a(Ul),bl=o("defs"),ml=o("pattern"),wl=o("svg"),gl=o("path"),hl=o("g"),_l=o("circle"),fl=o("circle"),Cl=o("title"),xl=a(Yl),Sl=o("desc"),kl=a(Zl),Al=o("g"),Pl=o("circle"),Nl=o("defs"),Ml=o("pattern"),Dl=o("svg"),Ll=o("g"),Tl=o("g"),Il=o("g"),Rl=o("g"),Fl=o("path"),n(h,"class","modal-title"),n(y,"type","button"),n(y,"class","close"),n(y,"data-bs-dismiss","modal"),n(g,"class","modal-header"),n(P,"class","py-1 font-weight-bold w-50 pr-0"),n(D,"class","pl-3 font-weight-bold"),n(M,"class","d-flex"),n(N,"class","py-1"),n(A,"tabindex","0"),n(A,"role","shortcut"),n(I,"class","py-1 font-weight-bold w-50 pr-0"),n(K,"class","pl-3"),n(F,"class","d-flex"),n(R,"class","py-1"),n(T,"tabindex","0"),n(T,"role","shortcut"),n(O,"class","py-1 font-weight-bold w-50 pr-0"),n(z,"class","pl-3"),n(J,"class","d-flex"),n(H,"class","py-1"),n(B,"tabindex","0"),n(B,"role","shortcut"),n(W,"class","py-1 font-weight-bold w-50 pr-0"),n(Z,"class","pl-3"),n(Y,"class","d-flex"),n(U,"class","py-1"),n(G,"tabindex","0"),n(G,"role","shortcut"),n($,"class","py-1 font-weight-bold w-50 pr-0"),n(ee,"class","pl-3"),n(V,"class","d-flex"),n(Q,"class","py-1"),n(q,"tabindex","0"),n(q,"role","shortcut"),n(le,"class","py-1 font-weight-bold w-50 pr-0"),n(ae,"class","pl-3"),n(ie,"class","d-flex"),n(re,"class","py-1"),n(se,"tabindex","0"),n(se,"role","shortcut"),n(ce,"class","py-1 font-weight-bold w-50 pr-0"),n(ue,"class","pl-3"),n(pe,"class","d-flex"),n(de,"class","py-1"),n(ne,"tabindex","0"),n(ne,"role","shortcut"),n(me,"class","py-1 font-weight-bold w-50 pr-0"),n(he,"class","pl-3"),n(ge,"class","d-flex"),n(we,"class","py-1"),n(be,"tabindex","0"),n(be,"role","shortcut"),n(fe,"class","py-1 font-weight-bold w-50 pr-0"),n(Se,"class","pl-3"),n(xe,"class","d-flex"),n(Ce,"class","py-1"),n(ye,"tabindex","0"),n(ye,"role","shortcut"),n(Pe,"class","py-1 font-weight-bold w-50 pr-0"),n(De,"class","pl-3"),n(Me,"class","d-flex"),n(Ne,"class","py-1"),n(Ae,"tabindex","0"),n(Ae,"role","shortcut"),n(Ie,"class","py-1 font-weight-bold w-50 pr-0"),n(Ke,"class","pl-3"),n(Fe,"class","d-flex"),n(Re,"class","py-1"),n(Te,"tabindex","0"),n(Te,"role","shortcut"),n(Oe,"class","py-1 font-weight-bold w-50 pr-0"),n(ze,"class","pl-3"),n(Je,"class","d-flex"),n(He,"class","py-1"),n(Be,"tabindex","0"),n(Be,"role","shortcut"),n(k,"tabindex","0"),n(k,"role","shortcut"),n(S,"role","shortcut"),n(S,"class","shortcutTable m-0 p-2 border-0 common-shortcut-table table-striped font15"),n(C,"class","modal-body overflow-y"),n(We,"type","button"),n(We,"class","btn btn-light"),n(We,"data-bs-dismiss","modal"),n(Ge,"class","modal-footer"),n(w,"class","modal-content"),n(m,"class","modal-dialog modal-dialog-centered"),n(s,"id","drawing_shortcut_modal"),n(s,"class","modal fade"),n(s,"tabindex","-1"),n(Ze,"type","button"),n(Ze,"class","h h-imp"),n(Ze,"id","set-review"),n(qe,"type","button"),n(qe,"class","h h-imp"),n(qe,"id","unset-review"),n(lt,"class","icomoon-pencil"),n(st,"type","button"),n(st,"data-title","scribble"),n(st,"tabindex","0"),n(st,"aria-label",rt=l.scribble_tool),n(st,"title",it=l.scribble),n(st,"name","preview_scribble"),n(st,"id","preview_scribble"),n(st,"class","geometryToolPreview tooltip_btn btn btn-light preview_toolbar preview_btn"),n(ot,"type","button"),n(ot,"data-title","line"),n(ot,"tabindex","0"),n(ot,"aria-label",ct=l.line_tool),n(ot,"title",dt=l.line),n(ot,"name","preview_line"),n(ot,"id","preview_line"),n(ot,"class","geometryToolPreview btn btn-light tooltip_btn preview_toolbar preview_btn"),n(vt,"class","icomoon-compass1"),n(ut,"type","button"),n(ut,"data-title","compass"),n(ut,"tabindex","0"),n(ut,"aria-label",bt=l.compass_tool),n(ut,"title",mt=l.compass),n(ut,"name","preview_compass"),n(ut,"id","preview_compass"),n(ut,"class","geometryToolPreview tooltip_btn btn btn-light preview_toolbar preview_btn"),n(tt,"class","btn-group mr-2"),n(tt,"role","group"),n(tt,"tabindex","0"),n(tt,"aria-label",wt=l.draw_tools),n(yt,"class","icomoon-delete-sm"),n(_t,"type","button"),n(_t,"data-title","eraser"),n(_t,"tabindex","0"),n(_t,"aria-label",ft=l.delete_tool),n(_t,"title",Ct=l.delete_tool),n(_t,"name","eraser"),n(_t,"id","preview_eraser"),n(_t,"class","btn btn-light tooltip_btn preview_toolbar preview_btn"),n(kt,"class","icomoon-close-2"),n(St,"type","button"),n(St,"title",At=l.clear_screen),n(St,"tabindex","0"),n(St,"aria-label",Pt=l.clear_screen),n(St,"name","clearScreen"),n(St,"id","preview_clearScreen"),St.disabled="disabled",n(St,"class","btn btn-light tooltip_btn"),n(Dt,"class","icomoon-redo-2"),n(Mt,"type","button"),n(Mt,"title",Lt=l.redo),n(Mt,"name","redo"),n(Mt,"tabindex","0"),n(Mt,"aria-label",Tt=l.redo),n(Mt,"id","preview_redo"),Mt.disabled="disabled",n(Mt,"class","btn btn-light tooltip_btn"),n(Ft,"class","icomoon-undo-2"),n(Rt,"type","button"),n(Rt,"title",Kt=l.undo),n(Rt,"name","undo"),n(Rt,"tabindex","0"),n(Rt,"aria-label",Et=l.undo),n(Rt,"id","preview_undo"),Rt.disabled="disabled",n(Rt,"class","btn btn-light tooltip_btn"),n(ht,"class","btn-group mr-2"),n(ht,"role","group"),n(ht,"tabindex","0"),n(ht,"aria-label",Bt=l.removing_tools),n(Jt,"type","button"),n(Jt,"title",Xt=l.mark_finish_point),n(Jt,"name","mark_points"),n(Jt,"tabindex","0"),n(Jt,"aria-label",Gt=l.mark_ans_point),n(Jt,"id","mark_points"),n(Jt,"class","btn tooltip_btn btn-light"),n(Ht,"class","btn-group mr-2 marking_group"),n(Ht,"role","group"),n(Ht,"aria-label",Wt=l.marking_tools),n(jt,"class","icomoon-new-24px-reset-1"),n(Zt,"type","button"),n(Zt,"title",qt=l.reset),n(Zt,"name","preview_reset_btn"),n(Zt,"tabindex","0"),n(Zt,"aria-label",$t=l.reset_btn),n(Zt,"id","preview_reset_btn"),n(Zt,"class","btn tooltip_btn btn-light"),n(Yt,"class","btn-group mr-2 reset_group"),n(Yt,"role","group"),n(Yt,"aria-label",Qt=l.reset),n(ts,"type","button"),n(ts,"title",ls=l.shortcuts),n(ts,"name","shortcut_modal_btn"),n(ts,"aria-label",rs=l.shortcuts),n(ts,"tabindex","0"),n(ts,"id","shortcut_modal_btn"),n(ts,"class","tooltip_btn btn btn-primary"),n(es,"class","btn-group mr-2"),n(es,"role","group"),n(es,"aria-label",is=l.shortcuts),n(et,"class","btn-toolbar preview_drawing_toolbar"),n(et,"role","toolbar"),n(et,"aria-label",as=l.drawing_tools),n(Ve,"class","mt-2 mb-3 previewBtnGrp"),n(ds,"class","border"),n(ds,"alt",""),ds.src!==(ps=x+e[2].bgImg)&&n(ds,"src",ps),n(ds,"id","svgImgPreview"),n(ws,"id","previewSvgTitle"),n(hs,"class","backgroundFocusPathPreview"),n(_s,"class","previewDrawingPaths"),n(ys,"class","correct_answer_container"),n(fs,"class","backgroundFocusPointPreview"),n(Cs,"class","previewMarkingPaths"),n(As,"class","drawingCompassRoute compass_route"),n(As,"cx","267.984375"),n(As,"cy","173"),n(As,"r","80"),n(Ns,"class","compassRotationBar compass_radius"),n(Ns,"x1","267.984375"),n(Ns,"y1","173"),n(Ns,"x2","267.984375"),n(Ns,"y2","253"),n(Ds,"tabindex","0"),n(Ds,"class","drawingCompassCenter compass_center"),n(Ds,"cx","267.984375"),n(Ds,"cy","173"),n(Ds,"r","17"),n(Ds,"aria-labelledby","compassCenterTitle compassCenterDesc"),n(Ds,"focusable","true"),n(Ds,"fill","url(#previewDrawingCenter)"),n(Ls,"id","compassCenterTitle"),n(Is,"id","compassCenterDesc"),n(Bs,"fill","#808080"),n(Bs,"class","st0"),n(Bs,"d","M3.22,15.1L1,12l2.22-3.1C3.22,10.97,3.22,13.03,3.22,15.1z"),n(Os,"fill","#808080"),n(Os,"class","st0"),n(Os,"d","M8.9,3.22L12,1l3.1,2.22C13.03,3.22,10.97,3.22,8.9,3.22z"),n(Hs,"fill","#808080"),n(Hs,"class","st0"),n(Hs,"d","M15.1,20.78L12,23l-3.1-2.22C10.97,20.78,13.03,20.78,15.1,20.78z"),n(Js,"fill","#808080"),n(Js,"class","st0"),n(Js,"d","M20.78,8.9L23,12l-2.22,3.1C20.78,13.03,20.78,10.97,20.78,8.9z"),n(zs,"cx","12"),n(zs,"cy","12"),n(zs,"r","2"),n(zs,"fill","#333333"),n(Es,"x","0px"),n(Es,"y","0px"),n(Es,"viewBox","1 -3 21 35"),n(Es,"width","33"),n(Es,"height","41"),n(Ks,"id","previewDrawingCenter"),n(Ks,"width","20"),n(Ks,"height","20"),n(Gs,"class","compass_radius_icon mid_circle"),n(Gs,"cx","267.984375"),n(Gs,"cy","213"),n(Gs,"r","17"),n(Gs,"fill","url(#previewDrawingRadius)"),n(Gs,"transform","rotate(90,160,168)"),n(Gs,"aria-labelledby","compassRadiusTitle compassRadiusDesc"),n(Gs,"tabindex","0"),n(Gs,"focusable","true"),n(Ws,"id","compassRadiusTitle"),n(Ys,"id","compassRadiusDesc"),n(el,"x","8.53"),n(el,"y","1.11"),n(el,"width","1.5"),n(el,"height","21.79"),n(sl,"x","13.97"),n(sl,"y","1.11"),n(sl,"width","1.5"),n(sl,"height","21.79"),n(il,"d","M5.87,16.87L1,12l4.87-4.87C5.87,10.38,5.87,13.62,5.87,16.87z"),n(ol,"d","M18.13,16.87L23,12l-4.87-4.87C18.13,10.38,18.13,13.62,18.13,16.87z"),n($s,"x","0px"),n($s,"y","0px"),n($s,"viewBox","1 -5 21 34"),n($s,"width","33"),n($s,"height","33"),n(qs,"id","previewDrawingRadius"),n(qs,"width","20"),n(qs,"height","20"),n(cl,"class","compass_rotation midSmallCircle"),n(cl,"cx","267.984375"),n(cl,"cy","233"),n(cl,"r","8"),n(cl,"fill","url(#previewMidSmallCircle_icon)"),n(cl,"area-label","Compass Angle Use Shift and arrow keys to increase or decrease the radius"),n(cl,"aria-labelledby","compassRotationTitle compassRotationDesc"),n(cl,"tabindex","0"),n(cl,"focusable","true"),n(cl,"transform","rotate(90,160,193)"),n(dl,"id","compassRotationTitle"),n(ul,"id","compassRotationDesc"),n(gl,"fill","#000"),n(gl,"opacity","0.8"),n(gl,"d","M7,14 C3.13400675,14 0,10.8659932 0,7 C0,3.13400675 3.13400675,0 7, 0 C10.8659932,0 14,3.13400675 14,7 C14,10.8659932 10.8659932,14 7, 14 Z M4.66666667,8.16666667 L7,11.6666667 L9.33333333,8.16666667 L4.66666667,8.16666667 Z M4.66666667,5.83333333 L9.33333333,5.83333333 L7,2.33333333 L4.66666667,5.83333333 Z"),n(wl,"width","16px"),n(wl,"height","16px"),n(wl,"viewBox","0 0 14 14"),n(wl,"version","1.1"),n(ml,"id","previewMidSmallCircle_icon"),n(ml,"width","20"),n(ml,"height","20"),n(_l,"class","drawing-compass-pointer lastCircle"),n(_l,"cx","267.984375"),n(_l,"cy","253"),n(_l,"r","3"),n(_l,"fill",yl=e[2].lineColor),n(fl,"class","drawing-compass-pointer-border lastCircle lastbigcircle"),n(fl,"aria-labelledby","compassAngleTitle compassAngleDesc"),n(fl,"cx","267.984375"),n(fl,"cy","253"),n(fl,"r","17"),n(fl,"tabindex","0"),n(fl,"focusable","true"),n(Cl,"id","compassAngleTitle"),n(Sl,"id","compassAngleDesc"),n(Pl,"class","lastCircleMid"),n(Pl,"fill","url(#previewLastCircleMid_icon)"),n(Pl,"transform","rotate(90,160,243)"),n(Pl,"cx","267.984375"),n(Pl,"cy","293"),n(Pl,"r","12"),n(Pl,"opacity","0"),n(Fl,"d","M3.76491276,22.4309727 C5.88207272,19.902578 7.10843487, 16.447736 7.10843487,12.7446281 C7.10843487,9.90533039 6.38974128, 7.20188959 5.07542401,4.93464319 L1.71316547,5.67221801 L4.9100909, 0.48305188 L10.1719173,3.81663137 L7.11351005,4.48755064 C8.4088902, 6.93966677 9.10843487,9.78181395 9.10843487,12.7446281 C9.10843487, 16.6677555 7.87827881,20.3638018 5.71250857,23.1972812 L8.63385425, 24.3467251 L2.93165771,26.8255625 L0.595287046,21.1838396 L3.76491276, 22.4309727 Z"),n(Fl,"class",""),n(Rl,"transform","translate(313.742737, 140.576561) rotate(-2.000000) translate(-313.742737, -140.576561) translate(308.242737, 127.076561)"),n(Il,"transform","translate(207.000000, 318.000000)"),n(Tl,"transform","translate(-516.000000, -445.000000)"),n(Tl,"fill","#333333"),n(Tl,"fillrule","nonzero"),n(Ll,"stroke","none"),n(Ll,"strokewidth","1"),n(Ll,"fill","none"),n(Ll,"fillrule","evenodd"),n(Ll,"opacity","0.5"),n(Dl,"width","24"),n(Dl,"height","23"),n(Dl,"viewBox","0 0 11 27"),n(Dl,"version","1.1"),n(Dl,"enablebackground","new 0 0 8 24"),n(Ml,"id","previewLastCircleMid_icon"),n(Ml,"width","20"),n(Ml,"height","20"),n(xs,"class","drawingCompassSvg h"),n(xs,"focusable","false"),n(ms,"width","100%"),n(ms,"height","100%"),n(ms,"id","previewSvg"),n(ms,"class","previewKeySvg"),n(ms,"tabindex","0"),n(ms,"aria-labelledby","previewSvgTitle"),n(cs,"id","centerImg"),n(cs,"class","centerImg centerImgPreview my-auto relative ml-0"),n(Qe,"class","preview_drawing_container"),n(Ye,"class","drawing_module_container"),n(t,"id","drawingPreviewMain")},m(l,r){c(l,t,r),d(t,s),d(s,m),d(m,w),d(w,g),d(g,h),d(g,_),d(g,y),d(w,f),d(w,C),d(C,S),d(S,k),d(k,A),d(A,P),d(A,N),d(N,M),d(M,D),d(k,L),d(k,T),d(T,I),d(T,R),d(R,F),d(F,K),d(k,E),d(k,B),d(B,O),d(B,H),d(H,J),d(J,z),d(k,X),d(k,G),d(G,W),d(G,U),d(U,Y),d(Y,Z),d(k,j),d(k,q),d(q,$),d(q,Q),d(Q,V),d(V,ee),d(k,te),d(k,se),d(se,le),d(se,re),d(re,ie),d(ie,ae),d(k,oe),d(k,ne),d(ne,ce),d(ne,de),d(de,pe),d(pe,ue),d(k,ve),d(k,be),d(be,me),d(be,we),d(we,ge),d(ge,he),d(k,_e),d(k,ye),d(ye,fe),d(ye,Ce),d(Ce,xe),d(xe,Se),d(k,ke),d(k,Ae),d(Ae,Pe),d(Ae,Ne),d(Ne,Me),d(Me,De),d(k,Le),d(k,Te),d(Te,Ie),d(Te,Re),d(Re,Fe),d(Fe,Ke),d(k,Ee),d(k,Be),d(Be,Oe),d(Be,He),d(He,Je),d(Je,ze),d(w,Xe),d(w,Ge),d(Ge,We),d(t,Ue),d(t,Ye),d(Ye,Ze),d(Ye,je),d(Ye,qe),d(Ye,$e),d(Ye,Qe),d(Qe,Ve),d(Ve,et),d(et,tt),d(tt,st),d(st,lt),d(tt,at),d(tt,ot),d(ot,nt),d(tt,pt),d(tt,ut),d(ut,vt),d(et,gt),d(et,ht),d(ht,_t),d(_t,yt),d(ht,xt),d(ht,St),d(St,kt),d(ht,Nt),d(ht,Mt),d(Mt,Dt),d(ht,It),d(ht,Rt),d(Rt,Ft),d(et,Ot),d(et,Ht),d(Ht,Jt),d(Jt,zt),d(et,Ut),d(et,Yt),d(Yt,Zt),d(Zt,jt),d(et,Vt),d(et,es),d(es,ts),d(ts,ss),d(Qe,os),d(Qe,ns),d(ns,cs),d(cs,ds),d(cs,us),d(cs,vs),d(cs,bs),d(cs,ms),d(ms,ws),d(ws,gs),d(ms,hs),d(ms,_s),d(ms,ys),d(ms,fs),d(ms,Cs),d(ms,xs),d(xs,Ss),d(Ss,ks),d(ks,As),d(ks,Ps),d(Ps,Ns),d(ks,Ms),d(Ms,Ds),d(Ms,Ls),d(Ls,Ts),d(Ms,Is),d(Is,Rs),d(Ms,Fs),d(Fs,Ks),d(Ks,Es),d(Es,Bs),d(Es,Os),d(Es,Hs),d(Es,Js),d(Es,zs),d(ks,Xs),d(Xs,Gs),d(Xs,Ws),d(Ws,Us),d(Xs,Ys),d(Ys,Zs),d(Xs,js),d(js,qs),d(qs,$s),d($s,Qs),d(Qs,Vs),d(Vs,el),d(Qs,tl),d(tl,sl),d($s,ll),d(ll,rl),d(rl,il),d(ll,al),d(al,ol),d(ks,nl),d(nl,cl),d(nl,dl),d(dl,pl),d(nl,ul),d(ul,vl),d(nl,bl),d(bl,ml),d(ml,wl),d(wl,gl),d(ks,hl),d(hl,_l),d(hl,fl),d(hl,Cl),d(Cl,xl),d(hl,Sl),d(Sl,kl),d(ks,Al),d(Al,Pl),d(Al,Nl),d(Nl,Ml),d(Ml,Dl),d(Dl,Ll),d(Ll,Tl),d(Tl,Il),d(Il,Rl),d(Rl,Fl),Kl||(El=p(ts,"click",e[3]),Kl=!0)},p(e,t){4&t[0]&&ds.src!==(ps=x+e[2].bgImg)&&n(ds,"src",ps),4&t[0]&&Hl!==(Hl=e[2].alt+"")&&u(gs,Hl),1&t[0]&&Xl!==(Xl=l.compass_radius+(.02649*e[0]).toFixed(2)+"")&&u(Us,Xl),2&t[0]&&Wl!==(Wl=l.compass_angle+e[1]+l.degree+"")&&u(pl,Wl),4&t[0]&&yl!==(yl=e[2].lineColor)&&n(_l,"fill",yl)},i:v,o:v,d(e){e&&b(t),Kl=!1,El()}}}let x="https://s3.amazonaws.com/jigyaasa_content_static/",S="http://www.w3.org/2000/svg";function k(e){let t=[];for(let s=0;s<e.length;s++)t.push({mode:"mode",order:2,type:"scribble_0",index:0,d:"path"}),t[s].mode=e[s].mode,t[s].order=e[s].order,t[s].type=e[s].type,t[s].index=e[s].index,t[s].d=e[s].d;return t}function A(e,t,s,l,r,i,a){let o=((s-=r)-(e-=r))*(s-e)+((l-=i)-(t-=i))*(l-t),n=2*(e*(s-e)+t*(l-t)),c=n*n-4*o*(e*e+t*t-a*a);if(c<=0)return!1;let d=(-n+Math.sqrt(c))/(2*o),p=(-n-Math.sqrt(c))/(2*o);return 0<d&&d<1||0<p&&p<1}function P(e,t,s){let r,i,a,o,n,c,d,p,u,v,b,C,P,N,M,{xml:D}=t,{uxml:L}=t,{isReview:T}=t,{showAns:I}=t,{editorState:R}=t,F=!1,K=!0,E=!1,B=0,O=0,H="scribble",J="#00BCD4",z=[],X=0,G=0,W=[],U=[],Y=[],Z=1,j=0,q=0,$=100,Q=!1,V=90,ee=0,te={x:null,y:null},se={x:null,y:null},le=0,re=50,ie=50,ae="",oe="",ne=!1,ce=1,de=[],pe=[],ue='<smans type="41"></smans>',ve=[],be=[],me=!1,we=[],ge=!1,he=f({correctAnswer:!1,xml:"",openImg:!1,openDrag:!1,bgImg:"useraccount_000ANv.png",cdata:"",focusDATA:"",userXML:"",lineColor:"#00BCD4",selectedTools:["_scribble","_line","_compass"],remediationMode:"off",imgWidth:"600",alt:"Triangle image",markPointColor:"#00ff00"}),_e={};he.subscribe((e=>{s(2,_e=e)}));function ye(e){if(q&&Ge(),e.shiftKey){if(!K)return;K=!1,E=!0,w.selectAll("#previewSvg .lastCircle","addClass","lastCircle_hover")}("compass"==H&&"mousedown"==e.type||e.shiftKey)&&(Ke(),w.selectAll("#previewSvg .lastCircle","css",{cursor:"grabbing"}),(K||"mousedown"==e.type)&&(F=!0,le=1),Oe(),r=document.createElementNS(S,"path"),ze(J,5),r.setAttributeNS(null,"data-type",H+"_"+X),r.setAttributeNS(null,"data-order",X),r.setAttributeNS(null,"d","M"+C+" "+P),r.setAttributeNS(null,"tabindex","0"),o=C,n=P,z.push({mode:"add",order:X,type:H+"_"+X,index:X,d:"M"+C+" "+P}))}function fe(){w.listenAll(".focusPoints","focus",(function(e){w.selectAll(".focusPoints","removeClass","currentFocusPoint"),e.target.classList.add("currentFocusPoint")})),w.listenAll(".focusPoints","blur",(function(){w.selectAll(".focusPoints","removeClass","currentFocusPoint")}))}function Ce(e){null!=e.screenX&&(O&&B&&Ge(),13==e.keyCode||32==e.keyCode||0===e.screenX?(e.preventDefault(),Ne(),ce?(w.select("#moveDrawIcon","addClass","h"),w.select("#previewSvg","css",{cursor:"crosshair"})):(w.select("#moveDrawIcon","removeClass","h"),w.select("#previewSvg","css",{cursor:"auto"}))):"click"==e.type&&0!==e.screenX&&Ne())}function xe(e,t){q&&Ge(),"click"!=t.type&&13!=t.keyCode&&32!=t.keyCode||(H=e.getAttribute("data-title"),w.select("#previewSvg","css",{cursor:"crosshair"}),w.select("#moveDrawIcon","addClass","h"),O=0,B=0,"eraser"==H?w.selectAll(".previewDrawingPaths path","addClass","eraserHover"):w.selectAll(".previewDrawingPaths path","removeClass","eraserHover"),w.selectAll(".drawingCompassSvg","addClass","h"),"compass"==H&&w.selectAll(".drawingCompassSvg","removeClass","h"),Ke()),13!=t.keyCode&&32!=t.keyCode||"eraser"==H||"compass"==H||(w.select("#moveDrawIcon","removeClass","h"),w.select("#previewSvg","css",{cursor:"auto"})),O&&B&&Ge()}function Se(e){switch(H){case"line":case"scribble":F&&(Je(e),j&&(o==i&&n==a&&"line"==H||"scribble"==H&&z[X].d.split("L").length-1<3)&&z.pop(),o==i&&n==a&&"line"==H||"scribble"==H&&z[X].d.split("L").length-1<3?z.pop():(r.setAttributeNS(null,"d",z[X].d+" L"+i+" "+a),z[X].d=z[X].d+" L"+i+" "+a,w.select(".previewDrawingPaths").prepend(r),X++,G++,W=[],w.select("#preview_clearScreen").disabled=!1,w.select("#preview_undo").disabled=!1,w.select("#preview_redo").disabled=!0)),F=!1;break;case"compass":ee=0,le=0,Q&&(Je(e),c=i,d=a,s(0,$=w.select(".drawingCompassRoute").getAttribute("r")),He(c,d,$,V),Q=!1),F&&(z[X].d.split("L").length-1<4?z.pop():(r.setAttributeNS(null,"d",z[X].d+" L"+C+" "+P),z[X].d=z[X].d+" L"+C+" "+P,w.select(".previewDrawingPaths").prepend(r),X++,G++,W=[],w.select("#preview_clearScreen").disabled=!1,w.select("#preview_undo").disabled=!1,w.select("#preview_redo").disabled=!0),F=!1),w.selectAll("#previewSvg .lastCircle","css",{cursor:"grab"})}Le(k(z))}function ke(){s(4,T=!0),(O&&B||j)&&Ge(),!K&&E&&Fe(),Re(!0),H=_e.selectedTools[0].substr(-(_e.selectedTools[0].length-1)),w.selectAll(".preview_btn,#mark_points","removeClass","active"),w.select("#preview"+_e.selectedTools[0],"addClass","active"),"compass"==H?w.selectAll(".drawingCompassSvg","removeClass","h"):w.selectAll(".drawingCompassSvg","addClass","h"),s(2,_e.remediationMode="on",_e),w.selectAll(".previewBtnGrp","addClass","h"),H="none",w.selectAll(".preview_drawing_container","css",{pointerEvents:"none"}),w.select("#previewSvg","removeClass","previewKeySvg"),w.selectAll(".previewMarkingPaths .answer_mark","remove"),Te(),Me(JSON.parse(we)),w.selectAll("path.answer_mark","attr",{tabindex:"0","aria-labelledby":"answerLine"}),_e.correctAnswer?(w.insert(".previewMarkingPaths",'<title id="answerLine">'+l.ans_correct+"</title>","beforeend"),w.selectAll(".answer_mark","css",{stroke:"#0F9D58"})):(w.insert(".previewMarkingPaths",'<title id="answerLine">'+l.ans_incorrect+"</title>","beforeend"),w.selectAll(".answer_mark","css",{stroke:"#FF0000"}),w.selectAll(".answer_circle","css",{stroke:"#0F9D58"}))}function Ae(){s(4,T=!1),w.selectAll(".preview_drawing_container","css",{pointerEvents:""}),w.selectAll(".previewBtnGrp","removeClass","h"),w.select("#previewSvg","addClass","previewKeySvg"),H=_e.selectedTools[0].substr(-(_e.selectedTools[0].length-1)),w.selectAll(".preview_btn,#mark_points","removeClass","active"),w.select("#preview"+_e.selectedTools[0],"addClass","active"),"compass"==H?(w.selectAll(".drawingCompassSvg","removeClass","h"),w.select("#previewSvg","css",{cursor:"crosshair"}),w.select("#moveDrawIcon","addClass","h")):w.selectAll(".drawingCompassSvg","addClass","h"),w.selectAll(".preview_btn,#mark_points","removeClass","active"),w.selectAll("#preview"+_e.selectedTools[0],"addClass","active"),w.selectAll(".correct_answer_container .answer_mark","remove"),w.select("#mark_points").innerText="Mark Points",w.select("#mark_points").disabled=!1,ce=1,s(2,_e.remediationMode="off",_e),w.selectAll(".previewMarkingPaths title","remove"),w.selectAll(".answer_mark","css",{stroke:_e.markPointColor}),w.selectAll(".answer_mark","removeAttr","tabindex")}function Pe(){try{ae=_(D),null==ae.smxml._markPointColor&&(ae.smxml._markPointColor="#00ff00"),null==ae.smxml._color&&(ae.smxml._color="rgb(0, 188, 212)"),he.update((e=>(e.bgImg=ae.smxml._bgimg,e.alt=ae.smxml._imgAlt,e.imgWidth=ae.smxml._width,e.lineColor=ae.smxml._color,e.focusDATA=ae.smxml.backgroundPoint.__cdata,e.markPointColor=ae.smxml._markPointColor,e.selectedTools=ae.smxml.div._selectedDrawingType.split(","),e))),Y=[],Z=1;let e=_e.focusDATA;e="["+e.replace(/!/g,",")+"]",e=JSON.parse(e),w.selectAll(".backgroundFocusPointPreview circle,.backgroundFocusPathPreview path, .backgroundFocusPointPreview title","remove");for(let t=0;t<e.length;t++)Y.push(e[t][t]);for(let t=0;t<e.length;t++){for(let s=0;s<e[t][t].length;s++)Y[t][s].x=e[t][t][s].x,Y[t][s].y=e[t][t][s].y,r=document.createElementNS(S,"circle"),ze("#808080",5),r.setAttributeNS(null,"aria-labelledby","focusPoint_"+Z+"_title focusPoint_"+Z+"_desc"),r.setAttributeNS(null,"tabindex","0"),r.setAttributeNS(null,"class","focusPoints"),r.setAttributeNS(null,"data-focusOrder",Z),r.setAttributeNS(null,"cx",Y[t][s].x),r.setAttributeNS(null,"cy",Y[t][s].y),r.setAttributeNS(null,"r","2px"),w.select(".backgroundFocusPointPreview").append(r),w.insert(".backgroundFocusPointPreview",'<title id="focusPoint_'+Z+'_title">You are on the '+Z+' Point </title><desc id="focusPoint_'+Z+'_desc">Press shift + tab to move towards the previous point or tab to move towards the next points</desc>',"beforeend"),Z++;Ie(Y[t],1)}J=_e.lineColor,z=[],K=!0,E=!1,B=0,O=0,X=0,G=0,W=[],U=[],ce=1,de=[],H=_e.selectedTools[0].substr(-(_e.selectedTools[0].length-1)),R&&w.selectAll(".previewMarkingPaths .answer_mark,.previewDrawingPaths path","remove"),"compass"==H?(w.selectAll(".drawingCompassSvg","removeClass","h"),w.select("#previewSvg","css",{cursor:"crosshair"}),w.select("#moveDrawIcon","addClass","h")):w.selectAll(".drawingCompassSvg","addClass","h"),w.select("#mark_points").disabled=!1,w.select("#mark_points").innerText="Mark Points",w.select("#preview_undo").disabled=!0,w.select("#preview_redo").disabled=!0,w.select("#preview_clearScreen").disabled=!0,w.selectAll(".geometryToolPreview","addClass","h");for(let e=0;e<_e.selectedTools.length;e++)w.select("#preview"+_e.selectedTools[e],"removeClass","h");w.selectAll(".preview_btn,#mark_points","removeClass","active"),w.select("#preview"+_e.selectedTools[0],"addClass","active"),w.selectAll(".preview_drawing_toolbar, .centerImgPreview","attr",{style:"width:"+(Number(_e.imgWidth)+2)+"px"}),w.select(".centerImg #svgImgPreview","attr",{src:x+""+_e.bgImg,alt:_e.alt,width:_e.imgWidth}),w.enableBsAll(".tooltip_btn","Tooltip",{container:"body"})}catch(e){console.warn({error:e,func:"parseXMLForGettingData @271"})}}function Ne(){w.selectAll(".drawingCompassSvg","addClass","h"),w.selectAll("#previewSvg path","removeClass","eraserHover"),ce?(w.selectAll(".preview_btn","removeClass","active"),w.select("#mark_points").innerText="Finish Marking",w.select("#mark_points","addClass","active"),ce=0,w.selectAll(".previewMarkingPaths .answer_mark","remove"),ve=[],de=[],R||w.selectAll(".correct_answer_container .answer_mark","remove"),H="markPoints"):(w.select("#mark_points").innerText="Mark Points",w.select("#mark_points","removeClass","active"),de.length>=1&&(Ie(de),"on"==_e.remediationMode&&Re()),H=_e.selectedTools[0].substr(-(_e.selectedTools[0].length-1)),w.select("#moveDrawIcon","addClass","h"),w.select("#previewSvg","css",{cursor:"crosshair"}),w.select("#preview"+_e.selectedTools[0],"addClass","active"),"compass"==H?w.selectAll(".drawingCompassSvg","removeClass","h"):w.selectAll(".drawingCompassSvg","addClass","h"),ce=1)}function Me(e){for(let t=0;t<e.length;t++)r=document.createElementNS(S,"circle"),ze(_e.markPointColor,5),r.setAttributeNS(null,"class","answer_mark"),r.setAttributeNS(null,"cx",e[t].x),r.setAttributeNS(null,"cy",e[t].y),r.setAttributeNS(null,"r","2px"),w.select(".previewMarkingPaths").prepend(r);Ie(e)}function De(e,t){if(null!=w.select(e).getAttribute("data-order")){W=[];let s="",l=t.indexOf(t[w.select(e).getAttribute("data-order")]),r="["+JSON.stringify(t[l])+"]";s=k(JSON.parse(r)),s[0].mode="remove",t.push(s[0]),Le(k(t)),X++,G++,w.select(e,"remove"),w.select("#preview_redo").disabled=!0,w.select("#preview_undo").disabled=!1,0==w.selectAll(".previewDrawingPaths path").length&&(w.select("#preview_clearScreen").disabled=!0)}}function Le(e){pe=[];let t=0;for(let s=0;s<e.length;s++)for(t=s+1;t<e.length;)e[s].type==e[t].type&&"add"==e[s].mode&&"remove"==e[t].mode&&(e[s].mode=null,e[t].mode=null),t++;for(let t=0;t<e.length;t++)e=e.filter((function(e){return null!=e.mode}));pe.push(e),Te()}function Te(){we=[],we=0==de.length?JSON.stringify(ve):JSON.stringify(de),ue='<smans type="41"><markpoints>'+we+"</markpoints><userDrawPath>"+JSON.stringify(pe[0])+"</userDrawPath><ansCorrect>"+ne+"</ansCorrect></smans>",window.ISSPECIALMODULEUSERXMLCHANGE=1,w.select("#special_module_user_xml","value",ue)}function Ie(e,t){if(0==e.length)return;r=document.createElementNS(S,"path");let s="M "+e[0].x+" "+e[0].y,l="";for(let t=1;t<e.length;t++)l+=" L "+e[t].x+" "+e[t].y;r.setAttributeNS(null,"d",s+""+l),t?(ze("rgb(128, 128, 128)",5),w.select(".backgroundFocusPathPreview").prepend(r)):(ze(_e.markPointColor,5),r.setAttributeNS(null,"class","answer_mark"),w.select(".previewMarkingPaths").prepend(r))}function Re(e){ae=_(_e.xml),oe=ae.smxml.div.__cdata,oe="["+oe.replace(/!/g,",")+"]",oe=JSON.parse(oe);let t=[];t=de,R||L&&0==de.length&&(t=ve),Ee(t,e),Be(ne,t,e),e&&(w.select("#mark_points").innerText="Mark Points",w.select("#mark_points").disabled=!1,ce=1)}function Fe(){w.selectAll("#previewSvg .lastCircle","removeClass","lastCircle_hover"),w.selectAll("#previewSvg .lastCircle","css",{cursor:"grab"}),K=!0,-1==z[X].d.indexOf("L")?z.pop():(r.setAttributeNS(null,"d",z[X].d+" L"+C+" "+P),z[X].d=z[X].d+" L"+C+" "+P,w.select(".previewDrawingPaths").prepend(r),X++,G++,W=[],w.select("#preview_undo").disabled=!1,w.select("#preview_clearScreen").disabled=!1,w.select("#preview_redo").disabled=!0),Le(k(z))}function Ke(){w.selectAll(".previewMarkingPaths .answer_mark","remove"),R||w.selectAll(".correct_answer_container .answer_mark","remove"),de=[],w.select("#mark_points").innerText="Mark Points",w.select("#mark_points").disabled=!1,ce=1}function Ee(e,t){let s=[];if(t)for(let e=0;e<oe.length;e++)r=document.createElementNS(S,"circle"),ze("#0F9D58","2"),r.setAttributeNS(null,"class","answer_mark answer_circle"),r.setAttributeNS(null,"cx",oe[e].x),r.setAttributeNS(null,"cy",oe[e].y),r.setAttributeNS(null,"r",oe[e].r),w.select(".correct_answer_container").prepend(r);if(0==oe.length||0==e.length)return void(ne=!1);let l=1==e.length?e.length:e.length-1;for(let t=0;t<oe.length;t++)for(let r=0;r<l;r++){if(1==l&&1==e.length&&A(e[r].x,e[r].y,0,0,oe[t].x,oe[t].y,oe[t].r)){s.push("Match");break}if(l>=1&&e.length>1&&A(e[r].x,e[r].y,e[r+1].x,e[r+1].y,oe[t].x,oe[t].y,oe[t].r)){s.push("Match");break}}ne=s.length==oe.length,s=[]}function Be(e,t,r){e?(s(2,_e.correctAnswer=!0,_e),r&&(oe.length&&t.length&&Ie(t),w.selectAll(".answer_mark","css",{stroke:"#0F9D58"}),R&&I(l.correct))):(s(2,_e.correctAnswer=!1,_e),r&&(oe.length&&t.length&&Ie(t),w.selectAll(".answer_mark","css",{stroke:"#ff0000"}),w.selectAll(".answer_circle","css",{stroke:"#0F9D58"}),R&&I(l.incorrect))),y({uXml:ue,ans:_e.correctAnswer})}function Oe(){te.x=Number(w.select(".compassRotationBar").getAttribute("x1")),te.y=Number(w.select(".compassRotationBar").getAttribute("y1")),se.x=Number(w.select(".compassRotationBar").getAttribute("x2")),se.y=Number(w.select(".compassRotationBar").getAttribute("y2")),s(0,$=Number(w.select(".drawingCompassRoute").getAttribute("r"))),s(1,V=180*Math.atan2(se.y-te.y,se.x-te.x)/Math.PI)}function He(e,t,s,l){p=e+s/2*Math.cos(l*(Math.PI/180)),u=t+s/2*Math.sin(l*(Math.PI/180)),v=e+3*s/4*Math.cos(l*(Math.PI/180)),b=t+3*s/4*Math.sin(l*(Math.PI/180)),C=e+s*Math.cos(l*(Math.PI/180)),P=t+s*Math.sin(l*(Math.PI/180)),N=e+5*s/4*Math.cos(l*(Math.PI/180)),M=t+5*s/4*Math.sin(l*(Math.PI/180)),w.selectAll(".drawingCompassRoute,.drawingCompassCenter","attr",{cx:e,cy:t}),w.selectAll(".drawingCompassRoute","attr",{r:s}),w.selectAll(".compassRotationBar","attr",{x1:e,y1:t,x2:C,y2:P}),w.selectAll("#previewSvg .lastCircleMid","attr",{cx:N,cy:M,transform:"rotate("+l+","+N+","+M+")"}),w.selectAll("#previewSvg .lastCircle","attr",{cx:C,cy:P}),w.selectAll("#previewSvg .midSmallCircle","attr",{cx:v,cy:b,transform:"rotate("+l+","+v+","+b+")"}),w.selectAll("#previewSvg .mid_circle","attr",{cx:p,cy:u,transform:"rotate("+l+","+p+","+u+")"});let r=l;r<0&&(r=360+r),w.select("#compassRotationTitle").innerText="Compass Angle, Your Current Angle is "+r.toFixed(0)+" degree",w.select("#compassRadiusTitle").innerText="Compass Radius, Your Current Radius is "+(.02649*s).toFixed(1)+"cm"}function Je(e){let t=document.getElementById("previewSvg").getBoundingClientRect();i=e.clientX-t.left,a=e.clientY-t.top}function ze(e,t){r.style.stroke=e,r.style.strokeWidth=t,r.style.fill="none"}function Xe(e,t){if(!w.select(".drawingCompassSvg").classList.contains("h")&&"compass"==H){let l=w.select("#svgImgPreview").clientWidth,i=w.select("#svgImgPreview").clientHeight;if(Oe(),t.shiftKey&&(38==t.keyCode||37==t.keyCode||39==t.keyCode||40==t.keyCode)){if("radius"==e)switch(t.keyCode){case 38:s(0,$++,$);break;case 37:s(0,$--,$);break;case 39:s(0,$++,$);break;case 40:s(0,$--,$)}if("move"==e)switch(t.keyCode){case 38:te.y--;break;case 37:te.x--;break;case 39:te.x++;break;case 40:te.y++}if("rotate"==e||"draw"==e)switch(t.keyCode){case 38:s(1,V++,V);break;case 39:s(1,V--,V);break;case 37:s(1,V++,V);break;case 40:s(1,V--,V)}if("draw"==e&&(w.select("#previewSvg .lastCircle").classList.contains("lastCircle_hover")||w.select("#previewSvg .lastbigcircle").classList.contains("lastCircle_hover"))&&(r.setAttributeNS(null,"d",z[X].d+" L"+C+" "+P),z[X].d=z[X].d+" L"+C+" "+P,w.select(".previewDrawingPaths").prepend(r)),te.x<10||$<80||$>360||te.x>l||te.y<10||te.y>i)return;He(te.x,te.y,$,V)}}}function Ge(){o==ie&&n==re&&"line"==H||"scribble"==H&&-1==z[X].d.indexOf("L")?z.pop():(isNaN(ie)&&isNaN(re)||(r.setAttributeNS(null,"d",z[X].d+" L"+ie+" "+re),z[X].d=z[X].d+" L"+ie+" "+re,w.select(".previewDrawingPaths").prepend(r)),X++,G++,W=[],w.select("#preview_undo").disabled=!1,w.select("#preview_clearScreen").disabled=!1,w.select("#preview_redo").disabled=!0),q=0,O=0,B=0,j=0,Le(k(z))}return m((async()=>{w.createLink(baseUrlTheme+"clsSMDrawing/css/drawing.css",{preload:!0,type:"stylesheet",as:"style"}),ge=-1!=navigator.userAgent.indexOf("Mac"),He(160,118,100,90),w.listen("body","click","#set-review",(function(){ke()})),w.listen("body","click","#unset-review",(function(){Ae()})),w.listen("body","click","#preview_reset_btn",(function(){g({text:l.reset_module,icon:"warning",buttons:!0}).then((e=>{e&&(Pe(),fe())}))})),w.bind("body","keydown",(function(e){if(!R&&(32==e.keyCode||37==e.keyCode||38==e.keyCode||39==e.keyCode||40==e.keyCode))return!1})),w.listen("body","keyup",".previewKeySvg .previewDrawingPaths path",(function(e,t){(46==t.keyCode||8==t.keyCode&&ge)&&De(e,z)})),w.listen("body","keyup",".previewKeySvg",(function(e,t){90==t.keyCode&&t.ctrlKey&&!w.select("#preview_undo").disabled&&(O&&B&&Ge(),w.select("#preview_undo").click()),89==t.keyCode&&t.ctrlKey&&!w.select("#preview_redo").disabled&&(O&&B&&Ge(),w.select("#preview_redo").click()),88==t.keyCode&&t.ctrlKey&&w.select("#preview_clearScreen").click(),13!=t.keyCode&&32!=t.keyCode||"compass"==H||"eraser"==H||(w.select("#moveDrawIcon","removeClass","h"),w.select(".previewKeySvg","css",{cursor:"auto"})),!t.shiftKey||13!=t.keyCode&&32!=t.keyCode||0==w.select("#moveDrawIcon").offsetHeight||("markPoints"==H?(r=document.createElementNS(S,"circle"),ze(_e.markPointColor,5),r.setAttributeNS(null,"class","answer_mark"),r.setAttributeNS(null,"cx",ie),r.setAttributeNS(null,"cy",re),r.setAttributeNS(null,"r","2px"),de.push({x:ie,y:re}),w.select(".previewMarkingPaths").prepend(r),Re(!1),Te()):B?Ge():(O=1,Ke(),r=document.createElementNS(S,"path"),ze(J,5),r.setAttributeNS(null,"data-type",H+"_"+X),r.setAttributeNS(null,"data-order",X),r.setAttributeNS(null,"d","M"+ie+" "+re),r.setAttributeNS(null,"tabindex","0"),o=ie,n=re,z.push({mode:"add",order:X,type:H+"_"+X,index:X,d:"M"+ie+" "+re}),B=1))})),w.listen("body","keydown",".previewKeySvg",(function(e,t){if(w.select("#moveDrawIcon").offsetHeight){let e=w.select("#svgImgPreview").clientWidth,s=w.select("#svgImgPreview").clientHeight;if(t.shiftKey&&(38==t.keyCode||37==t.keyCode||39==t.keyCode||40==t.keyCode)&&!j){switch(t.keyCode){case 38:re--;break;case 40:re++;break;case 39:ie++;break;case 37:ie--}if(re<0||ie>e||ie<0||re>s)return;w.select("#moveDrawIcon","css",{top:re+"px",left:ie+"px"}),O&&(r.setAttributeNS(null,"d",z[X].d+" L"+ie+" "+re),"line"!=H&&(z[X].d=z[X].d+" L"+ie+" "+re),w.select(".previewDrawingPaths").prepend(r),B=1)}if(t.shiftKey&&76==t.keyCode&&(j?(j=0,Ge()):(j=1,O=1,Ke(),ie=Number(w.select(".currentFocusPoint").getAttribute("cx")),re=Number(w.select(".currentFocusPoint").getAttribute("cy")),r=document.createElementNS(S,"path"),ze(J,5),r.setAttributeNS(null,"data-type",H+"_"+X),r.setAttributeNS(null,"data-order",X),r.setAttributeNS(null,"d","M"+ie+" "+re),r.setAttributeNS(null,"tabindex","0"),o=ie,n=re,z.push({mode:"add",order:X,type:H+"_"+X,index:X,d:"M"+ie+" "+re}))),9==t.keyCode&&j&&("line"==H||"scribble"==H)){let e=setTimeout((function(){w.select(".currentFocusPoint").nodeName&&(ie=Number(w.select(".currentFocusPoint").getAttribute("cx")),re=Number(w.select(".currentFocusPoint").getAttribute("cy")),isNaN(ie)&&isNaN(re)||("scribble"!=H&&"line"!=H||(q=1),r.setAttributeNS(null,"d",z[X].d+" L"+ie+" "+re),w.select(".previewDrawingPaths").prepend(r),clearTimeout(e)))}),10)}if(68==t.keyCode&&j&&q){let e=setTimeout((function(){isNaN(ie)&&isNaN(re)||(z[X].d=z[X].d+" L"+ie+" "+re,w.select(".previewDrawingPaths").prepend(r),clearTimeout(e),q=0)}),10)}}})),w.listen("body","keydown",".previewKeySvg .drawingCompassCenter",(function(e,t){Xe("move",t)})),w.listen("body","keydown",".previewKeySvg .mid_circle",(function(e,t){Xe("radius",t)})),w.listen("body","keydown",".previewKeySvg .midSmallCircle",(function(e,t){Xe("rotate",t)})),w.listen("body","keydown",".previewKeySvg .lastCircle",(function(e,t){Xe("draw",t)})),w.listen("body","keydown",".focusPoints",(function(e,t){if(t.shiftKey&&13==t.keyCode)return!1;13!=t.keyCode&&32!=t.keyCode||"markPoints"==H||"eraser"==H||(ie=Number(w.select(".currentFocusPoint").getAttribute("cx")),re=Number(w.select(".currentFocusPoint").getAttribute("cy")),"compass"!=H?w.select("#moveDrawIcon","css",{top:re+"px",left:ie+"px"}):He(ie,re,$,V))})),w.listen("body","keyup",".previewKeySvg .lastCircle",(function(e,t){!K&&E&&16==t.keyCode&&Fe()})),w.bind(".previewKeySvg .lastCircle","blur",(function(){!K&&E&&Fe()})),w.listen("body","mousedown","#previewSvg .midSmallCircle",(function(){"compass"==H&&(le=1,Oe())})),w.listen("body","mousedown","#previewSvg .drawingCompassCenter",(function(){"compass"==H&&(Je(event),c=i,d=a,s(0,$=w.select(".drawingCompassRoute").getAttribute("r")),He(c,d,$,V),Q=!0)})),w.listen("body","mousedown","#previewSvg .mid_circle",(function(){"compass"==H&&(ee=1)})),w.listen("body","mousedown","#previewSvg .lastCircle",(function(e,t){ye(t)})),w.listen("body","keydown","#previewSvg .lastCircle",(function(e,t){ye(t)})),w.listen("body","mousedown","#previewSvg",(function(e,t){switch(w.select("#previewSvg","css",{cursor:"crosshair"}),w.select("#moveDrawIcon","addClass","h"),(O&&B||j)&&Ge(),H){case"line":case"scribble":Ke(),F=!0,Je(t),r=document.createElementNS(S,"path"),ze(J,5),r.setAttributeNS(null,"data-type",H+"_"+X),r.setAttributeNS(null,"data-order",X),r.setAttributeNS(null,"d","M"+i+" "+a),r.setAttributeNS(null,"tabindex","0"),o=i,n=a,z.push({mode:"add",order:X,type:H+"_"+X,index:X,d:"M"+i+" "+a});break;case"eraser":De(".currentSvg",z);break;case"markPoints":ce||(Je(t),r=document.createElementNS(S,"circle"),ze(_e.markPointColor,5),r.setAttributeNS(null,"class","answer_mark"),r.setAttributeNS(null,"cx",i),r.setAttributeNS(null,"cy",a),r.setAttributeNS(null,"r","2px"),de.push({x:i,y:a}),w.select(".previewMarkingPaths").prepend(r),Re(!1),Te())}})),w.listen("body","mousemove","#previewSvg",(function(e,t){switch(H){case"line":F&&(Je(t),r.setAttributeNS(null,"d",z[X].d+" L"+i+" "+a),o==i&&n==a||w.select(".previewDrawingPaths").prepend(r));break;case"scribble":F&&(Je(t),r.setAttributeNS(null,"d",z[X].d+" L"+i+" "+a),z[X].d=z[X].d+" L"+i+" "+a,z[X].d.split("L").length-1<3||w.select(".previewDrawingPaths").prepend(r));break;case"compass":Je(t),Q&&(c=i,d=a,s(0,$=w.select(".drawingCompassRoute").getAttribute("r")),He(c,d,$,V)),ee&&(Oe(),s(0,$=2*Math.sqrt(Math.pow(i-te.x,2)+Math.pow(a-te.y,2))),$<80&&s(0,$=80),$>360&&s(0,$=360),He(te.x,te.y,$,V)),le&&(Oe(),s(1,V=180*Math.atan2(a-te.y,i-te.x)/Math.PI),V<0&&s(1,V=360+V),He(te.x,te.y,$,V)),F&&(w.select("#previewSvg .lastCircle").classList.contains("lastCircle_hover")||w.select("#previewSvg .lastbigcircle").classList.contains("lastCircle_hover")?(r.setAttributeNS(null,"d",z[X].d+" L"+C+" "+P),z[X].d=z[X].d+" L"+C+" "+P,z[X].d.split("L").length-1<4||w.select(".previewDrawingPaths").prepend(r)):Se(t))}})),w.listen("body","mouseup","#previewSvg",(function(e,t){Se(t)})),w.bind("#previewSvg","mouseleave",(function(e){Se(e)})),w.listen("body","click",".preview_toolbar",(function(e,t){xe(e,t)})),w.listen("body","keyup",".preview_toolbar",(function(e,t){xe(e,t)})),w.listen("body","mouseover",".previewDrawingPaths path",(function(e){"eraser"==H&&(w.selectAll(".previewDrawingPaths path","removeClass","currentSvg"),e.classList.add("currentSvg"))})),w.listen("body","mouseout",".previewDrawingPaths path",(function(e){"eraser"==H&&e.classList.remove("currentSvg")})),w.listen("body","mousemove","#previewSvg .lastCircle",(function(e){e.classList.add("lastCircle_hover"),w.selectAll("#previewSvg .lastCircleMid","attr",{opacity:1})})),w.listen("body","mouseout","#previewSvg .lastCircle",(function(e){e.classList.remove("lastCircle_hover"),w.selectAll("#previewSvg .lastCircleMid","attr",{opacity:0})})),w.listenAll("#previewSvg .lastCircle","focus",(function(e){e.target.classList.add("lastCircle_hover"),w.selectAll("#previewSvg .lastCircleMid","attr",{opacity:1})})),w.listenAll("#previewSvg .lastCircle","blur",(function(e){e.target.classList.remove("lastCircle_hover"),w.selectAll("#previewSvg .lastCircleMid","attr",{opacity:0})})),w.listen("body","click",".preview_btn",(function(e){w.selectAll(".preview_btn, #mark_points","removeClass","active"),e.classList.add("active")})),w.listen("body","click","#preview_clearScreen",(function(){w.selectAll(".previewDrawingPaths path","remove"),G=0,X=0,z=[],Le(k(z)),w.select("#preview_undo").disabled=!0,w.select("#preview_redo").disabled=!0,w.select("#preview_clearScreen").disabled=!0})),w.listen("body","click","#preview_undo",(function(e){1==G&&(e.disabled=!0),w.select("#preview_redo").disabled=!1,"add"==z[z.length-1].mode?w.selectAll('#previewSvg [data-order="'+(z.length-1)+'"]',"remove"):"remove"==z[z.length-1].mode&&(r=document.createElementNS(S,"path"),ze(J,5),r.setAttributeNS(null,"data-type",z[z.length-1].type),r.setAttributeNS(null,"data-order",z[z.length-1].order),r.setAttributeNS(null,"d",z[z.length-1].d),r.setAttributeNS(null,"tabindex","0"),"eraser"==H&&r.setAttributeNS(null,"class","eraserHover"),w.select(".previewDrawingPaths").prepend(r)),W.push(z.pop()),Le(k(z)),X--,G--,w.select("#preview_clearScreen").disabled=0==w.selectAll(".previewDrawingPaths path").length,0==z.length&&(e.disabled=!0)})),w.listen("body","click","#preview_redo",(function(e){X++,W.length>0&&U.push(W.pop()),"add"==U[U.length-1].mode?(r=document.createElementNS(S,"path"),ze(J,5),r.setAttributeNS(null,"data-type",U[U.length-1].type),r.setAttributeNS(null,"data-order",U[U.length-1].order),r.setAttributeNS(null,"d",U[U.length-1].d),r.setAttributeNS(null,"tabindex","0"),"eraser"==H&&r.setAttributeNS(null,"class","eraserHover"),w.select(".previewDrawingPaths").prepend(r)):"remove"==U[U.length-1].mode&&w.selectAll('#previewSvg [data-order="'+U[U.length-1].order+'"]',"remove"),G++,z.push(U.pop()),Le(k(z)),w.select("#preview_clearScreen").disabled=0==w.selectAll(".previewDrawingPaths path").length,0==W.length&&(e.disabled=!0),w.select("#preview_undo").disabled=!1})),w.listen("body","click","#mark_points",(function(e,t){Ce(t)})),w.listen("body","keyup","#mark_points",(function(e,t){Ce(t)}))})),h((async()=>{var e,t;_e.xml!=D&&(Pe(),s(2,_e.xml=D,_e),fe(),void 0===R&&(w.selectAll(".reset_group","remove"),L&&(-1==L.search('<smans type="41">')||0==L.search('<smans type="41"></smans>')||-1!=L.search("undefined")?w.select("#special_module_user_xml","value",""):(T?(w.selectAll(".previewBtnGrp","addClass","h"),H="none",w.selectAll(".preview_drawing_container","css",{pointerEvents:"none"}),w.select("#previewSvg","removeClass","previewKeySvg")):(w.selectAll(".preview_drawing_container","css",{pointerEvents:""}),w.selectAll(".previewBtnGrp","removeClass","h"),w.select("#previewSvg","addClass","previewKeySvg"),H=_e.selectedTools[0].substr(-(_e.selectedTools[0].length-1)),w.selectAll(".preview_btn,#mark_points","removeClass","active"),w.select("#preview"+_e.selectedTools[0],"addClass","active")),e=w.select("#special_module_user_xml").value,t=T,e=_(e),ve=JSON.parse(e.smans.markpoints),null==e.smans.userDrawPath&&(e.smans.userDrawPath=""),be=JSON.parse(e.smans.userDrawPath),me="true"==e.smans.ansCorrect.toLowerCase(),ae=_(D),oe=ae.smxml.div.__cdata,oe="["+oe.replace(/!/g,",")+"]",oe=JSON.parse(oe),Me(ve),function(){be.length&&(w.select("#preview_undo").disabled=!1,w.select("#preview_undo").disabled=!1);for(let e=0;e<be.length;e++)be[e].type=be[e].type.substr(0,be[e].type.indexOf("_"))+"_"+e,be[e].order=e,r=document.createElementNS(S,"path"),ze(J,5),r.setAttributeNS(null,"data-type",be[e].type),r.setAttributeNS(null,"data-order",be[e].order),r.setAttributeNS(null,"d",be[e].d),r.setAttributeNS(null,"tabindex","0"),w.select(".previewDrawingPaths").prepend(r);X=be.length,z=k(be)}(),Ee(ve,t),Be(me,ve,t))))),_e.review!=T&&R&&(he.update((e=>(e.review=T,e))),T?ke():Ae())})),e.$$set=e=>{"xml"in e&&s(5,D=e.xml),"uxml"in e&&s(6,L=e.uxml),"isReview"in e&&s(4,T=e.isReview),"showAns"in e&&s(7,I=e.showAns),"editorState"in e&&s(8,R=e.editorState)},[$,V,_e,function(){w.getBS("#drawing_shortcut_modal","Modal").show()},T,D,L,I,R]}export default class extends e{constructor(e){super(),t(this,e,P,C,s,{xml:5,uxml:6,isReview:4,showAns:7,editorState:8},[-1,-1,-1])}}
//# sourceMappingURL=DrawingPreview-a78b1b64.js.map
