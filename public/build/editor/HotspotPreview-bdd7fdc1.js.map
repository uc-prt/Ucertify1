{"version":3,"file":"HotspotPreview-bdd7fdc1.js","sources":["../../../clsSMHotspot/hotspotScript.js","../../../clsSMHotspot/hotspotDrawingScript.js","../../../clsSMHotspot/libs/util.svelte","../../../clsSMHotspot/HotspotPreview.svelte"],"sourcesContent":["import JUI from '../src/libs/javscript_helper/JUI.js';\r\nconst JS = new JUI();\r\nexport default class hotspotScript {\r\n    constructor() {\r\n        this.userAnsXML=\"<SMANS></SMANS>\";\r\n        this.xaxis=[];\r\n        this.yaxis=[];\r\n        this.count=0;\r\n        this.drawstr = \"\"; \r\n        this.elemId = '#hptmain0';\r\n        this.labBinded = true;\r\n        this.result = false;\r\n        this.temp = 0;\r\n    }\r\n    // for initiallization the module\r\n    readyThis(hid, review, type, correctans) {\r\n        hid = '#'+hid;\r\n        if (!review) {\r\n            this.labBinded = true;\r\n            const textClickListen = function(event){\r\n                if (this.labBinded) {\r\n                    let _this  = event, getVal = '';\r\n                    if (_this.classList.contains('selected')) {\t\r\n                        _this.setAttribute('data-userans', 0);\r\n                        _this.classList.remove('selected');\r\n                    } else {\r\n                        _this.setAttribute('data-userans',1);\r\n                        _this.classList.add('selected');\r\n                    }\r\n                    JS.find(hid, '[type] .textClick.selected', 'all').forEach(function(v,i) {\r\n                        if (i==0)\r\n                            getVal = v.textContent;\r\n                        else\r\n                            getVal = getVal + '|' + v.textContent;\r\n                    });\r\n                    JS.find(hid, '[type]', {action: 'attr', actionData: {\"data-userans\": getVal} });\r\n                }\r\n            }; \r\n            const textSeelctListen = function(e) {\r\n                if (this.labBinded) {\r\n                    let getVal='';\r\n                    if (e.target?.nodeName == \"SPAN\") {\r\n                        JS.select(e.target, 'removeClass',['selecttext', 'selected']);\r\n                        this.removespan(e.target,hid,0);\r\n                    } else {\r\n                        this.highlightText(hid);\t\t\t\t\r\n                    }\r\n                    JS.find(hid, '[type] .selecttext.selected', 'all').forEach(function(v,i) {\r\n                        if (i == 0) getVal = v.textContent;\r\n                        else getVal = getVal + '|' + v.textContent;\r\n                    });\r\n                    let found = JS.find(hid, '[type]');\r\n                    JS.select(found, 'attr', {\"data-userhtml\": found.innerHTML, \"data-userans\": getVal});\r\n                } \r\n            }\r\n            JS.listen(hid, 'touchstart', '.textClick', textClickListen.bind(this));\r\n            JS.listen(hid, 'touchend', '.textClick', textClickListen.bind(this));\r\n            JS.listen(hid, 'click', '.textClick', textClickListen.bind(this));\r\n            JS.listen(hid, 'touchstart', '[type=\"textselect\"]', textSeelctListen.bind(this));\t\r\n            JS.listen(hid, 'touchend', '[type=\"textselect\"]', textSeelctListen.bind(this));\r\n            JS.listen(hid, 'click', '[type=\"textselect\"]', textSeelctListen.bind(this));\r\n        }\r\n\r\n    }\r\n\r\n    // for checking answer in case of textclick and textselect and also create the user ans on the basis of it and return true if answer is correct\r\n    check_Ans(hid) {\r\n        let userAnswers = \"\";\r\n        let inNativeIsCorrect = false;\r\n        let sendDataToNative = {\r\n            inNativeIsCorrect: inNativeIsCorrect,\r\n            userAnswers: userAnswers,\r\n        }; \r\n        this.userAnsXML = \"<smans type='4'>\\\\n\";\r\n        this.result = true;\r\n        this.temp = 0;\r\n        let selector = JS.select(hid).children;\r\n        for (let i = 0; i < selector.length; i++) {\r\n            this.userAnsXML = this.checkChildAnswer(hid, selector[i], this.userAnsXML);\r\n        }\r\n        // JS.select(hid).children.forEach((_elm)=>{\r\n        //     this.userAnsXML = this.checkChildAnswer(hid, _elm, this.userAnsXML);\r\n        // });\r\n        this.userAnsXML += \"</smans>\";\r\n        window.ISSPECIALMODULEUSERXMLCHANGE = 1;\r\n       // JS.select(\"#special_module_user_xml\").value = (userAnsXML);\r\n        sendDataToNative.userAnswers = JS.select(\"#special_module_user_xml\").value;\r\n        if(typeof calculatePoint != \"undefined\")\r\n        {\r\n            calculatePoint(JS.select(hid).getAttribute('totalcorrectans'), temp);\r\n        }\r\n        if (window.inNative) {\r\n            window.getHeight?.();\r\n            sendDataToNative.inNativeIsCorrect = this.result;\r\n            window.postMessage(JSON.stringify(sendDataToNative), '*')\r\n        }\r\n        return {uXml: this.userAnsXML, ans: this.result};\r\n    }\r\n\r\n    // checking child answer and return useransxml\r\n    checkChildAnswer(hid, pElem, userAnsXML) {\r\n        let _this = pElem.getAttribute('type');\r\n        switch(_this) {\r\n            case \"textclick\"  :\r\n            case \"textselect\" : {\r\n                var ansKey  = pElem.getAttribute('data-correctans').split('|').sort().join('|');\r\n                var userKey = pElem.getAttribute('data-userans').split('|').sort();\r\n                userKey \t= userKey.filter(function(e){ return e });\r\n                userKey     = userKey.join('|');\r\n                if (ansKey != userKey) {\r\n                    this.result = false;\r\n                }\r\n                if (typeof calculatePoint != \"undefined\") {\r\n                    // let data = JSON.parse(pElem.children);\r\n                    \r\n                    // let data = Object.values(pElem.children);\r\n                    // console.log(data); \r\n                    JS.find(pElem,'p','all').forEach((_elm)=> {\r\n                        if (_elm.classList.contains('selected') && _elm.getAttribute(\"data-userans\") == _elm.getAttribute(\"data-correctans\")) {\r\n                            this.temp++;\r\n                        }\r\n                    });\r\n                }\r\n                if (_this =='textselect') {\r\n                    this.userAnsXML += `<div id=\"${pElem.getAttribute('id')}\" data-userHtml=\"${escape(pElem.getAttribute('data-userhtml'))}\" data-userAns=\"${escape(pElem.getAttribute('data-userans'))}\"></div>\\\\n`;\r\n                } else {\r\n                    this.userAnsXML += `<div id=\"${pElem.getAttribute('id')}\" data-userAns=\"${escape(pElem.getAttribute('data-userans'))}\"></div>\\\\n`;\r\n                }\r\n                break;\r\n            }\r\n        }\r\n        return this.userAnsXML;\r\n    }\r\n\r\n    // for showing the answer\r\n    showansdrag(hid, ansType, review) {\r\n        if (typeof review === \"undefined\") review = 0;\r\n        let selector = JS.select(hid).children;\r\n        if (selector) {\r\n            for (let i = 0; i < selector.length; i++) {\r\n                this.showchilddragans(hid, selector[i], ansType, review);\r\n            }\r\n        }\r\n        // JS.select(hid).children?.forEach?.((_elm)=> {\r\n        //     this.showchilddragans(hid, _elm, ansType, review);\r\n        // });\r\n    }\r\n\r\n    // for showing the answer of child element\r\n    showchilddragans(hid, pElem, ansType, review) {\r\n        let hidNode = JS.select(pElem);\r\n        let typ = hidNode.getAttribute('type');\r\n        switch (typ) {\r\n            case \"textclick\": {\r\n                if (ansType == 'c') {\t\r\n                    if (JS.find(hidNode, '.show_correct,.show_incorrect', 'all').length > 0) {\r\n                        JS.find(hidNode, '.show_correct,.show_incorrect', {action: 'removeClass', actionData: ['show_correct', 'show_incorrect'] });\r\n                        JS.find(hidNode, '.correct_incorrect_icon', {action: 'remove'})\r\n                        JS.find(hidNode, '.correct_incorrect_icon', {action: 'removeAttr', actionData: 'style'});\r\n                    }\r\n                    let ansKey = pElem.getAttribute('data-correctans').split('|');\r\n                    var type   = pElem.getAttribute('type');\r\n                    ansKey.forEach((value)=> {\t\t\t\r\n                        this.selectText(hid, value, ansType, 'selected');\r\n                    });\r\n                } else if (ansType == 'u') {\t\r\n                    let type = pElem.getAttribute('type');\r\n                    try {\r\n                        var userans = decodeURIComponent(pElem.getAttribute('data-userans'));\r\n                    } catch(err) {\r\n                        var userans = decodeURIComponent(unescape(pElem.getAttribute('data-userans')));\r\n                    }\r\n                    userans = userans.split('|');\r\n                    userans = userans.filter(function(e){return e});\r\n                    if ((typeof review != \"undefined\" && review == 1)) {\r\n                        JS.find(hid, '.selected', {action: 'removeClass', actionData: 'selected'});\r\n                        var ansKey  = pElem.getAttribute('data-correctans').split('|');\r\n                        userans.forEach((value)=> {\r\n                            let classname='show_incorrect';\r\n                            if (JS.findInArray(value, ansKey)) {\r\n                                classname = 'show_correct';\t\t\t\t\t\r\n                                this.selectText(hid, value, ansType, classname);\t\t\t\t\r\n                            } else {\r\n                                this.selectText(hid, value, ansType, classname);\r\n                            }\r\n                        });\r\n                    } else {\r\n                        userans.forEach((value)=> {\t\t\t\r\n                            this.selectText(hid,value,'c','selected');\r\n                            if (JS.select(hid+\" p span\").length) {\r\n                                JS.select(hid+\" p span\").remove();\r\n                            }\r\n                            JS.select(\".textClick\", 'removeClass',['show_incorrect', 'show_correct']);\r\n                        });\t\t\r\n                    }\r\n                }\r\n            }\r\n            break;\r\n            case \"textselect\"  : {\r\n                if (ansType == 'c') {\r\n                    if (JS.find(hidNode, '.show_correct,.show_incorrect').length > 0) {\r\n                        JS.find(hidNode, '.show_correct,.show_incorrect', {action: 'removeClass', actionData: ['show_correct', 'show_incorrect']});\r\n                        JS.find(hidNode, '.correct_incorrect_icon', {action: 'removeAttr', actionData: 'style'});\r\n                    }\r\n                    var ansKey = pElem.getAttribute('data-correctans').split('|');\r\n                    var type = pElem.getAttribute('type');\r\n                    JS.select(pElem, 'html', pElem.getAttribute('data-correcthtml').replace(/<span>/g,\"</span>\") );\r\n                } else if (ansType == 'u') {\t\r\n                    var type = pElem.getAttribute('type');\r\n                    try {\r\n                        var userans = decodeURIComponent(pElem.getAttribute('data-userans'));\r\n                    } catch(err) {\r\n                        var userans = decodeURIComponent(unescape(pElem.getAttribute('data-userans')));\r\n                    }\r\n                    userans = userans.split('|');\r\n                    userans = userans.filter(function(e){return e});\r\n                    if (pElem.getAttribute('data-userhtml') != \"\" || pElem.getAttribute('data-userhtml') == \"undefined\") {\r\n                        var _htmlContent = pElem.getAttribute('data-userhtml');\r\n                        try {\r\n                            _htmlContent = decodeURIComponent(_htmlContent );\r\n                            var decodedHtmlContent = decodeURIComponent(_htmlContent );\r\n                        } catch(err) {\r\n                            console.log(err); \r\n                        } \r\n                        JS.select(pElem, 'html', decodedHtmlContent);\r\n\r\n                    }\r\n                    if ((typeof review != \"undefined\" && review == 1)) {\r\n                        let text_indicator_html = '<span class=\"icomoon-new-24px-checkmark-circle-1 font-weight-bold\" style=\"color:green;vertical-align:super;\">';\r\n                        let text_indicator_html1 = '<span class=\"icomoon-new-24px-cancel-circle-1 font-weight-bold red\" style=\"vertical-align: super;\">';\r\n                        JS.insert(pElem.querySelector('span[userans=\"1\"]span[correctans=\"1\"]'), '<span class=\"correct_incorrect_icon\" style=\"position:absolute;z-index:100;width:18px;height:18px;bottom:17px;background:white;border-radius:12px;font-size: 18px;\"> '  + text_indicator_html + '</span></span>', 'beforeend');\r\n                        JS.insert(pElem.querySelector('span[userans=\"1\"]span[correctans=\"0\"]'), '<span class=\"correct_incorrect_icon\" style=\"position:absolute;z-index:100;width:18px;height:18px;bottom:17px;background:white;border-radius:12px;font-size: 18px;\"> '  + text_indicator_html1 + '</span></span>', 'beforeend');\t\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n            case \"imagehighlight\": {\r\n                let el = JS.find(hid, 'canvas');\r\n                let getAns = JS.select('#special_module_parse').value;\r\n                let cans = getAns.substring(getAns.indexOf('{'),getAns.lastIndexOf('}')+1);\r\n                if ( cans != '') cans = JSON.parse(cans); \r\n                this.drawOnCanvas(el, cans, window.color);\r\n                if (ansType == 'c') { \r\n                    let pts = el.getAttribute('correctans');\r\n                    if ( pts != '') pts = JSON.parse(pts);\r\n                    this.drawOnCanvas(el, pts, 'green');\r\n                }\r\n                break;\r\n            } \r\n        } \r\n    }\r\n\r\n    calculateArea(hid, xaxis, yaxis) {\r\n        let hotareaTop    = Math.min.apply(Math, yaxis),\r\n            hotareaLeft   = Math.min.apply(Math, xaxis),\r\n            hotareaWidth  = Math.max.apply(Math, xaxis) - Math.min.apply(Math, xaxis),\r\n            hotareaHeight = Math.max.apply(Math, yaxis) - Math.min.apply(Math, yaxis);\r\n        return {\r\n            top: hotareaTop,\r\n            left: hotareaLeft,\r\n            width: hotareaWidth,\r\n            height: hotareaHeight\r\n        }\r\n    }\r\n\r\n    // function is responsible for getting the value and create the user ans on the basis of it in case of imagehighlight\r\n    getCoordinate(hid, xaxis, yaxis, count){\r\n        if (count == 0){\r\n            this.drawstr = \"{\\\"\" + (++count) + \"\\\":{\\\"x\\\":[\" + xaxis + \"],\\\"y\\\":[\" + yaxis + \"]}}\";\r\n        } else {\r\n            this.drawstr = JS.select('#special_module_parse').value;\r\n            this.drawstr = this.drawstr.substring(this.drawstr.indexOf('{'), this.drawstr.lastIndexOf('}')+1);\r\n            this.drawstr = this.drawstr.slice(0, -1);\r\n            //for adding the next draw point\r\n            this.drawstr += \",\\\"\" + (++count) + \"\\\":{\\\"x\\\":[\" + xaxis + \"],\\\"y\\\":[\" + yaxis + \"]}}\";\r\n        }\r\n        JS.selectAll(JS.select(hid).children, 'attr', {'userans': this.drawstr });\r\n        // for user ans\r\n        this.createUserAnsXMLDraw(this.drawstr);\r\n        return this.userAnsXML;\r\n    }\r\n\r\n    update_HTMLValue(){\r\n        let xmlDom \t\t= JS.parseHtml(JS.select(\"#special_module_xml\").value);\r\n        let bgimg = \"\", path = \"\";\r\n        if( xmlDom) {\r\n            for (let _attr of xmlDom.attributes) {\r\n                switch(na_attr.nameme){\r\n                    case \"bgimg\":\r\n                        bgimg = _attr.value;\r\n                        break;\r\n                    case \"path\":\r\n                        path  = _attr.value;\r\n                        break;\r\n                    default:\r\n                }\r\n            }\r\n        }\r\n        let element = JS.children(xmlDom, 'div');\r\n        let top1 \t= element.getAttribute(\"top\");\r\n        let left \t= element.getAttribute(\"left\");\r\n        let width \t= element.getAttribute(\"width\");\r\n        let height \t= element.getAttribute(\"height\");\r\n        JS.select('#area', 'css', {height: height, top: top1, width: width, left: left});\r\n        if (bgimg && path) JS.select('#im', 'attr', {src: path + \"/\" + bgimg});\r\n    }\r\n\r\n    // runs in cas of spot an image and create the user ans xml\r\n    movetarget(tObj, hObj, e) {\r\n        let scoreFlag;\r\n        //let targettop,targetleft;\r\n        tObj.style.display = '';\r\n        if ((!window.event) && (e.layerX)) {\r\n            tObj.style.top = e.layerY - (tObj.height /2) + \"px\";\r\n            tObj.style.left = e.layerX - (tObj.width /2) + \"px\" ;\r\n        } else {\r\n            tObj.style.top = e.offsetY - (tObj.height /2) + \"px\" ;\r\n            tObj.style.left = e.offsetX - (tObj.width /2) + \"px\" ;\r\n        }\r\n        // checking answer\r\n        scoreFlag = this.checkmodule(tObj, hObj);\r\n\r\n        // creating user ans xml\r\n        this.createUserAnsXML(tObj.style.top, tObj.style.left);\r\n        let obj = document.getElementById(\"special_module_user_xml\");\r\n        obj.value = this.userAnsXML;\r\n        obj = document.getElementById(\"answer\");\r\n        if (scoreFlag>0) {\r\n            obj.checked=true;\r\n        } else {\r\n            obj.checked=false;\r\n        }\r\n        if (typeof calculatePoint != \"undefined\") {\r\n            this.temp = (scoreFlag == 1) ? true : false;\r\n            calculatePoint(1, scoreFlag);\r\n        }\r\n    }\r\n\r\n    // user ans xml in case of imagehighlight\r\n    createUserAnsXMLDraw(userAns) {\r\n        this.userAnsXML = '<SMANS type=\"4\"><div userans=\"'+userAns+'\"></div></SMANS>';\r\n    }\r\n\r\n    createUserAnsXML(targetTop,targetLeft) {\r\n        this.userAnsXML = '<SMANS type=\"4\"><div targetTop=\"'+parseInt(targetTop)+'\" targetLeft=\"'+parseInt(targetLeft)+'\" /></SMANS>';\r\n    }\r\n\r\n    // functions runs in case of the spot an image  module it check the user point is in between the correct answer or not and return 1 if userans is correct\r\n    checkmodule(tObj,hObj) {\r\n        let yourScore=0;\r\n        if (((parseInt(tObj.style.top) + (tObj.height /2) ) >= (parseInt(hObj.style.top))) && ((parseInt(tObj.style.top)  + (tObj.height /2) ) <= (parseInt(hObj.style.top) + parseInt(hObj.style.height)))) {\r\n            if (((parseInt(tObj.style.left) + (tObj.width /2)) >= (parseInt(hObj.style.left))) && ((parseInt(tObj.style.left) + (tObj.width /2) ) <= (parseInt(hObj.style.left) + parseInt(hObj.style.width)))) {\r\n                yourScore=1;\r\n            }\r\n        }\r\n        return yourScore;\r\n    }\r\n\r\n    // for drawing n the canvas on the basis of the coordinates\r\n    drawOnCanvas(el,cord,color) {   // checking for if elemnt is exist or not \r\n        if (el) {\r\n            // getting the element reference\r\n            let c = (el.toString().indexOf('d') != 0) ? document.getElementById(el.getAttribute('id')) : document.getElementById(el);\r\n            // initilaising the getContext Method if c is not null\r\n            let ctx = (c != null) ? c.getContext(\"2d\") : '';\r\n\r\n            // getting length of the keys available in the object\r\n            let len = Object.keys(cord).length;\r\n\r\n            // drawing on the canvas\r\n            if (cord!='' && ctx!='') {\r\n                //let cal = [];\r\n                for (let i = 1; i <= len ; i++) {\r\n                    for (let j = 0; j <= cord[i]['x'].length; j++) {\r\n                        ctx.beginPath();              \r\n                        ctx.lineWidth   = \"4\";\r\n                        ctx.strokeStyle = color;\r\n                        ctx.moveTo(cord[i]['x'][j], cord[i]['y'][j]);\r\n                        ctx.lineTo(cord[i]['x'][j+1], cord[i]['y'][j+1]);\r\n                        ctx.stroke();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // for comparing answer in case of draw highlight\r\n    compareDrawing(uans,cans,hid) {\r\n        let scoreFlag=0;\r\n        let uval  = this.getAreaVal(uans),\r\n            cval  = this.getAreaVal(cans),\r\n            cflag = 0, temp  = 0,\r\n            clen  = Object.keys(cval).length,\r\n            ulen  = Object.keys(uval).length;\r\n        for (let i = 1; i <= clen; i++) {\r\n           // msg = 'INCorrect Drawn';\r\n            for(let j = 1; j <= ulen; j++) {\r\n                if(uval[j]['height'] <= cval[i]['height'] && uval[j]['width'] <= cval[i]['width'] ) {\r\n                    if(uval[j]['top'] >= cval[i]['top'] && (cval[i]['left'] + cval[i]['width']) - (uval[j]['left'] + uval[j]['width']) >=0) {\r\n                        if(uval[j]['left'] >= cval[i]['left'] && (cval[i]['top'] + cval[i]['height']) - (uval[j]['top'] + uval[j]['height']) >=0) {\r\n                            cflag++;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (typeof calculatePoint != \"undefined\") {\r\n                if (i == cflag) temp++;\r\n                calculatePoint(JS.select(hid).getAttribute('totalcorrectans'), temp);\r\n            }\r\n        }\r\n        if (clen == cflag && clen==ulen) {\r\n            //msg ='Correct Drawn';\r\n            scoreFlag =1;\t\r\n        } \r\n        return scoreFlag;\r\n    }\r\n\r\n    // for getting area val\r\n    getAreaVal(coordinate) {\r\n        let len = Object.keys(coordinate).length;\r\n        if (coordinate!='') {\r\n            let cordval = [];\r\n            for (let i = 1; i <= len ; i++) {\r\n                cordval[i]= this.calculateArea('',coordinate[i]['x'],coordinate[i]['y']);\r\n            }\r\n            return cordval;\r\n        }\r\n    }\r\n\r\n    // for the selection of text\r\n    selectText(hid, value, ansType, classname) {\r\n        let selector = JS.selectAll(hid+' p');\r\n        for (var i=0; i < selector.length; i++ ) {\r\n            let _elm = selector[i];\r\n            if (_elm.textContent.trim() == value) {\r\n                _elm.classList.add(classname);\r\n                if(ansType=='u') {\r\n                    let text_indicator_html;\r\n                    if (classname=='show_correct'){\r\n                        text_indicator_html = '<span class=\"icomoon-new-24px-checkmark-circle-1 font-weight-bold\" style=\"color:green;vertical-align:7px\">';\t\t\t\t\t\r\n                    } else {\r\n                        text_indicator_html = '<span class=\"icomoon-new-24px-cancel-circle-1 font-weight-bold red\" style=\"vertical-align:7px\">';\t\t\t\t\t\r\n                    }\r\n                    JS.insert(_elm, '<span class=\"correct_incorrect_icon\" style=\"position:absolute;z-index:100;width:18px;height:18px;bottom:16px;background:white;border-radius:12px;font-size: 18px;\"> '  + text_indicator_html + '</span></span>');\r\n                }\r\n            }\t\r\n        }\r\n    }\r\n\r\n    // for highlighting the text\r\n    highlightText(hid) {\r\n        if (this.getSelected().getRangeAt(0).endOffset != 0) {\r\n            this.snapSelectionToWord();\r\n            let selectionRange = this.getSelected().getRangeAt(0),\r\n                start = selectionRange.startOffset,\r\n                ans   = JS.find(hid, '[type]').getAttribute('data-correctans').split('|');\r\n                var selection = selectionRange.toString();\r\n                selection = selection.trim();\r\n            if (selection) {\r\n                let cans   = JS.findInArray(selection,ans) ? 1 : 0 ;\r\n                this.pasteHtmlAtCaret(\"<span class='selecttext selected' correctans=\"+cans+\" userans='1'>\"+selection+\"</span> \");   \r\n            }\r\n        }\r\n    }\r\n\r\n    // for getting selection text\r\n    snapSelectionToWord() {\r\n        let sel;\r\n        // Check for existence of window.getSelection() and that it has a\r\n        // modify() method. IE 9 has both selection APIs but no modify() method.\r\n        if (window.getSelection && (sel == window.getSelection()).modify) {\r\n            sel = window.getSelection();\r\n            if (sel != '' && !sel.isCollapsed) {\r\n                // Detect if selection is backwards\r\n                var range = document.createRange();\r\n                range.setStart(sel.anchorNode, sel.anchorOffset);\r\n                range.setEnd(sel.focusNode, sel.focusOffset);\r\n                var backwards = range.collapsed;\r\n                range.detach();\r\n\r\n                // modify() works on the focus of the selection\r\n                var endNode = sel.focusNode, endOffset = sel.focusOffset;\r\n                sel.collapse(sel.anchorNode, sel.anchorOffset);\r\n                if (backwards) {\r\n                    if(JS.findInArray(sel.anchorNode.textContent.charAt(sel.anchorOffset-1),[\",\",\".\",\"!\",\"?\",\";\",\")\",\"}\"])) { \r\n                        sel.modify(\"move\", \"backward\", \"character\");\r\n                        sel.modify(\"move\", \"forward\", \"word\");\r\n                    }\r\n                    sel.extend(endNode, endOffset);\r\n                    sel.modify(\"extend\", \"forward\", \"character\");\r\n                    sel.modify(\"extend\", \"backward\", \"word\");\r\n                } else {\r\n                    sel.modify(\"move\", \"forward\", \"character\");\r\n                    sel.modify(\"move\", \"backward\", \"word\");\r\n                    sel.extend(endNode, endOffset);\r\n                    if(JS.findInArray(sel.anchorNode.textContent.charAt(endOffset-1),[\",\",\".\",\"!\",\"?\",\";\",\")\",\"}\"])) { \r\n                        sel.modify(\"extend\", \"backward\", \"character\");\r\n                        sel.modify(\"extend\", \"forward\", \"word\");\r\n                    }\r\n                } \r\n            }\r\n        } else if ( (sel == document.selection) && sel.type != \"Control\") {\r\n            let textRange = sel.createRange();\r\n            if (textRange.text) {\r\n                textRange.expand(\"word\");\r\n                // Move the end back to not include the word's trailing space(s), if neccessary\r\n                while (/\\s$/.test(textRange.text)) {\r\n                    textRange.moveEnd(\"character\", -1);\r\n                }\r\n                textRange.select();\r\n            } \r\n        }\r\n    }\r\n\r\n    // for pasting the html at caret position\r\n    pasteHtmlAtCaret(html) {\r\n        let sel, range;\r\n        if (window.getSelection) {\r\n            // IE9 and non-IE\r\n            sel = window.getSelection();\r\n            if (sel.getRangeAt && sel.rangeCount) {\r\n                range = sel.getRangeAt(0);\r\n                range.deleteContents();\r\n                // Range.createContextualFragment() would be useful here but is\r\n                // only relatively recently standardized and is not supported in\r\n                // some browsers (IE9, for one)\r\n                var el = document.createElement(\"div\");\r\n                el.innerHTML = html;\r\n                var frag = document.createDocumentFragment(), node, lastNode;\r\n                while ( (node = el.firstChild) ) {\r\n                    lastNode = frag.appendChild(node);\r\n                }\r\n                range.insertNode(frag);\r\n\r\n                // Preserve the selection\r\n                if (lastNode) {\r\n                    range = range.cloneRange();\r\n                    range.setStartAfter(lastNode);\r\n                    range.collapse(true);\r\n                    sel.removeAllRanges();\r\n                    sel.addRange(range);\r\n                } \r\n            }\r\n        } else if (document.selection && document.selection.type != \"Control\") {\r\n            // IE < 9\r\n            document.selection.createRange().pasteHTML(html);\r\n        }\r\n    }\r\n\r\n    // for getting seletion\r\n    getSelected() {\r\n        if (window.getSelection) {\r\n            return window.getSelection();\r\n        } else if(document.getSelection) {\r\n            return document.getSelection();\r\n        } else {\r\n            var selection = document.selection && document.selection.createRange();\r\n            if (selection.text) { return selection.text; }\r\n            return false;\r\n        }\r\n    }\r\n\r\n    // for removing span element\r\n    removespan(span, hid, review) {\r\n        let span_contents = span.innerHTML;\r\n        let regex = new RegExp('<\\\\/?span[^>]*>', 'g');\r\n        span_contents = span_contents.replace(regex, \"\");\r\n        span.parentNode.replaceChild(document.createTextNode(span_contents), span);\r\n        if (!review) JS.find(hid, '[type]', {action: 'html', actionData: JS.find(hid, '[type]').innerHTML });\r\n    }\r\n\r\n    /* ajax based code */\r\n    modeOnHot(modeType) {\r\n        if (typeof(modeType) == \"undefined\") {\r\n            //modeType = isReview;\r\n        }\r\n        JS.selectAll('.test, .review', 'addClass', 'h');\r\n        if (modeType) {\r\n            JS.selectAll('.review', 'removeClass', 'h');\r\n            this.unBindLab();\r\n            this.showansdrag(this.elemId, 'u', 1);\r\n        } else {\r\n            JS.selectAll('.test', 'removeClass', 'h');\r\n            JS.selectAll('.review', 'addClass', 'h');\r\n            this.bindLab();\r\n            this.showansdrag(this.elemId, 'u', 0);\r\n        }\r\n    }\r\n\r\n    // for unbinding lab\r\n    unBindLab() {\r\n        this.labBinded = false;\r\n        JS.find(this.elemId, '.hotArea0.hotArea', {action: 'css', actionData: {display: 'block'} });\r\n        JS.find(this.elemId, '.hotSpotImg', {action: 'css', actionData: {pointerEvents: 'none'} });\r\n    }\r\n\r\n    // for binding the lab\r\n    bindLab() {\r\n        this.labBinded = true;\r\n        JS.find(this.elemId, '.hotArea0.hotArea', {action: 'css', actionData: {display: 'none'} });\r\n        JS.find(this.elemId, '.hotSpotImg', {action: 'css', actionData: {pointerEvents: 'auto'} });\r\n    }\r\n\r\n    /* ajax based code */\r\n}","import JUI from '../src/libs/javscript_helper/JUI.js';\r\nfunction Point(a, b) {\r\n    if (true === isNaN(Number(a))) {\r\n        this.x = 0;\r\n    } else {\r\n        this.x = a;\r\n    }\r\n    if (true === isNaN(Number(b))) {\r\n        this.y = 0;\r\n    } else {\r\n        this.y = b;\r\n    }\r\n    return {\r\n        \"X\": this.x,\r\n        \"Y\": this.y\r\n    };\r\n}\r\nconst JS = new JUI();\r\nexport default class DooScribPlugin {\r\n\tconstructor(options) {\r\n\t\tthis.prevPoint = undefined;\r\n\t\tthis.defaultOptions = {\r\n\t\t\ttarget: \"\",\r\n\t\t\tpenSize:1,\r\n\t\t\twidth: options.width,\r\n\t\t\theight: options.height,\r\n\t\t\tcssClass: '',\r\n\t\t\tonClick: (e)=> {},\r\n\t\t\tonMove: (e)=> {},\r\n\t\t\tonPaint: (e)=> {},\r\n\t\t\tonRelease: (e)=> {}\r\n\t\t};\r\n\t\tthis.penWidth = 2;\r\n\t\tthis.drawing = false;\r\n\t\tthis.cap = 'round';\r\n\t\tthis.ID = 'dooScribCanvas' + Math.floor((Math.random()*100) + 1);\r\n\t\tthis.drawingSurface = \"\";\r\n\t\tif (options) this.Settings = {...this.defaultOptions, ...options};\r\n\t\tif (true === isNaN(this.Settings.height)) {\r\n\t\t\tthis.Settings.height = 100;\r\n\t\t}\r\n\t\tif (true === isNaN(this.Settings.width)){\r\n\t\t\tthis.Settings.width = 100;\r\n\t\t}\r\n\r\n\t\tthis.init();\r\n\t}\r\n\r\n\tinit() {\r\n\t\tlet _this = this.Settings.target;\r\n\t\tif (_this) {\r\n\t\t\tif (_this.getAttribute('id') == \"hptmain0\")  JS.empty(_this);\r\n\t\t\tJS.insert(_this, `<canvas id='${this.ID}' tabindex='0' class='relative ${this.Settings.cssClass}' type='${this.Settings.type}' correctans='${this.Settings.correctans}' userans=''  height='${this.Settings.height}' width='${this.Settings.width}'></canvas>`, 'beforeend');\r\n\t\t    this.penSize(this.Settings.penSize);\r\n\t\t    this.drawingSurface = document.getElementById(this.ID).getContext('2d');\r\n\t\t    this.drawingSurface.lineWidth = this.penSize();\r\n\t\t    this.drawingSurface.lineCap = this.cap;\r\n\t\t    if (false === this.hasTouch()) {\r\n\t\t        document.getElementById(this.ID).addEventListener('mousedown', this.clickDown.bind(this), true);\r\n\t\t        document.getElementById(this.ID).addEventListener('mousemove', this.moved.bind(this), true);\r\n\t\t        document.addEventListener('mouseup', this.clickUp.bind(this), true);\r\n\t\t    }\r\n\t\t    else {\r\n\t\t        document.getElementById(this.ID).addEventListener('touchstart', this.clickDown.bind(this), true);\r\n\t\t        document.getElementById(this.ID).addEventListener('touchmove', this.moved.bind(this), true);\r\n\t\t        document.getElementById(this.ID).addEventListener('touchend', this.clickUp.bind(this), true);\r\n\t\t    }\r\n\t\t} else {\r\n\t\t\tconsole.error(\"Target not defined\");\r\n\t\t}\r\n\t}\r\n\r\n\tnormalizeTouch(e) {\r\n\t\tif (true === this.hasTouch()) {\r\n\t\t\tlet st = window.scrollY;\r\n\t\t\tif (['touchstart', 'touchmove'].indexOf(e.type) > -1) {\r\n\t\t\t\te.clientX = e.targetTouches[0].pageX;\r\n\t\t\t\te.clientY = e.targetTouches[0].pageY - st;\r\n\t\t\t}\r\n\t\t\tif (['touchend'].indexOf(e.type) > -1) {\r\n\t\t\t\te.clientX = e.changedTouches[0].pageX;\r\n\t\t\t\te.clientY = e.changedTouches[0].pageY - st;\r\n\t\t\t   }\r\n\t\t}\r\n\t\treturn e;\r\n\t}\r\n\r\n\tclickDown(e) {\r\n\t\tif (true === this.isDrawing()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!e) {\r\n\t\t\te = window.event;\r\n\t\t}\r\n\t\tif (true === this.hasTouch()) {\r\n\t\t\te.preventDefault();\r\n\t\t\te = this.normalizeTouch(e);\r\n\t\t}\r\n\t\tlet offset = JS.offset(this.Settings.target);\r\n\t\tlet st = window.scrollY;\r\n\t\tlet pt = new Point(e.clientX - offset.left, e.clientY - (offset.top-st));\r\n\t\tthis.prevPoint = pt;\r\n\t\tthis.drawing = true;\r\n\t\tthis.Settings.onClick(pt);\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\tmoved(e) {\r\n\t\tif (!e) {\r\n\t\t\te = window.event;\r\n\t\t}\r\n\t\tif (true === this.hasTouch()) {\r\n\t\t\te.preventDefault();\r\n\t\t\te = this.normalizeTouch(e);\r\n\t\t}\r\n\t\tvar offset = JS.offset(this.Settings.target);\r\n\t\tvar st = window.scrollY;\r\n\t\tvar pt = new Point(e.clientX - offset.left, e.clientY - (offset.top-st));\r\n\t\tif (true === this.isDrawing()) {\r\n\t\t\tthis.drawLine(this.prevPoint.X, this.prevPoint.Y, pt.X, pt.Y);\r\n\t\t\tthis.prevPoint = pt;\r\n\t\t\tthis.Settings.onPaint(pt);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.Settings.onMove(pt);\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\tclickUp(e) {\r\n\t\tif (false === this.isDrawing()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (true === this.hasTouch()) {\r\n\t\t\te.preventDefault();\r\n\t\t\te = this.normalizeTouch(e);\r\n\t\t}\r\n\t\tlet offset = JS.offset(this.Settings.target);\r\n\t\tlet st = window.scrollY;\r\n\t\tlet pt = new Point(e.clientX - offset.left, e.clientY - (offset.top-st));\r\n\t\tthis.Settings.onRelease(pt);\t\t    \r\n\t\tthis.drawing = false;\r\n\r\n\t\treturn false;\t\t\t\r\n\t}\r\n\r\n\thasTouch() {\r\n\t\treturn 'ontouchstart' in window;\r\n\t}\r\n\r\n\tpenSize (e) {\r\n\t\tif (undefined !== e){\r\n\t\t\tif (false === isNaN(Number(e))) {\r\n\t\t\t\tthis.penWidth = e;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this.penWidth;\r\n\t}\r\n\r\n\tisDrawing () {\r\n\t\tif (this.Settings.editable)\r\n\t\t\treturn this.drawing;\r\n\t}\r\n\r\n\tlineCap(e) {\r\n\t\tif (undefined !== e) {\r\n\t\t\tswitch(e){\r\n\t\t\t\tcase 'butt':\r\n\t\t\t\tcase 'round':\r\n\t\t\t\tcase 'square':\r\n\t\t\t\t\tthis.cap = e;\r\n\t\t\t\t\tbreak; \r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this.cap;\r\n\t}\r\n\r\n\t//window.color = \"#000000\";\r\n\tlineColor(e) {\r\n\t\tif(undefined !== e) {\r\n\t\t\tlet a = JS.parseHtml(\"<div id='stub' style='backgroundColor:white'></div>\");\r\n\t\t\ta.style.backgroundColor = e;\r\n\t\t\tlet b = a.style.backgroundColor\r\n\t\t\tif ((undefined !== b) && ('' !== b)) {\r\n\t\t\t\twindow.color = e;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn window.color;\r\n\t}\r\n\r\n\tcontext() {\r\n\t\treturn this.drawingSurface;\r\n\t}\r\n\r\n\tclearSurface() {\r\n\t\tlet width = JS.find(document, 'canvas').getAttribute('width').replace('px','');\r\n\t\tlet height = JS.find(document, 'canvas').getAttribute('height').replace('px','');\r\n\t\tthis.drawingSurface.clearRect(0, 0,width,height);\r\n\t}\r\n\t\r\n\tdrawLine(fromX, fromY, toX, toY) {\r\n\t\tif ((undefined !== fromX) && (undefined !== fromY) && (undefined !== toX) && (undefined !== toY)) {\r\n\t\t\tif((false === isNaN(Number(fromX))) && (false === isNaN(Number(fromY))) && (false === isNaN(Number(toX))) && (false === isNaN(Number(toY)))) {\r\n\t\t\t\tthis.drawingSurface.lineCap = this.cap;\t    \r\n\t\t\t\tthis.drawingSurface.strokeStyle = window.color;\t\t\r\n\t\t\t\tthis.drawingSurface.lineWidth = this.penWidth;\r\n\t\t\t\tthis.drawingSurface.beginPath();\t\t\t\t    \r\n\t\t\t\tthis.drawingSurface.moveTo(fromX, fromY);\t\t\t\t\t\r\n\t\t\t\tthis.drawingSurface.lineTo(toX, toY);\r\n\t\t\t\tthis.drawingSurface.stroke();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}","<script context=\"module\">\r\n    function checkmodule(targetData, pointer_size) {\r\n        let yourScore = 0;\r\n        let ansDivHeight = targetData.ans_top + targetData.ans_h;\r\n        let ansDivWidth = targetData.ans_left + targetData.ans_w;\r\n        if ((targetData.top + pointer_size + 4) > targetData.ans_top && (targetData.top + parseInt(pointer_size / 2)) < ansDivHeight && (targetData.left + pointer_size) > targetData.ans_left && (targetData.left + parseInt(pointer_size / 2)) < ansDivWidth) {\r\n            yourScore = 1;\r\n        }\r\n        return yourScore;\r\n    }\r\n\r\n    function createUserAnsXML(targetTop,targetLeft) {\r\n        return '<SMANS type=\"4\"><div targetTop=\"'+parseInt(targetTop)+'\" targetLeft=\"'+parseInt(targetLeft)+'\" /></SMANS>';\r\n    }\r\n    export function movetarget(e, ans_h, ans_w, ans_left, ans_top) {\r\n        // let tObj = document.getElementById('target')[0];\r\n        // let hObj = document.getElementById('hotArea')[0];\r\n        let pointer_size = 13;\r\n        let scoreFlag;\r\n        let targetData;\r\n        \r\n    //debugger;\r\n        targetData = {\r\n            x: e && e.layerX, \r\n            y: e && e.layerY, \r\n            top: 0, \r\n            left : 0, \r\n            uXml: \"\", \r\n            ans: false,\r\n            ans_h, \r\n            ans_w, \r\n            ans_left, \r\n            ans_top\r\n        };\r\n        \r\n\r\n        if(e && e.which != 13) {\r\n            \r\n            if (e.layerX && e.layerY) {\r\n                targetData.top = e.layerY - pointer_size;\r\n                targetData.left = e.layerX - pointer_size;\r\n            } else {\r\n                targetData.top = e.offsetY - pointer_size;\r\n                targetData.left = e.offsetX - pointer_size;\r\n            }\r\n        } else {\r\n                targetData.top = 20 - pointer_size;\r\n                targetData.left = 20 - pointer_size;\r\n        }\r\n            \r\n        // checking answer\r\n        scoreFlag = checkmodule(targetData, pointer_size);\r\n\r\n        // creating user ans xml\r\n        targetData.uXml = createUserAnsXML(targetData.top, targetData.left);\r\n        if (typeof calculatePoint != \"undefined\") {\r\n            temp = (scoreFlag == 1) ? 1 : 0;\r\n            calculatePoint(1, temp);\r\n        }\r\n\r\n        if (scoreFlag > 0) {\r\n            targetData.ans = true;\r\n        } else {\r\n            targetData.ans = false;\r\n        }\r\n\r\n        return targetData;\r\n    }\r\n</script>","<script>\r\n\timport { onMount } from 'svelte';\r\n\timport hotspotScript from './hotspotScript.js';\r\n\timport DooScribPlugin from './hotspotDrawingScript.js';\r\n\timport { XMLToJSON, onUserAnsChange, AH } from '../helper/HelperAI.svelte';\r\n\timport ItemHelper from '../helper/ItemHelper.svelte';\r\n\timport {movetarget} from './libs/util.svelte';\r\n\timport { writable } from 'svelte/store';\r\n\timport './css/hotspot.min.css';\r\n\texport let xml;\r\n\texport let uxml;\r\n\texport let ansStatus;\r\n\texport let isReview;\r\n\texport let showAns;\r\n\texport let editorState;\r\n\tlet customIsReview = isReview;\r\n\tconst HotJS = new hotspotScript();\r\n\tlet parseXml = \"\";\r\n\tlet answerStatus;\r\n\tlet ansDisable = 0;\r\n\tlet bgImgPath = '//s3.amazonaws.com/jigyaasa_content_static/';\r\n\tlet alt = \"\";\r\n\tlet moduleArr = {\r\n\t\ttextclick: \"1\",\r\n\t\ttextselect: \"2\",\r\n\t\timagehighlight: \"3\",\r\n\t\thotspot: \"4\",\r\n\t};\r\n\tlet state = {};\r\n\tlet hdd = writable({\r\n\t\timgwidth: \"auto\",\r\n\t\timgheight: \"auto\",\r\n\t})\r\n\tlet itemBorder = 0;\r\n\tlet itemBorderColor = \"gray\";\r\n\tlet isUxmlTarget = false;\r\n\tlet itemAreaTop = '';\r\n\tlet itemAreaHeight = '';\r\n\tlet itemAreaWidth = '';\r\n\tlet itemAreaLeft = '';\r\n\tlet targetView      = \"none\";\r\n\tlet ans_x \t\t\t= 0;\r\n\tlet ans_y \t\t\t= 0;\r\n\tlet ans_h \t\t\t= 0;\r\n\tlet ans_w \t\t\t= 0;\r\n\tlet type\t\t\t= \"\";\r\n\tlet img_url \t\t= \"\";\r\n\tlet item_type       = \"\";\r\n\tlet xmlHeight       = 0;\r\n\tlet xmlWidth        = 0;\r\n\tlet xmlBorderColor = '';\r\n\tlet xmlBorderWidth = '0'\r\n\tlet userCorrect     = \"\";\r\n\tlet correctans\t\t= \"\";\r\n\tlet totalCorrectAns;\r\n\tlet scrollEnabled   = false;\r\n\tlet linecolor = \"black\";\r\n\tlet drawstr\t= \"\";\r\n\tlet count = 0;\r\n\tlet xaxis = [];\r\n\tlet yaxis = [];\r\n\tlet divHeight = 0;\r\n\tlet divWidth = 0;\r\n\tvar typeName = 'textclick';\r\n\tvar correctAnsStr = '';\r\n\tvar correctHtml = '';\r\n\tconst unsubscribe = ((items)=>{\r\n\t\tstate = items;\r\n\t})\r\n\r\n\t$: {\r\n\t\tif(isReview != customIsReview){\r\n\t\t\tif (isReview) {\r\n\t\t\t\t//targetView = \"block\";\r\n\t\t\t\tsetReview();\r\n\t\t\t\tif(editorState && ansDisable == 0) {\r\n\t\t\t\t\tshowAns(answerStatus ? \"Correct\" : \"Incorrect\");\r\n\t\t\t\t\tansDisable = 1;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t//targetView = \"none\";\r\n\t\t\t\tansDisable = 0;\r\n\t\t\t\tunsetReview();\r\n\t\t\t}\r\n\t\t\tcustomIsReview = isReview;\r\n\t\t}\r\n\t}\r\n\r\n\t$:\tif (xml) {\r\n\t\t// Here replacing the not standard cdata into the valid cdata format\r\n\t\tlet myXml = xml.replace(\"<!--[CDATA[\", \"<![CDATA[\").replace(\"]]-->\", \"]]>\");\r\n\t\t\t\r\n\t\t// checking xml for if cdata is found or not \r\n\t\tif (myXml.match(/<\\!\\[CDATA\\[{|<\\!--\\[CDATA\\[{/gm)) {\r\n\t\t\t// saving value b/w the {, } symbol\r\n\t\t\tcorrectans =  myXml.toString().match(/{(.*)}/gmi);\r\n\t\t\ttotalCorrectAns = correctans.toString().match(/},\"\\d+\"/gm);\r\n\t\t\ttotalCorrectAns = (totalCorrectAns) ? totalCorrectAns.pop() : null;\r\n\t\t\ttotalCorrectAns = (totalCorrectAns) ? totalCorrectAns.replace(/\"|}|,/gm,\"\") : 1;\r\n\t\t\tmyXml = myXml.replace(correctans, \"\");\r\n\t\t\tcorrectans = correctans[0];\r\n\t\t}\r\n\t\tparseXml = XMLToJSON(xml);\r\n\t\txmlParser();\r\n\t\tpreRender();\r\n\t}\r\n\tonMount(() => {\r\n\t\tparseXml = XMLToJSON(xml);\r\n\t\txmlBorderWidth = parseXml['smxml']['hotBorder'];\r\n\t\txmlBorderColor = parseXml['smxml']['hotBorderColor'];\r\n\t\txmlParser();\r\n\t\tpreRender();\r\n\t\tHotJS.readyThis('hptmain0', isReview);\r\n\t\tif (isReview) {\r\n\t\t\tHotJS.modeOnHot(1);\r\n\t\t} else {\r\n\t\t\tHotJS.modeOnHot();\r\n\t\t}\r\n\r\n\t\tAH.listen('#previewArea','keydown','#im0', function(_this,e) {\r\n\t\t\tvar image_elem = AH.select('#im0').getBoundingClientRect();\r\n\t\t\tvar ans_size = 24;\r\n\t\t\tswitch (e.which) {\r\n\t\t\t\tcase 37:  \r\n\t\t\t\t\tans_x = parseInt(ans_x) - 2;\r\n\t\t\t\t\tif(ans_x < 1) {\r\n\t\t\t\t\t\tans_x = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 38:   \r\n\t\t\t\t\tans_y = parseInt(ans_y) - 2;\r\n\t\t\t\t\tif(ans_y < 1) {\r\n\t\t\t\t\t\tans_y = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 39:  \r\n\t\t\t\t\tans_x = parseInt(ans_x) + 2;\r\n\t\t\t\t\tif ((ans_x + ans_size )> image_elem.width) {\r\n\t\t\t\t\t\tans_x = image_elem.width - ans_size;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 40:   \r\n\t\t\t\t\tans_y = parseInt(ans_y) + 2;\r\n\t\t\t\t\tif ((ans_y + ans_size )> image_elem.height) {\r\n\t\t\t\t\t\tans_y = image_elem.height - ans_size;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 13:    //Press Enter key Set Answer\r\n\t\t\t\t\tcheckAnswer();\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\t\r\n\t\t\tconsole.log('ans_x', ans_x);\r\n\t\t\tconsole.log('ans_y', ans_y);\r\n\t\t})\r\n\r\n\t\tAH.listen('#previewArea', 'click', '.textClick', function() {\r\n\t\t\tcheckAnswer();\r\n\t\t});\r\n\t\t\r\n\t\tAH.listen('#previewArea', 'click', '[type=\"textselect\"]', function() {\r\n\t\t\tcheckAnswer();\r\n\t\t});\r\n\t\tAH.listen(\"#review_buttons\", 'click', \"#set-review\", function() {\r\n            setReview();\r\n        });\r\n\r\n        AH.listen(\"#review_buttons\", \"click\", \"#unset-review\", function() {\r\n            unsetReview();\r\n        });\r\n\t});\r\n\t\r\n\tfunction xmlParser() {\r\n\t\titem_type = parseXml['smxml']['div']['_type'];\r\n\t\txmlHeight = parseXml['smxml']['_height'];\r\n\t\txmlWidth = parseXml['smxml']['_width'];\r\n\t\tif (item_type == undefined || item_type == \"\") {\r\n\t\t\titem_type = parseXml['smxml']['_name'].toLowerCase();\r\n\t\t}\r\n\t\ttypeName = item_type;\r\n\t\timg_url = parseXml['smxml']['_bgimg'];\r\n\t\tswitch (moduleArr[item_type]) {\r\n\t\t\t// in case of text click \r\n\t\t\tcase \"1\": \r\n\t\t\t\t\t//getting the width and height\r\n\t\t\t\t\tdivHeight = parseXml.smxml._height+'px';\r\n\t\t\t\t\tdivWidth = parseXml.smxml._width+'px';\r\n\t\t\t\t\t// for parsing the xmlpreviewArea\r\n\t\t\t\t\tparseTextClick(parseXml.smxml.div.__cdata);\r\n\t\t\t\t\tAH.select(AH.parent('#textID0'), 'show', 'block');\r\n\t\t\t\t\tAH.selectAll('#drawPreview,table[id=\"hptmain2\"]', 'hide');\r\n\t\t\t\t\tbreak;\r\n\t\t\tcase \"2\": \r\n\t\t\t\t\t// in case of text select module\r\n\t\t\t\t\tif (!isNaN(parseXml.smxml._height)) {\r\n\t\t\t\t\t\tparseXml.smxml._height = parseXml.smxml._height+'px';\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdivHeight = parseXml.smxml._height;\r\n\t\t\t\t\tdivWidth = parseXml.smxml._width+'px';\r\n\t\t\t\t\t// for parsing the xml\r\n\t\t\t\t\tparseTextSelect(parseXml.smxml.div.__cdata);\r\n\t\t\t\t\tAH.select(AH.parent('#textID0'), 'show', 'block');\r\n\t\t\t\t\tAH.selectAll('#drawPreview,table[id=\"hptmain2\"]', 'hide');\r\n\t\t\t\t\tbreak;\r\n\t\t\tcase \"3\": {\r\n\t\t\t\t\t// In case of image highlight \r\n\t\t\t\t\t//bgImg = parseXml.smxml._bgimg;\r\n\t\t\t\t\t//var image = document.getElementById('hiddenImage');\r\n\t\t\t\t\tlet image = new Image();\r\n\t\t\t\t\timage.addEventListener('load', function(event) {\r\n\t\t\t\t\t\tstate.imgheight = (parseXml.smxml._height > this.height) ? parseXml.smxml._height+'px' : this.height+'px';\r\n\t\t\t\t\t\tstate.imgwidth = (parseXml.smxml._width > this.width) ? parseXml.smxml._width + 'px' : this.width + 'px';\r\n\t\t\t\t\t\titemBorder  = parseXml.smxml.div._border;\r\n\t\t\t\t\t\titemBorderColor  = parseXml.smxml.div._bordercolor;\r\n\t\t\t\t\t\tAH.find('#hptdraw0', 'canvas', {action: 'attr', actionData: {height:  state.imgheight, width: state.imgwidth} });\r\n\t\t\t\t\t\tAH.empty('#textID0');\r\n\t\t\t\t\t\tunsetReview();\r\n\t\t\t\t\t}, false);\r\n\t\t\t\t\timage.setAttribute('src', bgImgPath + parseXml.smxml._bgimg);\r\n\t\t\t\t\t// used for set the background image of the Draw highlighted module\r\n\t\t\t\t\t//imgUrl = \"url('https:\" + bgImgPath + parseXml.smxml._bgimg + \"')\";\r\n\t\t\t\t\t//this.flagUpdate = false;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"4\": {\r\n\t\t\t\t\t// in case of hotspot (spot an image)\r\n\t\t\t\t\t// setting backgroundImage , alt, width, height, left , top ,border, bordercolor on the basis of xml\r\n\t\t\t\t\timg_url = parseXml.smxml._bgimg;\r\n\t\t\t\t\talt = parseXml.smxml._alt;\r\n\t\t\t\t\tans_y = parseFloat(parseXml['smxml']['div']['_top']);\r\n\t\t\t\t\tans_x = parseFloat(parseXml['smxml']['div']['_left'])+13;\r\n\t\t\t\t\tans_h = parseFloat(parseXml['smxml']['div']['_height']);\r\n\t\t\t\t\tans_w = parseFloat(parseXml['smxml']['div']['_width']);\r\n\t\t\t\t\talt = parseXml['smxml']['div']['_alt'];\r\n\t\t\t\t\ttype = parseXml['smxml']['div']['type'];\r\n\t\t\t\t\titemBorder  = parseXml.smxml.div._border;\r\n\t\t\t\t\titemBorderColor  = parseXml.smxml.div._bordercolor;\r\n\t\t\t\t\titemAreaWidth = parseXml.smxml.div._width+'px';\r\n\t\t\t\t\titemAreaHeight = parseXml.smxml.div._height+'px';\r\n\t\t\t\t\titemAreaLeft = (parseInt(parseXml.smxml.div._left) + 4);\r\n\t\t\t\t\titemAreaTop = (parseInt(parseXml.smxml.div._top) + 2);\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet image = new Image();\r\n\t\t\t\t\timage.onload = function() {\r\n\t\t\t\t\t\tlet bgImgHeight = this.height+'px';\r\n\t\t\t\t\t\tlet bgImgWidth =  this.width+'px';\r\n\t\t\t\t\t\tstate.imgheight =  (parseXml.smxml.div._imgheight)  ? parseXml.smxml.div._imgheight+'px' : \"auto !important\";\r\n\t\t\t\t\t\tstate.imgwidth = (parseXml.smxml.div._imgwidth) ? parseXml.smxml.div._imgwidth+'px' :  \"auto !important\";\r\n\t\t\t\t\t\tAH.select('#hptmain0', 'css', {height: bgImgHeight, width: bgImgWidth});\r\n\t\t\t\t\t};\r\n\t\t\t\t\timage.src = bgImgPath + parseXml.smxml._bgimg;\r\n\t\t\t\t}\r\n\t\t\t\tbreak; \r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\tfunction preRender() {\r\n\t\tif (isReview) {\r\n\t\t\ttargetView = \"block\";\r\n\t\t}\r\n\t\tvar image = new Image();\r\n\t\timage.onload = function() {\r\n\t\t\tif (moduleArr[item_type] == \"3\") {\r\n\t\t\t\tstate.imgheight = (parseXml.smxml._height > this.height) ? parseXml.smxml._height+'px' : this.height+'px';\r\n\t\t\t\tstate.imgwidth = (parseXml.smxml._width > this.width) ? parseXml.smxml._width + 'px' : this.width + 'px';\r\n\t\t\t} else {\r\n\t\t\t\tstate.imgheight =  (parseXml.smxml.div._imgheight)  ? parseXml.smxml.div._imgheight+'px' : \"auto !important\";\r\n\t\t\t\tstate.imgwidth = (parseXml.smxml.div._imgwidth) ? parseXml.smxml.div._imgwidth+'px' :  \"auto !important\";\r\n\t\t\t}\r\n\t\t};\r\n\t\tif(img_url)\r\n\t\timage.src =   bgImgPath + img_url;\r\n\t\tif (uxml) {\r\n\t\t\tuserCorrect = uxml;\r\n\t\t\tlet parseUxml = XMLToJSON(uxml);\r\n\t\t\tif (parseUxml.SMANS && parseUxml.SMANS.div) {\r\n\t\t\t\tisUxmlTarget = true;\r\n\t\t\t\tans_x = parseUxml.SMANS.div._targetLeft;\r\n\t\t\t\tans_y = parseUxml.SMANS.div._targetTop;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction checkAnswer (event) {\r\n\t\tlet result = {}; \r\n\t\tif (typeName == 'textclick' || typeName == 'textselect') {\r\n\t\t\tresult = HotJS.check_Ans('#previewArea #hptmain0');\r\n\t\t\tanswerStatus = result.ans;\r\n\t\t} else {\r\n\t\t\tresult = movetarget(event, ans_h, ans_w, parseInt(itemAreaLeft), parseInt(itemAreaTop));\r\n\t\t\tisUxmlTarget = true;\r\n\t\t\tans_x = result.left;\r\n\t\t\tans_y = result.top;\r\n\t\t\tansStatus = result.ans;\r\n\t\t\tanswerStatus = ansStatus;\r\n\t\t\tif (editorState) showAns(ansStatus ? \"Correct\" : \"Incorrect\");\r\n\t\t}\r\n\t\t\r\n\t\tonUserAnsChange(result);\r\n\t}\r\n\tfunction onModalTouch(event) {\r\n\t\tconsole.log(event);\r\n\t}\r\n\r\n\t// used in native for toggle\r\n\tfunction toggleSelectArea() {\r\n\t\tscrollEnabled = scrollEnabled ? false : true;\r\n\t}\r\n\r\n\t// when remediation mode is on\r\n\tfunction setReview() {\r\n\t\tisReview= true;\r\n\t\ttargetView = \"block\";\r\n\t\t//isDotCreate = false;\r\n\t\t// if the module is imagehighlight then it draw the correct answer on the module using the function drawOnCanvas\r\n\t\tif (moduleArr[item_type] == \"3\") {\r\n\t\t\tlet el = AH.find('#previewArea', 'canvas');\r\n\t\t\tlet pts = el.getAttribute('correctans'); \r\n\t\t\tif ( pts!='') pts = JSON.parse(pts);\r\n\t\t\tHotJS.drawOnCanvas(el, pts, 'green');\r\n\t\t}\r\n\t\t// called the function unbind lab which basically show the draggable element in preview area if found which is found in case of spot an image\r\n\t\tHotJS.modeOnHot(1);\r\n\t\t// check the answer wether the answer is correct or not\r\n\t\t//checkAnswer();\r\n\t\tAH.select(\"#hptmain0\", 'css', {pointerEvents: \"none\"});\r\n\t}\r\n\r\n\t// when remediation mode is off\r\n\tfunction unsetReview() {\r\n\t\tisReview= false;\r\n\t\ttargetView = \"none\";\r\n\t\t// if the module is imagehighlight then it hide the correct answer ans show user ans on the module using the function drawOnCanvas\r\n\t\tif (moduleArr[item_type] == \"3\") {\r\n\t\t\tAH.find('#previewArea', 'canvas', {action: 'remove'});\r\n\t\t\t//imageDraw('#previewArea', 0);\r\n\t\t\tvar timer = setTimeout(function() {\r\n\t\t\t\timageDraw('#previewArea', 0);\r\n\t\t\t\tlet el = AH.find('#previewArea', 'canvas');\r\n\t\t\t\t// getting the value of the user ans\r\n\t\t\t\tlet getAns = AH.select('#special_module_parse').value,\r\n\t\t\t\t// getting the user answer coordinates\r\n\t\t\t\tcans   = getAns.substring(getAns.indexOf('{'),getAns.lastIndexOf('}')+1);\r\n\r\n\t\t\t\t// parsing it into the JSON element\r\n\t\t\t\tif ( cans!='') cans = JSON.parse(cans);\r\n\t\t\t\t// passed the points in the canvas\r\n\t\t\t\tHotJS.drawOnCanvas(el, cans, linecolor);\r\n\t\t\t\tclearTimeout(timer);\r\n\t\t\t},500);\r\n\t\t}\r\n\t\t// called the function bind lab which basically hide the draggable element in preview area if found which is found in case of spot an image\r\n\t\tHotJS.modeOnHot();\r\n\t\tAH.select(\"#hptmain0\", 'css', {pointerEvents: \"auto\"});\r\n\t}\r\n\r\n\t// for image draw\r\n\tfunction imageDraw(hid,review) {\r\n\t\tlet imgObj =  AH.find(hid, '#hptmain0');\r\n\t\thid = imgObj;\r\n\t\t// let imgWidth  = imgObj.clientWidth;\r\n\t\t// let imgHeight = imgObj.clientHeight;\r\n\t\tlet surface = new DooScribPlugin({\r\n            target: imgObj,\r\n            width: +( state.imgwidth.replace('px', '') ),\r\n            height: +( state.imgheight.replace('px', '') ),\r\n            correctans: correctans,\r\n            cssClass: 'drawSurface',\r\n            penSize: 4,\r\n            type: 'imagehighlight',\r\n            editable: (!review) ? true: false,\r\n            onMove: function () { },\r\n            onClick: function () { },\r\n            onPaint: function (e) {\r\n                // storeing the X and Y values\r\n                xaxis.push(e.X);\r\n                yaxis.push(e.Y);\r\n            },\r\n            onRelease: function (e) {\r\n\t\t\t\tonReleaseFunc(e, hid, review);\r\n            }\r\n        });\r\n\t\tlinecolor = String(xml.match(/linecolor=\\\"([^\\\"]+)\\\"/gm));\r\n\t\tlinecolor = linecolor.substring(\"11\", (linecolor.length - 1));\r\n\t\t//var res = AH.siblings(hid).find((_elm)=> _elm.matches('div') ).getAttribute('id');\r\n\t\tif (!review) {\r\n\t\t\tAH.listen('#previewArea', 'click', '#reset', ()=> {\r\n\t\t\t\tsurface.clearSurface();\r\n\t\t\t\tdrawstr = ''; count = 0;\r\n\t\t\t\tuserCorrect =  \"\";\r\n\t\t\t\tAH.selectAll(AH.select(hid).children, 'attr', {userans: ''});\r\n\t\t\t\tanswerStatus = false;\r\n\r\n\t\t\t});\r\n\t\t}\r\n\t\twindow.surface = surface;\r\n\t}\r\n\r\n\t// calls in key up / onrelase of mouse\r\n\tfunction onReleaseFunc(e, hid, review){\r\n\t\tlet userAnswers = '';\r\n\t\tlet inNativeIsCorrect = false;\r\n\r\n\t\t// check for the review mode is on or off\r\n\t\tif (!review) {\t// if review mode is off\r\n\t\t\tdrawstr = '';\r\n\t\t\t// getting the  value of the point \r\n\t\t\tvar coor = document.querySelector('#special_module_parse').value;\r\n\t\t\tcoor = coor.substring(coor.indexOf('{'),coor.lastIndexOf('}')+1);\r\n\r\n\t\t\t// getting the coordinates using the getCoordinate function\r\n\t\t\tif (coor!='') {\t\r\n\t\t\t\tcoor = \tObject.keys(JSON.parse(coor)).length;\r\n\t\t\t\tdrawstr = HotJS.getCoordinate(hid, xaxis, yaxis, coor);\r\n\t\t\t} else {\r\n\t\t\t\tdrawstr = HotJS.getCoordinate(hid, xaxis, yaxis, count);\r\n\t\t\t}\r\n\t\t\t// for getting window height in case of native\r\n\t\t\tif (window.inNative) {\r\n\t\t\t\twindow.getHeight && window.getHeight();\r\n\t\t\t}\t\r\n\r\n\t\t\t// for autograding\r\n\t\t\twindow.ISSPECIALMODULEUSERXMLCHANGE = 1;\r\n\t\t\t// puuting the value in the textarea for saving the user ans\r\n\t\t\tAH.select(\"#special_module_user_xml\").value = drawstr;\r\n\t\t\tuserCorrect = drawstr;\r\n\t\t\txaxis=[]; yaxis=[];\r\n\t\t\t// for getting the correctans\r\n\t\t\tlet pts  = AH.find(hid, 'canvas').getAttribute('correctans');\r\n\t\t\t// for getting the user ans\r\n\t\t\tlet cans = AH.find(hid, 'canvas').getAttribute('userans');\r\n\r\n\t\t\t// parsing both the json if they are not empty\r\n\t\t\tif ( cans!='') cans = JSON.parse(cans);\r\n\t\t\tif ( pts!='') pts = JSON.parse(pts);\r\n\r\n\t\t\t// comparing them with the function , it will return 1 if the answer is correct\r\n\t\t\tlet flag = HotJS.compareDrawing(cans,pts,hid);\r\n\t\t\tlet message = \"Incorrect\";\r\n\t\t\t// for setting the answer correct if flag > 0\r\n\t\t\tif (flag > 0) {\r\n\t\t\t\tinNativeIsCorrect = true;\r\n\t\t\t\tmessage = \"Correct\";\r\n\t\t\t\tstate.answerType3 = true;\r\n\t\t\t\tif (editorState) showAns(\"Correct\");\r\n\t\t\t} else {\r\n\t\t\t\tinNativeIsCorrect = false;\r\n\t\t\t\tmessage = \"Incorrect\";\r\n\t\t\t\tstate.answerType3 = false;\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\tif (editorState) showAns(message);\r\n\t\t\tuserAnswers = AH.select('#special_module_user_xml').value;\r\n\r\n\t\t\tflag = (flag > 0) ? true : false;\r\n\t\t\tanswerStatus = flag;\r\n\r\n\t\t\tvar result = {'ans': flag, 'uXml': userAnswers};\r\n\t\t\tonUserAnsChange(result);\r\n\t\t\t// @uc-abk: When user drawed canvas within the correct area : flag will 1\r\n\t\t\t(flag > 0) ? (AH.select(\"#answer\").checked =  true) : (AH.select(\"#answer\").checked = false);\r\n\t\t\tif (window.inNative) window.postMessage(JSON.stringify({ inNativeIsCorrect, userAnswers }), \"*\");\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction parseTextClick(cdata) {\r\n\t\tvar cdataStr = '';\r\n\t\t// get the correct answer in correctans\r\n\t\tvar correctans = cdata.match(/%{(.*?)}%/gm);\r\n\t\tif (correctans) {\r\n\t\t\ttotalCorrectAns = correctans.length;\r\n\t\t\tfor(var i=0;i<correctans.length;i++) {\r\n\t\t\t\t// replacing the space with <uc:space> and then replacing the correctans with it\r\n\t\t\t\tcorrectAnsStr = correctans[i].replace(/\\s+/gm,'<uc:space>');\r\n\t\t\t\tcdata = cdata.replace(correctans[i],correctAnsStr);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcorrectAnsStr = '';\r\n\t\tcdata = cdata.split(' ');\r\n\t\tfor(var i=0;i<cdata.length;i++) {\r\n\t\t\t//if the data is correct answer\r\n\t\t\tif (cdata[i].match(/%{|%}/gm)) {\r\n\t\t\t\t// for setting the data-correctans 1 if that value is correct\r\n\t\t\t\tcdata[i] = cdata[i].replace(/<uc:space>/gm,' ').replace(/%{|}%/gm,''); \r\n\t\t\t\tcdataStr += '<p class=\"textClick\" data-index=\"'+i+'\" data-userans=\"0\" data-correctans=\"1\">'+cdata[i]+'</p>';\r\n\t\t\t\tcorrectAnsStr += cdata[i]+'|';\r\n\t\t\t} else {\r\n\t\t\t\t// for setting the data-correctans 0 if that value is correct\r\n\t\t\t\tcdataStr += '<p class=\"textClick\" data-index=\"'+i+'\" data-userans=\"0\" data-correctans=\"0\">'+cdata[i]+'</p>';\r\n\t\t\t} \r\n\t\t}\r\n\t\tcorrectAnsStr = correctAnsStr.replace(/\\|$/gm,'');\r\n\t\t // showing the text in the preview area \t\r\n\t\tAH.select(' #previewArea  #textID0').innerHTML =  cdataStr;\r\n\t}\r\n\tfunction parseTextSelect(cdata) {\r\n\t\tcorrectAnsStr = '';\r\n\t\t// store the correct answer in correct ans \r\n\t\tvar correctans = cdata.match(/%{(.*?)}%/gm);\r\n\t\t// if exists\r\n\t\tif (correctans) {\r\n\t\t\t// storing it the correct ans in correctAnsStr seperted by | \r\n\t\t\tfor (var index_no = 0; index_no <correctans.length; index_no += 1) {\r\n\t\t\t\tcorrectAnsStr += correctans[index_no].replace(/%{|}%/gm, '') + '|';\r\n\t\t\t}\r\n\t\t\t// replace the symbol with the span\r\n\t\t\tcorrectHtml = cdata.replace(/%{/gm, '<span class=\"selecttext selected\">').replace(/}%/gm, '<span>');\r\n\t\t\ttotalCorrectAns = correctans.length;\r\n\r\n\t\t\t// removing last pipe symbol in the correctAnsStr\r\n\t\t\tcorrectAnsStr = correctAnsStr.replace(/\\|$/gm, '');\r\n\t\t}\r\n\t\t// removing the symbol from the cdata\r\n\t\tvar showdata = cdata.replace(/%{|}%/gm, '');\r\n\t\tvar timer = setTimeout(function() {\t\t\t\r\n\t\t\t// show the text in the html\r\n\t\t\tAH.select(' #previewArea  #textID0').innerHTML =  showdata;\r\n\t\t\tclearTimeout(timer);\r\n\t\t}.bind(self), 100);\r\n\t}\r\n\r\n\tfunction loadModule(_type) {\r\n\t\tswitch(_type) {\r\n\t\t\t// if the type is text click or text select\r\n\t\t\tcase \"1\":\r\n\t\t\tcase \"2\": {\r\n\t\t\t\t\tlet data_userans = \"\";\r\n\t\t\t\t\tlet data_userhtml = \"\";\r\n\t\t\t\t\tif (uxml) {\r\n\t\t\t\t\t\tlet _uxml = XMLToJSON(uxml);\r\n\t\t\t\t\t\twindow.test = uxml;\r\n\t\t\t\t\t\t// extract the userans and userhtml\r\n\t\t\t\t\t\tif (_uxml?.smans?.div) {\r\n\t\t\t\t\t\t\tdata_userans = _uxml.smans.div['_data-userAns'];\r\n\t\t\t\t\t\t\tdata_userhtml = _uxml.smans.div['_data-userHtml'];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// return the div\r\n\t\t\t\t\treturn (`\r\n\t\t\t\t\t\t<div is id=\"hptmain0\" totalCorrectAns=${totalCorrectAns}>\r\n\t\t\t\t\t\t\t<div \r\n\t\t\t\t\t\t\t\tid=\"textID0\" \r\n\t\t\t\t\t\t\t\ttype=\"${typeName}\" \r\n\t\t\t\t\t\t\t\tdata-correcthtml=\"${correctHtml}\" \r\n\t\t\t\t\t\t\t\tdata-correctans=\"${correctAnsStr}\"\r\n\t\t\t\t\t\t\t\tdata-userans=\"${data_userans}\" \r\n\t\t\t\t\t\t\t\tdata-userhtml=\"${data_userhtml}\" \r\n\t\t\t\t\t\t\t\tclass=\"drag-resize hotspotTxt\" \r\n\t\t\t\t\t\t\t\tstyle=\"max-width:${divWidth}; height:${divHeight}; line-height: 1.4; font-size:17px!important;\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t`);\r\n\t\t\t\t}\r\n\t\t\tdefault : return(\"<div>Incorrect question type</div>\");\r\n\t\t}\r\n\t}\r\n\r\n\t//To handle review toggle\r\n\tfunction handleReview(mode, event) {\r\n\t\tif (mode == 'c') {\r\n\t\t\tHotJS.showansdrag('#hptmain0', 'c',1);\r\n\t\t} else {\r\n\t\t\tHotJS.showansdrag('#hptmain0', 'u',1)\r\n\t\t}\r\n\t}\r\n</script>\r\n<main class=\"pt-0\">\r\n\t<center>\r\n\t\t{#if moduleArr[item_type] == \"1\" || moduleArr[item_type] == \"2\"}\r\n\t\t\t<ItemHelper \r\n\t\t\t\ton:setReview = {setReview}\r\n\t\t\t\ton:unsetReview = {unsetReview}\r\n\t\t\t\thandleReviewClick={handleReview}\r\n\t\t\t\tcustomReviewMode={customIsReview}\r\n\t\t\t\treviewMode={isReview}\r\n\t\t\t/>\r\n\t\t{:else}\r\n\t\t\t<div class=\"h h-imp\" id=\"review_buttons\">\r\n\t\t\t\t<button tabindex=\"0\" type=\"button\" class=\"h h-imp svelte_items_test\" id=\"set-review\"></button>\r\n\t\t\t\t<button tabindex=\"0\" type=\"button\" class=\"h h-imp svelte_items_test\" id=\"unset-review\"></button>\t\t\r\n\t\t\t</div>\r\n\t\t{/if}\r\n\t\t<div id=\"previewArea\" class=\"relative\">\r\n\t\t\t<!-- if the type is text click or text select -->\r\n\t\t\t{#if moduleArr[item_type] == \"4\"}\r\n\t\t\t\t<table id=\"hptmain0\" class='smbase smhotspot border-0 h-auto w-auto uc-table no_overflow_wrapper'>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td class=\"border\">\r\n\t\t\t\t\t\t\t\t<div id=\"SM0\" class=\"relative\">\r\n\t\t\t\t\t\t\t\t\t<div \r\n\t\t\t\t\t\t\t\t\t\tid='SM0' \r\n\t\t\t\t\t\t\t\t\t\tclass=\"SM position-relative m-0 p-0\" \r\n\t\t\t\t\t\t\t\t\t\tstyle=\"{`\r\n\t\t\t\t\t\t\t\t\t\t\tposition: relative;\r\n\t\t\t\t\t\t\t\t\t\t\tmargin: 0px;\r\n\t\t\t\t\t\t\t\t\t\t\tpadding: 0px;\r\n\t\t\t\t\t\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\t\t\t\t\t\theight: 100%;\r\n\t\t\t\t\t\t\t\t\t\t\tborder: ${(itemBorder) ? itemBorder + 'px solid' : ''};\r\n\t\t\t\t\t\t\t\t\t\t\tborder-color: ${itemBorderColor};\r\n\t\t\t\t\t\t\t\t\t\t`}\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<img \r\n\t\t\t\t\t\t\t\t\t\t\tid=\"im0\" \r\n\t\t\t\t\t\t\t\t\t\t\ttabindex=\"0\" \r\n\t\t\t\t\t\t\t\t\t\t\tstyle=\"max-width:none; width: {state.imgwidth}; height: {state.imgheight};\" \r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"hotSpotImg\" \r\n\t\t\t\t\t\t\t\t\t\t\tsrc={bgImgPath+img_url} \r\n\t\t\t\t\t\t\t\t\t\t\talt={alt} \r\n\t\t\t\t\t\t\t\t\t\t\ton:click={checkAnswer}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<div \r\n\t\t\t\t\t\t\t\t\t\t\tid='hotArea' \r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"hotArea hotArea hotAreaPreview\" \r\n\t\t\t\t\t\t\t\t\t\t\tstyle=\"display: {targetView};left:{itemAreaLeft}px;top:{itemAreaTop}px;height:{itemAreaHeight};width:{itemAreaWidth};\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t&nbsp;\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\tid='target' \r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"target targetImg icomoon-plus-circle-2\"\r\n\t\t\t\t\t\t\t\t\t\t\tclass:showBlock=\"{isUxmlTarget}\"\r\n\t\t\t\t\t\t\t\t\t\t\tstyle = \"left:{ans_x}px;top:{ans_y}px;\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\t\r\n\t\t\t{:else if moduleArr[item_type] == \"3\"}\r\n\t\t\t\t<center key=\"imageHeight_3\">\r\n\t\t\t\t\t<div \r\n\t\t\t\t\t\tstyle=\"\r\n\t\t\t\t\t\t\theight: 34px; \r\n\t\t\t\t\t\t\twidth: {window.inNative ? window.innerWidth : state.imgwidth}; \r\n\t\t\t\t\t\t\tbackground: #d9e7fd; \r\n\t\t\t\t\t\t\tborder-top: 2px solid #96bbf6;\r\n\t\t\t\t\t\t\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<div \r\n\t\t\t\t\t\t\tid=\"reset\" \r\n\t\t\t\t\t\t\tstyle=\"height: 27px; width: 90px; top:2px;\"\r\n\t\t\t\t\t\t\tclass=\"reset btn btn-outline-primary position-relative btn-sm mt-sm2 mr-sm2 float-end\">\r\n\t\t\t\t\t\t\t<span class=\"icomoon-new-24px-reset-1 s3\" style=\"vertical-align: text-top\"></span> \r\n\t\t\t\t\t\t\t<span class=\"position-relative bottom1\">Reset</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div \r\n\t\t\t\t\t\tid=\"hptmain0\"\r\n\t\t\t\t\t\ttotalCorrectAns={totalCorrectAns}\r\n\t\t\t\t\t\tdd={state.imgwidth}\r\n\t\t\t\t\t\tstyle=\"\r\n\t\t\t\t\t\t\twidth: {state.imgwidth || '250px'}; \r\n\t\t\t\t\t\t\theight: {state.imgheight || '600px'}; \r\n\t\t\t\t\t\t\tbackground-image: url('{bgImgPath+img_url}'); \r\n\t\t\t\t\t\t\tbackground-repeat: no-repeat; \r\n\t\t\t\t\t\t\tposition: relative; \r\n\t\t\t\t\t\t\tborder: {itemBorder}px solid {itemBorderColor};\r\n\t\t\t\t\t\t\"\r\n\t\t\t\t\t></div>\r\n\t\t\t\t\t{#if scrollEnabled}\r\n\t\t\t\t\t\t<div \r\n\t\t\t\t\t\t\tclass=\"position-fixed index0\" \r\n\t\t\t\t\t\t\tstyle=\"right: 0; top: 0; left: 0; bottom: 0; background: rgba(0,0,0,0.4)\"\r\n\t\t\t\t\t\t></div>\r\n\t\t\t\t\t{/if}\r\n\t\t\t\t</center>\r\n\t\t\t{:else}\r\n\t\t\t{@html loadModule(moduleArr[item_type])}\r\n\t\t\t{/if}\r\n\t\t</div>\r\n\t</center>\r\n\t<input \r\n\t\ttype=\"hidden\" \r\n\t\tid=\"special_module_parse\" \r\n\t\tname=\"special_module_parse\" \r\n\t\tuserans=\"\" \r\n\t\tvalue={userCorrect} \r\n\t/>\r\n\t<!-- <textarea class=\"h\" id=\"special_module_user_xml\"></textarea> -->\r\n</main>\r\n\r\n<style>\r\n\tmain {\r\n\t\ttext-align: center !important;\r\n\t\tpadding: 1em;\r\n\t\tmax-width: 240px;\r\n\t\tmargin: 0 auto;\r\n\t\tfont-size: 26px;\r\n\t}\r\n\t.targetImg {\r\n\t\tdisplay : none;\r\n\t\tposition: absolute;\r\n\t\tz-index: 10;\r\n\t\twidth: 24px;\r\n\t\theight:24px;\r\n\t\tborder-radius: 50%;\r\n\t\tbackground: #fff;\r\n\t\tcolor: #1c3ad4;\r\n\t}\t\r\n\t\r\n\t.showBlock {\r\n\t\tdisplay : block;\r\n\t}\r\n\r\n\t@media (min-width: 640px) {\r\n\t\tmain {\r\n\t\t\tmax-width: none;\r\n\t\t}\r\n\t}\r\n</style>"],"names":["JS","JUI","hotspotScript","[object Object]","this","userAnsXML","xaxis","yaxis","count","drawstr","elemId","labBinded","result","temp","hid","review","type","correctans","textClickListen","event","_this","getVal","classList","contains","setAttribute","remove","add","find","forEach","v","i","textContent","action","actionData","data-userans","textSeelctListen","e","target","nodeName","select","removespan","highlightText","found","data-userhtml","innerHTML","listen","bind","sendDataToNative","inNativeIsCorrect","userAnswers","selector","children","length","checkChildAnswer","window","ISSPECIALMODULEUSERXMLCHANGE","value","calculatePoint","getAttribute","inNative","getHeight","postMessage","JSON","stringify","uXml","ans","pElem","ansKey","split","sort","join","userKey","filter","_elm","escape","ansType","showchilddragans","hidNode","selectText","userans","decodeURIComponent","err","unescape","classname","findInArray","replace","_htmlContent","decodedHtmlContent","console","log","text_indicator_html","text_indicator_html1","insert","querySelector","el","getAns","cans","substring","indexOf","lastIndexOf","parse","drawOnCanvas","color","pts","top","Math","min","apply","left","width","max","height","slice","selectAll","createUserAnsXMLDraw","xmlDom","parseHtml","bgimg","path","_attr","attributes","na_attr","nameme","element","top1","src","tObj","hObj","scoreFlag","style","display","layerY","layerX","offsetY","offsetX","checkmodule","createUserAnsXML","obj","document","getElementById","checked","userAns","targetTop","targetLeft","parseInt","yourScore","cord","c","toString","ctx","getContext","len","Object","keys","j","beginPath","lineWidth","strokeStyle","moveTo","lineTo","stroke","uans","uval","getAreaVal","cval","cflag","clen","ulen","coordinate","cordval","calculateArea","trim","getSelected","getRangeAt","endOffset","snapSelectionToWord","selectionRange","startOffset","selection","pasteHtmlAtCaret","sel","getSelection","modify","isCollapsed","range","createRange","setStart","anchorNode","anchorOffset","setEnd","focusNode","focusOffset","backwards","collapsed","detach","endNode","collapse","charAt","extend","textRange","text","expand","test","moveEnd","html","rangeCount","deleteContents","createElement","node","lastNode","frag","createDocumentFragment","firstChild","appendChild","insertNode","cloneRange","setStartAfter","removeAllRanges","addRange","pasteHTML","span","span_contents","regex","RegExp","parentNode","replaceChild","createTextNode","modeType","unBindLab","showansdrag","bindLab","pointerEvents","Point","a","b","isNaN","Number","x","y","X","Y","DooScribPlugin","options","prevPoint","undefined","defaultOptions","penSize","cssClass","onClick","onMove","onPaint","onRelease","penWidth","drawing","cap","ID","floor","random","drawingSurface","Settings","init","empty","lineCap","hasTouch","addEventListener","clickDown","moved","clickUp","error","st","scrollY","clientX","targetTouches","pageX","clientY","pageY","changedTouches","isDrawing","preventDefault","normalizeTouch","offset","pt","drawLine","editable","backgroundColor","clearRect","fromX","fromY","toX","toY","movetarget","ans_h","ans_w","ans_left","ans_top","targetData","pointer_size","which","ansDivHeight","ansDivWidth","innerWidth","imgwidth","imgheight","bgImgPath","append","xml","uxml","ansStatus","isReview","showAns","editorState","customIsReview","HotJS","answerStatus","totalCorrectAns","parseXml","ansDisable","alt","moduleArr","textclick","textselect","imagehighlight","hotspot","state","itemBorder","itemBorderColor","isUxmlTarget","itemAreaTop","itemAreaHeight","itemAreaWidth","itemAreaLeft","targetView","ans_x","ans_y","img_url","item_type","xmlHeight","xmlWidth","xmlBorderColor","xmlBorderWidth","userCorrect","linecolor","divHeight","divWidth","typeName","correctAnsStr","correctHtml","xmlParser","toLowerCase","smxml","_height","_width","cdata","cdataStr","match","AH","parseTextClick","div","__cdata","parent","index_no","showdata","timer","setTimeout","clearTimeout","self","parseTextSelect","image","Image","_border","_bordercolor","unsetReview","_bgimg","_alt","parseFloat","_left","_top","onload","bgImgHeight","bgImgWidth","_imgheight","_imgwidth","preRender","parseUxml","XMLToJSON","SMANS","_targetLeft","_targetTop","checkAnswer","check_Ans","onUserAnsChange","setReview","modeOnHot","imgObj","surface","push","coor","getCoordinate","flag","compareDrawing","message","answerType3","onReleaseFunc","String","clearSurface","imageDraw","onMount","readyThis","image_elem","getBoundingClientRect","myXml","pop","_type","data_userans","data_userhtml","_uxml","smans","mode"],"mappings":"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"}