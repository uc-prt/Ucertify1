import{E as t,B as e,S as s,i,s as o,D as a,q as r,h as l,o as n,e as c,b as d,c as u,u as p,f,g as h,j as b,m,l as v,x as g,t as x,a as A,d as y,z as w,y as k,C as _,A as L,a4 as X,p as F,W as C,X as M,w as P}from"./main-0853d9c7.js";import{I as j}from"./ItemHelper-1e2b6f9d.js";const I=new t;let Q,T,B,E,D={};function S(t){a(t,"svelte-e5vip7","#graph_modal.svelte-e5vip7 .modal-body.svelte-e5vip7{max-height:350px}")}function O(t,e,s){const i=t.slice();return i[24]=e[s],i}function R(t){let e,s,i,o,a,r,d,u,p,b,m,v;return{c(){e=c("div"),f(e,"id",s=t[1].QXML._id+"Preview"),f(e,"data-userans",i=t[1].userAns_data),f(e,"data-anskey",o=t[1].QXML._anskey),f(e,"type",a=t[1].QXML._type),f(e,"class",r="drag-resize dropable "+t[1].QXML._type),f(e,"data-xtickdistance",d=t[1].QXML._xtickdistance),f(e,"data-ytickdistance",u=t[1].QXML._ytickdistance),f(e,"data-xaxis",p=t[1].QXML._xaxis),f(e,"data-yaxis",b=t[1].QXML._yaxis),f(e,"data-snapsize",m=t[1].QXML._snapsize),f(e,"data-equation",v=t[1].QXML._equation),h(e,"height",t[1].QXML._height-40+"px"),h(e,"width",t[1].QXML._width+"px"),h(e,"border","1px solid #ccc")},m(t,s){l(t,e,s)},p(t,l){2&l&&s!==(s=t[1].QXML._id+"Preview")&&f(e,"id",s),2&l&&i!==(i=t[1].userAns_data)&&f(e,"data-userans",i),2&l&&o!==(o=t[1].QXML._anskey)&&f(e,"data-anskey",o),2&l&&a!==(a=t[1].QXML._type)&&f(e,"type",a),2&l&&r!==(r="drag-resize dropable "+t[1].QXML._type)&&f(e,"class",r),2&l&&d!==(d=t[1].QXML._xtickdistance)&&f(e,"data-xtickdistance",d),2&l&&u!==(u=t[1].QXML._ytickdistance)&&f(e,"data-ytickdistance",u),2&l&&p!==(p=t[1].QXML._xaxis)&&f(e,"data-xaxis",p),2&l&&b!==(b=t[1].QXML._yaxis)&&f(e,"data-yaxis",b),2&l&&m!==(m=t[1].QXML._snapsize)&&f(e,"data-snapsize",m),2&l&&v!==(v=t[1].QXML._equation)&&f(e,"data-equation",v),2&l&&h(e,"height",t[1].QXML._height-40+"px"),2&l&&h(e,"width",t[1].QXML._width+"px")},d(t){t&&n(e)}}}function Y(t){let e,s,i,o,a,r,d,u,p,b,m,v,g;return{c(){e=c("div"),f(e,"id",s=t[1].QXML._id+"Preview"),f(e,"data-userans",i=t[1].userAns_data),f(e,"data-anskey",o=t[1].QXML._anskey),f(e,"type",a=t[1].QXML._type),f(e,"class",r="drag-resize dropable "+t[1].QXML._type),f(e,"data-xtickdistance",d=t[1].QXML._xtickdistance),f(e,"data-ytickdistance",u=t[1].QXML._ytickdistance),f(e,"data-xaxis",p=t[1].QXML._xaxis),f(e,"data-yaxis",b=t[1].QXML._yaxis),f(e,"data-snapsize",m=t[1].QXML._snapsize),f(e,"data-equation",v=t[1].QXML._equation),f(e,"data-reflection",g=t[1].QXML._reflection),h(e,"height",t[1].QXML._height-40+"px"),h(e,"width",t[1].QXML._width+"px"),h(e,"border","1px solid #ccc")},m(t,s){l(t,e,s)},p(t,l){2&l&&s!==(s=t[1].QXML._id+"Preview")&&f(e,"id",s),2&l&&i!==(i=t[1].userAns_data)&&f(e,"data-userans",i),2&l&&o!==(o=t[1].QXML._anskey)&&f(e,"data-anskey",o),2&l&&a!==(a=t[1].QXML._type)&&f(e,"type",a),2&l&&r!==(r="drag-resize dropable "+t[1].QXML._type)&&f(e,"class",r),2&l&&d!==(d=t[1].QXML._xtickdistance)&&f(e,"data-xtickdistance",d),2&l&&u!==(u=t[1].QXML._ytickdistance)&&f(e,"data-ytickdistance",u),2&l&&p!==(p=t[1].QXML._xaxis)&&f(e,"data-xaxis",p),2&l&&b!==(b=t[1].QXML._yaxis)&&f(e,"data-yaxis",b),2&l&&m!==(m=t[1].QXML._snapsize)&&f(e,"data-snapsize",m),2&l&&v!==(v=t[1].QXML._equation)&&f(e,"data-equation",v),2&l&&g!==(g=t[1].QXML._reflection)&&f(e,"data-reflection",g),2&l&&h(e,"height",t[1].QXML._height-40+"px"),2&l&&h(e,"width",t[1].QXML._width+"px")},d(t){t&&n(e)}}}function H(t){let s,i,o,a,r,u,h,m,v,g,x,A,y,w,k,_,L,X,F,C,M,P,j,I,Q,T,B,E,D=e.pointx1+"",S=e.pointy1+"",O=e.pointx2+"",R=e.pointy2+"";return{c(){s=c("div"),i=c("div"),o=c("label"),a=p(D),r=d(),u=c("input"),m=d(),v=c("label"),g=p(S),x=d(),A=c("input"),w=d(),k=c("label"),_=p(O),L=d(),X=c("input"),C=d(),M=c("label"),P=p(R),j=d(),I=c("input"),T=d(),f(u,"type","number"),f(u,"resetvalue","1"),f(u,"class","point_x_1 getFieldVal form-control"),f(u,"id","setAnsByKey"),f(u,"placeholder",h=e.insert_numeric_data),f(o,"class","text-body"),f(A,"type","number"),f(A,"resetvalue","1"),f(A,"class","point_y_1 getFieldVal form-control"),f(A,"id","setAnsByKey"),f(A,"placeholder",y=e.insert_numeric_data),f(v,"class","ml-2 text-body"),f(X,"type","number"),f(X,"resetvalue","1"),f(X,"class","point_x_2 getFieldVal form-control"),f(X,"id","setAnsByKey"),f(X,"placeholder",F=e.insert_numeric_data),f(k,"class","text-body"),f(I,"type","number"),f(I,"resetvalue","1"),f(I,"class","point_y_2 getFieldVal form-control"),f(I,"id","setAnsByKey"),f(I,"placeholder",Q=e.insert_numeric_data),f(M,"class","ml-2 text-body"),f(i,"class","col-12 text-center"),f(s,"class","row mainDiv mt-4"),f(s,"key",B="divAllTextBox"+t[24].index),f(s,"id",E="divAllTextBox"+t[24].index)},m(t,e){l(t,s,e),b(s,i),b(i,o),b(o,a),b(o,r),b(o,u),b(i,m),b(i,v),b(v,g),b(v,x),b(v,A),b(i,w),b(i,k),b(k,_),b(k,L),b(k,X),b(i,C),b(i,M),b(M,P),b(M,j),b(M,I),b(s,T)},p(t,e){2&e&&B!==(B="divAllTextBox"+t[24].index)&&f(s,"key",B),2&e&&E!==(E="divAllTextBox"+t[24].index)&&f(s,"id",E)},d(t){t&&n(s)}}}function q(t){let s,i,o,a,r,u,h,m,v,x,A,y,w,k,_,L,X,F,C,M,P=e.pointx+(t[24].index+1)+"",j=e.pointy+(t[24].index+1)+"";return{c(){s=c("div"),i=c("div"),o=c("label"),a=p(P),r=d(),u=c("input"),x=d(),A=c("label"),y=p(j),w=d(),k=c("input"),F=d(),f(u,"type","number"),f(u,"resetvalue","1"),f(u,"class","form-control getFieldVal"),f(u,"name",h="point_"+t[24].index),f(u,"id",m="x_"+t[24].index),f(u,"placeholder",v=e.insert_numeric_data),f(o,"class","text-body"),f(k,"type","number"),f(k,"resetvalue","1"),f(k,"class","form-control getFieldVal"),f(k,"name",_="point_"+t[24].index),f(k,"id",L="y_"+t[24].index),f(k,"placeholder",X=e.insert_numeric_data),f(A,"class","ml-2 text-body"),f(i,"class","col-12 text-center"),f(s,"class","row mainDiv mt-2"),f(s,"key",C="divAllTextBox"+t[24].index),f(s,"id",M="divAllTextBox"+t[24].index)},m(t,e){l(t,s,e),b(s,i),b(i,o),b(o,a),b(o,r),b(o,u),b(i,x),b(i,A),b(A,y),b(A,w),b(A,k),b(s,F)},p(t,i){2&i&&P!==(P=e.pointx+(t[24].index+1)+"")&&g(a,P),2&i&&h!==(h="point_"+t[24].index)&&f(u,"name",h),2&i&&m!==(m="x_"+t[24].index)&&f(u,"id",m),2&i&&j!==(j=e.pointy+(t[24].index+1)+"")&&g(y,j),2&i&&_!==(_="point_"+t[24].index)&&f(k,"name",_),2&i&&L!==(L="y_"+t[24].index)&&f(k,"id",L),2&i&&C!==(C="divAllTextBox"+t[24].index)&&f(s,"key",C),2&i&&M!==(M="divAllTextBox"+t[24].index)&&f(s,"id",M)},d(t){t&&n(s)}}}function z(t){let s,i,o,a,r,u,h,m,v,x,A,y,w,k,_,L,X,F,C,M,P,j,I,Q,T=e.pointx+(t[24].index+1)+"",B=e.pointy+(t[24].index+1)+"",E=e.pointx2+"";return{c(){s=c("div"),i=c("div"),o=c("span"),a=c("label"),r=p(T),u=d(),h=c("input"),v=d(),x=c("label"),A=p(B),y=d(),w=c("input"),_=d(),L=c("div"),X=c("label"),F=p(E),C=d(),M=c("input"),j=d(),f(h,"type","number"),f(h,"resetvalue","1"),f(h,"class","association_x_point getFieldVal form-control"),f(h,"placeholder",m=e.insert_numeric_data),f(a,"class","ml-2 text-body"),f(w,"type","number"),w.value="0.4",w.disabled="disabled",f(w,"class","point_y_1 pe-none getFieldVal form-control"),f(w,"placeholder",k=e.insert_numeric_data),f(x,"class","ml-2 text-body"),f(o,"class","text-justify"),f(i,"class","col-12 text-center"),f(M,"type","number"),f(M,"resetvalue","1"),f(M,"class","association_point getFieldVal form-control"),f(M,"placeholder",P=e.insert_numeric_data),f(X,"class","text-body"),f(L,"class","col-12 text-center"),f(s,"class","row mainDiv mt-2"),f(s,"key",I="divAllTextBox"+t[24].index),f(s,"id",Q="divAllTextBox"+t[24].index)},m(t,e){l(t,s,e),b(s,i),b(i,o),b(o,a),b(a,r),b(a,u),b(a,h),b(o,v),b(o,x),b(x,A),b(x,y),b(x,w),b(s,_),b(s,L),b(L,X),b(X,F),b(X,C),b(X,M),b(s,j)},p(t,i){2&i&&T!==(T=e.pointx+(t[24].index+1)+"")&&g(r,T),2&i&&B!==(B=e.pointy+(t[24].index+1)+"")&&g(A,B),2&i&&I!==(I="divAllTextBox"+t[24].index)&&f(s,"key",I),2&i&&Q!==(Q="divAllTextBox"+t[24].index)&&f(s,"id",Q)},d(t){t&&n(s)}}}function N(t){let s,i,o,a,r,u,h,m,v,x,A,y,w,k,_,L,X,F,C,M,P,j,I,Q,T=e.pointx+(t[24].index+1)+"",B=e.pointy+(t[24].index+1)+"",E="Radius "+(t[24].index+1);return{c(){s=c("div"),i=c("div"),o=c("span"),a=c("label"),r=p(T),u=d(),h=c("input"),v=d(),x=c("label"),A=p(B),y=d(),w=c("input"),_=d(),L=c("div"),X=c("label"),F=p(E),C=d(),M=c("input"),j=d(),f(h,"type","number"),f(h,"resetvalue","1"),f(h,"class","point_x_1 getFieldVal form-control "),f(h,"id","setAnsByKey"),f(h,"placeholder",m=e.insert_numeric_data),f(a,"class","ml-2 text-body"),f(w,"type","number"),f(w,"resetvalue","1"),f(w,"class","point_y_1 getFieldVal form-control"),f(w,"placeholder",k=e.insert_numeric_data),f(x,"class","ml-2 text-body"),f(o,"class","text-justify"),f(i,"class","col-12 text-center"),f(M,"type","number"),f(M,"resetvalue","1"),f(M,"class","point_x_2 getFieldVal form-control"),f(M,"placeholder",P=e.insert_numeric_data),f(X,"class","text-body"),f(L,"class","col-12 text-center"),f(s,"class","row mainDiv mt-4"),f(s,"key",I="divAllTextBox"+t[24].index),f(s,"id",Q="divAllTextBox"+t[24].index)},m(t,e){l(t,s,e),b(s,i),b(i,o),b(o,a),b(a,r),b(a,u),b(a,h),b(o,v),b(o,x),b(x,A),b(x,y),b(x,w),b(s,_),b(s,L),b(L,X),b(X,F),b(X,C),b(X,M),b(s,j)},p(t,i){2&i&&T!==(T=e.pointx+(t[24].index+1)+"")&&g(r,T),2&i&&B!==(B=e.pointy+(t[24].index+1)+"")&&g(A,B),2&i&&E!==(E="Radius "+(t[24].index+1))&&g(F,E),2&i&&I!==(I="divAllTextBox"+t[24].index)&&f(s,"key",I),2&i&&Q!==(Q="divAllTextBox"+t[24].index)&&f(s,"id",Q)},d(t){t&&n(s)}}}function G(t){let e;function s(t,e){return"circle"==t[24].moduleType?N:"association"==t[24].moduleType?z:"point"==t[24].moduleType||"polygon"==t[24].moduleType?q:H}let i=s(t),o=i(t);return{c(){o.c(),e=r()},m(t,s){o.m(t,s),l(t,e,s)},p(t,a){i===(i=s(t))&&o?o.p(t,a):(o.d(1),o=i(t),o&&(o.c(),o.m(e.parentNode,e)))},d(t){o.d(t),t&&n(e)}}}function J(t){let s,i,o,a,r,_,L,X,F,C,M,P,I,Q,T,B,E,D,S,H,q,z,N,J,V,$,W,K,U,Z,tt,et,st,it,ot,at,rt,lt,nt,ct,dt,ut,pt,ft,ht,bt,mt,vt,gt,xt,At,yt=t[1].QXML._type+"";function wt(t,e){return t[1].QXML._reflection?Y:R}_=new j({props:{reviewMode:t[0],handleReviewClick:t[7],customReviewMode:t[2]}}),_.$on("setReview",t[5]),_.$on("unsetReview",t[6]);let kt=wt(t),_t=kt(t),Lt=t[1].modalViewLayout,Xt=[];for(let e=0;e<Lt.length;e+=1)Xt[e]=G(O(t,Lt,e));return{c(){s=c("div"),i=c("link"),a=d(),r=c("center"),u(_.$$.fragment),L=d(),X=c("div"),F=c("div"),C=c("ul"),M=c("li"),P=p(yt),I=d(),Q=c("button"),T=c("span"),D=d(),S=c("div"),H=c("button"),q=c("span"),V=d(),_t.c(),$=d(),W=c("ul"),W.innerHTML='<li class="btn_active btn-point" rel="point" data-value="P"></li> \n            <li rel="segment" class="btn-segment" data-value="S"></li> \n            <li rel="segment_left_point_hollow" class="btn-SLH" data-value="SLH"></li> \n            <li rel="segment_right_point_hollow" class="btn-SRH" data-value="SRH"></li> \n            <li rel="segment_both_point_hollow" class="btn-SBH" data-value="SBH"></li> \n            <li rel="ray_left_direction" class="btn-RL" data-value="RL"></li> \n            <li rel="ray_right_direction" class="btn-RR" data-value="RR"></li> \n            <li rel="ray_left_direction_right_hollow" class="btn-RRH" data-value="RRH"></li> \n            <li rel="ray_right_direction_left_hollow" class="btn-RLH" data-value="RLH"></li>',K=d(),U=c("div"),Z=c("div"),tt=c("div"),et=c("div"),st=c("h5"),st.textContent=""+e.set_ans,it=d(),ot=c("div"),at=c("div"),rt=c("div"),lt=c("button"),lt.textContent=""+e.add_point,nt=d(),ct=c("button"),ct.textContent=""+e.del_row,dt=d(),ut=c("div"),pt=c("div");for(let t=0;t<Xt.length;t+=1)Xt[t].c();ft=d(),ht=c("div"),bt=c("button"),bt.textContent=""+e.cancel,mt=d(),vt=c("button"),vt.textContent=""+e.ok_btn,f(i,"onload","this.rel='stylesheet'"),f(i,"rel","preload"),f(i,"as","style"),f(i,"href",o=itemUrl+"src/libs/Math.min.css"),M.value="plotgraph",f(M,"class","selected-option text-uppercase m-0"),f(C,"class","controls"),f(T,"data-bs-toggle","tooltip"),f(T,"title",B=e.ada_graph_msg),f(T,"class","icomoon-keyboard-2 s2"),f(Q,"tabindex","0"),f(Q,"id","ADA_button"),f(Q,"class","ADAButton float-start mt-1 btn w-auto h-auto p-1 btn-light ml"),f(Q,"aria-label",E=e.ada_graph_msg),f(q,"title",z=e.delete),f(q,"data-bs-toggle","tooltip"),f(q,"class",N="icomoon-new-24px-delete-1"),f(H,"type","button"),f(H,"class","btn btn-light p-1 focus_div"),f(H,"id","delButton"),f(H,"data-placement","right"),f(H,"tabindex","0"),f(H,"aria-label",J=e.ada_message),f(S,"class","btn-group tools delElem h-imp"),f(F,"id","option-toolbar"),f(F,"class","text-dark"),f(W,"class","footer_toolbox h"),f(X,"id","mathmain"),f(X,"class","userAns position-relative bg-white"),h(X,"height",Number(t[1].QXML._height)+2+"px"),h(X,"width",t[1].QXML._width+"px"),f(st,"class","modal-title"),f(lt,"class","btn btn-light"),f(lt,"id","updateRow"),f(ct,"class","btn btn-light ml-1"),f(ct,"id","delete_btn"),f(rt,"class","float-end"),f(at,"class","col-12"),f(ot,"class","row"),f(et,"class","modal-header"),f(pt,"class","row"),f(ut,"class","modal-body overflow-y svelte-e5vip7"),f(bt,"type","button"),f(bt,"class","btn btn-light"),f(bt,"data-bs-dismiss","modal"),f(vt,"type","button"),f(vt,"class","btn btn-secondary"),f(ht,"class","modal-footer"),f(tt,"class","modal-content"),f(Z,"class","modal-dialog modal-dialog-centered"),f(U,"id","graph_modal"),f(U,"class","modal fade svelte-e5vip7"),f(U,"tabindex","-1")},m(e,o){l(e,s,o),b(s,i),b(s,a),b(s,r),m(_,r,null),b(r,L),b(r,X),b(X,F),b(F,C),b(C,M),b(M,P),b(F,I),b(F,Q),b(Q,T),b(F,D),b(F,S),b(S,H),b(H,q),b(X,V),_t.m(X,null),b(X,$),b(X,W),b(s,K),b(s,U),b(U,Z),b(Z,tt),b(tt,et),b(et,st),b(et,it),b(et,ot),b(ot,at),b(at,rt),b(rt,lt),b(rt,nt),b(rt,ct),b(tt,dt),b(tt,ut),b(ut,pt);for(let t=0;t<Xt.length;t+=1)Xt[t].m(pt,null);b(tt,ft),b(tt,ht),b(ht,bt),b(ht,mt),b(ht,vt),gt=!0,xt||(At=[v(lt,"click",t[12]),v(ct,"click",t[13]),v(vt,"click",t[3])],xt=!0)},p(t,[e]){const s={};if(1&e&&(s.reviewMode=t[0]),_.$set(s),(!gt||2&e)&&yt!==(yt=t[1].QXML._type+"")&&g(P,yt),kt===(kt=wt(t))&&_t?_t.p(t,e):(_t.d(1),_t=kt(t),_t&&(_t.c(),_t.m(X,$))),(!gt||2&e)&&h(X,"height",Number(t[1].QXML._height)+2+"px"),(!gt||2&e)&&h(X,"width",t[1].QXML._width+"px"),2&e){let s;for(Lt=t[1].modalViewLayout,s=0;s<Lt.length;s+=1){const i=O(t,Lt,s);Xt[s]?Xt[s].p(i,e):(Xt[s]=G(i),Xt[s].c(),Xt[s].m(pt,null))}for(;s<Xt.length;s+=1)Xt[s].d(1);Xt.length=Lt.length}},i(t){gt||(x(_.$$.fragment,t),gt=!0)},o(t){A(_.$$.fragment,t),gt=!1},d(t){t&&n(s),y(_),_t.d(),w(Xt,t),xt=!1,k(At)}}}function V(t,s,i){let{xml:o}=s,{uxml:a}=s,{isReview:r}=s,{showAns:l}=s,{editorState:n}=s,c=r,d={},u=P({xml:"",QXML:"",userAns_data:"",moduleType:"none",noOfRow:1,review:!1,init:!1,open:!1,modalViewLayout:[],checked:!0});u.subscribe((t=>{i(1,d=t)}));function p(){"undefined"!=typeof JXG&&L.select("#ID0Preview").nodeName&&L.select("#ID0Preview").offsetHeight&&f()}function f(){D.readyThis("#mathmain"),D.showansdrag("#mathmain","u",1),D.modeOn()}function h(){let t=D.checkAns("#mathmain");"undefined"!=typeof is_sm&&L.showmsg(t.ans?"Correct":"Incorrect",3e3),n&&l(t.ans?"Correct":"Incorrect"),C(t)}function b(){L.getBS("#graph_modal","Modal").show(),v(),L.selectAll('[resetValue="1"]',"value","")}function m(t){"add"==t?i(1,d.noOfRow=d.noOfRow+1,d):"remove"==t&&(1==d.noOfRow?L.alert("Default row can't be deleted"):i(1,d.noOfRow=d.noOfRow-1,d)),v()}function v(){let t=[];for(let e=0;e<d.noOfRow;e++)t=[...t,{moduleType:d.moduleType,index:e}];u.update((e=>(e.modalViewLayout=t,e)))}function g(){L.selectAll("#mathmain #delButton.active","removeClass","active"),i(0,r=!0),D.modeOn("on"),D.showansdrag("#mathmain","u",1),h()}function x(){L.selectAll("#mathmain #delButton.active","removeClass","active"),i(0,r=!1),D.modeOn(),D.showansdrag("#mathmain","u",0)}_((async()=>{d.init||("object"==typeof JXG&&n?i(1,d.init=!0,d):void 0===n&&L.addScript("",itemUrl+"src/libs/jsxgraph.min.js",{callback(){i(1,d.init=!0,d)}})),n&&n.stopPreviewUpdate&&i(8,o=L.select("#special_module_xml").value),d.init&&d.xml!=o&&function(t){e=t=M(t),u.update((t=>(t.QXML=e.smxml.plot,t.moduleType=e.smxml.plot._type,t)));var e;let s={};a&&(s=M(a),s&&s.smans&&s.smans.div&&s.smans.div._userAns&&u.update((t=>(t.userAns_data=s.smans.div._userAns,t))))}(o)})),X((async()=>{d.init&&(d.xml!=o&&(n&&(i(1,d.noOfRow=1,d),L.selectAll('[id^=divAllTextBox]:not([id="divAllTextBox0"])',"remove"),AI.selectAll(".getFieldVal:not(:disabled)","value",""),L.find("#mathmain","[id^=ID]").setAttribute("data-userans","")),f(),u.update((t=>(t.xml=o,t))),r&&void 0===n&&g()),d.review!=r&&n&&(u.update((t=>(t.review=r,t))),r?(D.modeOn(1),h()):D.modeOn(0),L.selectAll("#mathmain #delButton.active","removeClass","active")),d.checked&&void 0===l&&(D.checkAns("#mathmain"),i(1,d.checked=!1,d)),L.enableBsAll('[data-bs-toggle="tooltip"]',"Tooltip"))})),F((async()=>{window.inNative&&window.getHeight&&window.getHeight(),L.set("q_refresh",p),n||p(),L.listen("body","keydown","#mathmain #delButton",(function(t,e){e.ctrlKey&&e.altKey&&(49==e.which||49==e.keyCode)&&b()})),L.listen("body","keydown","#mathmain #ADA_button",(function(t,e){13==e.keyCode&&b()})),L.listen("body","click","#mathmain",(function(t,e){"delButton"!=e.target.parentNode.id&&"ADA_button"!=e.target.id&&"delButton"!=e.target.id&&"ADA_button"!=e.target.parentNode.id&&"option-toolbar"!=e.target.id&&h()})),L.listen("body","mouseup","#mathmain",(function(t,e){"delButton"!=e.target.parentNode.id&&"ADA_button"!=e.target.id&&"delButton"!=e.target.id&&"ADA_button"!=e.target.parentNode.id&&"option-toolbar"!=e.target.id&&h()})),L.listen("body","click",".delElem",(function(t){let s=t.children[0];s.classList.toggle("active"),"point"==L.select(".selected-option").innerHTML||"circle"==L.select(".selected-option").innerHTML||"association"==L.select(".selected-option").innerHTML?s.classList.contains("active")?(L.alert(e.delete_msg),L.find("#mathmain","#ID0Preview").style.cursor="pointer"):(L.find("#mathmain","#ID0Preview").style.cursor="default",s.style.color="black"):s.classList.contains("active")&&(s.style.color="black",L.alert(e.last_delete_msg),L.setCss(t,{backgroundColor:"transparent",boxShadow:"none"}),L.find("#mathmain","#ID0Preview").style.cursor="default")})),L.listen("body","click","#mathmain .footer_toolbox li",(function(t){t.classList.add("btn_active"),L.selectAll(L.siblings(t),"removeClass","btn_active")}))}));return t.$$set=t=>{"xml"in t&&i(8,o=t.xml),"uxml"in t&&i(9,a=t.uxml),"isReview"in t&&i(0,r=t.isReview),"showAns"in t&&i(10,l=t.showAns),"editorState"in t&&i(11,n=t.editorState)},[r,d,c,function(){let t,e=[];switch(d.moduleType){case"circle":t=document.querySelectorAll(".mainDiv"),t.forEach((function(t){let s=document.querySelectorAll(`#${t.id} .getFieldVal`),i=[s[0].value+","+s[1].value+"/"+s[2].value];e.push(i)})),L.find("#mathmain","[id^=ID]").setAttribute("data-userans",e.join("|")),x();break;case"point":case"polygon":t=document.querySelectorAll(".mainDiv"),t.forEach((function(t){let s=document.querySelectorAll(`#${t.id} .getFieldVal`),i=[s[0].value+","+s[1].value];e.push(i)})),L.find("#mathmain","[id^=ID]").setAttribute("data-userans",e.join("|")),x();break;case"sine":case"cosine":case"line":case"ray":case"segment":case"vector":case"parabola":t=document.querySelectorAll(".mainDiv"),t.forEach((function(t){let s=document.querySelectorAll(`#${t.id} .getFieldVal`),i=[s[0].value+","+s[1].value+"|"+s[2].value+","+s[3].value];e.push(i)})),L.find("#mathmain","[id^=ID]").setAttribute("data-userans",e.join("|")),x();break;case"association":t=document.querySelectorAll(".mainDiv"),t.forEach((function(t){let s=document.querySelectorAll(`#${t.id} .getFieldVal`),i=[s[0].value+","+s[1].value+","+s[2].value];e.push(i)})),L.find("#mathmain","[id^=ID]").setAttribute("data-userans",e.join("|")),x()}h(),L.getBS("#graph_modal","Modal").hide()},m,g,x,function(t){"c"==t?D.showansdrag("#mathmain","c",1):"u"==t&&D.showansdrag("#mathmain","u",1)},o,a,l,n,()=>{m("add")},()=>{m("remove")}]}D.userAnsXML="",D.sinfo=!1,D.ajax_eId="#mathmain",D.readyThis=function(t){D.plotgraphPreview(t)},D.initBoardPreview=function(t,e){JXG.Options.point.snapToGrid=!0,JXG.Options.point.snapSizeX=I.select(e).getAttribute("data-xtickdistance"),JXG.Options.point.snapSizeY=I.select(e).getAttribute("data-ytickdistance"),JXG.Options.point.showInfobox=!1;let s,i,o,a,r,l,n=I.select(e).getAttribute("data-xaxis"),c=-n,d=I.select(e).getAttribute("data-yaxis"),u=-d;for(let t in JXG.boards)JXG.boards[t].container.includes("Preview")&&I.select(e).getAttribute("id")==JXG.boards[t].container&&JXG.JSXGraph.freeBoard(JXG.boards[t]);I.find(t,".footer_toolbox").style.display="none",I.find(t,".delElem").classList.remove("h-imp"),I.select(e).classList.contains("association")?(s=JXG.JSXGraph.initBoard(I.select(e).getAttribute("id"),{boundingbox:[c,3.4,n,-5.4],axis:!1,grid:!1,zoom:{factorX:1.25,factorY:1.25,wheel:!0,needshift:!0,eps:.1},showCopyright:!1,shownavigation:!1}),i=s.create("line",[[0,0],[1,0]],{firstArrow:!0,lastArrow:!0,strokecolor:"#3E3E3E",fillcolor:"#3E3E3E",fixed:!0}),s.axis=i,s.texts=[],s.create("ticks",[i,I.select(e).getAttribute("data-xtickdistance")],{minorTicks:9,majorHeight:15,minorHeight:5,drawLabels:!0,label:{offset:[2,-10]},drawZero:!0}),I.find(t,".delElem").classList.add("h-imp"),o=Math.abs(I.select(e).getAttribute("data-xaxis"))+Math.abs(I.select(e).getAttribute("data-xtickdistance")),a=I.select(e).getAttribute("data-yaxis"),l=s.create("polygon",[[-o,-2.4],[-o,-5.4],[o,-5.4],[o,-2.4]],{fillcolor:"#ccc",highlightfillcolor:"#ccc",withLines:!1})):I.select(e).classList.contains("plot")?(s=JXG.JSXGraph.initBoard(I.select(e).getAttribute("id"),{boundingbox:[c,d,n,-1],axis:!1,grid:!1,zoom:{factorX:1.25,factorY:1.25,wheel:!0,needshift:!0,eps:.1},showCopyright:!1,shownavigation:!1}),i=s.create("line",[[0,0],[1,0]],{firstArrow:!0,lastArrow:!0,strokecolor:"#3E3E3E",fillcolor:"#3E3E3E",fixed:!0}),s.create("ticks",[i,I.select(e).getAttribute("data-xtickdistance")],{minorTicks:0,majorHeight:15,minorHeight:5,drawLabels:!0,label:{offset:[-6,-16]},drawZero:!0}),s.xmax=n,I.find(t,".delElem").classList.add("h-imp"),I.find(t,".footer_toolbox").style.display="block"):(s=JXG.JSXGraph.initBoard(I.select(e).getAttribute("id"),{boundingbox:[c,d,n,u],axis:!1,grid:!1,zoom:{factorX:1.25,factorY:1.25,wheel:!0,needshift:!0,eps:.1},showCopyright:!1,shownavigation:!1}),o=s.create("axis",[[-Math.abs(I.select(e).getAttribute("data-xtickdistance"))/2,0],[Math.abs(I.select(e).getAttribute("data-xtickdistance"))/2,0]]),o.removeAllTicks(),s.create("ticks",[o,I.select(e).getAttribute("data-xtickdistance")],{strokeColor:"#ccc",majorHeight:-1,drawLabels:!0,label:{offset:[2,-10]},minorTicks:3,drawZero:!0}),a=s.create("axis",[[0,-Math.abs(I.select(e).getAttribute("data-ytickdistance"))/2],[0,Math.abs(I.select(e).getAttribute("data-ytickdistance"))/2]]),a.removeAllTicks(),s.create("ticks",[a,I.select(e).getAttribute("data-ytickdistance")],{strokeColor:"#ccc",majorHeight:-1,drawLabels:!0,label:{offset:[4,-6]},minorTicks:3,drawZero:!1})),s.points=[],s.xtick=I.select(e).getAttribute("data-xtickdistance"),s.ytick=I.select(e).getAttribute("data-ytickdistance"),s.xaxis=I.select(e).getAttribute("data-xaxis"),s.yaxis=I.select(e).getAttribute("data-yaxis");let p=I.find(t,"li.selected-option","all");if(p.length&&p.forEach((t=>{t.innerHTML=I.select(e).getAttribute("type"),t.style.textTransform="capitalize"})),"polygon"==I.select(e).getAttribute("type")&&I.select(e).getAttribute("data-reflection")&&I.select(e).getAttribute("data-reflection")){r=I.select(e).getAttribute("data-reflection").split("|"),l=[];for(let t=0;t<r.length;t++){let e=r[t].split(","),i=s.create("point",[e[0],e[1]],{name:"",strokecolor:"darkgray",strokewidth:2,fillcolor:"darkgray"});l.push(i)}s.create("polygon",l,{withline:!0,fillcolor:"darkgray",borders:{strokecolor:"darkgray",strokewidth:2}})}return s},D.plotgraphPreview=function(t){let e=I.find(t,".drag-resize","all");for(let s=0;s<e.length;s++){let i=e[s].getAttribute("id");Q=D.initBoardPreview(t,e[s]),Q.prevPoint=null;let o=1,a=function(t){let e=Q.getCoordsTopLeftCorner(t),s=JXG.getPosition(t,0),i=s[0]-e[0],o=s[1]-e[1];return new JXG.Coords(JXG.COORDS_BY_SCREEN,[i,o],Q)},r=function(e){let s,r,l=!0;for(r in s=a(e),Q.objects)if(JXG.isPoint(Q.objects[r])&&Q.objects[r].hasPoint(s.scrCoords[1],s.scrCoords[2])){l=!1;break}if(l){let e,a;I.select("#"+i).classList.contains("plot")?(e=Q.create("point",[s.usrCoords[1],o],{name:"",showInfobox:!1}),e.Xjc=e.X()+Math.abs(e.board.xtick),a=I.select(".footer_toolbox li.btn_active").getAttribute("data-value"),o++,o==e.board.yaxis&&Q.off("down")):e=Q.create("point",[s.usrCoords[1],s.usrCoords[2]],{name:""}),D.updateAndDrawPreview(t,i,e,a),D.updateAttrsPreview(i,e)}D.checkAns(t)};if(I.select("#"+i).classList.contains("association")){if(""==I.select("#"+i).getAttribute("data-userans")){let e=I.select("#"+i).getAttribute("data-anskey").split("|"),s=-(I.select("#"+i).getAttribute("data-xaxis")-I.select("#"+i).getAttribute("data-xtickdistance")),o=-4.4;for(let a=0;a<e.length;a++){let r=e[a].split(","),l=D.updateNumberline(t,i,s,o,r[0]);D.updateNumbelineAttr(i,l),s=s+1+Math.abs(I.select("#"+i).getAttribute("data-xtickdistance"))/10,D.checkAns(t)}}}else Q.off("down").on("down",r)}},D.updateNumberline=function(t,e,s,i,o){if(Q.texts.length<I.select("#"+e).getAttribute("data-anskey").split("|").length){let a=Q.create("text",[s,i,o],{cssClass:"cursor-down",fontSize:"20px",highlightCssClass:"cursor-down",display:"html",snapSizeX:Math.abs(I.select("#"+e).getAttribute("data-xtickdistance"))/10,snapSizeY:.4,snapToGrid:!0,anchorX:"middle",anchorY:"bottom"});return Q.texts.push(a),a.on("down",(function(){this.startPosition=this.X().toFixed(1)+","+this.Y()+","+this.htmlStr})),a.on("up",(function(){this.Y().toFixed(1)>.4?(Q.removeObject(this),Q.texts.pop(this),D.updateNumberline(t,e,parseFloat(this.X().toFixed(1)),.4,this.htmlStr),this.upPosition=this.X().toFixed(1)+",0.4,"+this.htmlStr):this.Y().toFixed(1)<.4?(Q.removeObject(this),Q.texts.pop(this),D.updateNumberline(t,e,parseFloat(this.X().toFixed(1)),-4.4,this.htmlStr),this.upPosition=this.X().toFixed(1)+","+"-4.4,"+this.htmlStr):this.upPosition=this.X().toFixed(1)+","+this.Y().toFixed(1)+","+this.htmlStr,D.updateNumbelineAttr(e,this,!0),D.checkAns(t)})),a.on("over",(function(){this.visProp.fixed||(Q.containerObj.style.cursor="move",this.setAttribute({cssClass:"cursor-down-hover",highlightCssClass:"cursor-down-hover"}))})),a.on("out",(function(){this.visProp.fixed||(Q.containerObj.style.cursor="default",this.setAttribute({cssClass:"cursor-down",highlightCssClass:"cursor-down"}))})),a}},D.updateNumbelineAttr=function(t,e,s){let i=I.select("#"+t).getAttribute("data-userans");void 0===s?(i=i.split("|").filter((function(t){return""!=t})),i.push(e.X().toFixed(1)+","+e.Y()+","+e.htmlStr),I.select("#"+t).setAttribute("data-userans",i.join("|"))):(i=I.select("#"+t).getAttribute("data-userans").replace(e.startPosition,e.upPosition),I.select("#"+t).setAttribute("data-userans",i))},D.updateAndDrawPreview=function(t,s,i,o){if(I.select("#"+s).classList.contains("plot")){if(i.setAttribute({fillcolor:"#52A8EC",strokecolor:"#52A8EC"}),I.select('[data-value="'+o+'"]').nodeName&&I.select('[data-value="'+o+'"]').getAttribute("rel")&&0==I.select('[data-value="'+o+'"]').getAttribute("rel").indexOf("segment"))switch(i.board.prevPoint=i.board.create("point",[i.Xjc,i.Y()],{name:"",fillcolor:"#52A8EC",strokecolor:"#52A8EC",fixed:!0}),i.for=i.board.create("line",[i.board.prevPoint,i],{straightFirst:!1,straightLast:!1,firstArrow:!1,lastArrow:!1,strokeWidth:"2",fillcolor:"#52A8EC",strokecolor:"#52A8EC"}),i.for.name=o,o){case"SLH":i.setAttribute({fillcolor:"#fff",strokecolor:"#52A8EC"});break;case"SRH":i.board.prevPoint.setAttribute({fillcolor:"#fff",strokecolor:"#52A8EC"});break;case"SBH":i.setAttribute({fillcolor:"#fff",strokecolor:"#52A8EC"}),i.board.prevPoint.setAttribute({fillcolor:"#fff",strokecolor:"#52A8EC"})}else if(I.select('[data-value="'+o+'"]').nodeName&&I.select('[data-value="'+o+'"]').getAttribute("rel")&&0==I.select('[data-value="'+o+'"]').getAttribute("rel").indexOf("ray")){switch(o){case"RL":i.board.prevPoint=i.board.create("point",[-Math.abs(i.board.xmax),i.Y()],{visible:!1});break;case"RR":i.board.prevPoint=i.board.create("point",[Math.abs(i.board.xmax),i.Y()],{visible:!1});break;case"RRH":i.setAttribute({fillcolor:"#fff",strokecolor:"#52A8EC"}),i.board.prevPoint=i.board.create("point",[-Math.abs(i.board.xmax),i.Y()],{visible:!1});break;case"RLH":i.setAttribute({fillcolor:"#fff"}),i.board.prevPoint=i.board.create("point",[Math.abs(i.board.xmax),i.Y()],{visible:!1})}i.for=i.board.create("line",[i.board.prevPoint,i],{straightFirst:!0,straightLast:!1,firstArrow:!0,lastArrow:!1,strokeWidth:"2",fillcolor:"#52A8EC",strokecolor:"#52A8EC"}),i.for.name=o}Q.on("move",(function(){null!=i.Yjc&&i.moveTo([i.X(),i.Yjc])})),i.on("over",(function(){this.visProp.fixed||(Q.containerObj.style.cursor="e-resize")})),i.on("out",(function(){this.visProp.fixed||(Q.containerObj.style.cursor="default")}))}else if(D.sinfo=!1,i.board.points.push(i),null==i.board.prevPoint)i.board.prevPoint=i;else{let t,e;if(I.select("#"+s).classList.contains("line"))E=D.getEquationPreview(s,i.X(),i.Y(),i.board.prevPoint.X(),i.board.prevPoint.Y()),i.for=i.board.create("line",[i,i.board.prevPoint],{straightFirst:!0,straightLast:!0,firstArrow:!0,lastArrow:!0,strokeWidth:"2"}),D.sinfo=!!E;else if(I.select("#"+s).classList.contains("circle"))i.for=i.board.create("circle",[i.board.prevPoint,i],{straightFirst:!0,straightLast:!0,firstArrow:!0,lastArrow:!0,strokeWidth:"2"}),i.for.center.for=i.for;else if(I.select("#"+s).classList.contains("segment"))i.for=i.board.create("line",[i,i.board.prevPoint],{straightFirst:!1,straightLast:!1,firstArrow:!1,lastArrow:!1,strokeWidth:"2"});else if(I.select("#"+s).classList.contains("vector"))i.for=i.board.create("line",[i,i.board.prevPoint],{straightFirst:!1,straightLast:!1,firstArrow:!0,lastArrow:!1,strokeWidth:"2"});else if(I.select("#"+s).classList.contains("ray"))i.for=i.board.create("line",[i,i.board.prevPoint],{straightFirst:!0,straightLast:!1,firstArrow:!0,lastArrow:!1,strokeWidth:"2"});else if(I.select("#"+s).classList.contains("parabola")){i.setAttribute({fixed:!0}),i.board.prevPoint.setAttribute({fixed:!0});let t=I.select("#"+s).getAttribute("data-equation").split("="),e=D.getEquationPreview(s,i.X(),i.Y(),i.board.prevPoint.X(),i.board.prevPoint.Y()),o=Q.jc.snippet(e,!0,"x",!0);i.for=i.board.create("functiongraph",[o]),D.sinfo=e==t[1],i.for.point1=i.board.prevPoint,i.for.point2=i,i.board.prevPoint=null}else I.select("#"+s).classList.contains("polygon")?void 0===o?(i.for=i.board.create("polygon",[i.board.prevPoint,i]),i.board.prevPoint=i):o.length==i.board.points.length&&(i.for=i.board.create("polygon",i.board.points,{boadres:{strokecolor:"darkgray",strokeWidth:2}}),i.for.parents.for=i.for,i.board.prevPoint=null,i.board.points=[]):I.select("#"+s).classList.contains("sine")?(E=D.getEquationPreview(s,i.X(),i.Y(),i.board.prevPoint.X(),i.board.prevPoint.Y()),t=i.board.prevPoint,e=i,i.for=i.board.create("curve",[function(t){return t},function(s){let i=t.coords.usrCoords,o=e.coords.usrCoords,a=i[1],r=i[2],l=1/(4*(o[1]-a));return(o[2]-r)*Math.sin(2*Math.PI*l*(s-a))+r}]),i.for.point1=i.board.prevPoint,i.for.point2=i,D.sinfo=!!E):I.select("#"+s).classList.contains("cosine")&&(E=D.getEquationPreview(s,i.X(),i.Y(),i.board.prevPoint.X(),i.board.prevPoint.Y()),t=i.board.prevPoint,e=i,i.for=i.board.create("curve",[function(t){return t},function(s){let i=t.coords.usrCoords,o=e.coords.usrCoords,a=i[1],r=i[2],l=o[1],n=1/(4*(a-l));return(o[2]-r)*Math.cos(2*Math.PI*n*(s-l))+r}]),i.for.point1=i.board.prevPoint,i.for.point2=i,D.sinfo=!!E);I.select("#"+s).classList.contains("polygon")||(i.board.prevPoint=null)}i.on("down",(function(){I.select("#"+s).classList.contains("plot")?(this.Yjc=this.Y(),void 0===this.for?this.startPosition=this.X()+","+this.name:this.startPosition=this.for.point2.X()+","+this.for.point1.X()+","+this.for.name):(this.startPosition=this.X()+","+this.Y(),I.select("#"+s).classList.contains("polygon")&&i.board.points.length>0&&this.X()+","+this.Y()==i.board.points[0].X()+","+i.board.points[0].Y()&&(i.for=i.board.create("polygon",i.board.points,{boadres:{strokecolor:"darkgray",strokeWidth:2}}),i.for.parents.for=i.for,i.board.prevPoint=null,i.board.points=[])),void 0!==this.for&&"circle"==this.for.elType&&(this.startPosition=Math.round(this.for.Radius()))})),i.on("up",(function(){let o=!1;if(I.select(".delElem").children[0].classList.contains("active")){if(I.select("#"+s).classList.contains("point"))Q.removeObject(this),this.position=this.startPosition,o=!0;else if(I.select("#"+s).classList.contains("circle"))Q.removeObject(this),Q.removeObject(this.for.center),Q.removeObject(this.for.point2),D.modeOn(),this.position=this.for.center.X()+","+this.for.center.Y()+"/"+Math.round(this.for.Radius()),o=!0;else if(I.select("#"+s).classList.contains("polygon")&&void 0!==this.for){let t=[];if(void 0!==this.for.parents.for){for(let e=0;e<i.for.vertices.length;e++)i.board.removeObject(this.for.parents.for.vertices[e]),t.push(this.for.parents.for.vertices[e].X()+","+this.for.parents.for.vertices[e].Y());i.board.removeObject(this.for.parents.for),t.pop(t[t.length-1]),this.position=t.join("|"),o=!0}}else void 0!==this.for?(Q.removeObject(this.for),Q.removeObject(this.for.point1),Q.removeObject(this.for.point2),this.position=this.for.point1.X()+","+this.for.point1.Y()+"|"+this.for.point2.X()+","+this.for.point2.Y(),o=!0):I.select("#"+s).classList.contains("parabola")&&I&&I.showmsg(e.curve_start_point,3e3);if(I.select("#"+s).classList.contains("parabola")?void 0!==this.for?(D.updateDeleteAttrs(s,this.position),D.checkAns(t),I.select(".delElem").children[0].classList.remove("active")):console.warn({msg:e.warning_this_for}):(D.updateDeleteAttrs(s,this.position),D.checkAns(t)),o){let t=setTimeout((function(){I.selectAll("#mathmain #delButton.active","removeClass","active"),clearTimeout(t)}),100)}}else D.updateAttrsPreview(s,this,!0),D.checkAns(t)})),i.on("over",(function(){!this.visProp.fixed&&I.select(".delElem").children[0].classList.contains("active")&&(I.select("#"+s).classList.contains("point")?this.setAttribute({name:"Delete",showInfobox:!1,fillcolor:"#000",strokecolor:"#000"}):I.select("#"+s).classList.contains("circle")&&void 0!==this.for?(this.for.center.setAttribute({name:"Delete",showInfobox:!1,fillcolor:"#000",strokecolor:"#000"}),this.for.point2.setAttribute({name:"Delete",showInfobox:!1,fillcolor:"#000",strokecolor:"#000"})):I.select("#"+s).classList.contains("polygon")&&void 0!==this.for?void 0!==this.for.parents.for&&this.setAttribute({name:"Delete",showInfobox:!1,fillcolor:"#000",strokecolor:"#000"}):I.select("#"+s).classList.contains("sine")||I.select("#"+s).classList.contains("cosine")?void 0!==this.for&&this.for.point2.setAttribute({name:"Delete",showInfobox:!1,fillcolor:"#000",strokecolor:"#000"}):void 0!==this.for&&this.for.point1.setAttribute({name:"Delete",showInfobox:!1,fillcolor:"#000",strokecolor:"#000"}))})),i.on("out",(function(){!this.visProp.fixed&&I.select(".delElem").children[0].classList.contains("active")&&(I.select("#"+s).classList.contains("point")?this.setAttribute({name:"",showInfobox:!0,fillcolor:"#ff0000",strokecolor:"#ff0000"}):I.select("#"+s).classList.contains("circle")&&void 0!==this.for?(this.for.center.setAttribute({name:"",showInfobox:!0,fillcolor:"#ff0000",strokecolor:"#ff0000"}),this.for.point2.setAttribute({name:"",showInfobox:!0,fillcolor:"#ff0000",strokecolor:"#ff0000"})):I.select("#"+s).classList.contains("polygon")&&void 0!==this.for?void 0!==this.for.parents.for&&this.setAttribute({name:"",showInfobox:!0,fillcolor:"#ff0000",strokecolor:"#ff0000"}):I.select("#"+s).classList.contains("sine")||I.select("#"+s).classList.contains("cosine")?void 0!==this.for&&this.for.point2.setAttribute({name:"",showInfobox:!0,fillcolor:"#ff0000",strokecolor:"#ff0000"}):void 0!==this.for&&this.for.point1.setAttribute({name:"",showInfobox:!0,fillcolor:"#ff0000",strokecolor:"#ff0000"}))}))},D.getEquationPreview=function(t,e,s,i,o){let a,r,l,n=I.select("#"+t).getAttribute("data-equation").split("="),c="";switch(I.select("#"+t).getAttribute("type")){case"parabola":{n[0].includes("x")?(c="a*(y-h)^2+k",a=(0,eval)(e-o)/Math.pow(s-i,2)):(a=Math.round(10*(0,eval)((s-o)/Math.pow(e-i,2)))/10,c="a*(x-h)^2+k");let t=c.replace("a",a).replace("h",i).replace("k",o);return t=t.replace(/\\-\\-/g,"+").replace(/\\+\\-/g,"-"),t}case"sine":case"cosine":return I.select("#"+t).classList.contains("sine")?r=n[1].replace("sin","Math.sin").replace("x","(x/180)*Math.PI"):I.select("#"+t).classList.contains("cosine")&&(r=n[1].replace("cos","Math.cos").replace("x","(x/180)*Math.PI")),a=isNaN(parseFloat(n[1].charAt(0)))||!isFinite(n[1].charAt(0))?1:n[1].charAt(0),l=Math.round(100*(0,eval)(r.replace("x",e))/100)==s&&Math.round(100*(0,eval)(r.replace("x",i))/100)==o&&a==Math.abs(o),l;case"line":return l=Math.round((0,eval)(n[1].replace("x",e)))==Math.round((0,eval)(n[0].replace("y",s)))&&Math.round((0,eval)(n[1].replace("x",i)))==Math.round((0,eval)(n[0].replace("y",o))),l}},D.updateDeleteAttrs=function(t,e){let s=I.select("#"+t).getAttribute("data-userans").split("|"),i=[];switch(I.select("#"+t).getAttribute("type")){case"point":case"circle":for(let t=0;t<s.length;t++)s[t]!=e&&i.push(s[t]);break;case"segment":case"ray":case"vector":case"sine":case"cosine":case"line":case"parabola":if(null!=e){let t=e.split("|");i=s.filter((function(t){return!this.has(t)}),new Set(t))}}I.select("#"+t).setAttribute("data-userans",i.join("|"))},D.updateAttrsPreview=function(t,e,s){let i=I.select("#"+t).getAttribute("data-userans"),o=I.select("#"+t).getAttribute("type");if(void 0!==e.for&&"circle"==e.for.elType){let s=e.for.center,o=s.X()+","+s.Y();void 0!==e.startPosition&&(o+="/"+e.startPosition),i=i.replace(o,s.X()+","+s.Y()+"/"+Math.round(e.for.Radius())),I.select("#"+t).setAttribute("data-userans",i)}else if(s)switch(i=I.select("#"+t).classList.contains("plot")?void 0===e.for?I.select("#"+t).getAttribute("data-userans").replace(e.startPosition,e.X()+","+e.name):I.select("#"+t).getAttribute("data-userans").replace(e.startPosition,e.for.point2.X()+","+e.for.point1.X()+","+e.for.name):I.select("#"+t).getAttribute("data-userans").replace(e.startPosition,e.X()+","+e.Y()),I.select("#"+t).setAttribute("data-userans",i),o){case"line":case"sine":case"cosine":{let e=0,s=null,o=i.split("|");for(let i=0;i<o.length;i++){let a=o[i].split(",");if(null==s)s=a;else{0==D.getEquationPreview(t,a[0],a[1],s[0],s[1])&&e++,s=null}}D.sinfo=!(e>0)}}void 0!==e.for&&"circle"==e.for.elType||(i=i.split("|").filter((t=>t)),I.select("#"+t).classList.contains("plot")?void 0===e.for?i.push(e.X()+","+e.name):i.push(e.for.point2.X()+","+e.for.point1.X()+","+e.for.name):i.push(e.X()+","+e.Y()),void 0===s&&(I.select("#"+t).setAttribute("data-userans",i.join("|")),I.select("#"+t).classList.contains("polygon")&&0==e.board.points.length&&I.select("#"+t).setAttribute("data-userans",D.getUnique(I.select("#"+t).getAttribute("data-userans").split("|")).join("|"))))},D.getUnique=function(t){return t.filter((function(t,e,s){return s.indexOf(t)===e}))},D.checkAns=function(t){D.userAnsXML="<smans type='20'>\n",D.result=!0;let e=I.selectAll("#mathmain > .drag-resize");for(let s=0;s<e.length;s++)D.userAnsXML=D.checkChildAnswer(t,e[s]);return D.userAnsXML+="</smans>",window.inNative&&(window.getHeight(),window.postMessage(JSON.stringify({userAnswers:D.userAnsXML,inNativeIsCorrect:D.result}),"*")),{uXml:D.userAnsXML,ans:D.result}},D.checkChildAnswer=function(t,e){let s,i,o;switch(I.select(e).getAttribute("type")){case"plot":case"association":case"point":case"segment":s=I.select(e).getAttribute("data-anskey").split("|").sort().join("|"),i=I.select(e).getAttribute("data-userans").split("|").sort().join("|"),s!=i&&(D.result=!1);break;case"circle":case"vector":case"ray":I.select(e).getAttribute("data-anskey")!=I.select(e).getAttribute("data-userans")&&(D.result=!1);break;case"sine":case"cosine":s=I.select(e).getAttribute("data-anskey").split("|").sort().join("|"),i=I.select(e).getAttribute("data-userans").split("|").sort().join("|"),s!=i&&(D.result=!1);break;case"parabola":if(s=I.select(e).getAttribute("data-anskey").split("|").filter((function(t){return""!=t})),i=I.select(e).getAttribute("data-userans").split("|").filter((function(t){return""!=t})),s.length==i.length)for(o=0;o<i.length;o+=2){let t=s.indexOf(i[o]);if(t>-1){let e=(s[t+1].split(",")[1]-s[t].split(",")[1])/((s[t+1].split(",")[0]-s[t].split(",")[0])*(s[t+1].split(",")[0]-s[t].split(",")[0])),a=(i[o+1].split(",")[1]-i[o].split(",")[1])/((i[o+1].split(",")[0]-i[o].split(",")[0])*(i[o+1].split(",")[0]-i[o].split(",")[0]));D.result=e==a}else D.result=!1}else D.result=!1;break;case"line":try{if(s=I.select(e).getAttribute("data-anskey").split("|"),i=I.select(e).getAttribute("data-userans").split("|"),0==i.length||1==i.length){D.result=!1;break}{let t=0,e=0,o=0,a=0;for(;t<s.length;){for(o=0,e=0;e<i.length&&i.length==s.length;){let r,l,n,c;const d=parseFloat(s[t+1].split(",")[0])-parseFloat(s[t].split(",")[0]),u=parseFloat(s[t+1].split(",")[1])-parseFloat(s[t].split(",")[1]);if(r=(parseFloat(i[e].split(",")[1])-parseFloat(s[t].split(",")[1]))*d,n=u*(parseFloat(i[e].split(",")[0])-parseFloat(s[t].split(",")[0])),l=(parseFloat(i[e+1].split(",")[1])-parseFloat(s[t].split(",")[1]))*d,c=u*(parseFloat(i[e+1].split(",")[0])-parseFloat(s[t].split(",")[0])),parseFloat(r)==parseFloat(n)&&parseFloat(l)==parseFloat(c)){o+=1,a=0;break}D.result=!1,a=1,e+=2}if(1==a){o=0;break}t+=2}D.result=0!=o}}catch(t){console.warn(t)}break;case"polygon":s=D.getUnique(I.select(e).getAttribute("data-anskey").split("|").sort()).join("|"),i=D.getUnique(I.select(e).getAttribute("data-userans").split("|").sort()).join("|"),s!=i&&(D.result=!1)}return D.userAnsXML+="<div id='"+I.select(e).getAttribute("id")+"' userAns='"+I.select(e).getAttribute("data-userans")+"'></div>\n",D.userAnsXML},D.showansdrag=function(t,e,s){void 0===s&&(s=0);let i=I.selectAll("#mathmain > .drag-resize");for(let o=0;o<i.length;o++)D.showchildansdrag(t,i[o],e,s)},D.showchildansdrag=function(t,e,s,i){if(1==i){Q=D.initBoardPreview(t,e);let s=I.find(t,".footer_toolbox li","all");s.length>0&&s.forEach((function(t){t.disabled=!0,t.classList.add("btn_active_disabled"),t.classList.remove("btn_active")}))}let o,a=I.select(e).getAttribute("type"),r=I.select(e).getAttribute("id");""!=I.select(e).getAttribute("data-anskey")&&(o=I.select(e).getAttribute("data-anskey").split("|"));let l,n,c=I.select(e).getAttribute("data-userans").split("|");if("c"==s){if(I.select("#"+r).classList.contains("association"))for(let e=0;e<o.length;e++){n=o[e].split(","),D.updateNumberline(t,r,n[0],n[1],n[2]).setAttribute({cssClass:"cursor-down-active",highlightCssClass:"cursor-down-active",fixed:!0})}else if(I.select("#"+r).classList.contains("plot")){l=1;for(let e=0;e<o.length;e++){let s;-1==o[e].indexOf(",")?(s=Q.create("point",[parseInt(o[e]),l],{name:"",fixed:!0}),D.updateAndDrawPreview(t,r,s)):(n=o[e].split(","),s=Q.create("point",[parseInt(n[0]),l],{name:"",fixed:!0}),s.Xjc=parseInt(n[1]),D.updateAndDrawPreview(t,r,s,n[2])),l++}}else for(let s=0;s<o.length;s++){n=o[s].split(",");let i=Q.create("point",[parseInt(n[0]),parseInt(n[1])],{name:"",fixed:!0,strokeColor:"#0000FF",fillColor:"#0000FF"});I.select(e).classList.contains("circle")?D.drawCirclePreview(t,r,o[s]):D.updateAndDrawPreview(t,r,i,o)}I.setCss(t,{border:"1px solid #0000ff"})}else if("u"==s){let s=0,d=null,u=!1;if(l=1,I.select("#"+r).classList.contains("association"))for(let e=0;e<c.length;e++){let a=c[e];n=a.split(",");let l=D.updateNumberline(t,r,parseFloat(n[0]),parseFloat(n[1]),n[2]);void 0!==i&&1==i&&("0.4"==n[1]?o.includes(a)?l.setAttribute({cssClass:"cursor-down-correct",highlightcssClass:"cursor-down-correct",fixed:!0}):(l.setAttribute({cssClass:"cursor-down-incorrect",highlightcssClass:"cursor-down-incorrect",fixed:!0}),s++):(l.setAttribute({fixed:!0}),s++),D.setCorrectAns(t,s))}else for(let p=0;p<c.length;p++){let f=c[p];if(I.select("#"+r).classList.contains("plot")?""!=I.select(e).getAttribute("data-userans")&&(-1==f.indexOf(",")?(T=Q.create("point",[parseInt(f),l],{name:""}),D.updateAndDrawPreview(t,r,T)):(n=f.split(","),T=Q.create("point",[parseInt(n[0]),l],{name:""}),T.Xjc=parseInt(n[1]),D.updateAndDrawPreview(t,r,T,n[2])),l++):(n=f.split(","),T=Q.create("point",[parseInt(n[0]),parseInt(n[1])],{name:""}),""!=I.select(e).getAttribute("data-userans")&&(I.select(e).classList.contains("circle")?D.drawCirclePreview(t,r,f):D.updateAndDrawPreview(t,r,T,c))),void 0!==i&&1==i&&""!=I.select(e).getAttribute("data-userans")){switch(T.setAttribute({fixed:!0}),a){case"point":o.includes(f)?T.setAttribute({strokeColor:"#00FF00",fillColor:"#00FF00"}):(T.setAttribute({strokeColor:"#FF0000",fillColor:"#FF0000"}),s++);break;case"circle":void 0!==T.for&&(u=!!o.includes(f),s=D.drawelem(r,u,s));break;case"plot":u=!!o.includes(f),s=D.drawelem(r,u,s);break;case"line":case"parabola":case"sine":case"cosine":void 0===T.for?B=T.board.prevPoint:s=D.drawelem(r,D.result,s);break;case"segment":case"vector":case"ray":{let t;(I.select(e).classList.contains("segment")||I.select(e).classList.contains("polygon"))&&(t=!!o.includes(f)),(I.select(e).classList.contains("ray")||I.select(e).classList.contains("vector"))&&(t=o.indexOf(f)==c.indexOf(f)),void 0===T.for?(B=T.board.prevPoint,d=t):(u=!(!d||!t),s=D.drawelem(r,u,s));break}case"polygon":{let t=[...o],e=[...c];u=t.sort().join("|")==e.sort().join("|"),s=D.drawelem(r,u,s);break}}D.setCorrectAns(t,s)}else void 0!==i&&1==i&&""==I.select(e).getAttribute("data-userans")&&I.setCss(t,{border:"1px solid #ff0000"})}}},D.setCorrectAns=function(t,e){0==e?(I.setCss(t,{border:"1px solid #00ff00"}),I.select("#answer").checked=!0,I.select(t).setAttribute("as",1)):(I.setCss(t,{border:"1px solid #ff0000"}),I.select("#answer").checked=!1,I.select(t).setAttribute("as",-1))},D.drawelem=function(t,e,s){if(I.select("#"+t).classList.contains("plot"))1==e?void 0===T.for?T.setAttribute({strokeColor:"#00FF00",fillColor:"#00FF00"}):(T.for.setAttribute({strokeColor:"#00FF00"}),T.for.point1.setAttribute({strokeColor:"#00FF00",fillColor:"#00FF00"}),T.for.point2.setAttribute({strokeColor:"#00FF00",fillColor:"#00FF00"})):(void 0===T.for?T.setAttribute({strokeColor:"#FF0000",fillColor:"#FF0000"}):(T.for.setAttribute({strokeColor:"#FF0000"}),T.for.point1.setAttribute({strokeColor:"#FF0000",fillColor:"#FF0000"}),T.for.point2.setAttribute({strokeColor:"#FF0000",fillColor:"#FF0000"})),s++);else if(I.select("#"+t).classList.contains("polygon")){let t;if(1==e){if(void 0!==T.for)for(t=0;t<T.for.vertices.length;t++)T.for.vertices[t].setAttribute({strokeColor:"#00FF00",fillColor:"#00FF00"})}else{if(void 0!==T.for){for(t=0;t<T.for.vertices.length;t++)T.for.vertices[t].setAttribute({strokeColor:"#FF0000",fillColor:"#FF0000"});T.for.setAttribute({fillColor:"#FF0000",opacity:.5})}s++}}else 1==e?(T.setAttribute({strokeColor:"#00FF00",fillColor:"#00FF00"}),B.setAttribute({strokeColor:"#00FF00",fillColor:"#00FF00"}),T.for.setAttribute({strokeColor:"#00FF00"})):(T.setAttribute({strokeColor:"#FF0000",fillColor:"#FF0000"}),B.setAttribute({strokeColor:"#FF0000",fillColor:"#FF0000"}),T.for.setAttribute({strokeColor:"#FF0000"}),s++);return s},D.drawCirclePreview=function(t,e,s){let i=s.split("/");for(let s=0;s<i.length;s++){let o,a=i[0].split(",");if(-1!=i[s].indexOf(","))o=Q.create("point",[parseInt(a[0]),parseInt(a[1])],{name:""}),B=o;else{let t=parseInt(a[0])-parseInt(i[1]);o=Q.create("point",[parseInt(t),parseInt(a[1])],{name:""})}D.updateAndDrawPreview(t,e,o)}},D.labbinded=!0,D.modeOn=function(t){I.selectAll(".test, .review","addClass","h"),t?(I.selectAll(".review","removeClass","h"),D.unBindLab(),D.showansdrag(D.ajax_eId,"u",1)):(I.selectAll(".test","removeClass","h"),D.bindLab(),D.showansdrag(D.ajax_eId,"u"),I.setCss(D.ajax_eId).style.border="1px solid #CCCCCC")},D.bindLab=function(){D.labbinded=!0,D.readyThis(D.ajax_eId),I.find(D.ajax_eId,".delElem").removeAttribute("style"),I.find(D.ajax_eId,"#ADA_button").style.display="block"},D.unBindLab=function(){D.labbinded=!1,I.find(D.ajax_eId,".delElem").style.display="none",I.find(D.ajax_eId,"#ADA_button").style.display="none"};export default class extends s{constructor(t){super(),i(this,t,V,J,o,{xml:8,uxml:9,isReview:0,showAns:10,editorState:11},S)}}
//# sourceMappingURL=GraphPreview-53940ce1.js.map
