import{S as e,i as t,s as a,e as i,c as o,b as s,C as n,u as r,f as l,h as c,j as d,m as u,l as p,t as m,a as g,o as w,d as b,y as v,p as f,A as _,X as h,R as x}from"./main-464952be.js";import{I as A}from"./ItemHelper-9b9be701.js";function C(e){let t,a,o,u,m,g,b,f,_,h,x,A,C,y,S,k,T,B,E,I,O,$,L,P,D,G,M,j,N,H,U,X,Y,z,F,J,K=n.recording_warning+"",V=1==e[4].showTranscript&&R(e);return{c(){t=i("div"),a=i("div"),o=i("b"),o.textContent=""+n.note_label,u=s(),m=r(K),g=s(),V&&V.c(),b=s(),f=i("div"),_=i("div"),h=i("div"),x=i("b"),x.textContent=""+n.audio_recorder,A=s(),C=i("div"),y=i("span"),y.textContent=""+n.starting_message,S=s(),k=i("div"),k.innerHTML='<img src="//s3.amazonaws.com/jigyaasa_content_static/6ba174bf48e9b6dc8d8bd19d13c9caa9_000Awg.gif" alt="recording is on" class="w-100 h-100 img_fit"/>',T=s(),B=i("div"),B.innerHTML='<img src="//s3.amazonaws.com/jigyaasa_content_static/giphy_000AYi.gif" alt="audio is playing" class="w-100 h-100 img_fit"/>',E=s(),I=i("div"),O=i("button"),$=i("span"),D=s(),G=i("button"),M=i("span"),H=s(),U=i("button"),X=i("span"),l(o,"class","noteColor bolder"),l(a,"class",""),l(a,"tabindex","0"),l(a,"aria-label","Recording will end after 15 sec"),l(t,"class","col-12 pb-3"),l(h,"class","p-2 tokenfield bg-light mb-3"),l(h,"aria-label","Audio Recorder"),l(h,"tabindex","0"),l(y,"class","align-self-center mx-auto previewInitialState tokenfield"),l(y,"aria-label","Click on record to start recording"),l(y,"tabindex","0"),l(k,"class","h previewRecordingOn tokenfield"),l(k,"aria-label","recording is on"),l(k,"tabindex","0"),l(B,"class","h previewAudioPlaying tokenfield"),l(B,"aria-label","Audio is playing"),l(B,"tabindex","0"),l(C,"class","mx-auto text-danger recording_status initialState mb-3 d-flex mx-auto"),l($,"class","icomoon-circle-2 s2 text-danger position-relative top1"),l($,"data-bs-toggle","tooltip"),l($,"data-placement","top"),l($,"data-original-title",L="recording"==e[4].status?"Stop Recording":"Start Recording"),l($,"id","recordButtonTooltip"),l($,"name","recordButtonTooltip"),l(O,"type","button"),l(O,"name","preview_recordButton"),l(O,"id","preview_recordButton"),l(O,"class","btn btn-light py-0"),l(O,"aria-label",P="Click for "+e[3]),l(M,"class","icomoon-24px-autoplay-4 position-relative top1"),l(M,"data-bs-toggle","tooltip"),l(M,"data-placement","top"),l(M,"data-original-title","Play Audio"),l(M,"id","stopButtonTooltip"),l(M,"name","stopButtonTooltip"),l(G,"type","button"),l(G,"name","preview_stopButton"),l(G,"id","preview_stopButton"),G.disabled=j=e[4].disabled,l(G,"class","btn btn-light py-0"),l(G,"aria-label",N="Click for "+e[1]),l(X,"class","icomoon-new-24px-reset-1 position-relative top1"),l(X,"data-bs-toggle","tooltip"),l(X,"data-placement","top"),l(X,"title","Reset Data"),l(U,"type","button"),l(U,"name","resetButton"),l(U,"id","resetButton"),l(U,"class","btn btn-light py-0"),U.disabled=Y=e[4].isReset,l(U,"data-bs-toggle","modal"),l(U,"data-bs-target","#preview_confirm_modal"),l(U,"aria-label","Click on this button for override the previous recording"),l(I,"id","controls_container"),l(I,"class",z="bg-light text-center w-100 p-2 "+("none"==e[4].pointerEvents?"pointerEventOff":"pointerEventOn")),l(_,"class","border rounded shadow-sm"),l(f,"class","col-12 col-md-8 offset-md-2")},m(i,s){c(i,t,s),d(t,a),d(a,o),d(a,u),d(a,m),c(i,g,s),V&&V.m(i,s),c(i,b,s),c(i,f,s),d(f,_),d(_,h),d(h,x),d(_,A),d(_,C),d(C,y),d(C,S),d(C,k),d(C,T),d(C,B),d(_,E),d(_,I),d(I,O),d(O,$),d(I,D),d(I,G),d(G,M),d(I,H),d(I,U),d(U,X),F||(J=[p(O,"click",e[7]),p(G,"click",e[10]),p(U,"click",e[8])],F=!0)},p(e,t){1==e[4].showTranscript?V?V.p(e,t):(V=R(e),V.c(),V.m(b.parentNode,b)):V&&(V.d(1),V=null),16&t[0]&&L!==(L="recording"==e[4].status?"Stop Recording":"Start Recording")&&l($,"data-original-title",L),8&t[0]&&P!==(P="Click for "+e[3])&&l(O,"aria-label",P),16&t[0]&&j!==(j=e[4].disabled)&&(G.disabled=j),2&t[0]&&N!==(N="Click for "+e[1])&&l(G,"aria-label",N),16&t[0]&&Y!==(Y=e[4].isReset)&&(U.disabled=Y),16&t[0]&&z!==(z="bg-light text-center w-100 p-2 "+("none"==e[4].pointerEvents?"pointerEventOff":"pointerEventOn"))&&l(I,"class",z)},d(e){e&&w(t),e&&w(g),V&&V.d(e),e&&w(b),e&&w(f),F=!1,v(J)}}}function y(e){let t,a,o,u,p,m=n.insensitive_message+"";function g(e,t){return 1!=e[5]?k:S}let b=g(e),v=b(e);return{c(){v.c(),t=s(),a=i("div"),o=i("b"),o.textContent=""+n.note_label,u=s(),p=r(m),l(o,"class","noteColor bolder"),l(a,"class","col-12 pb-3"),l(a,"tabindex","0"),l(a,"aria-label","matching is case insensitive")},m(e,i){v.m(e,i),c(e,t,i),c(e,a,i),d(a,o),d(a,u),d(a,p)},p(e,a){b===(b=g(e))&&v?v.p(e,a):(v.d(1),v=b(e),v&&(v.c(),v.m(t.parentNode,t)))},d(e){v.d(e),e&&w(t),e&&w(a)}}}function R(e){let t,a,o,r,u,p,m,g;return{c(){t=i("div"),a=i("div"),o=i("label"),r=i("b"),r.textContent=""+n.spoken_label,u=s(),p=i("textarea"),l(o,"for","preview_show_transcript"),l(p,"id","preview_show_transcript"),l(p,"name","preview_show_transcript"),l(p,"class","w-100 form-control"),l(p,"rows","2"),p.value=m=e[4].cdata,p.readOnly="readonly",l(p,"tabindex","0"),l(p,"aria-label",g=n.spoken_label+" "+(""!=e[4].cdata.trim()?e[4].cdata.trim():"Nothing")),l(t,"class","col-12 pb-3")},m(e,i){c(e,t,i),d(t,a),d(a,o),d(o,r),d(t,u),d(t,p)},p(e,t){16&t[0]&&m!==(m=e[4].cdata)&&(p.value=m),16&t[0]&&g!==(g=n.spoken_label+" "+(""!=e[4].cdata.trim()?e[4].cdata.trim():"Nothing"))&&l(p,"aria-label",g)},d(e){e&&w(t)}}}function S(e){let t,a,o,s,n;return{c(){t=i("div"),a=i("textarea"),l(a,"id","preview_data_container"),l(a,"name","cdata"),l(a,"class",o="w-100 form-control "+(1==e[4].useransstatus?"border-success typeCorrect":"border-danger typeIncorrect")),l(a,"rows","2"),a.value=s=e[4].cdata,a.readOnly="readonly",l(a,"tabindex","0"),l(a,"aria-label",n="Your answer is "+e[4].cdata+" which is "+(e[4].cdata.toLowerCase().trim()==e[4].correctAns.toLowerCase().trim()?"Correct":"Incorrect")),l(t,"class","col-12 py-3")},m(e,i){c(e,t,i),d(t,a)},p(e,t){16&t[0]&&o!==(o="w-100 form-control "+(1==e[4].useransstatus?"border-success typeCorrect":"border-danger typeIncorrect"))&&l(a,"class",o),16&t[0]&&s!==(s=e[4].cdata)&&(a.value=s),16&t[0]&&n!==(n="Your answer is "+e[4].cdata+" which is "+(e[4].cdata.toLowerCase().trim()==e[4].correctAns.toLowerCase().trim()?"Correct":"Incorrect"))&&l(a,"aria-label",n)},d(e){e&&w(t)}}}function k(e){let t,a,o,s;return{c(){t=i("div"),a=i("textarea"),l(a,"id","preanswer_data_container"),l(a,"name","cdata"),l(a,"class","w-100 form-control border-success typeCorrect"),l(a,"rows","2"),a.value=o=e[4].correctAns,a.readOnly="readonly",l(a,"tabindex","0"),l(a,"aria-label",s="correct Answer is "+e[4].correctAns),l(t,"class","col-12 py-3")},m(e,i){c(e,t,i),d(t,a)},p(e,t){16&t[0]&&o!==(o=e[4].correctAns)&&(a.value=o),16&t[0]&&s!==(s="correct Answer is "+e[4].correctAns)&&l(a,"aria-label",s)},d(e){e&&w(t)}}}function T(e){let t,a,f,_,h,x,R,S,k,T,B,E,I,O,$,L,P,D,G,M,j,N,H,U,X=n.modal_data+"";function Y(e,t){return e[0]?y:C}f=new A({props:{reviewMode:e[0],handleReviewClick:e[13]}}),f.$on("setReview",e[11]),f.$on("unsetReview",e[12]);let z=Y(e),F=z(e);return{c(){t=i("div"),a=i("div"),o(f.$$.fragment),_=s(),F.c(),h=s(),x=i("div"),R=i("div"),S=i("div"),k=i("div"),T=i("div"),B=i("h4"),B.textContent=""+n.confirm_label,E=s(),I=i("button"),I.textContent="×",O=s(),$=i("div"),L=r(X),P=s(),D=i("div"),G=i("button"),G.textContent=""+n.no_label,M=s(),j=i("button"),j.textContent=""+n.yes_label,l(a,"class","row"),l(t,"id","preview_container"),l(t,"class","container"),l(B,"class","modal-title tokenfield"),l(B,"aria-label","Confirmation Dialog box"),l(B,"tabindex","0"),l(I,"type","button"),l(I,"class","close"),l(I,"data-bs-dismiss","modal"),l(I,"tabindex","0"),l(I,"aria-label","Click on this button for close the confirmation dialog box"),l(T,"class","modal-header"),l($,"class","modal-body tokenfield"),l($,"tabindex","0"),l($,"aria-label",e[2]),l($,"id","previewDialogBody"),l($,"name","previewDialogBody"),l(G,"type","button"),l(G,"class","preview_dismiss_modal btn btn-light pr-2"),l(G,"data-bs-dismiss","modal"),l(G,"tabindex","0"),l(G,"aria-label","Click on this button for neglecte to override previous recording"),l(j,"type","button"),l(j,"class","preview_dismiss_done btn btn-primary"),l(j,"data-bs-dismiss","modal"),l(j,"tabindex","0"),l(j,"aria-label","Click on this button for override the previous recording"),l(D,"class","modal-footer"),l(k,"class","modal-content"),l(S,"class","modal-dialog modal-md modal-dialog-centered"),l(R,"class","modal fade"),l(R,"id","preview_confirm_modal"),l(x,"class","preview_modal_container container")},m(i,o){c(i,t,o),d(t,a),u(f,a,null),d(a,_),F.m(a,null),c(i,h,o),c(i,x,o),d(x,R),d(R,S),d(S,k),d(k,T),d(T,B),d(T,E),d(T,I),d(k,O),d(k,$),d($,L),d(k,P),d(k,D),d(D,G),d(D,M),d(D,j),N=!0,H||(U=[p(G,"click",e[9]),p(j,"click",e[6])],H=!0)},p(e,t){const i={};1&t[0]&&(i.reviewMode=e[0]),f.$set(i),z===(z=Y(e))&&F?F.p(e,t):(F.d(1),F=z(e),F&&(F.c(),F.m(a,null))),(!N||4&t[0])&&l($,"aria-label",e[2])},i(e){N||(m(f.$$.fragment,e),N=!0)},o(e){g(f.$$.fragment,e),N=!1},d(e){e&&w(t),b(f),F.d(),e&&w(h),e&&w(x),H=!1,v(U)}}}function B(e,t,a){let i,o,s,r,l,{xml:c}=t,{uxml:d}=t,{showAns:u}=t,{isReview:p}=t,{editorState:m}=t,g="no",w="Play Audio",b="Start Recording",v=15,A={disabled:!0,cdata:"",language:"",correctAns:"",xml:"",status:"",pointerEvents:"auto",isReset:!0,showTranscript:!1,counter:0};function C(e){!function(e){try{a(4,A.language=e.smxml._language,A),a(4,A.correctAns=e.smxml.__cdata,A),a(4,A.showTranscript="true"==e.smxml._showTranscript,A),d&&function(e){let t=h(e);a(4,A.language=t.smans._language,A),a(4,A.cdata=t.smans.__cdata,A),a(4,A.status=t.smans._status,A),a(4,A.disabled="recordingStopped"!=t.smans._status,A),a(4,A.isReset="true"==t.smans._isReset,A),a(4,A.showTranscript="true"==t.smans._showTranscript,A)}(d)}catch(e){console.warn({error:e.message,"function name":"parseXMLPreview","File name":"AudioPreview.svelte"})}}(h(e))}function y(){setTimeout((function(){let e='<smans type="43" name="AudioRecorder" disabled="'+A.disabled+'" status="'+A.status+'" language="'+A.language+'" isReset="'+A.isReset+'" showTranscript="'+A.showTranscript+'"><![CDATA['+A.cdata+"]]></smans>";_.select("#special_module_user_xml").value=e,ISSPECIALMODULEUSERXMLCHANGE=1,a(14,d=_.select("#special_module_user_xml").value),a(1,w=_.select("#stopButtonTooltip").getAttribute("data-original-title")),a(3,b=_.select("#recordButtonTooltip").getAttribute("data-original-title")),a(2,s=_.select("#previewDialogBody").innerText),""!=A.correctAns.trim()&&E()}),100)}function R(){T(),clearTimeout(r),a(4,A.status="recordingStopped",A),a(4,A.disabled=!1,A),y(),_.selectAll(".previewRecordingOn","addClass","h"),_.selectAll(".previewInitialState","removeClass","h"),i.stop()}function S(){v-=1,a(4,A.counter=A.counter+1,A),r=setTimeout((function(){v>0?S():R()}),1e3)}function k(){!function(){if(!window.webkitSpeechRecognition&&!window.SpeechRecognition)return void _.alert(n.browser_support_msg);window.SpeechRecognition=window.webkitSpeechRecognition||window.SpeechRecognition,i=new SpeechRecognition,i.continuous=!0,i.interimResults=!0,i.lang=A.language,window.recognitionData=i,i.addEventListener("end",(function(){A.isReset||(clearTimeout(r),_.alert(n.recording_ended),T(),_.selectAll(".previewInitialState","removeClass","h"),a(4,A.status="recordingStopped",A),a(4,A.disabled=!1,A),y())}))}(),i.start(),_.select("#preview_container #resetButton").disabled=!1,_.selectAll(".previewAudioPlaying, .previewInitialState","addClass","h"),_.selectAll(".previewRecordingOn","removeClass","h"),i.onresult=e=>{let t="";for(let a=0;a<e.results.length;a+=1)t+=e.results[a][0].transcript;a(4,A.cdata=t.trim(),A),y()}}function T(){_.selectAll(".previewAudioPlaying, .previewRecordingOn","addClass","h"),_.selectAll(".previewInitialState","removeClass","h"),_.selectAll("#preview_recordButton span","removeClass","icomoon-24px-stop"),_.selectAll("#preview_recordButton span","addClass",["icomoon-circle-2","text-danger"])}function B(){switch(A.status){case"recording":R();break;case"recordingStopped":_.getBS("#preview_confirm_modal","Modal").show(),_.select(".modal-body").focus();break;default:k(),a(4,A.status="recording",A),a(4,A.isReset=!1,A),a(4,A.counter=0,A),v=15,S(),y(),_.selectAll("#preview_recordButton span","removeClass",["icomoon-circle-2","text-danger"]),_.selectAll("#preview_recordButton span","addClass","icomoon-24px-stop")}}function E(){let e="";""!=A.correctAns.trim()?(A.correctAns.toLowerCase()==A.cdata.toLowerCase()?(e=n.correct,_.select("#answer").checked=!0,a(4,A.useransstatus=!0,A)):(e=n.incorrect,_.select("#answer").checked=!1,a(4,A.useransstatus=!1,A)),m?u(e):x({uXml:d,ans:e})):_.alert(n.matching_msg)}function I(){a(0,p=!0),a(4,A.pointerEvents="none",A),a(5,l=!0),E(),1==A.useransstatus?_.setCss("#preview_data_container",{color:"#50af50"}):_.setCss("#preview_data_container",{color:"#c30f0f"}),_.selectAll(_.parent(_.selectAll("#preanswer_data_container")),"addClass","h"),_.selectAll(_.parent(_.selectAll("#preview_data_container")),"removeClass","h")}function O(){a(0,p=!1),a(4,A.pointerEvents="auto",A),a(5,l=!1),_.selectAll(_.parent(_.selectAll("#preview_data_container")),"addClass","h")}return f((()=>{window.webkitSpeechRecognition||window.SpeechRecognition||_.alert(n.browser_support_msg),c!=A.xml&&(a(4,A.xml=c,A),a(4,A.disabled=!0,A),a(4,A.cdata="",A),a(4,A.xml="",A),a(4,A.status="",A),a(4,A.isReset=!0,A),C(c))})),e.$$set=e=>{"xml"in e&&a(15,c=e.xml),"uxml"in e&&a(14,d=e.uxml),"showAns"in e&&a(16,u=e.showAns),"isReview"in e&&a(0,p=e.isReview),"editorState"in e&&a(17,m=e.editorState)},e.$$.update=()=>{32769&e.$$.dirty[0]&&(C(c),p?I():O())},[p,w,s,b,A,l,function(){if("yes"==g)!function(){T(),"recording"==A.status&&i.stop();a(4,A.cdata="",A),a(4,A.disabled=!0,A),a(4,A.xml="",A),a(4,A.status="",A),a(4,A.isReset=!0,A),clearTimeout(r),y()}(),g="no";else{a(4,A.cdata="",A),a(4,A.disabled=!0,A),a(4,A.status="",A),a(4,A.pauseRecording="",A),y();let e=setTimeout((function(){B(),clearTimeout(e)}),120)}},B,function(){g="yes"},function(){g="no"},function(){window.speechSynthesis?(o=window.speechSynthesis,""!=A.cdata?(_.selectAll(".previewRecordingOn, .previewInitialState","addClass","h"),_.selectAll(".previewAudioPlaying","removeClass","h"),a(4,A.disabled=!0,A),y(),function(){let e=new SpeechSynthesisUtterance(A.cdata),t=o.getVoices(),i="de-DE"==A.language?"Google Deutsch":"fr-FR"==A.language?"Google français":"es-ES"==A.language?"Google español":"hi-IN"==A.language?"Google हिन्दी":"ja-JP"==A.language?"Google 日本語":"ko-KR"==A.language?"Google 한국의":"it-IT"==A.language?"Google italiano":"Google US English";e.addEventListener("end",(function(){_.selectAll(".previewAudioPlaying, .previewRecordingOn","addClass","h"),_.selectAll(".previewInitialState","removeClass","h"),a(4,A.disabled=!1,A),y(),o.cancel()}));for(let a=0;a<t.length;a+=1)if(t[a].name==i){e.voice=t[a],e.pitch=1,e.rate=1,e.lang=A.language,o.speak(e);break}}()):(_.selectAll(".previewRecordingOn, .previewAudioPlaying","addClass","h"),_.selectAll(".previewInitialState","removeClass","h"),_.alert(n.no_data_msg))):_.alert(n.browser_support_msg)},I,O,function(e){"c"==e?a(5,l=!1):"u"==e&&a(5,l=!0)},d,c,u,m]}export default class extends e{constructor(e){super(),t(this,e,B,T,a,{xml:15,uxml:14,showAns:16,isReview:0,editorState:17},[-1,-1])}}
//# sourceMappingURL=AudioPreview-c43602b1.js.map
