import{S as e,i as t,s as l,D as m,q as o,h as r,e as s,u as a,f as c,Y as i,j as n,x as h,o as u,z as d,b as _,g as f,l as g,c as p,m as x,t as b,a as v,d as A,C as E,a4 as F,p as y,X as D,A as w,w as C,W as k}from"./main-8f0f297b.js";import{I as B}from"./ItemHelper-f18d6af7.js";import{l as N}from"./parseCSV-929be628.js";function S(e){m(e,"svelte-xi3muu",".fa-close{margin-left:20px;font-size:18px;position:absolute;top:10px;color:#A80000}.fa-check{margin-left:20px;font-size:18px;position:absolute;top:10px;color:#46A546}.fa-close,.fa-check.svelte-xi3muu.svelte-xi3muu,.middle_align.svelte-xi3muu.svelte-xi3muu{vertical-align:middle!important}.middle_align{width:164px;min-width:164px}.topic_input{min-width:257px}.preview_header{font-size:16pt;font-weight:bold;vertical-align:middle}.adjust_width{width:10%;text-align:center}.table.svelte-xi3muu>.svelte-xi3muu:not(:first-child){border-top:1px solid}.theme_color_theme1.svelte-xi3muu.svelte-xi3muu{background-color:#5B9BD5!important}.theme_color_theme2.svelte-xi3muu.svelte-xi3muu{background-color:#3B67BC!important}.theme_color_theme3.svelte-xi3muu.svelte-xi3muu{background-color:#F6C3A2!important}.theme_color_theme4.svelte-xi3muu.svelte-xi3muu{background-color:#70AD47!important}.theme_color_theme5.svelte-xi3muu.svelte-xi3muu{background-color:#745998!important}.theme_color_terms_theme1.svelte-xi3muu.svelte-xi3muu{background-color:#DEEAF6}.theme_color_terms_theme2.svelte-xi3muu.svelte-xi3muu{background-color:#D4DEF1}.theme_color_terms_theme3.svelte-xi3muu.svelte-xi3muu{background-color:#FAE0CF}.theme_color_terms_theme4.svelte-xi3muu.svelte-xi3muu{background-color:#E2EFD9}.theme_color_terms_theme5.svelte-xi3muu.svelte-xi3muu{background-color:#E1DAE9}")}function $(e,t,l){const m=e.slice();return m[30]=t[l],m[32]=l,m}function M(e,t,l){const m=e.slice();return m[33]=t[l],m[35]=l,m}function R(e,t,l){const m=e.slice();return m[30]=t[l],m[32]=l,m}function j(e){let t,l=e[2].cdata.option,m=[];for(let t=0;t<l.length;t+=1)m[t]=J(R(e,l,t));return{c(){for(let e=0;e<m.length;e+=1)m[e].c();t=o()},m(e,l){for(let t=0;t<m.length;t+=1)m[t].m(e,l);r(e,t,l)},p(e,o){if(36&o[0]){let r;for(l=e[2].cdata.option,r=0;r<l.length;r+=1){const s=R(e,l,r);m[r]?m[r].p(s,o):(m[r]=J(s),m[r].c(),m[r].m(t.parentNode,t))}for(;r<m.length;r+=1)m[r].d(1);m.length=l.length}},d(e){d(m,e),e&&u(t)}}}function J(e){let t,l,m,o,d,_=e[30].text.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"";return{c(){t=s("th"),l=a(_),c(t,"key",m=e[32]),c(t,"class",o=i(("#5B9BD5"==e[5][e[2].theme]?"theme_color_theme1":"#3B67BC"==e[5][e[2].theme]?"theme_color_theme2":"#F6C3A2"==e[5][e[2].theme]?"theme_color_theme3":"#70AD47"==e[5][e[2].theme]?"theme_color_theme4":"#745998"==e[5][e[2].theme]?"theme_color_theme5":"")+" preview_header adjust_width "+("theme3"!==e[2].theme?e[30].id+"text-center text-white":e[30].id+"text-center"))+" svelte-xi3muu"),c(t,"tabindex",d=0)},m(e,m){r(e,t,m),n(t,l)},p(e,m){4&m[0]&&_!==(_=e[30].text.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"")&&h(l,_),4&m[0]&&o!==(o=i(("#5B9BD5"==e[5][e[2].theme]?"theme_color_theme1":"#3B67BC"==e[5][e[2].theme]?"theme_color_theme2":"#F6C3A2"==e[5][e[2].theme]?"theme_color_theme3":"#70AD47"==e[5][e[2].theme]?"theme_color_theme4":"#745998"==e[5][e[2].theme]?"theme_color_theme5":"")+" preview_header adjust_width "+("theme3"!==e[2].theme?e[30].id+"text-center text-white":e[30].id+"text-center"))+" svelte-xi3muu")&&c(t,"class",o)},d(e){e&&u(t)}}}function O(e){let t,l=e[1].cdata.term,m=[];for(let t=0;t<l.length;t+=1)m[t]=W($(e,l,t));return{c(){for(let e=0;e<m.length;e+=1)m[e].c();t=o()},m(e,l){for(let t=0;t<m.length;t+=1)m[t].m(e,l);r(e,t,l)},p(e,o){if(598&o[0]){let r;for(l=e[1].cdata.term,r=0;r<l.length;r+=1){const s=$(e,l,r);m[r]?m[r].p(s,o):(m[r]=W(s),m[r].c(),m[r].m(t.parentNode,t))}for(;r<m.length;r+=1)m[r].d(1);m.length=l.length}},d(e){d(m,e),e&&u(t)}}}function z(e){let t,l,m,o,a,h,d,f,p,x,b,v,A,E,F,y,D,w,C,k,B,N,S,$,M;return{c(){t=s("td"),l=s("i"),o=_(),a=s("i"),d=_(),f=s("input"),y=_(),D=s("label"),c(l,"class","fa fa-check svelte-xi3muu"),c(l,"aria-hidden","true"),c(l,"style",m=H(e[4])),c(a,"class","fa fa-close svelte-xi3muu"),c(a,"aria-hidden","true"),c(a,"style",h=H(e[4])),c(f,"type","radio"),c(f,"class","test_radio CMRad svelte-xi3muu"),c(f,"style",p="vertical-align:middle;"),f.value=x=e[33].id,c(f,"name",b="tm"+(e[32]+1)),c(f,"id",v="t"+e[32]+e[35]),c(f,"data-termid",A=e[30].id),c(f,"data-correct",E=e[30].correct),c(f,"data-userans",""),c(f,"data-role","none"),c(f,"tabindex",F=-1),c(D,"tabindex",w=0),c(D,"class",C="label_choice customRadCM "+(e[35]%2==0?"tureitemColorCM":"falseitemColorCM")+" svelte-xi3muu"),c(D,"for",k="t"+e[32]+e[35]),c(t,"key",B=e[35]),c(t,"id",N="tb"+e[32]+e[35]),c(t,"class",S=i((e[32]%2==0?"#DEEAF6"==e[6][e[2].theme]?"theme_color_terms_theme1":"#D4DEF1"==e[6][e[2].theme]?"theme_color_terms_theme2":"#FAE0CF"==e[6][e[2].theme]?"theme_color_terms_theme3":"#E2EFD9"==e[6][e[2].theme]?"theme_color_terms_theme4":"#E1DAE9"==e[6][e[2].theme]?"theme_color_terms_theme5":"#FFF":"#FFF")+" text-center test_area"+(e[33].id==e[30].correct?" dbg-success":" dbg-danger")+" position-relative")+" svelte-xi3muu")},m(m,s){r(m,t,s),n(t,l),n(t,o),n(t,a),n(t,d),n(t,f),n(t,y),n(t,D),$||(M=g(f,"click",e[9]),$=!0)},p(e,l){2&l[0]&&x!==(x=e[33].id)&&(f.value=x),2&l[0]&&A!==(A=e[30].id)&&c(f,"data-termid",A),2&l[0]&&E!==(E=e[30].correct)&&c(f,"data-correct",E),6&l[0]&&S!==(S=i((e[32]%2==0?"#DEEAF6"==e[6][e[2].theme]?"theme_color_terms_theme1":"#D4DEF1"==e[6][e[2].theme]?"theme_color_terms_theme2":"#FAE0CF"==e[6][e[2].theme]?"theme_color_terms_theme3":"#E2EFD9"==e[6][e[2].theme]?"theme_color_terms_theme4":"#E1DAE9"==e[6][e[2].theme]?"theme_color_terms_theme5":"#FFF":"#FFF")+" text-center test_area"+(e[33].id==e[30].correct?" dbg-success":" dbg-danger")+" position-relative")+" svelte-xi3muu")&&c(t,"class",S)},d(e){e&&u(t),$=!1,M()}}}function W(e){let t,l,m,o,a,h,g,p=e[30].text.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"",x=e[1].cdata.option,b=[];for(let t=0;t<x.length;t+=1)b[t]=z(M(e,x,t));return{c(){t=s("tr"),l=s("td"),a=_();for(let e=0;e<b.length;e+=1)b[e].c();h=_(),c(l,"class",m=i((e[32]%2==0?"#DEEAF6"==e[6][e[2].theme]?"theme_color_terms_theme1":"#D4DEF1"==e[6][e[2].theme]?"theme_color_terms_theme2":"#FAE0CF"==e[6][e[2].theme]?"theme_color_terms_theme3":"#E2EFD9"==e[6][e[2].theme]?"theme_color_terms_theme4":"#E1DAE9"==e[6][e[2].theme]?"theme_color_terms_theme5":"#FFF":"#FFF")+" "+e[30].id+" position-relative")+" svelte-xi3muu"),c(l,"tabindex",o=0),f(l,"font-size","14pt"),f(l,"vertical-align","middle"),f(l,"font-family",e[2].font),c(t,"key",g=e[32])},m(e,m){r(e,t,m),n(t,l),l.innerHTML=p,n(t,a);for(let e=0;e<b.length;e+=1)b[e].m(t,null);n(t,h)},p(e,o){if(2&o[0]&&p!==(p=e[30].text.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"")&&(l.innerHTML=p),6&o[0]&&m!==(m=i((e[32]%2==0?"#DEEAF6"==e[6][e[2].theme]?"theme_color_terms_theme1":"#D4DEF1"==e[6][e[2].theme]?"theme_color_terms_theme2":"#FAE0CF"==e[6][e[2].theme]?"theme_color_terms_theme3":"#E2EFD9"==e[6][e[2].theme]?"theme_color_terms_theme4":"#E1DAE9"==e[6][e[2].theme]?"theme_color_terms_theme5":"#FFF":"#FFF")+" "+e[30].id+" position-relative")+" svelte-xi3muu")&&c(l,"class",m),4&o[0]&&f(l,"font-family",e[2].font),598&o[0]){let l;for(x=e[1].cdata.option,l=0;l<x.length;l+=1){const m=M(e,x,l);b[l]?b[l].p(m,o):(b[l]=z(m),b[l].c(),b[l].m(t,h))}for(;l<b.length;l+=1)b[l].d(1);b.length=x.length}},d(e){e&&u(t),d(b,e)}}}function I(e){let t,l,m,o,d,f,g,E,F,y,D,w,C,k,N,S,$,M,R=e[2].stem.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"";l=new B({props:{handleReviewClick:e[10],reviewMode:e[0],customReviewMode:e[3]}}),l.$on("setReview",e[7]),l.$on("unsetReview",e[8]);let J=e[2].cdata&&j(e),z=e[1].cdata&&O(e);return{c(){t=s("div"),p(l.$$.fragment),m=_(),o=s("center"),d=s("table"),f=s("thead"),g=s("tr"),E=s("th"),F=a(R),w=_(),J&&J.c(),C=_(),k=s("tbody"),z&&z.c(),c(E,"class",y=i(("#5B9BD5"==e[5][e[2].theme]?"theme_color_theme1":"#3B67BC"==e[5][e[2].theme]?"theme_color_theme2":"#F6C3A2"==e[5][e[2].theme]?"theme_color_theme3":"#70AD47"==e[5][e[2].theme]?"theme_color_theme4":"#745998"==e[5][e[2].theme]?"theme_color_theme5":"")+" preview_header "+("theme3"!==e[2].theme?"text-center text-white":" text-center"))+" svelte-xi3muu"),c(E,"tabindex",D=0),c(g,"class","table-head"),c(f,"class","svelte-xi3muu"),c(k,"class","svelte-xi3muu"),c(d,"class",N=i("table testmode_table ")+" svelte-xi3muu"),c(d,"id","test_table"),c(d,"style",S="position:relative; margin-top:20px;width:"+e[2].maxWidth+"px;font-family: Georgia;"),c(t,"class","mainAdaArea"),c(t,"id","choicemain"),c(t,"style",$="margin-bottom:20px")},m(e,s){r(e,t,s),x(l,t,null),n(t,m),n(t,o),n(o,d),n(d,f),n(f,g),n(g,E),n(E,F),n(g,w),J&&J.m(g,null),n(d,C),n(d,k),z&&z.m(k,null),M=!0},p(e,t){const m={};1&t[0]&&(m.reviewMode=e[0]),l.$set(m),(!M||4&t[0])&&R!==(R=e[2].stem.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"")&&h(F,R),(!M||4&t[0]&&y!==(y=i(("#5B9BD5"==e[5][e[2].theme]?"theme_color_theme1":"#3B67BC"==e[5][e[2].theme]?"theme_color_theme2":"#F6C3A2"==e[5][e[2].theme]?"theme_color_theme3":"#70AD47"==e[5][e[2].theme]?"theme_color_theme4":"#745998"==e[5][e[2].theme]?"theme_color_theme5":"")+" preview_header "+("theme3"!==e[2].theme?"text-center text-white":" text-center"))+" svelte-xi3muu"))&&c(E,"class",y),e[2].cdata?J?J.p(e,t):(J=j(e),J.c(),J.m(g,null)):J&&(J.d(1),J=null),e[1].cdata?z?z.p(e,t):(z=O(e),z.c(),z.m(k,null)):z&&(z.d(1),z=null),(!M||4&t[0]&&S!==(S="position:relative; margin-top:20px;width:"+e[2].maxWidth+"px;font-family: Georgia;"))&&c(d,"style",S)},i(e){M||(b(l.$$.fragment,e),M=!0)},o(e){v(l.$$.fragment,e),M=!1},d(e){e&&u(t),A(l),J&&J.d(),z&&z.d()}}}function L(){let e=document.getElementsByClassName("test_radio");for(let t=0;t<e.length;t++)e[t].getAttribute("id")==e[t].getAttribute("data-userans")?e[t].checked=!0:e[t].checked=!1}function T(){!function(){let e=document.querySelectorAll(" .test_radio");for(let t=0;t<e.length;t++)e[t].getAttribute("value")==e[t].getAttribute("data-correct")?e[t].checked=!0:e[t].checked=!1}(),q()}function q(){let e=document.getElementsByClassName("fa-check"),t=document.getElementsByClassName("fa-close");for(let l=0;l<e.length;l++)e[l].style.display="none",t[l].style.display="none"}function H(e){return 1==e?{paddingLeft:"14px",display:"inline-flex",position:"absolute"}:{paddingLeft:"15px",display:"none",position:"absolute"}}function G(e,t,l){let m,{showAns:o}=t,{editorState:r}=t,{xml:s}=t,{uxml:a}=t,{isReview:c}=t,{CM:i}=t,n=c,h=c,u={cdata:""},d={},_=0;C({cdata:"",stem:"",xml:"",theme:"",font:"",maxWidth:"",totalcorrectans:""}).subscribe((e=>{l(2,d=e)}));function f(){let e=function(){let e=0,t=0,l=document.getElementsByClassName("test_radio");for(let t=0;t<l.length;t++)if(l[t].getAttribute("value")==l[t].getAttribute("data-correct")){if(1!=l[t].checked)return e=0,l[t].setAttribute("as",0),!1;l[t].setAttribute("as",1),e=1}for(let e=0;e<l.length;e++)l[e].getAttribute("value")==l[e].getAttribute("data-correct")&&1==l[e].checked&&t++,"undefined"!=typeof calculatePoint&&calculatePoint(d.totalcorrectans,t);return e}();e=1==e,a?w.select("#answer").checked=e:r&&o(e?"Correct":"Incorrect"),k({uXml:m,ans:e})}function g(){L(),v()}function p(){l(0,c=!0),b(c),g()}function x(){l(0,c=!1);let e=document.getElementsByClassName("test_radio");for(let t=0;t<e.length;t++)e[t].disabled=!1;q()}function b(e){if(e){let e="#main-"+i,t=w.selectAll(e+" .test_radio");for(let e=0;e<t.length;e++)t[e].disabled=!0}}function v(){w.select(".dbg-success input","checked").forEach((e=>{w.siblings(e,".fa-check").forEach((e=>{e.style.display="inline-flex"}))})),w.select(".dbg-danger input","checked").forEach((e=>{w.siblings(e,".fa-close").forEach((e=>{e.style.display="inline-flex"}))})),w.selectAll(".dbg-success input, .dbg-danger input","removeAttr","as"),w.select(".dbg-success input","checked").forEach((e=>{e.setAttribute("as",1)})),w.select(".dbg-success input","checked").forEach((e=>{e.setAttribute("as",0)})),w.select(".dbg-success input","checked").forEach((e=>{w.siblings(e,".label_choice").forEach((e=>{e.setAttribute("title","is marked as correct")}))})),w.select(".dbg-danger input","checked").forEach((e=>{w.siblings(e,".label_choice").forEach((e=>{e.setAttribute("title","is marked as incorrect")}))}))}return E((()=>{var e;s!=d.xml&&(l(2,d.xml=s,d),e=a,function(e,t){l(2,d.theme=e.smxml._theme,d),l(2,d.font=e.smxml._font,d),l(2,d.maxWidth=e.smxml._maxwidth?e.smxml._maxwidth:800,d);let m=N.parseCSVFormat(e.smxml.__cdata),o=[];o=JSON.parse(JSON.stringify(m)),l(2,d.cdata=o,d),l(2,d.stem=o.stem,d),l(1,u.cdata=o,u);let r=u.cdata.term.length;if(l(2,d.totalcorrectans=r,d),x(),t)try{t=JSON.parse(t);let e=[];e=JSON.parse(JSON.stringify(t)),setTimeout((function(){e.ans.map((function(e,t){w.selectAll(".test_area #"+e.userAns,"attr",{"data-userans":e.userAns})})),L()}),100)}catch(e){}else{let e=document.getElementsByClassName("test_radio");for(let t=0;t<e.length;t++)e[t].checked=!1,e[t].setAttribute("data-userans","")}}(D(s),e))})),F((()=>{b(n),c||q(),n&&setTimeout((function(){v()}),300)})),y((()=>{AI.listen("body","keydown",".label_choice",(function(e,t){13===t.which&&e.click()}))})),e.$$set=e=>{"showAns"in e&&l(11,o=e.showAns),"editorState"in e&&l(12,r=e.editorState),"xml"in e&&l(13,s=e.xml),"uxml"in e&&l(14,a=e.uxml),"isReview"in e&&l(0,c=e.isReview),"CM"in e&&l(15,i=e.CM)},e.$$.update=()=>{200705&e.$$.dirty[0]&&h!=c&&(c?(p(),r&&0==_&&(l(17,_=1),f())):(l(17,_=0),L(),x()),l(16,h=c))},[c,u,d,n,undefined,{theme1:"#5B9BD5",theme2:"#3B67BC",theme3:"#F6C3A2",theme4:"#70AD47",theme5:"#745998"},{theme1:"#DEEAF6",theme2:"#D4DEF1",theme3:"#FAE0CF",theme4:"#E2EFD9",theme5:"#E1DAE9"},function(){p()},function(){L(),x()},function(e){let t=e.target.id,l=e.target.name,o=document.querySelectorAll(" .test_area input[name="+l+"]");for(let e=0;e<o.length;e++)o[e].setAttribute("data-userans","");w.selectAll(" .test_area #"+t,"attr",{"data-userans":t});let r={type:"34",ans:[]},s=document.getElementsByClassName("test_radio");for(let e=0;e<s.length;e++)1==s[e].checked&&r.ans.push({id:s[e].getAttribute("data-termid"),userAns:s[e].getAttribute("id")});m=JSON.stringify(r),f()},function(e,t){"c"==e?T():g()},o,r,s,a,i,h,_]}export default class extends e{constructor(e){super(),t(this,e,G,I,l,{showAns:11,editorState:12,xml:13,uxml:14,isReview:0,CM:15},S,[-1,-1])}}
//# sourceMappingURL=ChoiceMatrixPreview-2fdda2bc.js.map
