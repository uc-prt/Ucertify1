{"version":3,"file":"EssayPreview-2ab870be.js","sources":["../../../clsSMEssay/eaasy_new_react.js","../../../clsSMEssay/EssayPreview.svelte"],"sourcesContent":["\n\nconst essayUploadUrl = window.baseUrl+'reactUpload.php/'; // UCINFO.ITEM_THEME_URL+\"controller/v2/\" + 'Upload.php/';\n//const wysiwyg = require('./libs/bootstrap-wysiwyg.js').wysiwyg;\nimport JUI from 'javscript_helper/JUI.js';\nlet editor;\nexport default class EssayNewReact extends JUI {\n    constructor(eid, essayEditor) {\n        super();\n        //this.labBinded = true;\n        this.eid = eid;\n        this.essay_ready(eid, essayEditor);\n    }\n\n    // getting the essay module ready\n    essay_ready(eid, essayEditor) {\n        let filePath;\n        let eidNode = document.querySelector(eid);\n        editor = essayEditor;\n        setTimeout(()=> {\n            this.bind('#drop a', 'click', (event)=> {\n                this.find(event.target.parentNode, 'input').click();\n            });\n\n            // it initialize the knob plugin listen for clicks on the cancel icon. \n            \n            //SUNEDITOR.create(this.find(eid, '#essay_edit'), { toolbarSelector: '[data-role=editor2-toolbar]' });\n            this.selectAll('[data-role=magic-overlay]').forEach(function(_this) {\n                var overlay = _this,\n                    target = _this.dataset['target'];\n                // overlay.offset(target.offset()).width(target.outerWidth()).height(target.outerHeight());\n            });\n\n            essayEditor.onChange = (contents, core)=> {\n                //console.log(\"Essay Editor on changed\", contents);\n                this.updateXML(eid, 200, contents);\n            }\n            essayEditor.onKeyDown = (e, core)=> {\n                //console.log(\"Essay Editor on key down\", e.target.innerHTML);\n                if (e.keyCode == 86 || e.keyCode == 67) {\n                    this.updateXML(eid, 200, e.target.innerHTM);\n                }\n            }\n\n            // setTimeout(()=> {\n            //     this.listenAll(eidNode.querySelectorAll('a, button, input'), \"click keyup keydown\", ()=> {\n            //         this.updateXML(eid);\n            //     });\n\n            // }, 300);\n\n            //this.updateXML(eid);\n\n            let ua = window.navigator.userAgent;\n            let ms_old_ie = ua.indexOf('MSIE ');\n            let ms_new_ie = ua.indexOf('Trident/');\n            this.listen(eidNode, 'click', 'a.essay_dwl_file', (_this)=> {\n                if ((ms_old_ie > -1) || (ms_new_ie > -1)) {\n                    var path = _this.getAttribute('href');\n                    _this.removeAttribute('href');\n                    window.open(path);\n                    setTimeout(()=> { this.select('a.essay_dwl_file').setAttribute('href', path) }, 500);\n                }\n                setTimeout(()=> { this.select('#center').remove(); }, 500);\n            });\n        }, 500);\n    }\n\n    // for getting path of the s3\n    getPath() {\n        let path = \"\"\n        if (typeof test_session_uid != \"undefined\") {\n            var folder = this.getForlderName(test_session_uid);\n            path = \"//s3.amazonaws.com/test_session/\" + folder + '/';\n        } else if (typeof user_guid != 'undefined') {\n            path = \"//s3.amazonaws.com/test_session/\" + user_guid + '/';\n        }\n        return path;\n    }\n\n    getUploads(...media) { \n        let path = this.getPath();\n        console.log(\"Upload media selected\", media);\n        let allExt = \",\" + this.select(this.eid).getAttribute('data-filetypeexts');\n        Array.prototype.forEach.call(media[0], (_f)=> {\n            let form_data = new FormData();\n            form_data.append('Filedata', _f);\n            let file_ext = _f.name.split('.');\n            let tpl = this.parseHtml('<li class=\"working\"><span class=\"download\" disabled=\"disabled\"><a target=\"_blank\" onclick=\"setTimeout(function(){activate(0)},500);\" href=\"' + path + _f.name + '\" title=\"Download File\"  class=\"essay_dwl_file icomoon-file-download\"></a></span><span class=\"filename\"></span><span class=\"fileSize\"></span><span class=\"abort\">abort</span><div id=\"progressbar\"><div class=\"bar\" style={{width: \"0\"}}></div></div></li>');\n            this.find(tpl, '.filename', {action: 'text', actionData: _f.name});\n            this.insert(this.find(tpl, '.fileSize'), `<i>${this.formatFileSize(_f.size)}</i>`, 'beforeend');\n            if (this.find(this.eid, '.essay_upload_status li', 'all').length >= this.select(this.eid).getAttribute('data-limit')) {\n                this.showmsg('The number of files uploaded exceeds the queue size limit (' + this.select(this.eid).getAttribute('data-limit') + ')');\n            } else if (!this.findInArray(file_ext[1].toLowerCase(), allExt.split(\",*.\")) ) {\n                this.showmsg('The file format/file extension is not valid.');\n            } else {\n                this.find(this.eid, '.essay_upload_status', {action: 'addClass', actionData: 'working_file'});\n                //data.context = tpl.appendTo(\".essay_upload_status\");\n                this.select(\".essay_upload_status\").append(tpl);\n                this.essay_sendFile_ToServer(this.eid, form_data, status);\n            }\n        });\n    }\n\n    // Helper function that formats the file sizes\n    formatFileSize(bytes) {\n        if (typeof bytes !== 'number') {\n            return '';\n        }\n\n        if (bytes >= 1000000000) {\n            return (bytes / 1000000000).toFixed(2) + ' GB';\n        }\n\n        if (bytes >= 1000000) {\n            return (bytes / 1000000).toFixed(2) + ' MB';\n        }\n\n        return (bytes / 1000).toFixed(2) + ' KB';\n    }\n\n    //It Calculate the completion percentage of the upload on progress event.\n    essay_sendFile_ToServer(eid, formData, status) {\n        this.activate(1);\n        let tsuid = (typeof test_session_uid == \"undefined\") ? \"\" : test_session_uid;\n        let uploadURL = essayUploadUrl + \"?func=essay&exts=\" + this.select(eid).dataset['filetypeexts'] + \"&test_session_uid=\" + tsuid; //Upload URL\n        console.log(uploadURL)\n        this.ajax({\n            url: uploadURL,\n            dataType: 'text',\n            formData: true,\n            contentType: false,\n            processData: false,\n            cache: false,\n            data: formData,\n        }).then(()=> {\n            this.activate(0);\n            this.select(\".essay_upload_status\", 'css', {display: 'block'});\n            this.select('#progressbar .bar', 'remove');\n            this.selectAll('.download', 'removeAttr', 'disabled');\n            this.updateXML(this.eid);\n            //status.setProgress(100);\n            this.showmsg(\"File uploaded sucessfully.\");\n        }).catch((...e)=> {\n            this.activate(0);\n            console.log('File is recorded but not uploaded due to server error.',e);\n            this.select('#progressbar .bar', 'remove');\n            this.selectAll('.download', 'removeAttr', 'disabled');\n        });\n    }\n\n    // it returns array of extracted data.\n    ext_array(exts) { \n        let ext_arr = [];\n        this.selectAll(exts.split(',')).forEach((val, i)=> {\n            let _ext = val.split('.');\n            ext_arr.push(_ext[1]);\n        });\n        return ext_arr;\n    }\n\n    updateXML(essayID, time, content) {\n        setTimeout(()=> {\n            let val = content || editor.getContents();\n            let file_str = \"\";\n            this.find(essayID,'.essay_upload_status li', 'all').forEach((_this)=> {\n                if (file_str == \"\") {\n                    file_str = _this.querySelector('.filename').innerHTML; \n                } else {\n                    file_str = file_str + ',' + _this.querySelector('.filename').innerHTML;\n                }\n            });\n            if (window.inNative) {\n                window.getHeight();\n            }\n            let userAnsXML = `<smans type='5'><userans><![CDATA[${val}]]></userans><upload><![CDATA[${file_str}]]></upload><path><![CDATA[${this.getPath()}]]></path></smans>`;\n            window.ISSPECIALMODULEUSERXMLCHANGE = 1;\n            this.select('#special_module_user_xml').value = userAnsXML;\n            if (window.inNative) window.postMessage(JSON.stringify({userAnsXML, essayPreview: true}), \"*\");\n        }, time);\n    }\n\n    // it removes the file.\n    remove_file(item, eid) {\n        let filename = this.parent(item).querySelector('.filename').innerHTML;\n        if (this.find(eid, '.essay_upload_status li', 'all').length <= 1) this.find(eid, '.essay_upload_status').classList.remove('working_file');\n        this.activate(1);\n        this.ajax({\n            url: essayUploadUrl, \n            data: { \"action\": \"remove_file\", \"file_name\": filename }\n        }).then((data)=> {\n            this.parent(item).remove();\n            this.updateXML(eid);\n            this.activate(0);\n        });\n    }\n\n    // for getting folder name of the s3 of file\n    getForlderName(test_session_uid) {\n        let folder = test_session_uid;\n        if (test_session_uid > 856399 || test_session_uid < 700000) {\n            let last = this.str_pad(test_session_uid % 10000, 4, '0');\n            let first = this.str_pad(Math.floor(test_session_uid / 10000), 1, '0');\n            folder = first + \"/\" + last;\n        }\n        return folder;\n\n    }\n\n    // used in this.getForlderName\n    // it takes three arguments first is string second is length, third is padstring.\n    // it checks if string.length is less than length then is returns the string with padstring and string otherwise it returns string.\n    str_pad(str, length, padstring) {\n        while (str.length < length) {\n            str = padString + str;\n        }\n        return str;\n    }\n\n    /*\n    ** it adds the class ‘h’ to the element have class review and test and after that if it \n    ** is called with passing argument have value then it hides the element have id ‘upload’ and class ‘abort’ \n    ** otherwise shows the element have class ‘abort’ and set the attribute contenteditable \n    ** to true to the element have id ‘essay_edit’ \n    */\n    modeOn(modeType) {\n        this.selectAll('.test, .review', 'addClass', 'h');\n        if (modeType) {\n            this.selectAll('#upload, .abort', 'hide');\n        } else {\n            // jQuery(elemId).find('#upload').show();\n            this.select('#essay_edit').setAttribute('contenteditable', 'true');\n            this.selectAll('.abort', 'show');\n        }\n    }\n}\n","<script>\n    import { beforeUpdate, onMount } from \"svelte\";\n    import {AH, XMLToJSON} from '../helper/HelperAI.svelte';\n    import ItemHelper from '../helper/ItemHelper.svelte';\n    import sunEditor from 'suneditor';\n    import plugins from 'sunEditor/src/plugins';\n    import EssayNewReact from './eaasy_new_react.js';\n\n    export let xml;\n    export let uaxml;\n    export let isReview;\n    export let editorState;\n    let ucEssay;\n    let files;\n    let state = {\n        userans: '',\n        appPath: \"\",\n        essayStr: '',\n        userAns: '',\n        site_url: \"\"\n    };\n    let essay_class = \"working_file\";\n    let eid = \"essayPreviewContainer\";\n    let localEssayData = {};\n    let uAns =\"\";\n    let essayEditor;\n    const headingArray = [{\"font\": \"fontSize 6\",\"text\": \"Heading 1\"}, {\"font\": \"fontSize 5\",\"text\": \"Heading 2\"}, {\"font\": \"fontSize 4\",\"text\": \"Heading 3\"},{\"font\": \"fontSize 3\",\"text\": \"Heading 4\"},{\"font\": \"fontSize 2\",\"text\": \"Heading 5\"},{\"font\": \"fontSize 1\",\"text\": \"Heading 6\"}];\n\n    $: essay_class = isReview ? \"working_file h\" : \"working_file\";\n\n    onMount(()=> {\n        editorState && AH.set(editorState.content_type+\"_refresh\", setEssayContent.bind(this));\n        loadXML(xml, uaxml);\n        // Intialize editor plugin\n        initEdit();\n    });\n\n    function initEdit() {\n        essayEditor = sunEditor.create('essay_edit', { \n            height: '300px',\n            value: uAns,\n            width: 'auto',\n            toolbarContainer:\"#essayPreviewToolbar\",\n            placeholder: \"Write text here.\",\n            resizingBar: false,\n            showPathLabel: false,     \n            plugins:plugins,\n            fontSize: 10,\n            defaultStyle: \"padding-left: 10px\",\n            buttonList: [\n                ['formatBlock'],\n                ['bold', 'italic', 'underline'],\n                ['list', 'outdent', 'indent', 'align'],\n                ['removeFormat'],\n            ],\n        });\n        let elemId = '#' + eid;\n        ucEssay = new EssayNewReact(elemId, essayEditor);\n        //ucEssay.essay_ready();\n    }\n\n    function setEssayContent() {\n        console.log(\"set Content\")\n        essayEditor.setContents(uAns);\n    }\n        \n    // it is called when state updated\n    beforeUpdate(()=> {\n        if (xml != state.xml) {\n            state.xml = xml ;\n            console.log(\"Updating from Preview\");\n            loadXML(xml, uaxml);\n        }\n    });\n    \n    // its for loading the xml.\n    function loadXML(essayXML, uaxml) {\n        let essayUser = (uaxml) ? XMLToJSON(uaxml) : \"\";\n        essayXML = XMLToJSON(essayXML);\n       // userxml_is_empty = updateAttrToLower(userxml_is_empty);\n        // if(userxml_is_empty) {\n        //     if(!userxml_is_empty.smans) {\n        //         uaxml = \"\";\n        //     }\n        // }\n        // Parsing XMLs\n        try {\n            let essay = essayXML.smxml.default ? essayXML.smxml.default : essayXML.smxml;\n            uAns = essayUser && (essayUser.smans.userans).charCodeAt(0)!=10 ? essayUser.smans.userans : (essay.__cdata !== undefined ? essay.__cdata : '');\n            //self.userAnsXML = $('#special_module_user_xml').val();\n            localEssayData = {\n                userans: uAns,\n                filetypeexts: essay._filetypeexts,\n                limit: essay._limit,\n                type: essay._type == \"5\" ? \"0\" : essay._type,\n                upload: essayUser ? essayUser.smans.upload : \"\",\n                path: essayUser ? essayUser.smans.path : \"\",\n            };\n        } catch(error) {\n            console.log({error, func:'loadXml', file:'EssayPreview.svelte'});\n        }\n    }\n    \n    // its update attributes of user answer xml to lowercase.\n    function updateAttrToLower(data) {\n        let isLower = false;\n        if(data.SMANS) {\n            data.smans = data.SMANS;\n            delete data.SMANS;\n            isLower = true;\n        }\n        return data;\n    }\n    \n    // calls on click of abort\n    function handleClick(e) {\n        ucEssay.remove_file(e.currentTarget, '#' + eid);\n    }\n\n    // calls when review mode is on\n    function setReview() {\n        isReview = true;\n        essayEditor.disabled(); // Disable editing for module\n        ucEssay.modeOn(\"on\");\n    }\n    \n    // calls when review mode is off after on\n    function unsetReview(type) {\n        isReview = false;\n        essayEditor.enabled(); // Enable editing for module\n        if (type != 0) {\n            AH.select('#upload', 'show');\n            AH.select('#upload', 'removeClass', 'h');\n        }\n        ucEssay.modeOn('');\n    }\n</script>\n<svelte:head>\n    <link href=\"{window.baseUrlTheme || window.baseThemeURL}helper/sunEditor/src/assets/css/suneditor.css\" rel=\"stylesheet\" />\n</svelte:head>\n<main>\n    <p id =\"demo\"></p>\n    <div>\n        {#if localEssayData }\n            <ItemHelper \n                on:setReview = {setReview}\n                on:unsetReview = {unsetReview.bind(this, localEssayData.type)}\n            />\n            <div \n                id={eid} \n                data-filetypeexts={localEssayData.filetypeexts} \n                data-limit={localEssayData.limit} \n                class=\"essay-container m-auto hero-unit\"\n            >\n                <div id=\"essayPreviewToolbar\" class=\"sun-editor\"></div>\n                <textarea id=\"essay_edit\" class=\"text-left editor sun-editor-editable\" ></textarea>\n                <div id=\"upload\" class={window.isReview == true || isReview == true || localEssayData.type == \"0\" ? \"h\" : \"\"}>\n                    <div id=\"drop\">\n                        Drag & Drop Files Here\n                        <div class=\"text-center\" style=\"font-size: 12px;font-weight: normal;position:relative;top:45px; word-wrap:break-word\">You can upload upto {localEssayData.limit} {localEssayData.filetypeexts} files.</div>\n                        <a href=\"#upl\" class=\"essay-btn btn btn-light darkgrey_border\">Browse</a>\n                        <input \n                            type=\"file\" \n                            name=\"upl\" \n                            bind:files \n                            on:change={(event)=> ucEssay.getUploads(files, event)}\n                            id=\"upl\" \n                            multiple=\"multiple\" \n                            style=\"opacity:0.5\"\n                        />\n                    </div>\n                </div>\n                <ul class={localEssayData.type == \"0\" ? \"essay_upload_status text-left h\" : \"essay_upload_status text-left working_file\" } style=\"list-style-type: none;\">\n                    {#if localEssayData.upload != ''}\n                        {#each localEssayData.upload.split(',') as uploaded, index}\n                            <li class=\"working\">\n                                <span class=\"download\">\n                                    <a target=\"_blanks\" href={localEssayData.path + uploaded} title='Download File' class=\"essay_dwl_file\">\n                                        <i class=\"icomoon-file-download\"></i>\n                                    </a>\n                                </span>\n                                <span class=\"filename\">{uploaded}</span>\n                                {#if !isReview}\n                                    <span class=\"abort\" on:click={handleClick}>abort</span>\n                                {/if}\n                            </li>\n                        {/each}\n                    {/if}\n                </ul>\n            </div>\n\n        {/if}\n    </div>\n</main>\n<style>\n    .hero-unit {\n        border: 1px solid #ccc;\n        width: 84%;\n        padding: 18px!important;\n        font-size: 15px!important;\n        margin-bottom: 30px;\n        font-weight: 200;\n        line-height: 30px;\n        color: inherit;\n        background-color: #eeeeee;\n        -webkit-border-radius: 6px;\n        -moz-border-radius: 6px;\n        border-radius: 6px;\n    }\n    .essay_upload_status {\n        margin-top: 10px;\n    }\n    .abort {\n        padding-left: 15px;\n        cursor: pointer;\n    }\n    .essay-btn, #essayfile-button, #editfiles, .essay-btn-add {\n        display: inline-block;\n        padding: 4px 8px;\n        font-size: 12px;\n        line-height: 20px;\n        text-align: center;\n        vertical-align: middle;\n        cursor: pointer;\n        color: #333333;\n        text-shadow: 0 1px 1px rgba(255, 255, 255, 0.75);\n        background-color: #f5f5f5;\n        background-image: -moz-linear-gradient(top, #ffffff, #e6e6e6);\n        background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#ffffff), to(#e6e6e6));\n        background-image: -webkit-linear-gradient(top, #ffffff, #e6e6e6);\n        background-image: -o-linear-gradient(top, #ffffff, #e6e6e6);\n        background-image: linear-gradient(to bottom, #ffffff, #e6e6e6);\n        background-repeat: repeat-x;\n        filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff', endColorstr='#ffe6e6e6', GradientType=0);\n        border-color: #e6e6e6 #e6e6e6 #bfbfbf;\n        border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);\n        filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);\n        border: 1px solid #cccccc;\n        border-bottom-color: #b3b3b3;\n        -webkit-border-radius: 4px;\n        -moz-border-radius: 4px;\n        border-radius: 4px;\n        -webkit-box-shadow: inset 0 1px 0 rgba(255,255,255,.2), 0 1px 2px rgba(0,0,0,.05);\n        -moz-box-shadow: inset 0 1px 0 rgba(255,255,255,.2), 0 1px 2px rgba(0,0,0,.05);\n        box-shadow: inset 0 1px 0 rgba(255,255,255,.2), 0 1px 2px rgba(0,0,0,.05);\n    }\n    #upload {\n        font-family: 'PT Sans Narrow', sans-serif;\n        background-color: #E0E0E0;\n        background-image: -webkit-linear-gradient(top, #E0E0E0, #E0E0E0);\n        background-image: -moz-linear-gradient(top, #E0E0E0, #E0E0E0);\n        background-image: linear-gradient(top, #E0E0E0, #E0E0E0);\n        width: 100%;\n        /* padding: 30px; */\n        padding: 30px 30px 0;\n        border-radius: 3px;\n        border-collapse: separate;\n        border: 1px solid rgb(204, 204, 204);\n        margin-top: 2px;\n    }\n    #drop {\n        background-color: #EEEEEE;\n        padding: 25px 30px;\n        margin-bottom: 30px;\n        border: 20px solid rgba(0, 0, 0, 0);\n        border-radius: 3px;\n        text-align: center;\n        font-size: 16px;\n        font-weight: bold;\n        color: #7f858a;\n        border: 1px solid #CCCCCC;\n    }\n    /* .can_upload {\n        font-size: 12px;\n        font-weight: 100;\n        position: relative;\n        top: 45px;\n        overflow-wrap: break-word;\n    } */\n    #drop a {\n        /* background-color: #007a96; */\n        padding: 12px 5%;\n        color: #2B2E31;\n        font-size: 14px;\n        border-radius: 2px;\n        cursor: pointer;\n        display: inline-block;\n        margin-top: 12px;\n        margin-bottom: 12px;\n        line-height: 1;\n        text-decoration: none;\n        position: relative;\n        top: 30px;\n    }\n    #drop input {\n        display: none;\n    }\n    .dropdown-item {\n        display: block;\n        width: 100%;\n        padding: 4px 12px;\n        clear: both;\n        font-weight: 400;\n        color: #212529;\n        text-align: inherit;\n        white-space: nowrap;\n        background-color: transparent;\n        border: 0;\n    }\n    .essay-btn {\n        margin-bottom: 15px;\n    }\n    .essay-container {\n        width: 89%;\n    }\n</style>"],"names":["essayUploadUrl","window","baseUrl","editor","EssayNewReact","JUI","[object Object]","eid","essayEditor","super","this","essay_ready","eidNode","document","querySelector","setTimeout","bind","event","find","target","parentNode","click","selectAll","forEach","_this","dataset","onChange","contents","core","updateXML","onKeyDown","e","keyCode","innerHTM","ua","navigator","userAgent","ms_old_ie","indexOf","ms_new_ie","listen","path","getAttribute","removeAttribute","open","select","setAttribute","remove","test_session_uid","getForlderName","user_guid","media","getPath","console","log","allExt","Array","prototype","call","_f","form_data","FormData","append","file_ext","name","split","tpl","parseHtml","action","actionData","insert","formatFileSize","size","length","showmsg","findInArray","toLowerCase","essay_sendFile_ToServer","status","bytes","toFixed","formData","activate","tsuid","uploadURL","ajax","url","dataType","contentType","processData","cache","data","then","display","catch","exts","ext_arr","val","i","_ext","push","essayID","time","content","getContents","file_str","innerHTML","inNative","getHeight","userAnsXML","ISSPECIALMODULEUSERXMLCHANGE","value","postMessage","JSON","stringify","essayPreview","item","filename","parent","classList","file_name","folder","last","str_pad","Math","floor","str","padstring","padString","modeType","ctx","limit","filetypeexts","type","upload","isReview","baseUrlTheme","baseThemeURL","ucEssay","files","xml","uaxml","editorState","state","userans","appPath","essayStr","userAns","site_url","localEssayData","uAns","setEssayContent","setContents","loadXML","essayXML","essayUser","XMLToJSON","essay","smxml","default","smans","charCodeAt","undefined","__cdata","_filetypeexts","_limit","_type","error","func","file","onMount","AH","set","content_type","sunEditor","create","height","width","toolbarContainer","placeholder","resizingBar","showPathLabel","plugins","fontSize","defaultStyle","buttonList","beforeUpdate","remove_file","currentTarget","disabled","modeOn","enabled","getUploads"],"mappings":"gVAEA,MAAMA,EAAiBC,OAAOC,QAAQ,mBAGtC,IAAIC,EACW,MAAMC,UAAsBC,EACvCC,YAAYC,EAAKC,GACbC,QAEAC,KAAKH,IAAMA,EACXG,KAAKC,YAAYJ,EAAKC,GAI1BF,YAAYC,EAAKC,GAEb,IAAII,EAAUC,SAASC,cAAcP,GACrCJ,EAASK,EACTO,YAAW,KACPL,KAAKM,KAAK,UAAW,SAAUC,IAC3BP,KAAKQ,KAAKD,EAAME,OAAOC,WAAY,SAASC,WAMhDX,KAAKY,UAAU,6BAA6BC,SAAQ,SAASC,GAE5CA,EAAMC,QAAgB,UAIvCjB,EAAYkB,SAAW,CAACC,EAAUC,KAE9BlB,KAAKmB,UAAUtB,EAAK,IAAKoB,IAE7BnB,EAAYsB,UAAY,CAACC,EAAGH,KAEP,IAAbG,EAAEC,SAA8B,IAAbD,EAAEC,SACrBtB,KAAKmB,UAAUtB,EAAK,IAAKwB,EAAEZ,OAAOc,WAa1C,IAAIC,EAAKjC,OAAOkC,UAAUC,UACtBC,EAAYH,EAAGI,QAAQ,SACvBC,EAAYL,EAAGI,QAAQ,YAC3B5B,KAAK8B,OAAO5B,EAAS,QAAS,oBAAqBY,IAC/C,GAAKa,GAAa,GAAOE,GAAa,EAAI,CACtC,IAAIE,EAAOjB,EAAMkB,aAAa,QAC9BlB,EAAMmB,gBAAgB,QACtB1C,OAAO2C,KAAKH,GACZ1B,YAAW,KAAOL,KAAKmC,OAAO,oBAAoBC,aAAa,OAAQL,KAAS,KAEpF1B,YAAW,KAAOL,KAAKmC,OAAO,WAAWE,WAAa,UAE3D,KAIPzC,UACI,IAAImC,EAAO,GACoB,oBAApBO,iBAEPP,EAAO,mCADM/B,KAAKuC,eAAeD,kBACoB,IAC1B,oBAAbE,YACdT,EAAO,mCAAqCS,UAAY,KAE5D,OAAOT,EAGXnC,cAAc6C,GACV,IAAIV,EAAO/B,KAAK0C,UAChBC,QAAQC,IAAI,wBAAyBH,GACrC,IAAII,EAAS,IAAM7C,KAAKmC,OAAOnC,KAAKH,KAAKmC,aAAa,qBACtDc,MAAMC,UAAUlC,QAAQmC,KAAKP,EAAM,IAAKQ,IACpC,IAAIC,EAAY,IAAIC,SACpBD,EAAUE,OAAO,WAAYH,GAC7B,IAAII,EAAWJ,EAAGK,KAAKC,MAAM,KACzBC,EAAMxD,KAAKyD,UAAU,8IAAgJ1B,EAAOkB,EAAGK,KAAO,8PAC1LtD,KAAKQ,KAAKgD,EAAK,YAAa,CAACE,OAAQ,OAAQC,WAAYV,EAAGK,OAC5DtD,KAAK4D,OAAO5D,KAAKQ,KAAKgD,EAAK,aAAc,MAAMxD,KAAK6D,eAAeZ,EAAGa,YAAa,aAC/E9D,KAAKQ,KAAKR,KAAKH,IAAK,0BAA2B,OAAOkE,QAAU/D,KAAKmC,OAAOnC,KAAKH,KAAKmC,aAAa,cACnGhC,KAAKgE,QAAQ,8DAAgEhE,KAAKmC,OAAOnC,KAAKH,KAAKmC,aAAa,cAAgB,KACxHhC,KAAKiE,YAAYZ,EAAS,GAAGa,cAAerB,EAAOU,MAAM,SAGjEvD,KAAKQ,KAAKR,KAAKH,IAAK,uBAAwB,CAAC6D,OAAQ,WAAYC,WAAY,iBAE7E3D,KAAKmC,OAAO,wBAAwBiB,OAAOI,GAC3CxD,KAAKmE,wBAAwBnE,KAAKH,IAAKqD,EAAWkB,SALlDpE,KAAKgE,QAAQ,mDAWzBpE,eAAeyE,GACX,MAAqB,iBAAVA,EACA,GAGPA,GAAS,KACDA,EAAQ,KAAYC,QAAQ,GAAK,MAGzCD,GAAS,KACDA,EAAQ,KAASC,QAAQ,GAAK,OAGlCD,EAAQ,KAAMC,QAAQ,GAAK,MAIvC1E,wBAAwBC,EAAK0E,EAAUH,GACnCpE,KAAKwE,SAAS,GACd,IAAIC,EAAoC,oBAApBnC,iBAAmC,GAAKA,iBACxDoC,EAAYpF,EAAiB,oBAAsBU,KAAKmC,OAAOtC,GAAKkB,QAAsB,aAAI,qBAAuB0D,EACzH9B,QAAQC,IAAI8B,GACZ1E,KAAK2E,KAAK,CACNC,IAAKF,EACLG,SAAU,OACVN,UAAU,EACVO,aAAa,EACbC,aAAa,EACbC,OAAO,EACPC,KAAMV,IACPW,MAAK,KACJlF,KAAKwE,SAAS,GACdxE,KAAKmC,OAAO,uBAAwB,MAAO,CAACgD,QAAS,UACrDnF,KAAKmC,OAAO,oBAAqB,UACjCnC,KAAKY,UAAU,YAAa,aAAc,YAC1CZ,KAAKmB,UAAUnB,KAAKH,KAEpBG,KAAKgE,QAAQ,iCACdoB,OAAM,IAAI/D,KACTrB,KAAKwE,SAAS,GACd7B,QAAQC,IAAI,yDAAyDvB,GACrErB,KAAKmC,OAAO,oBAAqB,UACjCnC,KAAKY,UAAU,YAAa,aAAc,eAKlDhB,UAAUyF,GACN,IAAIC,EAAU,GAKd,OAJAtF,KAAKY,UAAUyE,EAAK9B,MAAM,MAAM1C,SAAQ,CAAC0E,EAAKC,KAC1C,IAAIC,EAAOF,EAAIhC,MAAM,KACrB+B,EAAQI,KAAKD,EAAK,OAEfH,EAGX1F,UAAU+F,EAASC,EAAMC,GACrBxF,YAAW,KACP,IAAIkF,EAAMM,GAAWpG,EAAOqG,cACxBC,EAAW,GACf/F,KAAKQ,KAAKmF,EAAQ,0BAA2B,OAAO9E,SAASC,IAErDiF,EADY,IAAZA,EACWjF,EAAMV,cAAc,aAAa4F,UAEjCD,EAAW,IAAMjF,EAAMV,cAAc,aAAa4F,aAGjEzG,OAAO0G,UACP1G,OAAO2G,YAEX,IAAIC,EAAa,qCAAqCZ,kCAAoCQ,+BAAsC/F,KAAK0C,8BACrInD,OAAO6G,6BAA+B,EACtCpG,KAAKmC,OAAO,4BAA4BkE,MAAQF,EAC5C5G,OAAO0G,UAAU1G,OAAO+G,YAAYC,KAAKC,UAAU,CAACL,WAAAA,EAAYM,cAAc,IAAQ,OAC3Fb,GAIPhG,YAAY8G,EAAM7G,GACd,IAAI8G,EAAW3G,KAAK4G,OAAOF,GAAMtG,cAAc,aAAa4F,UACxDhG,KAAKQ,KAAKX,EAAK,0BAA2B,OAAOkE,QAAU,GAAG/D,KAAKQ,KAAKX,EAAK,wBAAwBgH,UAAUxE,OAAO,gBAC1HrC,KAAKwE,SAAS,GACdxE,KAAK2E,KAAK,CACNC,IAAKtF,EACL2F,KAAM,CAAEvB,OAAU,cAAeoD,UAAaH,KAC/CzB,MAAMD,IACLjF,KAAK4G,OAAOF,GAAMrE,SAClBrC,KAAKmB,UAAUtB,GACfG,KAAKwE,SAAS,MAKtB5E,eAAe0C,GACX,IAAIyE,EAASzE,EACb,GAAIA,EAAmB,QAAUA,EAAmB,IAAQ,CACxD,IAAI0E,EAAOhH,KAAKiH,QAAQ3E,EAAmB,IAAO,EAAG,KAErDyE,EADY/G,KAAKiH,QAAQC,KAAKC,MAAM7E,EAAmB,KAAQ,EAAG,KACjD,IAAM0E,EAE3B,OAAOD,EAOXnH,QAAQwH,EAAKrD,EAAQsD,GACjB,KAAOD,EAAIrD,OAASA,GAChBqD,EAAME,UAAYF,EAEtB,OAAOA,EASXxH,OAAO2H,GACHvH,KAAKY,UAAU,iBAAkB,WAAY,KACzC2G,EACAvH,KAAKY,UAAU,kBAAmB,SAGlCZ,KAAKmC,OAAO,eAAeC,aAAa,kBAAmB,QAC3DpC,KAAKY,UAAU,SAAU,wJCzE8H4G,KAAeC,WAAQD,KAAeE,8CAdzKF,wCACEA,KAAYlH,KAAKN,KAAMwH,KAAeG,QAAtCH,KAAYlH,KAAKN,KAAMwH,KAAeG,qCA2BtB,IAAzBH,KAAeI,g5BAjBmB,GAAnBrI,OAAOsI,UAAgC,GAAZL,MAA2C,KAAvBA,KAAeG,KAAc,IAAM,sCAgBxE,KAAvBH,KAAeG,KAAc,kCAAoC,uGAvBxE9H,6BACe2H,KAAeE,iCACtBF,KAAeC,qVAQwHD,KAAeC,oCAAQD,KAAeE,4CAH9I,GAAnBnI,OAAOsI,UAAgC,GAAZL,MAA2C,KAAvBA,KAAeG,KAAc,IAAM,uCAiBxE,IAAzBH,KAAeI,mFADU,KAAvBJ,KAAeG,KAAc,kCAAoC,kGAtBzDH,KAAeE,4DACtBF,KAAeC,sKAuBZD,KAAeI,OAAOrE,MAAM,0BAAjCQ,yKAAKyD,KAAeI,OAAOrE,MAAM,aAAjCQ,qIAAAA,0KASwCyD,iFAFVA,YAClBA,sLALwBA,KAAezF,KAAOyF,mQAAtBA,KAAezF,KAAOyF,kCAI5BA,kBAClBA,wHAvCzBA,qGALIjI,OAAOuI,cAAgBvI,OAAOwI,wMAKlCP,oLAzHL3H,EAAM,8CAVNmI,EACAC,EAYAnI,OAjBOoI,YACAC,eACAN,kBACAO,KAGPC,GACAC,QAAS,GACTC,QAAS,GACTC,SAAU,GACVC,QAAS,GACTC,SAAU,IAIVC,KACAC,EAAM,YAqCDC,IACLlG,QAAQC,IAAI,eACZ9C,EAAYgJ,YAAYF,YAanBG,EAAQC,EAAUb,OACnBc,EAAad,EAASe,EAAUf,GAAS,GAC7Ca,EAAWE,EAAUF,WASbG,EAAQH,EAASI,MAAMC,QAAUL,EAASI,MAAMC,QAAUL,EAASI,MACvER,EAAOK,GAAsD,IAAxCA,EAAUK,MAAMhB,QAASiB,WAAW,GAASN,EAAUK,MAAMhB,aAA6BkB,IAAlBL,EAAMM,QAAwBN,EAAMM,QAAU,OAE3Id,GACIL,QAASM,EACTlB,aAAcyB,EAAMO,cACpBjC,MAAO0B,EAAMQ,OACbhC,KAAqB,KAAfwB,EAAMS,MAAe,IAAMT,EAAMS,MACvChC,OAAQqB,EAAYA,EAAUK,MAAM1B,OAAS,GAC7C7F,KAAMkH,EAAYA,EAAUK,MAAMvH,KAAO,WAEzC8H,GACJlH,QAAQC,KAAKiH,MAAAA,EAAOC,KAAK,UAAWC,KAAK,yBArEjDC,QACI5B,GAAe6B,EAAGC,IAAI9B,EAAY+B,aAAa,WAAYtB,EAAgBvI,KAAKN,OAChF+I,EAAQb,EAAKC,GAMbrI,EAAcsK,EAAUC,OAAO,cAC3BC,OAAQ,QACRjE,MAAOuC,EACP2B,MAAO,OACPC,iBAAiB,uBACjBC,YAAa,mBACbC,aAAa,EACbC,eAAe,EACPC,QAAAA,EACRC,SAAU,GACVC,aAAc,qBACdC,aACK,gBACA,OAAQ,SAAU,cAClB,OAAQ,UAAW,SAAU,UAC7B,uBAIT/C,MAActI,EADD,IAAMG,EACiBC,OAUxCkL,QACQ9C,GAAOG,EAAMH,MACbG,EAAMH,IAAMA,EACZvF,QAAQC,IAAI,yBACZmG,EAAQb,EAAKC,wMA4CA9G,GACjB2G,EAAQiD,YAAY5J,EAAE6J,cAAe,IAAMrL,mBAK3CgI,GAAW,GACX/H,EAAYqL,WACZnD,EAAQoD,OAAO,gBAIEzD,OACjBE,GAAW,GACX/H,EAAYuL,UACA,GAAR1D,IACAsC,EAAG9H,OAAO,UAAW,QACrB8H,EAAG9H,OAAO,UAAW,cAAe,MAExC6F,EAAQoD,OAAO,2CA+BiB7K,GAASyH,EAAQsD,WAAWrD,EAAO1H"}