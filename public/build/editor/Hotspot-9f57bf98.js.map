{"version":3,"file":"Hotspot-9f57bf98.js","sources":["../../../clsSMHotspot/HotspotDrawingScript.js","../../../clsSMHotspot/Hotspot_authoringScript.js","../../../clsSMHotspot/Hotspot.svelte"],"sourcesContent":["import JUI from 'javscript_helper/JUI.js';\nfunction Point(a, b) {\n    if (true === isNaN(Number(a))) {\n        this.x = 0;\n    } else {\n        this.x = a;\n    }\n    if (true === isNaN(Number(b))) {\n        this.y = 0;\n    } else {\n        this.y = b;\n    }\n    return {\n        \"X\": this.x,\n        \"Y\": this.y\n    };\n}\nconst JS = new JUI();\nexport default class DooScribPlugin {\n\tconstructor(options) {\n\t\tthis.prevPoint = undefined;\n\t\tthis.defaultOptions = {\n\t\t\ttarget: \"\",\n\t\t\tpenSize:1,\n\t\t\twidth: options.width,\n\t\t\theight: options.height,\n\t\t\tcssClass: '',\n\t\t\tonClick: (e)=> {},\n\t\t\tonMove: (e)=> {},\n\t\t\tonPaint: (e)=> {},\n\t\t\tonRelease: (e)=> {}\n\t\t};\n\t\tthis.penWidth = 2;\n\t\tthis.drawing = false;\n\t\tthis.cap = 'round';\n\t\tthis.ID = 'dooScribCanvas' + Math.floor((Math.random()*100) + 1);\n\t\tthis.drawingSurface = \"\";\n\t\tif (options) this.Settings = {...this.defaultOptions, ...options};\n\t\tconsole.log(this.Settings);\n\t\tif (true === isNaN(this.Settings.height)) {\n\t\t\tthis.Settings.height = 100;\n\t\t}\n\t\tif (true === isNaN(this.Settings.width)){\n\t\t\tthis.Settings.width = 100;\n\t\t}\n\n\t\tthis.init();\n\t}\n\n\tinit() {\n\t\tlet _this = this.Settings.target;\n\t\tif (_this) {\n\t\t\tif (_this.getAttribute('id') == \"hptmain0\")  JS.empty(_this);\n\t\t\tJS.insert(_this, `<canvas id='${this.ID}' tabindex='0' class='relative ${this.Settings.cssClass}' type='${this.Settings.type}' correctans='${this.Settings.correctans}' userans=''  height='${this.Settings.height}' width='${this.Settings.width}'></canvas>`, 'beforeend');\n\t\t    this.penSize(this.Settings.penSize);\n\t\t    this.drawingSurface = document.getElementById(this.ID).getContext('2d');\n\t\t    this.drawingSurface.lineWidth = this.penSize();\n\t\t    this.drawingSurface.lineCap = this.cap;\n\t\t    if (false === this.hasTouch()) {\n\t\t        document.getElementById(this.ID).addEventListener('mousedown', this.clickDown.bind(this), true);\n\t\t        document.getElementById(this.ID).addEventListener('mousemove', this.moved.bind(this), true);\n\t\t        document.getElementById(this.ID).addEventListener('mouseup', this.clickUp.bind(this), true);\n\t\t    }\n\t\t    else {\n\t\t        document.getElementById(this.ID).addEventListener('touchstart', this.clickDown.bind(this), true);\n\t\t        document.getElementById(this.ID).addEventListener('touchmove', this.moved.bind(this), true);\n\t\t        document.getElementById(this.ID).addEventListener('touchend', this.clickUp.bind(this), true);\n\t\t    }\n\t\t} else {\n\t\t\tconsole.error(\"Target not defined\");\n\t\t}\n\t}\n\n\tnormalizeTouch(e) {\n\t\tif (true === this.hasTouch()) {\n\t\t\tlet st = window.scrollY;\n\t\t\tif (['touchstart', 'touchmove'].indexOf(e.type) > -1) {\n\t\t\t\te.clientX = e.targetTouches[0].pageX;\n\t\t\t\te.clientY = e.targetTouches[0].pageY - st;\n\t\t\t}\n\t\t\tif (['touchend'].indexOf(e.type) > -1) {\n\t\t\t\te.clientX = e.changedTouches[0].pageX;\n\t\t\t\te.clientY = e.changedTouches[0].pageY - st;\n\t\t\t   }\n\t\t}\n\t\treturn e;\n\t}\n\n\tclickDown(e) {\n\t\tif (true === this.isDrawing()) {\n\t\t\treturn;\n\t\t}\n\t\tif (!e) {\n\t\t\te = window.event;\n\t\t}\n\t\tif (true === this.hasTouch()) {\n\t\t\te.preventDefault();\n\t\t\te = this.normalizeTouch(e);\n\t\t}\n\t\tlet offset = JS.offset(this.Settings.target);\n\t\tlet st = window.scrollY;\n\t\tlet pt = new Point(e.clientX - offset.left, e.clientY - (offset.top-st));\n\t\tthis.prevPoint = pt;\n\t\tthis.drawing = true;\n\t\tthis.Settings.onClick(pt);\n\t\treturn false;\n\t}\n\t\n\tmoved(e) {\n\t\tif (!e) {\n\t\t\te = window.event;\n\t\t}\n\t\tif (true === this.hasTouch()) {\n\t\t\te.preventDefault();\n\t\t\te = this.normalizeTouch(e);\n\t\t}\n\t\tvar offset = JS.offset(this.Settings.target);\n\t\tvar st = window.scrollY;\n\t\tvar pt = new Point(e.clientX - offset.left, e.clientY - (offset.top-st));\n\t\tif (true === this.isDrawing()) {\n\t\t\tthis.drawLine(this.prevPoint.X, this.prevPoint.Y, pt.X, pt.Y);\n\t\t\tthis.prevPoint = pt;\n\t\t\tthis.Settings.onPaint(pt);\n\t\t}\n\t\telse {\n\t\t\tthis.Settings.onMove(pt);\n\t\t}\n\t\treturn false;\n\t}\n\t\n\tclickUp(e) {\n\t\tif (false === this.isDrawing()) {\n\t\t\treturn;\n\t\t}\n\t\tif (true === this.hasTouch()) {\n\t\t\te.preventDefault();\n\t\t\te = this.normalizeTouch(e);\n\t\t}\n\t\tlet offset = JS.offset(this.Settings.target);\n\t\tlet st = window.scrollY;\n\t\tlet pt = new Point(e.clientX - offset.left, e.clientY - (offset.top-st));\n\t\tthis.Settings.onRelease(pt);\t\t    \n\t\tthis.drawing = false;\n\n\t\treturn false;\t\t\t\n\t}\n\n\thasTouch() {\n\t\treturn 'ontouchstart' in window;\n\t}\n\n\tpenSize (e) {\n\t\tif (undefined !== e){\n\t\t\tif (false === isNaN(Number(e))) {\n\t\t\t\tthis.penWidth = e;\n\t\t\t}\n\t\t}\n\t\treturn this.penWidth;\n\t}\n\n\tisDrawing () {\n\t\tif (this.Settings.editable)\n\t\t\treturn this.drawing;\n\t}\n\n\tlineCap(e) {\n\t\tif (undefined !== e) {\n\t\t\tswitch(e){\n\t\t\t\tcase 'butt':\n\t\t\t\tcase 'round':\n\t\t\t\tcase 'square':\n\t\t\t\t\tthis.cap = e;\n\t\t\t\t\tbreak; \n\t\t\t}\n\t\t}\n\t\treturn this.cap;\n\t}\n\n\t//window.color = \"#000000\";\n\tlineColor(e) {\n\t\tif(undefined !== e) {\n\t\t\tlet a = JS.parseHtml(\"<div id='stub' style='backgroundColor:white'></div>\");\n\t\t\ta.style.backgroundColor = e;\n\t\t\tlet b = a.style.backgroundColor\n\t\t\tif ((undefined !== b) && ('' !== b)) {\n\t\t\t\twindow.color = e;\n\t\t\t}\n\t\t}\n\t\treturn window.color;\n\t}\n\n\tcontext() {\n\t\treturn this.drawingSurface;\n\t}\n\n\tclearSurface() {\n\t\tlet width = JS.find(document, 'canvas').getAttribute('width').replace('px','');\n\t\tlet height = JS.find(document, 'canvas').getAttribute('height').replace('px','');\n\t\tthis.drawingSurface.clearRect(0, 0,width,height);\n\t}\n\t\n\tdrawLine(fromX, fromY, toX, toY) {\n\t\tif ((undefined !== fromX) && (undefined !== fromY) && (undefined !== toX) && (undefined !== toY)) {\n\t\t\tif((false === isNaN(Number(fromX))) && (false === isNaN(Number(fromY))) && (false === isNaN(Number(toX))) && (false === isNaN(Number(toY)))) {\n\t\t\t\tthis.drawingSurface.lineCap = this.cap;\t    \n\t\t\t\tthis.drawingSurface.strokeStyle = window.color;\t\t\n\t\t\t\tthis.drawingSurface.lineWidth = this.penWidth;\n\t\t\t\tthis.drawingSurface.beginPath();\t\t\t\t    \n\t\t\t\tthis.drawingSurface.moveTo(fromX, fromY);\t\t\t\t\t\n\t\t\t\tthis.drawingSurface.lineTo(toX, toY);\n\t\t\t\tthis.drawingSurface.stroke();\n\t\t\t}\n\t\t}\n\t}\n}","import JUI from 'javscript_helper/JUI.js';\nconst JS = new JUI();\nexport default class HotspotAuthScript {\n\tconstructor() {\n\t\tthis.count = 0;\n\t\tthis.drawstr = '';\n\t}\n\n\t// elemModal(type, _this, key) {\n\t// \tvar htmlparent = \"#hptmain\";\n\t// \tvar pos = [];\n\t// \t$('#authoring-modal .modal-body>.h').hide();\n\t// \t$('.addElement').unbind('click').bind(\"click\", ()=>{\n\t// \t\tthis.updateElem(type, _this, key)\n\t// \t});\n\t// \tswitch(type) {\n\t// \t\tcase \"div\":\n\t// \t\t\t$('#authoring-modal .title').text('Draggable - '+key);\n\t// \t\t\t$('#authoring-modal .div').show();\n\t// \t\t\t$('#authoring-modal #drag-top').val(pos[0]);\n\t// \t\t\t$('#authoring-modal #drag-left').val(pos[1]);\n\t// \t\t\tbreak;\n\t// \t\tcase \"base\":\n\t// \t\t\t$('#authoring-modal .title').text('Base');\n\t// \t\t\t$('#authoring-modal .base').show();\n\t// \t\t\tbreak;\n\t// \t}\n\t// \t$('#authoring-modal').modal('show');\n\t// \t$('#authoring-modal .events:visible li:eq(0)').click();\n\t// \tvar attributes = $('[id=\"'+key+'\"]').data('attributes');\n\t// \tsetTimeout(function(){\n\t// \t\tfor(var i=0; i<attributes.length; i++)\n\t// \t\t{\n\t// \t\t\tvar t = $('#authoring-modal .h:visible [name=\"'+attributes[i]['name']+'\"]');\n\t// \t\t\tt.val(attributes[i]['value']);\n\t// \t\t}\n\t// \t}, 300);\n\t// }\n\n\tupdateElem(type, _this, key, ui,xml) {\n\t\tlet attributes = JS.serializeArray(JS.find('#authoring-modal','.h', 'visible'), 'input');\n\t\tlet bgimg = \"\", attr = [], wd, hd, tp, lt, where, st;\n\t\tif (typeof(ui) !== \"undefined\") {\n\t\t\tattributes = JSON.parse(JS.select('#'+key).dataset['attributes']);\n\t\t\tif(!attributes) {\n\t\t\t\tlet attributeArr = [];\n\t\t\t\tattributeArr[0] = {name:'id',value:key};\n\t\t\t\tattributeArr[1] = {name:'type', value: 'hotspot'};\n\t\t\t\tattributeArr[2] = {name:'top', value: parseInt(JS.select('#'+key).style.top.split('px')[0]) };\n\t\t\t\tattributeArr[3] = {name:'left', value: parseInt(JS.select('#'+key).style.left.split('px')[0]) };\n\t\t\t\tattributeArr[4] = {name:'width', value: parseInt(JS.select('#'+key).style.width.split('px')[0]) };\n\t\t\t\tattributeArr[5] = {name:'height', value: parseInt(JS.select('#'+key).style.height.split('px')[0]) };\n\t\t\t\tattributes = attributeArr;\n\t\t\t}\n\t\t\tattributes.forEach((_data, index, _orginalArr)=> {\n\t\t\t\tswitch(_data.name) {\n\t\t\t\t\tcase \"width\":\n\t\t\t\t\t\t_data.value = ui.clientWidth;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"height\":\n\t\t\t\t\t\t_data.value = ui.clientHeight;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"top\":\n\t\t\t\t\t\t_data.value = (+(_data.value)  + _this.offsetY) - (ui.clientHeight/2);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"left\":\n\t\t\t\t\t\t_data.value = (+(_data.value) + _this.offsetX) - (ui.clientWidth/2);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t_orginalArr[index] = _data;\n\t\t\t});\n\t\t\tconsole.log(\"after\", attributes,_this);\n\t\t}\n\t\tattributes.forEach((value, index)=> {\n\t\t\tif( value.name == \"width\")  wd = value.value;\n\t\t\tif (value.name == \"height\") hd = value.value;\n\t\t\tif (value.name == \"top\")    tp = value.value;\n\t\t\tif (value.name == \"left\")   lt = value.value;\n\t\t\tif (value.name == \"bgimg\" && value.value.trim() != \"\") {\n\t\t\t\tbgimg = JS.select('#hptmain').getAttribute('path') + value.value.trim();\n\t\t\t}\n\t\t\tattr[value.name] = value.name;\n\t\t});\n\t\tswitch (type) {\n\t\t\tcase \"div\":\n\t\t\t\twhere = `[id=\"${key}\"]`;\n\t\t\t\tJS.select(`[id=\"${key}\"]`, 'css', {width: wd+'px', height: hd+'px', top: tp+'px', left: lt+'px'}).dataset[\"attributes\"] = JSON.stringify(attributes);\n\t\t\t\tbreak;\n\t\t\tcase \"base\":\n\t\t\t\twhere = \"hptmain\";\n\t\t\t\tJS.select('#hptmain').dataset[\"attributes\"] = JSON.stringify(attributes);\n\t\t\t\tbreak;\n\t\t}\n\t\tif (type == \"base\") {\n\t\t\tlet bgholder = (key=='hptmain') ? '#hptmain' : '#hptdraw';\n\t\t\t\n\t\t\tif (bgimg != \"\") {\n\t\t\t\tlet img = new Image();\n\t\t\t\timg.src = bgimg;\n\t\t\t\tlet img_ext = img.src.substr((img.src.lastIndexOf('.') + 1));\n\t\t\t\tsetTimeout(()=> {\n\t\t\t\t\timg.width = img.width > 0 ? img.width : \"600\";\n\t\t\t\t\timg.height = img.height > 0 ? img.height : \"250\";\n\t\t\t\t\tJS.select('#option-toolbar', 'css', {width: img.width});\n\t\t\t\t\tif (img_ext != 'gif') {\n\t\t\t\t\t\tif (JS.selectAll(bgholder + '>img').length > 0) {\n\t\t\t\t\t\t\tJS.select(bgholder, 'css', {width: img.width, height: img.height});\n\t\t\t\t\t\t\tJS.selectAll(bgholder + '>img','attr', {src: bgimg});\n\t\t\t\t\t\t} else if(key == 'hptdraw') {\n\t\t\t\t\t\t\tJS.find(bgholder, 'canvas', {action: 'attr',actionData: {width: img.width, height: img.height} });\n\t\t\t\t\t\t\tJS.selectAll(JS.siblings(bgholder), 'css', {width: img.width});\n\t\t\t\t\t\t\tJS.select(bgholder,'css', {width: img.width, height: img.height, backgroundImage:'url(' + bgimg + ')'});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tJS.insert(JS.select(bgholder, 'css', {width:img.width, height:img.height}), '<img src=\"'+bgimg+'\" />', 'beforebegin');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, 100);\n\t\t\t} else {\n\t\t\t\tif (JS.selectAll(bgholder + '>img').length > 0) {\n\t\t\t\t\tJS.select(bgholder, 'css',{width: \"600px\", height: \"250px\"})\n\t\t\t\t\tJS.select(bgholder + '>img', 'remove');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (type == \"div\") {\n\t\t\treturn this.updateXML(type, where, attributes,tp,lt,xml);\n\t\t}\n\t\tif (img_ext != 'gif' && typeof img != \"undefined\"){\n\t\t\treturn this.updateXML(type, where, attributes,img.width,img.height,xml);\n\t\t} else {\n\t\t\tJS.alert(\"Please Do not use Gif Image!!!\");\n\t\t}\n\t}\n\n\tdrawOnCanvasAuth(el,cord,color) {\n\t\tlet c = document.getElementById(el);\n\t\tlet ctx = c.getContext(\"2d\");\n\t\tlet len = Object.keys(cord).length;\n\t\tif (cord!='') {\n\t\t\tfor (let i = 1; i <= len ; i++) {\n\t\t\t\tfor (let j = 0; j <= cord[i]['x'].length; j++) {\n\t\t\t\t\tctx.beginPath();              \n\t\t\t\t\tctx.lineWidth   = \"4\";\n\t\t\t\t\tctx.strokeStyle = window.color;\n\t\t\t\t\tctx.moveTo(cord[i]['x'][j], cord[i]['y'][j]);\n\t\t\t\t\tctx.lineTo(cord[i]['x'][j+1], cord[i]['y'][j+1]);\n\t\t\t\t\tctx.stroke();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateXML(type, where, attributes,img_w,img_h,xml) {\n\t\tlet xmlDom = JS.parseHtml(xml);\n\t\tlet attr = '', val = '', insert;\n\t\tif (where == \"hptmain\") {\n\t\t\tinsert = xmlDom;\n\t\t} else {\n\t\t\tinsert = JS.find(xmlDom, where);\n\t\t}\n\t\tif (img_w > 0 && img_h > 0) {\n\t\t\tinsert.setAttribute(\"width\", img_w);\n\t\t\tinsert.setAttribute(\"height\", img_h);\n\t\t}\n\t\tif (attributes) {\n\t\t\tfor (let _tempAttr of attributes ) {\n\t\t\t\tif (_tempAttr.value !== \"\") {\n\t\t\t\t\tinsert.setAttribute(_tempAttr.name, _tempAttr.value);\n\t\t\t\t\tif (_tempAttr.name=='type') insert.setAttribute(_tempAttr.value, 'hotspot');\n\t\t\t\t} else {\n\t\t\t\t\tinsert.removeAttribute(_tempAttr.name);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn formatXml(xmlDom.outerHTML);\n\t\t//\t$('#special_module_xml').val(formatXml(xmlDom[0].outerHTML));\n\t} \n}","<script>\n/**\n *  File Name   : Hotspot.js\n *  Description : Container for all Hotspot Authoring Module\n *\tAuthor      : Pradeep Yadav\n *  Version     : 1.0\n *  Package     : pe-items/svelte\n *  Last updated : 01 JAN 2021\n */\n\n    import { Button, Dialog, Checkbox, Snackbar } from 'svelte-mui/src';\n    import {AH, JSONToXML, XMLToJSON} from '../helper/HelperAI.svelte';\n    import {Draggable} from 'javscript_helper/JUI.js';\n    import DooScribPlugin from './HotspotDrawingScript.js';\n    import HotspotAuthScript from './Hotspot_authoringScript.js';\n    import l from '../src/libs/editorLib/language';\n    import { writable } from 'svelte/store';\n    import { onMount } from 'svelte';\n    export let xml;\n    export let editorState;\n    export let getChildXml;\n    const authScript = new HotspotAuthScript();\n    // variable declaration\n    let count = 0;\n    let drawstr = ''; \n    let bgImgHeight = ''; \n    let bgImgWidth = ''; \n    let bgImgPath = '//s3.amazonaws.com/jigyaasa_content_static/'; \n    let hotAreaTop = ''; \n    let hotAreaHeight = ''; \n    let hotAreaWidth = ''; \n    let hotAreaLeft = '';\n    let cmTime = {};\n    let defaultXml = [], moduleArr = [], imgWidth = '', imgHeight = '', correct = '';\n    defaultXml[1] = '<smxml xmlns=\"http://www.w3.org/1999/xhtml\" type=\"4\" name=\"HotSpot\" bgimg=\"\" path=\"\" width=\"600\" height=\"250\"><div id=\"ID0\" type=\"textclick\" top=\"10\" left=\"20\" width=\"30\" height=\"50\"><!--[CDATA[Most cheetahs live in the wilds of Africa. %{There are also some in Iran and northwestern Afghanistan.}% The cheetahs head is smaller than the leopards, and its body is longer. %{This cat is built for speed.}% Its legs are much longer than the leopard, allowing it to run at speeds of up to 70 miles per hour! This incredible ability helps the cheetahs catch their dinner, which is usually an unfortunate antelope. A cheetah spots are simply black spots, not rosettes or circles.]]--></div></smxml>';\n    defaultXml[2] = '<smxml xmlns=\"http://www.w3.org/1999/xhtml\" type=\"4\" name=\"HotSpot\" bgimg=\"\" path=\"\" width=\"600\" height=\"250\"><div id=\"ID0\" type=\"textselect\" top=\"10\" left=\"20\" width=\"30\" height=\"50\"><!--[CDATA[Most cheetahs live in the wilds of Africa. %{There are also some in Iran and northwestern Afghanistan.}% The cheetahs head is smaller than the leopards, and its body is longer. %{This cat is built for speed.}% Its legs are much longer than the leopard, allowing it to run at speeds of up to 70 miles per hour! This incredible ability helps the cheetahs catch their dinner, which is usually an unfortunate antelope. A cheetah spots are simply black spots, not rosettes or circles.]]--></div></smxml>';\n    defaultXml[3] = '<smxml xmlns=\"http://www.w3.org/1999/xhtml\" type=\"4\" name=\"HotSpot\" bgimg=\"star_topology_000dlj.jpg\" path=\"\" width=\"600\" height=\"250\"><div id=\"ID0\" type=\"imagehighlight\" top=\"10\" left=\"20\" width=\"30\" height=\"50\"><!--[CDATA[]]--></div></smxml>';\n    defaultXml[4] = '<smxml xmlns=\"http://www.w3.org/1999/xhtml\" type=\"4\" name=\"HotSpot\" bgimg=\"star_topology_000dlj.jpg\" path=\"\" width=\"600\" height=\"250\"><div id=\"ID0\" type=\"hotspot\" top=\"172\" left=\"220\" width=\"112\" height=\"80\"><!--[CDATA[]]--></div></smxml>';\n\n    // for module type indentification\n    moduleArr[\"1\"] = \"textclick\";\n    moduleArr[\"2\"] = \"textselect\";\n    moduleArr[\"3\"] = \"imagehighlight\";\n    moduleArr[\"4\"] = \"hotspot\";\n    moduleArr[\"textclick\"] = \"1\";\n    moduleArr[\"textselect\"] = \"2\";\n    moduleArr[\"imagehighlight\"] = \"3\";\n    moduleArr[\"hotspot\"] = \"4\";\n    let message = '';\n    let state = {};\n    let hdd =  writable({\n            xml: '',\n            openImg: false,\n            openDrag: false,\n            bgImg: '',\n            snackback: false,\n            valueMultiple: '1',\n            cdata: '',\n            bgImgWidth: \"600px\",\n            bgImgHeight: \"360px\",\n            alt: \"\",\n            imgheight: \"\",\n            imgwidth: \"\",\n            hotBorder: \"\",\n            hotBorderColor: \"\",\n            lineColor: \"\",\n            image_url: \"\"\n        });\n    const unsubscribe = hdd.subscribe((items)=> {\n        state = items;\n    });\n    // this will added the file in the script before rendering  \n    onMount(()=> {\n        // doscribPlugin\n        // only drawOnCanvasAuth() is in use else are not used @pradeep sir Please check\n        //AH.addScript(HotspotAuthoring);\n        AH.createLink(editor.baseUrlTheme + \"clsSMHotspot/css/hotspot.min.css\", {preload: true});\n        didMount();\n    })\n\n    // call just after rendering\n    function didMount() {\n        state.xml =  xml;\n        // here it converts the xml to json using the function XMLToJSON\n        let newXml = XMLToJSON(xml);\n        if (newXml) {\n            // checking for the type if in xml there is any type given or not if not then assign it hotspot type\n            newXml.smxml.div._type = (newXml.smxml.div._type) ? newXml.smxml.div._type : 'hotspot';\n\n            state.valueMultiple = moduleArr[newXml.smxml.div._type];\n\n            // parsing the xml according to the type\n            switch (moduleArr[newXml.smxml.div._type]) {\n                case \"1\": \n                case \"2\": parseXmlForText(newXml); break;\n                case \"3\": parseXmlForDraw(newXml); break;\n                case \"4\": { parseXML(newXml); bindKey(); } break;\n            }\n        }\n        // tinyMCE Plugin\n        tinyMCE.PluginManager.add('res', function (editor) {\n            editor.addMenuItem('resp', {\n                text: \"Add Token\",\n                id: \"addToken\",\n                onclick: function () {\n                    addToken();\n                },\n                context: 'insert',\n                prependToContext: true\n            });\n        });\n        initEditor();\n        AH.listen(document, 'mousedown', '.draggable', setData);\n        cmTime = {};\n        AH.listen(document, 'touchstart', '.tinymce-editor-response', ()=> {\n            cmTime.s = new Date().getTime();\n        })\n        AH.listen(document, 'touchend', '.tinymce-editor-response', ()=> {\n            cmTime.e = new Date().getTime() - cmTime.s;\n            if (cmTime.e / 1000 > 1) {\n                addToken();\n                cmTime = {};\n            }\n        });\n\n        // binding the event for the image upload dialog\n        AH.listen(document, \"click\", \"#upload_media\", ()=> {\n            //AH.getBS(\"#modal-media-upload\", 'Modal').show();\n            window.setImage(\"backgroundImage\");\n        });\n\n        AH.bind(document, 'click', ()=> {\n            state.image_url = bgImgPath + '' + AH.select('#backgroundImage').value;\n        });\n    }\n\n    // for warning purpose\n    function handleWarning() {\n        let height_value = AH.select('#dragHeight').value;\n        let height_integer_value = parseInt(height_value);\n        let width_value = AH.select('#dragWidth').value;\n        let width_integer_value = parseInt(width_value);\n        let top_value = AH.select('#dragTop').value;\n        let top_integer_value = parseInt(top_value);\n        let left_value = AH.select('#dragLeft').value;\n        let left_integer_value = parseInt(left_value);\n        let bgHeight_data = parseInt(bgImgHeight);\n        let bgWidth_data = parseInt(bgImgWidth);\n        if (isNaN(Number(height_value))) {\n            AH.showmsg('Only numeric value accepted.');\n            AH.select('#dragHeight').focus();\n            return false;\n        } else {\n            if (isNaN(height_integer_value)) {\n                AH.showmsg('Only numeric value accepted.');\n                AH.select('#dragHeight').focus();\n                return false;\n            } else {\n                if ((height_integer_value > parseInt((bgHeight_data / 2))) || (height_integer_value < 32)) {\n                    AH.showmsg('Height must be greater than or equal to 32 and less than or equal to ' + parseInt((bgHeight_data / 2)));\n                    AH.select('#dragHeight').focus();\n                    return false;\n                }\n            }\n        }\n\n        if (isNaN(Number(width_value))) {\n            AH.showmsg('Only numeric value accepted.');\n            AH.select('#dragWidth').focus();\n            return false;\n        } else {\n            if (isNaN(width_integer_value)) {\n                AH.showmsg('Only numeric value accepted.');\n                AH.select('#dragWidth').focus();\n                return false;\n            } else {\n                if ((width_integer_value > parseInt((bgWidth_data / 2))) || (width_integer_value < 32)) {\n                    AH.showmsg('Width must be greater than or equal to 32 and less than or equal to ' + parseInt((bgWidth_data / 2)));\n                    AH.select('#dragWidth').focus();\n                    return false;\n                }\n            }\n        }\n\n        if (isNaN(Number(top_value))) {\n            AH.showmsg('Only numeric value accepted.');\n            AH.select('#dragTop').focus();\n            return false;\n        } else {\n            if (isNaN(top_integer_value)) {\n                AH.showmsg('Only numeric value accepted.');\n                AH.select('#dragTop').focus();\n                return false;\n            } else {\n                if ((top_integer_value > (bgHeight_data - height_integer_value)) || (top_integer_value < 0)) {\n                    AH.showmsg('Top value must be greater than or equal to 0 and less than or equal to ' + (bgHeight_data - height_integer_value));\n                    AH.select('#dragTop').focus();\n                    return false;\n                }\n            }\n        }\n\n        if (isNaN(Number(left_value))) {\n            AH.showmsg('Only numeric value accepted.');\n            AH.select('#dragLeft').focus();\n            return false;\n        } else {\n            if (isNaN(left_integer_value)) {\n                AH.showmsg('Only numeric value accepted.');\n                AH.select('#dragLeft').focus();\n                return false;\n            } else {\n                if ((left_integer_value > (bgWidth_data - width_integer_value)) || (left_integer_value < 0)) {\n                    AH.showmsg('Left value must be greater than or equal to 0 and less than or equal to ' + (bgWidth_data - width_integer_value));\n                    AH.select('#dragLeft').focus();\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n\n    // \tit is called in case of text and token highlight to add token\n    function addToken() {\n        // getting the selected text in content variable\n        let content = tinyMCE.activeEditor.selection.getContent({ format: 'raw' });\n\n        // Replacing the content to add style on it\n        content = content.replace(content, '<span data-type=\"select\" class=\"alert alert-info\" cursor=\"pointer\" style=\"padding: 5px;outline: none;line-height:40px;\" contentEditable=\"true\">' + content + '</span>');\n\n        // sett the content\n        tinyMCE.activeEditor.selection.setContent(content);\n\n        // update the cdata \n        setData();\n    }\n\n    // this function init the tinymce editor\n    function initEditor() {\n        tinymce.init({\n            selector: '.tinymce-editor-response',\n            inline: true,\n            theme: 'modern',\n            min_width: 100,\n            resize: true,\n            menubar: false,\n            toolbar: false,\n            elementpath: false,\n            statusbar: false,\n            force_br_newlines: true,\n            remove_trailing_brs: true,\n            forced_root_block: false,\n            paste_as_text: true,\n            //extended_valid_elements : 'input[onChange|id|name|class|style|correctAns|userAns],div[class|style],span[id|contentEditable|class|style]',\n            extended_valid_elements: 'span[onClick|contentEditable]',\n            valid_elements: \"*[*]\",\n            extended_valid_elements: 'uc:syntax,uc:ref',\n            custom_elements: 'uc:syntax,~uc:ref',\n            plugins: [\"res contextmenu paste\"],\n            //toolbar1: \"response\",\n            contextmenu: \"link resp\"\n        });\n    }\n\n    // for parsing the xml\n    function parseXML(QXML) {\n        state.bgImg = QXML.smxml._bgimg;\n        bgImgHeight = QXML.smxml._height + 'px'; // Image Height\n        state.alt = QXML.smxml._alt;\n        bgImgWidth = QXML.smxml._width + 'px'; // Image Width\n        hotAreaWidth = QXML.smxml.div._width + 'px'; // draggable area width\n        hotAreaHeight = QXML.smxml.div._height + 'px'; // draggable area height\n        hotAreaLeft = QXML.smxml.div._left + 'px'; // draggable area left\n        hotAreaTop = QXML.smxml.div._top + 'px'; // draggable area top\n        let image = new Image();\n        image.src = bgImgPath + QXML.smxml._bgimg;\n        image.onload = function () {\n            bgImgHeight = this.height + 'px';\n            bgImgWidth = this.width + 'px';\n            imgHeight = (QXML.smxml.div._imgheight) ? QXML.smxml.div._imgheight + 'px' : \"auto !important\";\n            imgWidth = (QXML.smxml.div._imgwidth) ? QXML.smxml.div._imgwidth + 'px' : \"auto !important\";\n            state.imgwidth = imgWidth;\n            state.imgheight = imgHeight;\n            AH.select('#hptmain', 'css', { 'height': bgImgHeight, 'width': bgImgWidth });\n        };\n        AH.select('#hptmain', 'toggleClass', 'd-none');\n        AH.selectAll('.drawImage,#text0', 'hide');\n        AH.find(document, 'canvas', {action: 'remove'});\n        documentReady();\n    }\n    // for parsing the xml in case of Draw highlight\n    function parseXmlForDraw(QXML) {\n        state.bgImg = QXML.smxml._bgimg;\n        let image = new Image();\n        image.onload = function () {\n            bgImgHeight = (QXML.smxml._height > this.height) ? QXML.smxml._height + 'px' : this.height + 'px';\n            bgImgWidth = (QXML.smxml._width > this.width) ? QXML.smxml._width + 'px' : this.width + 'px';\n            //AH.find('#hptdraw', 'canvas', {action: 'attr', actionData: {height: bgImgHeight, width: bgImgWidth}});\n            AH.find('#previewSection', '.reset').click();\n            AH.find('#mainContent', '#hptdraw canvas', {action: 'attr', actionData: {height: bgImgHeight, width: bgImgWidth, correctans: QXML.smxml.div.__cdata} });\n            // for updating the xml in case of image highlight\n            update_XMLValue();\n        };\n        image.src = bgImgPath + QXML.smxml._bgimg;\n        state.bgImg = QXML.smxml._bgimg;\n        AH.selectAll('.drawImage', 'toggleClass', 'd-none');\n        AH.selectAll('#text0,#hptmain', 'hide');\n        documentReady();\n    }\n\n    // parse xml function for text & token highlight module(textselect, textclick)\n    function parseXmlForText(QXML) {\n        state.cdata = QXML.smxml.div.__cdata;\n        bgImgHeight = QXML.smxml._height + 'px';\n        bgImgWidth = QXML.smxml._width + 'px';\n        AH.select('#text0', 'show');\n        AH.selectAll('.drawImage,#hptmain', 'hide');\n        AH.find(document, 'canvas').remove();\n\n        // for changing the {% , %} , symbols with span\n        getData(QXML.smxml.div.__cdata);\n    }\n\n    // for binding the data\n    function bind_data(xml) {\n        let elem = xml.getAttribute('id'), attrs = [];\n        if (xml.nodeName == \"SMXML\") {\n            elem = xml.children[0].getAttribute('type') == 'imagehighlight' ? \"hptdraw\" : \"hptmain\";\n        }\n        Array.prototype.forEach.call(xml.attributes, (v,i)=> {\n            attrs[i] = { \"name\": v.name, \"value\": v.value };\n        })\n        \n        if (xml.children.length == 0 && xml.textContent.trim() != \"\") {\n            attrs[attrs.length] = { \"name\": \"value\", \"value\": xml.textContent.trim() }\n        }\n        if (typeof elem != \"undefined\") {\n            AH.select('#' + elem).dataset[\"attributes\"] = JSON.stringify(attrs);\n\n        }\n        if (xml.children.length > 0) {\n            Array.prototype.forEach.call(xml.children, (child)=> {\n                bind_data(child);\n            })\n            // for (let i = 0; i < xml.children.length; i++) {\n            //     bind_data(xml.children[i]);\n            // }\n        }\n    }\n\n    // Create The x,y coordinate and decide draggable and also set the user answer\n    function documentReady() {\n        let xaxis = [], yaxis = [];\n        bind_data(AH.parseHtml(state.xml));\n\n        // calling the draggable event on draggable element (which is used for setting answer) \n        // in case of spot an image module\n        let dnd = new Draggable({\n            // onDragStart: (e)=> {\n            //     console.log(\"drag start\", e);\n            // },\n            //onDrag: (e, _ui)=> console.log(\"onDrag\", {X: e.offsetX, Y: e.offsetY}),\n            onDragEnd: (e, ui)=> {\n                state.xml = authScript.updateElem('div', e, ui.getAttribute('id'), ui, state.xml);\n                getChildXml(state.xml);\n            }\n        })\n        \n        // $(\"#hptmain .drag-resize\").resizable({\n        //     stop: function (e, ui) {\n        //         var t = 'div';\n        //         setState({ xml: updateElem(t, this, ui.helper.attr('id'), ui.helper, state.xml) });\n        //         props.getChildXml(state.xml);\n        //     }\n        // });\n\n        // for showing focus on the draggable element\n        AH.listen('#hptmain', 'click', '.drag-resize', function (_this) {\n            AH.selectAll('#hptmain .elemActive', 'removeClass', 'elemActive');\n            AH.select(_this, 'addClass', 'elemActive').focus();\n        });\n\n        // for showing/hiding edit icon of draggable element in case of spot an image\n        AH.bind('#hptmain .drag-resize', 'mouseenter', (event)=> {\n            let _this = event.target;\n            AH.find(_this, '.tools', {action: 'show', actionData: 'block'});\n        })\n        AH.bind('#hptmain .drag-resize', 'mouseleave', (event)=> {\n            let _this = event.target;\n            AH.find(_this, '.tools', {action: 'hide'});\n        });\n\n        // taking image height and width\n        imgWidth = AH.find('#mainContent', '#hptdraw').clientWidth;\n        imgHeight = AH.find('#mainContent', '#hptdraw').clientHeight;\n\n        // calling dooScribPlugin \n        let surface = new DooScribPlugin({\n            target: AH.find('#mainContent', '#hptdraw'),\n            width: imgWidth,\n            height: imgHeight,\n            correctans: correct,\n            cssClass: 'drawSurface',\n            penSize: 4,\n            type: 'imagehighlight',\n            editable: true,\n            onMove: function () { },\n            onClick: function () { },\n            onPaint: function (e) {\n                console.log(\"onPaint auth\");\n                // storeing the X and Y values\n                xaxis.push(e.X);\n                yaxis.push(e.Y);\n            },\n            onRelease: function (e) {\n                AH.select('#special_module_user_xml').value = '';\n                let coor = AH.find('#mainContent', '#hptdraw canvas').getAttribute('correctans');\n                if (coor != '') {\n                    coor = Object.keys(JSON.parse(coor)).length;\n                    getCoordinate(xaxis, yaxis, coor);\n                } else {\n                    getCoordinate(xaxis, yaxis, count);\n                }\n                xaxis = []; yaxis = [];\n                console.log(e);\n            }\n        });\n        let surfaceColor = surface.lineColor(window.color);\n        AH.siblings(AH.find('#mainContent', '#hptdraw')).find((elm)=> {\n            let res = AH.find(elm, 'div').getAttribute('id');\n            AH.bind('#' + res, 'click', function (event) {\n                surface.clearSurface();\n                drawstr = '{}';\n                count = 0;\n                AH.find('#mainContent', '#hptdraw canvas', {action: 'attr', actionData: {correctans: drawstr} });\n                update_XMLValue();\n            });\n            return res;\n        });\n        \n\n        let currentXMl = AH.parseHtml(xml);\n        // if the type is imagehighlisght then draw ib the canvas by getting values from the xml\n        if (currentXMl.getAttribute('type') == 'imagehighlight') {\n            var ans = state.xml;\n            ans = ans.substring(ans.indexOf('{'), ans.lastIndexOf('}') + 1);\n            if (ans != '') {\n                ans = JSON.parse(ans);\n            }\n            setTimeout(function () {\n                // for drawing the path on the canvas by looping through the ans\n                authScript.drawOnCanvasAuth(AH.find('#mainContent', '#hptdraw canvas').getAttribute('id'), ans, surfaceColor);\n            }, 4000);\n        }\n        window.surface = surface;\n    }\n\n    // get the coordinates of xaxis, and yaxis\n    function getCoordinate(xaxis, yaxis, count) {\n        if (count == 0) {\n            drawstr = \"{\\\"\" + (++count) + \"\\\":{\\\"x\\\":[\" + xaxis + \"],\\\"y\\\":[\" + yaxis + \"]}}\";\n        } else {\n            drawstr = AH.find('#mainContent', '#hptdraw canvas').getAttribute('correctans');\n            drawstr = drawstr.slice(0, -1);\n            drawstr += \",\\\"\" + (++count) + \"\\\":{\\\"x\\\":[\" + xaxis + \"],\\\"y\\\":[\" + yaxis + \"]}}\";\n        }\n        AH.find('#mainContent', '#hptdraw canvas', {action: 'attr', actionData: {correctans: drawstr}});\n        update_XMLValue();\n    }\n\n    // it sets the data of variables, states according to the uploaded image and updates the xml\n    function handleUpdatedData(change) {\n        // for checking which type of dialog is\n        if (change == 'img') {\n            // goes in this block if it is the image dialog\n            // setting state and storing the value\n            state.bgImg = AH.select('#backgroundImage').value;\n            state.alt = AH.select('#imgAlt').value;\n            state.imgheight = AH.select('#imgHeight').value;\n            state.imgwidth = AH.select('#imgWidth').value;\n            state.hotBorder = AH.select('#hotBorder').value;\n            state.hotBorderColor = AH.select('#hotBorderColor').value;\n            globalThis.sda = AH.selectAll(\"#backgroundImage, #imgAlt, #imgHeight, #imgWidth, #hotBorder, #hotBorderColor\");\n\n            // here we are updating the value of alt,bgimg,imgheight,imgwidth in the xml state\n            state.xml = state.xml.replace(/alt=\"(.*?)\"/gmi, `alt=\"${state.alt.replace(/\"/g, '&quot;')}\"`);\n            state.xml = state.xml.replace(/bgimg=\"(.*?)\"/gmi, `bgimg=\"${state.bgImg}\"`);\n            state.xml = state.xml.replace(/imgheight=\"(.*?)\"/gmi, `imgheight=\"${state.imgheight}\"`);\n            state.xml = state.xml.replace(/imgwidth=\"(.*?)\"/gmi, `imgwidth=\"${state.imgwidth}\"`);\n            let jj = XMLToJSON(state.xml);\n\n            // setting value of borderm bordercolor, linecolor\n            jj.smxml.div._border = state.hotBorder;\n            jj.smxml.div._bordercolor = state.hotBorderColor;\n            jj.smxml.div._linecolor = window.color;\n            let image = new Image();\n            image.onload = function () {\n                bgImgHeight = this.height + 'px';\n                bgImgWidth = this.width + 'px';\n                AH.select('#hptmain', 'css', { height: bgImgHeight, width: bgImgWidth });\n                // used to update the height and width value when height and width goes over the maximum allowed value or below minimum allowed value\n                if (jj.smxml.div._type == 'imagehighlight') {\n                    jj.smxml._width = this.width;\n                    jj.smxml._height = this.height;\n                    AH.find('#hptdraw', 'canvas', {action: 'attr', actionData: {height: this.height, width: this.width} });\n                    AH.selectAll('#previewSection .reset, #authoringLoadComponent .reset').forEach((_this)=> {\n                        _this.click();\n                    });\n                }\n                state.xml = JSONToXML(jj);\n                // for storing and updating the xml\n                getChildXml(state.xml);\n            };\n            image.src = bgImgPath + state.bgImg;\n            state.openImg = false;\n        } else {\n            var isValidationOk = handleWarning();\n            // goes here if it is draggable elment dialog\n            if (isValidationOk) {\n                var smxml = XMLToJSON(state.xml);\n                hotAreaHeight = smxml.smxml.div._height = parseInt(AH.select('#dragHeight').value);\n                hotAreaWidth = smxml.smxml.div._width = parseInt(AH.select('#dragWidth').value);\n                hotAreaTop = smxml.smxml.div._top = parseInt(AH.select('#dragTop').value);\n                hotAreaLeft = smxml.smxml.div._left = parseInt(AH.select('#dragLeft').value);\n                state.openDrag = false;\n                hotAreaHeight += 'px';\n                hotAreaWidth += 'px';\n                hotAreaTop += 'px';\n                hotAreaLeft += 'px';\n                \n                // for storing and updating the xml\n                getChildXml(JSONToXML(smxml));\n                // setting the current xml on the current xml state\n                state.xml = JSONToXML(smxml);\n            }\n        }\n    }\n    // checks for image when hotspot type is 'imagehighlight' as it passes the min and max allowed condition of height and width\n    function handleSubmit(change) {\n        let json_data = XMLToJSON(state.xml), argument_data = change, isWidthValid = true, isHeightValid = true, handlemodal = false;\n        if (json_data.smxml.div._type == 'imagehighlight') {\n            let image = new Image();\n            image.onload = function () {\n                // this block handle with default image height and width when uploaded image failed the condition\n                if (handlemodal) {\n                    bgImgHeight = json_data.smxml._height + 'px';\n                    bgImgWidth = json_data.smxml._width + 'px';\n                } else {\n                    // used for set the height and width for checking purpose that it passes the min and max condition of height and width\n                    bgImgHeight = this.height + 'px';\n                    bgImgWidth = this.width + 'px';\n                }\n                // handle with width\n                if (this.width >= 100 && this.width <= 1000) {\n                    isWidthValid = true;\n                    // handle with height if width is ok\n                    if (this.height >= 80 && this.height <= 550) {\n                        isHeightValid = true;\n                    } else {\n                        AH.alert(l.height_warning);\n                        isHeightValid = false;\n                    }\n                } else {\n                    AH.alert(l.width_warning);\n                    isWidthValid = false;\n                }\n                \n                // enters in this block if height and width passes the defined min and max condition\n                if (isHeightValid && isWidthValid) {\n                    // handle in case when uploading image failed and then default image sets\n                    if (handlemodal) {\n                        state.openImg = true;\n                    } else {\n                        // goes for other process if height and width passes the defined condition\n                        handleUpdatedData(argument_data);\n                    }\n                } else {\n                    console.log(\"Default Image set\");\n                    // in case when height and width does not passes the defined min and max condition\n                    state.openImg = true;\n                    image.src = bgImgPath + json_data.smxml._bgimg;\n                    AH.selectAll('#backgroundImage').value = json_data.smxml._bgimg;\n                    handlemodal = true;\n                }\n            };\n            image.src = bgImgPath + AH.select('#backgroundImage').value;\n        } else {\n            handleUpdatedData(argument_data);\n        }\n    }\n\n    // for closing the open dialog\n    function handleClose() {\n        //setState({openDrag: false});\n        state.openDrag = false;\n        state.openImg = false;\n    }\n\n    // when image edit button is clicked\n    function changeImg() {\n        // calling the function in timeout to show value after the dialog will open\n        //var timer = setTimeout(function () {\n            // restoring the value of the background image when the dialog will open again\n            AH.select('#backgroundImage').value = state.bgImg;\n            state.image_url = bgImgPath + '' + state.bgImg;\n            AH.select(AH.select('#backgroundImage').previousElementSibling,'css', { transform: \"scale(0.75) translate(0px, -28px)\", color: \"rgb(0, 188, 212)\" });\n            if (state.hotBorder) {\n                // restoring the value of the image border when the dialog will open again\n                AH.select('#hotBorder').value = state.hotBorder;\n                AH.select(AH.select('#hotBorder').previousElementSibling, 'css', { transform: \"scale(0.75) translate(0px, -28px)\", color: \"rgb(0, 188, 212)\" });\n            }\n            if (state.hotBorderColor) {\n                // restoring the value of the image border color when the dialog will open again\n                AH.select('#hotBorderColor').value = state.hotBorderColor;\n                AH.select(AH.select('#hotBorderColor').previousElementSibling, 'css', { transform: \"scale(0.75) translate(0px, -28px)\", color: \"rgb(0, 188, 212)\" });\n            }\n        //     clearTimeout(timer);\n        // }.bind(self), 500);\n\n        // change the state of the openImg true as currently the dialog is open\n        state.openImg = true;\n    }\n\n    // when draggable edit button is clicked\n    function changeDrag() {\n        state.openDrag = true;\n        // calling the function in timeout to show value after the dialog will open\n        var timer = setTimeout(function () {\n            // setting the value of top,left,width,height in case of draggable element icon is clicked\n            AH.select('#dragHeight').value = parseInt(AH.select('#ID0').style.height);\n            AH.select('#dragWidth').value = parseInt(AH.select('#ID0').style.width);\n            AH.select('#dragTop').value = parseInt(AH.select('#ID0').style.top);\n            AH.select('#dragLeft').value = parseInt(AH.select('#ID0').style.left);\n            //$('#dragHeight,#dragWidth,#dragTop,#dragLeft').prev().css({\"transform\": \"scale(0.75) translate(0px, -28px)\",\"color\": \"rgb(0, 188, 212)\"});\n            clearTimeout(timer);\n        }, 300);\n        // change the state of the image to true as the dialog is opened \n    }\n\n    // @pradeep sir Please verify this function is not calling\n    function handleChangeMultiple(event, value) {\n        if (value == 1 || value == 2) {\n            initEditor();\n        }\n        var newXml = XMLToJSON(defaultXml[value])\n        parseXmlForText(newXml);\n        switch (value) {\n            case \"1\": parseXmlForText(newXml); break;\n            case \"2\": parseXmlForText(newXml); break;\n            case \"3\": parseXmlForDraw(newXml); break;\n            case \"4\": parseXML(newXml); break;\n        }\n        state.valueMultiple = value;\n        state.xml = defaultXml[value];\n        getChildXml(state.xml);\n    }\n\n    // calls in case of text and token highlight and change the style of correct answer\n    function getData(xml) {\n        // replacing the correct answer with span to give it styling\n        xml = xml.replace(/%{/gm, '<span data-type=\"select\" class=\"alert alert-info\" cursor=\"pointer\" style=\"padding: 5px;outline: none;line-height:40px;\" contentEditable=\"true\">').replace(/}%/gm, '</span>');\n        AH.find('#mainContent', '.tinymce-editor-response').innerHTML = xml;\n    }\n\n    // update the xml\n    function update_XMLValue() {\n        // get the dom of the xml\n        var xmlDom = AH.parseHtml(state.xml);\n        // get the type\n        var typ = xmlDom.querySelector('div')?.getAttribute('type');\n        // check if the type is imagehighlight then update the cdata\n        if (typ == 'imagehighlight') xmlDom.querySelector('div').innerHTML = '<![CDATA[' + AH.find('#mainContent', '#hptdraw canvas').getAttribute('correctans') + ']]>';\n\n        var getCdata = state.xml;\n        if (getCdata) {\n            // replacing the current state xml with the new one\n            var getCdataClean = state.xml.replace(getCdata, formatXml(xmlDom.xml ? xmlDom.xml : (new XMLSerializer()).serializeToString(xmlDom)));\n            state.xml = getCdataClean.toString();\n            getChildXml(state.xml);\n        }\n    }\n\n    // in case of text & token highlight update the cdata\n    function setData() {\n        var arr = [];\n        var selectedText = '';\n        // for getting the content\n        var data = tinyMCE.activeEditor.getContent({ format: 'raw' });\n        // Here finding the element span having data-type=\"select\" and storing it in arr\n        arr = data.match(/<span data-type=\"select\"(.*?)>(.*?)<\\/span>/gi);\n\n        // if arr is not blank, then changing the text between the span by encolsing it in the symbol {%, %} in the data\n        if (arr) {\n            for (var i = 0; i < arr.length; i++) {\n                selectedText = arr[i].replace(/<span data-type=\"select\"(.*?)>|<\\/span>/gm, '');\n                data = data.replace(arr[i], '%{' + selectedText + '}%');\n            }\n        }\n        // Finding the text betwenn the <!--[CDATA , ]-->\n        var getCdata = state.xml.match(/<!--\\[CDATA\\[(.*?)\\]\\]-->/gm);\n\n        // if match found\n        if (getCdata) {\n            var getCdataClean = getCdata.toString().replace(\"<!--[CDATA[\", '').replace(\"]]-->\", '');\n            //adding the data in cdata and replacing it with current xml cdata\n            getCdataClean = state.xml.replace(getCdata, '<!--[CDATA[' + data + ']]-->');\n\n            // updating the state \n            state.xml = getCdataClean.toString();\n           \n            // updaing and storing the xml\n            getChildXml(getCdataClean.toString());\n        }\n    }\n\n    //For binding key event in case of spot an image\n    function bindKey() {\n        AH.bind(document, 'keydown', (e)=> {\n            // in case of ctrl key and shift key is stored \n            /**\n             * 37 : left arrow key\n             * 38 : up arrow key\n             * 39 : right arrow key\n             * 40 : down arrow key\n             * 27 : esc key\n            */\n            if (e.ctrlKey && e.shiftKey) {\n                switch ((e.keyCode).toString()) {\n                    case \"37\":\n                        setPS(-10, 0, 0, 0);\n                        break;\n                    case \"38\":\n                        setPS(0, -10, 0, 0);\n                        break;\n                    case \"39\":\n                        setPS(10, 0, 0, 0);\n                        break;\n                    case \"40\":\n                        setPS(0, 10, 0, 0);\n                        break;\n                }\n            } else if (e.shiftKey) {\n                // in case of shiftKey\n                switch ((e.keyCode).toString()) {\n                    case \"37\":\n                        setPS(-1, 0, 0, 0);\n                        break;\n                    case \"38\":\n                        setPS(0, -1, 0, 0);\n                        break;\n                    case \"39\":\n                        setPS(1, 0, 0, 0);\n                        break;\n                    case \"40\":\n                        setPS(0, 1, 0, 0);\n                        break;\n                }\n            } else if (e.ctrlKey) {\n                // in case of ctrl key\n                switch ((e.keyCode).toString()) {\n                    // arrow keys\n                    case \"37\":\n                        setPS(0, 0, 0, -10);\n                        break;\n                    case \"38\":\n                        setPS(0, 0, -10, 0);\n                        break;\n                    case \"39\":\n                        setPS(0, 0, 0, 10);\n                        break;\n                    case \"40\":\n                        setPS(0, 0, 10, 0);\n                        break;\n                }\n            } else {\n                switch ((e.keyCode).toString()) {\n                    case \"27\":\n                        // esc key\n                        AH.selectAll('.dragable-container .ui-draggable', 'removeClass', 'elemActive');\n                        break;\n                    case \"38\":\n                        // up arrow\n                        e.preventDefault();\n                        setPS(0, 0, -1, 0);\n                        break;\n                    case \"40\":\n                        // down arrow\n                        e.preventDefault();\n                        setPS(0, 0, 1, 0);\n                        break;\n                }\n            }\n        });\n    }\n\n    // for changing linecolor \n    function changeLine(elem) {\n        // setting the target value color in linecolor state\n        state.lineColor = elem.target.value;\n        // setting it in window\n        window.color = state.lineColor;\n    }\n\n    // for setting position or size of the draggable element in spot an image module\n    function setPS (w, h, t, l, del) {\n        console.log(\"setps\");\n        let ac = AH.select('#ID0');\n        if (ac) {\n            let acRect = ac.getBoundingClientRect();\n            let key = ac.getAttribute('id');\n            let xmlDom = AH.parseHtml(state.xml);\n            let insert = xmlDom.querySelector('[id=\"' + key + '\"]');\n            if (typeof (del) !== \"undefined\" && del) {\n                if (confirm('Do you want to delete it?')) {\n                    ac.remove();\n                    insert.remove();\n                }\n            } else if (ac.offsetWidth > 0 && ac.offsetHeight > 0) { // is visible\n                w = ac.clientWidth + w;\n                h = ac.clientHeight + h;\n                t = acRect.top + t;\n                l = acRect.left + l;\n                AH.select(ac, 'css', { width: w + \"px\", height: h + \"px\", top: t + \"px\", left: l + \"px\" });\n                let attributes = AH.select('[id=\"' + key + '\"]').dataset['attributes'];\n                JSON.stringify(attributes).forEach((value, index)=> {\n                    switch (value.name) {\n                        case \"width\":\n                            value.value = parseInt(ac.clientWidth);\n                            insert.setAttribute('width', value.value);\n                            break;\n                        case \"height\":\n                            value.value = parseInt(ac.clientHeight);\n                            insert.setAttribute('height', value.value);\n                            break;\n                        case \"top\":\n                            value.value = parseInt(acRect.top);\n                            insert.setAttribute('top', value.value);\n                            break;\n                        case \"left\":\n                            value.value = parseInt(acRect.left);\n                            insert.setAttribute('left', value.value);\n                            break;\n                    }\n                });\n                AH.select('[id=\"' + key + '\"]').dataset['attributes'] = attributes;\n            }\n\n            // for updating the xml\n            AH.select('#special_module_xml').value = xmlDom.xml ? xmlDom.xml : (new XMLSerializer()).serializeToString(xmlDom[0]);\n            state.xml = xmlDom.xml ? xmlDom.xml : (new XMLSerializer()).serializeToString(xmlDom[0]);\n            getChildXml(xmlDom.xml ? xmlDom.xml : (new XMLSerializer()).serializeToString(xmlDom[0]));\n        }\n    }\n</script>\n<div>\n    <center class=\"mt\" id=\"mainContent\">\n        <div\n            class=\"tinymce-editor-response\"\n            id=\"text0\"\n            type={moduleArr[0]}\n            style=\"\n                width: {bgImgWidth}, \n                height: {bgImgHeight}, \n                border: 1px solid #ccc; \n                outline: none; \n                padding: 10px; \n                textAlign: left; \n                display: none; \n                overflowY: scroll\n            \"\n            on:keyup={setData}\n            contentEditable=\"true\"\n        >\n        </div>\n        <div class=\"drawImage d-none\">\n            <div \n                style = \"\n                width: {bgImgWidth}; \n                height: 32px;\n                background: #d9e7fd;\n                border-top: 2px solid #96bbf6\n            \"\n            >\n                <div \n                    id=\"resetAuth\" \n                    class=\"reset btn btn-outline-primary btn-sm height27 mt-sm2 mr-sm2 float-right\"\n                    style=\"width: 90px;\"\n                >\n                    <span class=\"icomoon-new-24px-reset-1 s3\" style=\"vertical-align: text-top\"></span> \n                    <span class=\"position-relative bottom1\">{l.reset}</span>\n                </div>\n            </div>\n            <div \n                id=\"hptdraw\" \n                style=\"\n                    width: {bgImgWidth}; \n                    height: {bgImgHeight}; \n                    background-image: url('{bgImgPath + state.bgImg}'); \n                    background-repeat: no-repeat; \n                    position: relative; \n                    border: 1px solid #e0e0e0;\n                \"\n            >\n                <div class=\"btn-group tools\">\n                    <button \n                        type=\"button\" \n                        on:click={changeImg.bind(this, 'img')} \n                        class=\"btn btn-light px-1 pt-sm1 pb-sm1 mt\"\n                    >\n                        <i class=\"icomoon-24px-edit-1\"></i>\n                    </button>\n                </div>\n            </div>\n        </div>\n        <div \n            id=\"hptmain\" \n            path={bgImgPath} \n            class=\"d-none\"\n            style=\"position: relative; width: {bgImgWidth};\"\n        >\n            <div class=\"btn-group tools\">\n                <button \n                    type=\"button\" \n                    on:click={changeImg.bind(this, 'img')} \n                    class=\"btn btn-light px-1 pt-sm1 pb-sm1 mt\"\n                >\n                    <i class=\"icomoon-24px-edit-1\"></i>\n                </button>\n            </div>\n            <img \n                id=\"im\" \n                class=\"hotSpotImg border\" \n                src={bgImgPath + state.bgImg} \n                style=\"\n                    height: {state.imgheight};\n                    width: {state.imgwidth}; \n                    border: {state.hotBorder};\n                    border-color: {state.hotBorderColor};\n                \" \n                alt={state.alt} \n            />\n            <div \n                draggable={true}\n                class=\"drag-resize position-absolute\" \n                id=\"ID0\" \n                style=\"left: {hotAreaLeft}; top: {hotAreaTop}; height: {hotAreaHeight}; width: {hotAreaWidth};\"\n            >\n                <div class=\"btn-group tools h\">\n                    <button \n                        type=\"button\" \n                        on:click={changeDrag.bind(this, 'drag')} \n                        class=\"btn btn-light px-1 pt-sm1 pb-sm1\"\n                    >\n                        <i class=\"icomoon-24px-edit-1\"></i>\n                    </button>\n                </div>\n            </div>\n        </div>\n        <textarea \n            class=\"d-none\" \n            id=\"special_module_xml\" \n            name=\"special_module_xml\" \n            value={state.xml}\n        ></textarea>\n    </center>\n    <Dialog width=\"600\" bind:visible={state.openImg}>\n        <div slot=\"title\" style=\"text-align: left;\">\n            <div style=\"\">Image</div>\n        </div>\n        <div>\n            <div class=\"d-flex\">\n                <input\n                    type=\"text\"\n                    id=\"backgroundImage\"\n                    disabled=\"true\"\n                    value={state.bgImg}\n                    margin=\"normal\"\n                    style=\"pointer-events: none; width: 76%;\"\n                    class=\"form-control mr-2\"\n                />\n                <button\n                    id=\"upload_media\"\n                    type=\"button\"\n                    value=\"Upload Media\"\n                    margin=\"normal\"\n                    class=\"btn btn-outline-primary position-relative\"\n                >Upload image</button>\n            </div>\n            <div class=\"mx-auto width8 p-2 border mt-2\">\n                <img src={state.image_url} alt=\"background\" class=\"img img-responsive span7\" />\n            </div>\n            <span>\n                <label for=\"imgAlt\" class={(state.valueMultiple == 4) ? \"my-1 text-dark\" : \"hidden\"}>Image Alt</label>\n            </span>\n            <input\n                type=\"text\"\n                id=\"imgAlt\"\n                placeholder=\"Alt text\"\n                class={(state.valueMultiple == 4) ? \" form-control mt-0\" : \"hidden form-control mt-0\"}\n                defaultValue={state.alt}\n                margin=\"normal\"\n                style=\"width: -webkit-fill-available;\"\n            />\n            <div class={(state.valueMultiple == 4) ? \"d-inline-block pr-2 mt-2 w-sm\" : \"hidden\"}>\n                <span>\n                    <label for=\"hotBorder\" class=\"my-1 text-dark\">Border width</label>\n                </span>\n                <select id=\"hotBorder\" class=\"form-control\">\n                    <option value=\"0\">None</option>\n                    <option value=\"1\">1</option>\n                    <option value=\"2\">2</option>\n                    <option value=\"3\">3</option>\n                    <option value=\"4\">4</option>\n                    <option value=\"5\">5</option>\n                </select>\n            </div>\n            <div class={(state.valueMultiple == 4) ? \"d-inline-block mt-2 w-sm\" : \"hidden\"}>\n                <span>\n                    <label for=\"hotBorderColor\" class=\"my-1 text-dark\">Border color</label>\n                </span>\n                <select id=\"hotBorderColor\" class=\"form-control\">\n                    <option value=\"white\">None</option>\n                    <option value=\"black\">Black</option>\n                    <option value=\"grey\">Grey</option>\n                </select>\n            </div>\n            <br />\n            <div class={(state.valueMultiple == 3) ? \" \" : \"hidden\"}>\n                <span>\n                    <label for=\"setLineColor\" class=\"mt-2 text-dark\">Draw line color</label>\n                </span>\n                <select id=\"setLineColor\" class=\"form-control\" value={state.lineColor} on:blur={changeLine.bind(this)} >\n                    <option>Please Select</option>\n                    <option value=\"red\">Red</option>\n                    <option value=\"black\">Black</option>\n                    <option value=\"blue\">Blue</option>\n                </select>\n            </div>\n        </div>\n        <div slot=\"footer\" class=\"svelteFooter\" >\n            <Button\n                on:click={handleClose}\n                style=\"text-transform: none\"\n                key={l.cancel}\n            >\n                {l.cancel}\n            </Button>\n            <Button\n                on:click={handleSubmit.bind(this, 'img')}\n                class=\"bg-primary text-white\"\n                style=\"text-transform: none\"\n                key={l.submit}\n            >\n                {l.submit}\n            </Button>\n        </div>\n    </Dialog>\n    <Dialog width=\"600\" bind:visible={state.openDrag}>\n        <div slot=\"title\" style=\"text-align: left;\">\n            <div style=\"\">Hotspot</div>\n        </div>\n        <div>\n            <div class=\"row\">\n                <div class=\"col-6 pr-1\">\n                    <span>\n                        <label for=\"dragHeight\" class=\"my-1 text-dark\">Height</label>\n                    </span>\n                    <input\n                        type=\"number\"\n                        id=\"dragHeight\"\n                        placeholder=\"Height\"\n                        defaultValue=\" \"\n                        class=\"form-control\"\n                    />\n                </div>\n                <div class=\"col-6 pl-1\">\n                    <span>\n                        <label for=\"dragWidth\" class=\"my-1 text-dark\">Width</label>\n                    </span>\n                    <input\n                        type=\"number\"\n                        id=\"dragWidth\"\n                        placeholder=\"Width\"\n                        defaultValue=\" \"\n                        class=\"form-control\"\n                    />\n                </div>\n            </div>\n            <div class=\"row mt-2\">\n                <div class=\"col-6 pr-1\">\n                    <span>\n                        <label for=\"dragTop\" class=\"my-1 text-dark\">Top</label>\n                    </span>\n                    <input\n                        type=\"number\"\n                        id=\"dragTop\"\n                        placeholder=\"Top\"\n                        defaultValue=\" \"\n                        class=\"form-control\"\n                    />\n                </div>\n                <div class=\"col-6 pl-1\">\n                    <span>\n                        <label for=\"dragLeft\" class=\"my-1 text-dark\">Left</label>\n                    </span>\n                    <input\n                        type=\"number\"\n                        id=\"dragLeft\"\n                        placeholder=\"Left\"\n                        defaultValue=\" \"\n                        class=\"form-control\"\n                    />\n                </div>\n            </div>    \n        </div>\n        <div slot=\"footer\" class=\"svelteFooter\">\n            <Button\n                on:click={handleClose}\n                style=\"text-transform: none\"\n                key={l.cancel + \"1\"}\n            >\n                {l.cancel}\n            </Button>\n            <Button\n                on:click={handleSubmit.bind(this, 'drag')}\n                class=\"bg-primary text-white\"\n                style=\"text-transform: none\"\n                key={l.done}\n            >\n                {l.done}\n            </Button>\n        </div>\n    </Dialog>\n    <Snackbar bind:visible={state.snackback} bg=\"#f44336\" bottom={true} timeout={10} style=\"position:fixed; bottom:50px\">\n        {message}\n        <span slot=\"action\">\n            <Button color=\"#ff0\" on:click={() => (state.snackback = false)}>Close</Button>\n        </span>\n    </Snackbar>\n</div>"],"names":["Point","a","b","isNaN","Number","this","x","y","X","Y","JS","JUI","DooScribPlugin","[object Object]","options","prevPoint","undefined","defaultOptions","target","penSize","width","height","cssClass","onClick","e","onMove","onPaint","onRelease","penWidth","drawing","cap","ID","Math","floor","random","drawingSurface","Settings","console","log","init","_this","getAttribute","empty","insert","type","correctans","document","getElementById","getContext","lineWidth","lineCap","hasTouch","addEventListener","clickDown","bind","moved","clickUp","error","st","window","scrollY","indexOf","clientX","targetTouches","pageX","clientY","pageY","changedTouches","isDrawing","event","preventDefault","normalizeTouch","offset","pt","left","top","drawLine","editable","parseHtml","style","backgroundColor","color","find","replace","clearRect","fromX","fromY","toX","toY","strokeStyle","beginPath","moveTo","lineTo","stroke","HotspotAuthScript","count","drawstr","key","ui","xml","wd","hd","tp","lt","where","attributes","serializeArray","bgimg","attr","JSON","parse","select","dataset","attributeArr","name","value","parseInt","split","forEach","_data","index","_orginalArr","clientWidth","clientHeight","offsetY","offsetX","trim","stringify","bgholder","img","Image","src","img_ext","substr","lastIndexOf","setTimeout","selectAll","length","action","actionData","siblings","backgroundImage","updateXML","alert","el","cord","ctx","len","Object","keys","i","j","img_w","img_h","xmlDom","setAttribute","_tempAttr","removeAttribute","formatXml","outerHTML","l","cancel","submit","bgImg","image_url","valueMultiple","alt","lineColor","done","message","openImg","openDrag","snackback","reset","bgImgPath","imgheight","imgwidth","hotBorder","hotBorderColor","editorState","getChildXml","authScript","bgImgHeight","bgImgWidth","hotAreaTop","hotAreaHeight","hotAreaWidth","hotAreaLeft","cmTime","defaultXml","moduleArr","imgWidth","imgHeight","state","writable","cdata","subscribe","items","addToken","content","tinyMCE","activeEditor","selection","getContent","format","setContent","setData","bind_data","elem","attrs","nodeName","children","Array","prototype","call","v","textContent","AH","child","documentReady","xaxis","yaxis","Draggable","onDragEnd","updateElem","listen","focus","surface","push","coor","getCoordinate","surfaceColor","elm","res","clearSurface","update_XMLValue","ans","substring","drawOnCanvasAuth","slice","handleUpdatedData","change","globalThis","sda","jj","XMLToJSON","smxml","div","_border","_bordercolor","_linecolor","image","onload","_type","_width","_height","click","JSONToXML","height_value","height_integer_value","width_value","width_integer_value","top_value","top_integer_value","left_value","left_integer_value","bgHeight_data","bgWidth_data","showmsg","handleWarning","_top","_left","querySelector","innerHTML","getCdata","getCdataClean","XMLSerializer","serializeToString","toString","arr","selectedText","data","match","setPS","w","h","t","del","ac","acRect","getBoundingClientRect","confirm","remove","offsetWidth","offsetHeight","onMount","createLink","editor","baseUrlTheme","preload","newXml","QXML","__cdata","getData","_bgimg","parseXmlForDraw","_alt","_imgheight","_imgwidth","parseXML","ctrlKey","shiftKey","keyCode","PluginManager","add","addMenuItem","text","id","context","prependToContext","tinymce","selector","inline","theme","min_width","resize","menubar","toolbar","elementpath","statusbar","force_br_newlines","remove_trailing_brs","forced_root_block","paste_as_text","extended_valid_elements","valid_elements","custom_elements","plugins","contextmenu","s","Date","getTime","setImage","didMount","json_data","argument_data","isWidthValid","isHeightValid","handlemodal","height_warning","width_warning","previousElementSibling","transform","timer","clearTimeout"],"mappings":"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"}