import{S as e,i as t,s as l,D as c,q as r,h as o,e as a,u as m,f as s,Y as n,j as i,x as h,o as d,z as u,b as _,g,l as f,c as p,m as b,t as x,a as A,d as E,C as F,a4 as v,p as y,X as D,A as w,w as C,W as k}from"./main-ddd9bfcc.js";import{I as B}from"./ItemHelper-b90d5f4b.js";import{l as q}from"./parseCSV-929be628.js";function N(e){c(e,"svelte-1tugc6q",".fa-close{margin-left:20px;font-size:18px;position:absolute;top:10px;color:#A80000}.fa-check{margin-left:20px;font-size:18px;position:absolute;top:10px;color:#46A546}.fa-close,.fa-check.svelte-1tugc6q,.middle_align.svelte-1tugc6q{vertical-align:middle!important}.middle_align{width:164px;min-width:164px}.topic_input{min-width:257px}.preview_header{font-size:16pt;font-weight:bold;vertical-align:middle}.adjust_width{width:10%;text-align:center}.theme_color_theme1.svelte-1tugc6q{background-color:#5B9BD5!important}.theme_color_theme2.svelte-1tugc6q{background-color:#3B67BC!important}.theme_color_theme3.svelte-1tugc6q{background-color:#F6C3A2!important}.theme_color_theme4.svelte-1tugc6q{background-color:#70AD47!important}.theme_color_theme5.svelte-1tugc6q{background-color:#745998!important}.theme_color_terms_theme1.svelte-1tugc6q{background-color:#DEEAF6}.theme_color_terms_theme2.svelte-1tugc6q{background-color:#D4DEF1}.theme_color_terms_theme3.svelte-1tugc6q{background-color:#FAE0CF}.theme_color_terms_theme4.svelte-1tugc6q{background-color:#E2EFD9}.theme_color_terms_theme5.svelte-1tugc6q{background-color:#E1DAE9}")}function S(e,t,l){const c=e.slice();return c[29]=t[l],c[31]=l,c}function $(e,t,l){const c=e.slice();return c[32]=t[l],c[34]=l,c}function M(e,t,l){const c=e.slice();return c[29]=t[l],c[31]=l,c}function R(e){let t,l=e[2].cdata.option,c=[];for(let t=0;t<l.length;t+=1)c[t]=j(M(e,l,t));return{c(){for(let e=0;e<c.length;e+=1)c[e].c();t=r()},m(e,l){for(let t=0;t<c.length;t+=1)c[t].m(e,l);o(e,t,l)},p(e,r){if(36&r[0]){let o;for(l=e[2].cdata.option,o=0;o<l.length;o+=1){const a=M(e,l,o);c[o]?c[o].p(a,r):(c[o]=j(a),c[o].c(),c[o].m(t.parentNode,t))}for(;o<c.length;o+=1)c[o].d(1);c.length=l.length}},d(e){u(c,e),e&&d(t)}}}function j(e){let t,l,c,r,u,_=e[29].text.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"";return{c(){t=a("th"),l=m(_),s(t,"key",c=e[31]),s(t,"class",r=n(("#5B9BD5"==e[5][e[2].theme]?"theme_color_theme1":"#3B67BC"==e[5][e[2].theme]?"theme_color_theme2":"#F6C3A2"==e[5][e[2].theme]?"theme_color_theme3":"#70AD47"==e[5][e[2].theme]?"theme_color_theme4":"#745998"==e[5][e[2].theme]?"theme_color_theme5":"")+" preview_header adjust_width "+("theme3"!==e[2].theme?e[29].id+"text-center text-white":e[29].id+"text-center"))+" svelte-1tugc6q"),s(t,"tabindex",u=0)},m(e,c){o(e,t,c),i(t,l)},p(e,c){4&c[0]&&_!==(_=e[29].text.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"")&&h(l,_),4&c[0]&&r!==(r=n(("#5B9BD5"==e[5][e[2].theme]?"theme_color_theme1":"#3B67BC"==e[5][e[2].theme]?"theme_color_theme2":"#F6C3A2"==e[5][e[2].theme]?"theme_color_theme3":"#70AD47"==e[5][e[2].theme]?"theme_color_theme4":"#745998"==e[5][e[2].theme]?"theme_color_theme5":"")+" preview_header adjust_width "+("theme3"!==e[2].theme?e[29].id+"text-center text-white":e[29].id+"text-center"))+" svelte-1tugc6q")&&s(t,"class",r)},d(e){e&&d(t)}}}function J(e){let t,l=e[1].cdata.term,c=[];for(let t=0;t<l.length;t+=1)c[t]=z(S(e,l,t));return{c(){for(let e=0;e<c.length;e+=1)c[e].c();t=r()},m(e,l){for(let t=0;t<c.length;t+=1)c[t].m(e,l);o(e,t,l)},p(e,r){if(598&r[0]){let o;for(l=e[1].cdata.term,o=0;o<l.length;o+=1){const a=S(e,l,o);c[o]?c[o].p(a,r):(c[o]=z(a),c[o].c(),c[o].m(t.parentNode,t))}for(;o<c.length;o+=1)c[o].d(1);c.length=l.length}},d(e){u(c,e),e&&d(t)}}}function O(e){let t,l,c,r,m,h,u,g,p,b,x,A,E,F,v,y,D,w,C,k,B,q,N,S,$;return{c(){t=a("td"),l=a("i"),r=_(),m=a("i"),u=_(),g=a("input"),y=_(),D=a("label"),s(l,"class","fa fa-check svelte-1tugc6q"),s(l,"aria-hidden","true"),s(l,"style",c=T(e[4])),s(m,"class","fa fa-close"),s(m,"aria-hidden","true"),s(m,"style",h=T(e[4])),s(g,"type","radio"),s(g,"class","test_radio CMRad"),s(g,"style",p="vertical-align:middle;"),g.value=b=e[32].id,s(g,"name",x="tm"+(e[31]+1)),s(g,"id",A="t"+e[31]+e[34]),s(g,"data-termid",E=e[29].id),s(g,"data-correct",F=e[29].correct),s(g,"data-userans",""),s(g,"data-role","none"),s(g,"tabindex",v=-1),s(D,"tabindex",w=0),s(D,"class",C="label_choice customRadCM "+(e[34]%2==0?"tureitemColorCM":"falseitemColorCM")),s(D,"for",k="t"+e[31]+e[34]),s(t,"key",B=e[34]),s(t,"id",q="tb"+e[31]+e[34]),s(t,"class",N=n((e[31]%2==0?"#DEEAF6"==e[6][e[2].theme]?"theme_color_terms_theme1":"#D4DEF1"==e[6][e[2].theme]?"theme_color_terms_theme2":"#FAE0CF"==e[6][e[2].theme]?"theme_color_terms_theme3":"#E2EFD9"==e[6][e[2].theme]?"theme_color_terms_theme4":"#E1DAE9"==e[6][e[2].theme]?"theme_color_terms_theme5":"#FFF":"#FFF")+" text-center test_area"+(e[32].id==e[29].correct?" dbg-success":" dbg-danger")+" position-relative")+" svelte-1tugc6q")},m(c,a){o(c,t,a),i(t,l),i(t,r),i(t,m),i(t,u),i(t,g),i(t,y),i(t,D),S||($=f(g,"click",e[9]),S=!0)},p(e,l){2&l[0]&&b!==(b=e[32].id)&&(g.value=b),2&l[0]&&E!==(E=e[29].id)&&s(g,"data-termid",E),2&l[0]&&F!==(F=e[29].correct)&&s(g,"data-correct",F),6&l[0]&&N!==(N=n((e[31]%2==0?"#DEEAF6"==e[6][e[2].theme]?"theme_color_terms_theme1":"#D4DEF1"==e[6][e[2].theme]?"theme_color_terms_theme2":"#FAE0CF"==e[6][e[2].theme]?"theme_color_terms_theme3":"#E2EFD9"==e[6][e[2].theme]?"theme_color_terms_theme4":"#E1DAE9"==e[6][e[2].theme]?"theme_color_terms_theme5":"#FFF":"#FFF")+" text-center test_area"+(e[32].id==e[29].correct?" dbg-success":" dbg-danger")+" position-relative")+" svelte-1tugc6q")&&s(t,"class",N)},d(e){e&&d(t),S=!1,$()}}}function z(e){let t,l,c,r,m,h,f,p=e[29].text.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"",b=e[1].cdata.option,x=[];for(let t=0;t<b.length;t+=1)x[t]=O($(e,b,t));return{c(){t=a("tr"),l=a("td"),m=_();for(let e=0;e<x.length;e+=1)x[e].c();h=_(),s(l,"class",c=n((e[31]%2==0?"#DEEAF6"==e[6][e[2].theme]?"theme_color_terms_theme1":"#D4DEF1"==e[6][e[2].theme]?"theme_color_terms_theme2":"#FAE0CF"==e[6][e[2].theme]?"theme_color_terms_theme3":"#E2EFD9"==e[6][e[2].theme]?"theme_color_terms_theme4":"#E1DAE9"==e[6][e[2].theme]?"theme_color_terms_theme5":"#FFF":"#FFF")+" "+e[29].id+" position-relative")+" svelte-1tugc6q"),s(l,"tabindex",r=0),g(l,"font-size","14pt"),g(l,"vertical-align","middle"),g(l,"font-family",e[2].font),s(t,"key",f=e[31])},m(e,c){o(e,t,c),i(t,l),l.innerHTML=p,i(t,m);for(let e=0;e<x.length;e+=1)x[e].m(t,null);i(t,h)},p(e,r){if(2&r[0]&&p!==(p=e[29].text.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"")&&(l.innerHTML=p),6&r[0]&&c!==(c=n((e[31]%2==0?"#DEEAF6"==e[6][e[2].theme]?"theme_color_terms_theme1":"#D4DEF1"==e[6][e[2].theme]?"theme_color_terms_theme2":"#FAE0CF"==e[6][e[2].theme]?"theme_color_terms_theme3":"#E2EFD9"==e[6][e[2].theme]?"theme_color_terms_theme4":"#E1DAE9"==e[6][e[2].theme]?"theme_color_terms_theme5":"#FFF":"#FFF")+" "+e[29].id+" position-relative")+" svelte-1tugc6q")&&s(l,"class",c),4&r[0]&&g(l,"font-family",e[2].font),598&r[0]){let l;for(b=e[1].cdata.option,l=0;l<b.length;l+=1){const c=$(e,b,l);x[l]?x[l].p(c,r):(x[l]=O(c),x[l].c(),x[l].m(t,h))}for(;l<x.length;l+=1)x[l].d(1);x.length=b.length}},d(e){e&&d(t),u(x,e)}}}function W(e){let t,l,c,r,u,g,f,F,v,y,D,w,C,k,q,N,S,$,M=e[2].stem.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"";l=new B({props:{handleReviewClick:e[10],reviewMode:e[0],customReviewMode:e[3]}}),l.$on("setReview",e[7]),l.$on("unsetReview",e[8]);let j=e[2].cdata&&R(e),O=e[1].cdata&&J(e);return{c(){t=a("div"),p(l.$$.fragment),c=_(),r=a("center"),u=a("table"),g=a("thead"),f=a("tr"),F=a("th"),v=m(M),w=_(),j&&j.c(),C=_(),k=a("tbody"),O&&O.c(),s(F,"class",y=n(("#5B9BD5"==e[5][e[2].theme]?"theme_color_theme1":"#3B67BC"==e[5][e[2].theme]?"theme_color_theme2":"#F6C3A2"==e[5][e[2].theme]?"theme_color_theme3":"#70AD47"==e[5][e[2].theme]?"theme_color_theme4":"#745998"==e[5][e[2].theme]?"theme_color_theme5":"")+" preview_header "+("theme3"!==e[2].theme?"text-center text-white":" text-center"))+" svelte-1tugc6q"),s(F,"tabindex",D=0),s(f,"class","table-head"),s(u,"class",q="table testmode_table "),s(u,"id","test_table"),s(u,"style",N="position:relative; margin-top:20px;width:"+e[2].maxWidth+"px;font-family: Georgia;"),s(t,"class","mainAdaArea"),s(t,"id","choicemain"),s(t,"style",S="margin-bottom:20px")},m(e,a){o(e,t,a),b(l,t,null),i(t,c),i(t,r),i(r,u),i(u,g),i(g,f),i(f,F),i(F,v),i(f,w),j&&j.m(f,null),i(u,C),i(u,k),O&&O.m(k,null),$=!0},p(e,t){const c={};1&t[0]&&(c.reviewMode=e[0]),l.$set(c),(!$||4&t[0])&&M!==(M=e[2].stem.replace(/\n/gm,"</br>").replace(/#cm/gm,",")+"")&&h(v,M),(!$||4&t[0]&&y!==(y=n(("#5B9BD5"==e[5][e[2].theme]?"theme_color_theme1":"#3B67BC"==e[5][e[2].theme]?"theme_color_theme2":"#F6C3A2"==e[5][e[2].theme]?"theme_color_theme3":"#70AD47"==e[5][e[2].theme]?"theme_color_theme4":"#745998"==e[5][e[2].theme]?"theme_color_theme5":"")+" preview_header "+("theme3"!==e[2].theme?"text-center text-white":" text-center"))+" svelte-1tugc6q"))&&s(F,"class",y),e[2].cdata?j?j.p(e,t):(j=R(e),j.c(),j.m(f,null)):j&&(j.d(1),j=null),e[1].cdata?O?O.p(e,t):(O=J(e),O.c(),O.m(k,null)):O&&(O.d(1),O=null),(!$||4&t[0]&&N!==(N="position:relative; margin-top:20px;width:"+e[2].maxWidth+"px;font-family: Georgia;"))&&s(u,"style",N)},i(e){$||(x(l.$$.fragment,e),$=!0)},o(e){A(l.$$.fragment,e),$=!1},d(e){e&&d(t),E(l),j&&j.d(),O&&O.d()}}}function I(){let e=document.getElementsByClassName("test_radio");for(let t=0;t<e.length;t++)e[t].getAttribute("id")==e[t].getAttribute("data-userans")?e[t].checked=!0:e[t].checked=!1}function L(){!function(){let e=document.querySelectorAll(" .test_radio");for(let t=0;t<e.length;t++)e[t].getAttribute("value")==e[t].getAttribute("data-correct")?e[t].checked=!0:e[t].checked=!1}(),H()}function H(){let e=document.getElementsByClassName("fa-check"),t=document.getElementsByClassName("fa-close");for(let l=0;l<e.length;l++)e[l].style.display="none",t[l].style.display="none"}function T(e){return 1==e?{paddingLeft:"14px",display:"inline-flex",position:"absolute"}:{paddingLeft:"15px",display:"none",position:"absolute"}}function G(e,t,l){let c,{showAns:r}=t,{editorState:o}=t,{xml:a}=t,{uxml:m}=t,{isReview:s}=t,{CM:n}=t,i=s,h={cdata:""},d={},u=0;C({cdata:"",stem:"",xml:"",theme:"",font:"",maxWidth:"",totalcorrectans:""}).subscribe((e=>{l(2,d=e)}));function _(){let e=function(){let e=0,t=0,l=document.getElementsByClassName("test_radio");for(let t=0;t<l.length;t++)if(l[t].getAttribute("value")==l[t].getAttribute("data-correct")){if(1!=l[t].checked)return e=0,l[t].setAttribute("as",0),!1;l[t].setAttribute("as",1),e=1}for(let e=0;e<l.length;e++)l[e].getAttribute("value")==l[e].getAttribute("data-correct")&&1==l[e].checked&&t++,"undefined"!=typeof calculatePoint&&calculatePoint(d.totalcorrectans,t);return e}();e=1==e,m?w.select("#answer").checked=e:o&&r(e?"Correct":"Incorrect"),k({uXml:c,ans:e})}function g(){I(),w.select(".dbg-success input","checked").forEach((e=>{w.siblings(e,".fa-check").forEach((e=>{e.style.display="inline-flex"}))})),w.select(".dbg-danger input","checked").forEach((e=>{w.siblings(e,".fa-close").forEach((e=>{e.style.display="inline-flex"}))})),w.selectAll(".dbg-success input, .dbg-danger input","removeAttr","as"),w.select(".dbg-success input","checked").forEach((e=>{e.setAttribute("as",1)})),w.select(".dbg-success input","checked").forEach((e=>{e.setAttribute("as",0)})),w.select(".dbg-success input","checked").forEach((e=>{w.siblings(e,".label_choice").forEach((e=>{e.setAttribute("title","is marked as correct")}))})),w.select(".dbg-danger input","checked").forEach((e=>{w.siblings(e,".label_choice").forEach((e=>{e.setAttribute("title","is marked as incorrect")}))}))}function f(){l(0,s=!0),b(s),g()}function p(){l(0,s=!1);let e=document.getElementsByClassName("test_radio");for(let t=0;t<e.length;t++)e[t].disabled=!1;H()}function b(e){if(e){let e="#main-"+n,t=w.selectAll(e+" .test_radio");for(let e=0;e<t.length;e++)t[e].disabled=!0}}return F((()=>{var e;a!=d.xml&&(l(2,d.xml=a,d),e=m,function(e,t){l(2,d.theme=e.smxml._theme,d),l(2,d.font=e.smxml._font,d),l(2,d.maxWidth=e.smxml._maxwidth?e.smxml._maxwidth:800,d);let c=q.parseCSVFormat(e.smxml.__cdata),r=[];r=JSON.parse(JSON.stringify(c)),l(2,d.cdata=r,d),l(2,d.stem=r.stem,d),l(1,h.cdata=r,h);let o=h.cdata.term.length;if(l(2,d.totalcorrectans=o,d),p(),t)try{t=JSON.parse(t);let e=[];e=JSON.parse(JSON.stringify(t)),setTimeout((function(){e.ans.map((function(e,t){w.selectAll(".test_area #"+e.userAns,"attr",{"data-userans":e.userAns})})),I()}),100)}catch(e){}else{let e=document.getElementsByClassName("test_radio");for(let t=0;t<e.length;t++)e[t].checked=!1,e[t].setAttribute("data-userans","")}}(D(a),e))})),v((()=>{b(i),s||H()})),y((()=>{AI.listen("body","keydown",".label_choice",(function(e,t){13===t.which&&e.click()}))})),e.$$set=e=>{"showAns"in e&&l(11,r=e.showAns),"editorState"in e&&l(12,o=e.editorState),"xml"in e&&l(13,a=e.xml),"uxml"in e&&l(14,m=e.uxml),"isReview"in e&&l(0,s=e.isReview),"CM"in e&&l(15,n=e.CM)},e.$$.update=()=>{69633&e.$$.dirty[0]&&(s?(f(),o&&0==u&&(l(16,u=1),_())):(l(16,u=0),I(),p()))},[s,h,d,i,undefined,{theme1:"#5B9BD5",theme2:"#3B67BC",theme3:"#F6C3A2",theme4:"#70AD47",theme5:"#745998"},{theme1:"#DEEAF6",theme2:"#D4DEF1",theme3:"#FAE0CF",theme4:"#E2EFD9",theme5:"#E1DAE9"},function(){f()},function(){I(),p()},function(e){let t=e.target.id,l=e.target.name,r=document.querySelectorAll(" .test_area input[name="+l+"]");for(let e=0;e<r.length;e++)r[e].setAttribute("data-userans","");w.selectAll(" .test_area #"+t,"attr",{"data-userans":t});let o={type:"34",ans:[]},a=document.getElementsByClassName("test_radio");for(let e=0;e<a.length;e++)1==a[e].checked&&o.ans.push({id:a[e].getAttribute("data-termid"),userAns:a[e].getAttribute("id")});c=JSON.stringify(o),_()},function(e,t){"c"==e?L():g()},r,o,a,m,n,u]}export default class extends e{constructor(e){super(),t(this,e,G,W,l,{showAns:11,editorState:12,xml:13,uxml:14,isReview:0,CM:15},N,[-1,-1])}}
//# sourceMappingURL=ChoiceMatrixPreview-27097194.js.map
