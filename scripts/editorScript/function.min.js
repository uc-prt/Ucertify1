function addScript(e){document.body.append('<script class="reactScript">'+e+"<\/script>")}function showUcExpStep(e){let t=e.closest(".uc_step_explanation");AI.select(AI.find(t,".uc_step","hidden")[0],"show","block"),0===AI.find(t,".uc_step","hidden").length&&AI.select(e,"hide")}function activateMathMl(e,t,n){!t&&"function"==typeof n&&e.match(/\\begin/gm)&&n("previewSection",!0)}function loadBackup(e,t,n){let a=document.querySelector(window.frameElement).getAttribute("guid");window.parent.contentDB.get("overallContent").then(function(e){if(e.content)for(let l in e.content)e.content[l].guid==a&&(n(formatData(e.content[l].title),formatData(e.content[l].stem),formatData(e.content[l].remediation)),t("guid",e.content[l].guid),t("content_type",e.content[l].content_type),setTimeout(function(){t("item","Blank")},1e3),setTimeout(function(){t("item",parseInt(e.content[l].item)),t("xml",e.content[l].xml+" ")},1100))})}function replaceUnwantedTags(e,t){try{e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=`${e}`).replace(/&#160;/g," ").replace(/   /g," &#160; ").replace(/  /g,"&#160; ")).replace(/\$/g,"&#36;")).replace(/<[Bb][Rr]><table/g,"<table")).replace(/<li><[Bb][Rr]>/g,"<li>")).replace(/<[Bb][Rr]><\/li>/g,"</li>")).replace(/<\/li>\s*<[Bb][Rr]>/g,"</li>")).replace(/<\/ul><[Bb][Rr]>/g,"</ul>")).replace(/<[Bb][Rr]><\/ul>/g,"</ul>")).replace(/<[Bb][Rr]><ul>/g,"<ul>")).replace(/<[Bb][Rr]><ol>/g,"<ol>")).replace(/<\/ol><[Bb][Rr]>/g,"</ol>")).replace(/<[Bb][Rr]><\/ol>/g,"</ol>")).replace(/<[Bb][Rr]><li>/g,"<li>")).replace(/<grammarly-btn([\s\S]*?)<\/grammarly-btn>/g,"")).replace(/<grammarly([\s\S]*?)<\/grammarly([\s\S]*?)>/g,"")).replace(/<main.*?data-remove="true"[\s\S]*?<\/main>/g,"")).replace(/class\=(\"|\')ebook_item_text.*?(\"|\')/g,"class='ebook_item_text'")).replace(/(\'|\")ebook_item_text(\'|\").*?\>/g,"'ebook_item_text'>")).replace(/(\'|\")ebook_item_text inline(\'|\").*?\>/g,"'ebook_item_text inline'>")).replace(/(\'|\")inline ebook_item_text(\'|\").*?\>/g,"'ebook_item_text inline'>")).replace(/mce-item-table/g,"")).replace(/\<input type="hidden".*?\>|\<input type="hidden".*?\/>/gm,""),"remediation"==t&&(e=(e=e.replace(/inline_new/,"inline")).replace(/sec_button inline|sec_button/,"sec_button inline").replace(/ebook_item_text inline|ebook_item_text/,"ebook_item_text inline"))}catch(e){console.log("It seems incorrect active area / cursor position")}return e}function replacePreTag(e,t){return e&&e.match(/\<pre.*?class=[\'\"](.*?)[\'\"].*?\>[\s\S]*?\<\/pre\>/gi)?e.replace(/\<pre.*?class=[\'\"](.*?)[\'\"].*?\>[\s\S]*?\<\/pre\>/gi,function(e,n){console.warn("Replacing Pre Tags");let a=e;return t.map(e=>{a=a.replace(e.tag,e.customTag)}),convertUcSyntaxSpaceInEntity(a)}):(console.log("Pre tag Not found"),e)}function showHints(e){let t=e.closest(".uc_answer_hint");AI.select(AI.find(t,"li","hidden")[0],"show","block");let n=AI.find(t,"li","hidden").length;0===n&&(n="No",AI.find(t,".hint_show",{action:"attr",actionData:{disabled:!0}})),AI.find(t,".li_count",{action:"html",actionData:n})}function requireScript(e,t){const n=document.createElement("script");n.src=e,n.setAttribute("class","reactScript"),n.async=!0,n.onload=t,document.body.appendChild(n)}function refreshPopover(){AI.getBS('.image_popover[data-bs-toggle="popover"]',"Popover",{html:!0,content:function(){return document.getElementById("popover-content").innerHTML}})}function toggleSave(e){AI.get("save_item")||AI.set("save_item",1==e)}function updateItemInfData(e){if(e)e.getAttribute("icon")?(AI.removeClass(".item_icon_list .active","active"),AI.addClass(e,"active")):"cong_level"==e.id?AI.set("cong_level",e.value):e.setAttribute("contentEditable",!0),AI.select(".inf_update_btn").style.display="inline-block";else{AI.activate(2);let e={ajax:"1",action:"update_editor_item_inf",content_guid:AI.get("current_guid"),ref_id:AI.select(".item_ref_id").textContent,isDraft:AI.get("draft"),content_icon:AI.get("current_item_icon"),cong_level:AI.get("cong_level"),course:editor.course,anno_id:AI.select("#cong_level").getAttribute("annoid")};AI.ajax({url:baseUrl+"editor/index.php",data:e}).then(e=>{AI.activate(0),console.log(e),1==e?AI.showmsg("Data updated successfully."):AI.showmsg("Updation failed.")})}}function openDropDown(e,t,n){n&&(AI.select("#selected_item_icon").setAttribute("class","float-left s4 mr middle "+e.getAttribute("data-filter-icon")),AI.select("#selected_item_title").textContent=e.getAttribute("data-filter-title"),AI.set("current_item_icon",e.getAttribute("data-filter-value")),AI.selectAll(".inf_update_btn","show")),AI.select(t)}function checkNewGuid(e,t){if(""!=e&&e!=t){let n=AI.url();n.set("content_guid",e),n.get("router_guid")?n.set("router_guid",n.get("router_guid").replace("#","")+","+e):n.set("router_guid",t+","+e),window.location=decodeURIComponent(n.toString())}}function updateDatabase(e,t){window.parent&&window.parent.contentDB.get("overallContent").then(function(n){if(n.content){for(let a in n.content)n.content[a].guid==e&&(n.content[a]=AI.extend(n.content[a],t),n.content[a].guid=e);return window.parent.contentDB.put(n).then(function(e){}).catch(function(t){console.log("Error found in update Database",t),updateDatabase(e)})}})}function addUpdateDataBase(){AI.listen(window.parent.document,"click","#backupIt",function(){timer.updateDataBaseTimer=setTimeout(function(){updateDatabase(AI.select(window.frameElement).getAttribute("guid")),clearTimeout(timer.updateDataBaseTimer)},1e3)})}function getParent(e){let t="";return(e="object"==typeof e?e:document.querySelector(e))&&e.closest("ul, ol")&&(t=e.closest("ul, ol")),t}function get_ucsyntax(e){if(e){let t=(e=e.replace(/\$/g,"&#36;")).match(/<uc:syntax([\s\S]*?)<\/uc:syntax>/gi);if(t)for(let n=0;n<t.length;n++){let a="",l="",r=t[n],i=r.match(/<uc:syntax(.*?)>/gi);i[0].match(/console/gim)?(l="prettyprint black linenums",i[0].match(/nonum/gim)&&(l+=" hidelinenums")):l=i[0].match(/command/gim)?"prettyprint cmd linenums":i[0].match(/white/gim)?i[0].match(/nonum/gim)?"prettyprint white":"prettyprint white linenums":i[0].match(/nonum/gim)?"prettyprint hidelinenums":"prettyprint linenums",i[0].match(/hidelinenums/gim)&&(l+=" hidelinenums");let o=r.match(/\snum="(.*?)"/gim);o&&(o[0]=o[0].replace(/\snum=|"/gim,""),l+=":"+o[0]),a+=`<pre class="${l}">${r=(r=r.replace(/<uc:syntax(.*?)>/gim,"")).replace(/<\/uc:syntax>/gim,"")}</pre>`;let c=new RegExp(RegExp.quote(t[n]),"gm");e=e.replace(c,a)}return e}}function changeSlide(e,t){let n=e.parentElement.querySelector(".slider_fade.active"),a=1==t?n.nextElementSibling:n.previousElementSibling;if(a&&a.classList.contains("slider_fade")){e.parentElement.querySelectorAll(".slider_fade").forEach(e=>{e.style.display="none"}),n.classList.remove("active"),a.classList.add("active"),a.style.display="block"}else console.warn("No slide found")}function seqTag(e,t){if(t=t||!1,e&&isValidContent(e)){let n=e.match(/<seq(.*?)><\/seq>|<snt(.*?)><\/snt>/gim);if(n)for(let t=0;t<n.length;t++){let a=n[t].replace(/><\/seq>|><\/snt>/gim," />").replace(/data-style/gim,"style");e=e.replace(n[t],a)}e=customTableReplace(e);let a=["div","li","table","tbody","tr","td","th","h1","h2","h3","h4","h5","h6","pre","p","figure","figcaption","dl","dt","section","main","article"];for(let t in a)e=e.replace(new RegExp(a[t]+">\\s+<","g"),a[t]+"><").replace(new RegExp(">\\s+<"+a[t],"g"),"><"+a[t]).replace(new RegExp(">\\s+</"+a[t],"g"),"></"+a[t]).replace(new RegExp("\n.<"+a[t],"g"),"<"+a[t]).replace(new RegExp(a[t]+">\n","g"),a[t]+">");return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/<br \/> |<br\/> |<br> | <br \/>| <br\/>| <br>|<br \/>|<br\/>|<br>/gim,"\n")).replace(/<g class([\s\S]*?)>|<\/g>/,"")).replace(/<grammarly-btn([\s\S]*?)<\/grammarly-btn>/g,"")).replace(/<grammarly([\s\S]*?)<\/grammarly([\s\S]*?)>/g,"")).replace(/<p><\/p>/,"\n")).replace(new RegExp("\n.<ul|\n<ul","g"),"<ul")).replace(new RegExp("\n.<ol|\n<ol","g"),"<ol")).replace(/\[/g,"&lsqb;")).replace(/<main data-remove="true"[\s\S]*?<\/main>/g,"")).replace(/class\=(\"|\')ebook_item_text.*?(\"|\')/g,"class='ebook_item_text'")).replace(/(\'|\")ebook_item_text(\'|\").*?\>/g,"'ebook_item_text'>")).replace(/(\'|\")ebook_item_text inline(\'|\").*?\>/g,"'ebook_item_text inline'>")).replace(/(\'|\")inline ebook_item_text(\'|\").*?\>/g,"'ebook_item_text inline'>")).replace(/mce-item-table/g,"")).replace(/\<input type="hidden".*?\>|\<input type="hidden".*?\/>/gm,""),"remed"==t&&(e=e.replace(/sec_button inline|sec_button/,"sec_button inline").replace(/ebook_item_text inline|ebook_item_text/,"ebook_item_text inline")),1==t&&(e=e.replace(/<p>/gim,"\n").replace(/<\/p>/,"")),e}return""}function isValidContent(e){return'<br data-mce-bogus="1">'!=e&&'<b class="text-muted">Title</b>'!=e&&"&#160;"!=e||(console.log("Invalid = ",e),!1)}function br2nl(e){if(e)return e.replace(/<br \/> |<br\/> |<br> | <br \/>| <br\/>| <br>|<br \/>|<br\/>|<br>/gim,"\n").replace(/&nbsp;/g," ")}function nl2br(e){return e?e.replace(/\r\n|\n/g,"<BR>"):""}function removeSection(e){return new Promise(t=>{try{let t=e.className,n=document.createElement("DIV");n.setAttribute("data-section",t),n.setAttribute("type",e.getAttribute("type")),n.setAttribute("sub_type",e.getAttribute("sub_type")),e.getAttribute("class").includes("inline")?(n.setAttribute("class","ebook_item_text inline"),n.innerHTML=1==e.childNodes.length?e.firstChild.innerHTML:e.innerHTML):(n.setAttribute("class","ebook_item_text"),n.innerHTML=e.innerHTML),e.after(n)}catch(t){console.log(e)}t(!0)})}function formatData(e,t=!1){if(e){let n=e.match(/<snt(.*?)\/>/gim);if(n)for(let t=0;t<n.length;t++){let a=n[t].replace(/style/gim,"data-style");e=e.replace(n[t],a)}return e=e.replace(/\r\n|\n/g,"<BR>"),t&&(e=convertUcSyntaxSpaceInEntity(e)),e}}function convertUcSyntaxSpaceInEntity(e){try{if(e&&e.match(/<uc:syntax/gm)){RegExp.escape=function(e){return e.replace(/[-\/\\^$*+.()|[\]{}]/g,"\\$&")};let t=e.match(/<uc\:syntax[\s\S]*?<\/uc\:syntax>/gim);if(t)for(let n in t){let a=t[n];t[n]=t[n].replace(/\s{2}/g,"&#160;&#160;").replace(/&#160;\s|\s&#160;/g,"&#160;&#160;"),e=e.replace(new RegExp(RegExp.escape(a),"gim"),t[n])}}}catch(e){console.warn("Issue in converting <uc:syntax",e)}return e}function checkAnsMode(e){document.getElementById("ansModeAnswer").value=e}function getLabSimAnswer(e){document.getElementById("labAnswer").value=e.result}function customTableReplace(e){return e=(e=e.replace(/<uc\:table/gim,"<table").replace(/<uc\:thead/gim,"<thead").replace(/<uc\:tbody/gim,"<tbody").replace(/<uc\:tfoot/gim,"<tfoot").replace(/<uc\:th/gim,"<th").replace(/<uc\:td/gim,"<td").replace(/<uc\:tr/gim,"<tr")).replace(/<\/uc\:table>/gim,"</table>").replace(/<\/uc\:thead>/gim,"</thead>").replace(/<\/uc\:tbody>/gim,"</tbody>").replace(/<\/uc\:tfoot>/gim,"</tfoot>").replace(/<\/uc\:th>/gim,"</th>").replace(/<\/uc\:td>/gim,"</td>").replace(/<\/uc\:tr>/gim,"</tr>")}function getQueryString(e){var t=RegExp("[?&]"+e+"=([^&]*)").exec(window.location.search);return t&&decodeURIComponent(t[1].replace(/\+/g," "))}function getEditable(e){return'<br data-mce-bogus="1">'!=e&&"&#160;"!=e?e:""}function showWeblinkIframeEditor(e){AI.select(".load_data","hide");let t=e.contentDocument||e.contentWindow.document;e.setAttribute("height","100%"),e.setAttribute("width","100%");let n=document.body.clientHeight;"object"!=typeof t.querySelector(".editor_close")&&t.querySelector(".editor_close").getAttribute("onclick","window.parent.editorClose()"),AI.setCss(t.querySelector("#authoringSection"),{maxHeight:n-140,minHeight:n/2}),AI.setCss(t.querySelector("#previewSection"),{minHeight:n/2,maxHeight:n-113})}function editorClose(){AI.trigger("#editor_close_btn","click"),AI.select(".modal-backdrop.in").remove(),AI.select("html").style.overflow="auto"}function getURLParameter(e){let t=window.location.search.substring(1).split("&");for(let n=0;n<t.length;n++){let a=t[n].split("=");if(a[0]==e)return a[1]}}RegExp.quote=function(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")};var EXAMMAPPING="";function checkedExamObjective(e){if(""!=EXAMMAPPING&&"null"!=EXAMMAPPING){let t=EXAMMAPPING;AI.selectAll('input[name="exam_obj[]"]').forEach(e=>e.checked=!1),AI.select('input[name="exam_obj[]"]').parentElement.style.background="#fff";let n=getURLParameter("content_guid");for(let a in t)if(e.previousElementSibling&&e.previousElementSibling.value==a||window.frameElement&&window.frameElement.getAttribute("guid")==a||n==a){let a=n||(1!=from_myproject?e.previousElementSibling.value:window.frameElement.getAttribute("guid"));for(a=t[a].split(","),i=0;i<=a.length;i++)AI.setCss(AI.select("#radio_"+a[i]).parentElement,{background:"#e3e3eb"}),AI.select("#radio_"+a[i]).checked=!0}setTimeout(function(){AI.bind("input.exam_obj_radio","click",function(e){AI&&AI.set("exma_obj_changed",!0)})},1e3)}}function loadExamObjective(e){document.querySelectorAll(".popover").forEach(e=>e.style.display="none"),AI.select(".parent_ul").classList.add("list-unstyled"),0==document.querySelector(".exam_modal_body").querySelectorAll(".parent_ul li").length?(AI.activate(1),AI.ajax({url:`${baseUrl}index_data.php?func=get_exam_obj_list&ajax=1&course_code=${editor.course}&get_mapping=1&from_myproject=${from_myproject}`}).then(t=>{let n=JSON.parse(t),a=n.obj;if(EXAMMAPPING=n.mapping,document.querySelectorAll(".parent_ul li").forEach(e=>{e.remove()}),"null"!=a)for(let e in a){AI.insert(".parent_ul",'<li class="radio parent_li_'+e+' my-2" tag_guid="'+e+'"><label class="border exam_obj_label w-100 p rounded"><input type="checkbox" class="exam_obj_radio h" id="radio_'+e+'" name="exam_obj[]" value="'+e+'" /><div class="mt-sm"></div><span>'+a[e].n+'</span></label><ul class="child_ul list-unstyled"></ul></li>',"beforeend");for(let t in a[e].c)AI.insert(AI.select(".parent_li_"+e).querySelector(".child_ul"),'<li class="radio child_li pl-4 my-2" tag_guid="'+t+'" ><label class="border exam_obj_label w-100 p rounded"><input type="checkbox" class="exam_obj_radio h" name="exam_obj[]" id="radio_'+t+'" value="'+t+'" /><div class="mt-sm"></div><span>'+a[e].c[t].n+"</span></label></li>","beforeend")}checkedExamObjective(e),AI.activate(0)})):checkedExamObjective(e)}function searchText(e){document.querySelectorAll(".exam_modal_body ul > li").forEach(function(t){let n=t.textContent.toUpperCase(),a=e.value.toUpperCase();-1!=n.indexOf(a)?t.style.display="block":t.style.display="none"})}function assignObjective(e){let t=AI.prevElm(e,"#guid_hidden").value,n=AI.select('input[name="exam_obj"]',"checked")[0].value;AI.activate(1),AI.ajax({url:`${baseUrl}?func=assign_exam_objective&course_code=${editor.course}>&content_guid=${t}&tag_guid=${n}&save=1`}).then(function(e){let n=JSON.parse(e);AI.select("#exam_obj_"+t).remove(),document.getElementById("test_"+t)&&AI.insert("#test_"+t,'<div class="mb-md" id="exam_obj_'+t+'"><b class="h">'+$l.exam_objective_uppercase+': </b><span class="parent'+t+'"></span><span class="close pointer delete_tag float-right" content_guid="'+t+'">&times;</span><div><b class="exam_b">'+$l.exam_objective_uppercase+': </b><span class="tag_name'+t+'"></span></div></div>',"afterend"),document.querySelector(".obj_"+t)&&AI.insert(".obj_"+t,`<div id="exam_obj_${t}" class="exam_objective mb-md"><span class="close pointer delete_tag float-right" content_guid="${t}">&times;</span><div class="float-left mt-sm mr"><img src="${themeUrl}images/certification_objective.png" alt="certification_objective"></div><div class="ml-xl pl-5 about font15 line_height1"><div class="h4">${l.exam_objectives}</div><div class="parent${t}"></div><div class="tag_name${t}"></div></div></div>`,"beforebegin"),n.parent&&(document.getElementById("test_"+t)&&(document.querySelector(".exam_b").parentElement.style.textIndent="164px",document.querySelector(".parent"+t).previousElementSibling.classList.remove("h"),document.querySelectorAll(".exam_b").forEach(e=>e.style.display="none")),document.querySelector(".obj_"+t)&&document.querySelector(".tag_name"+t).classList.add("sub_exam_obj"),document.querySelector(".parent"+t).textContent=n.parent);for(let e in n)for(let a in n[e].exam_objective)document.querySelector(".tag_name"+t).textContent=n[e].exam_objective[a];AI.showmsg("Exam objective saved successfully!"),AI.activate(0)})}function selectObjRadio(e){0==e.checked?(e.parentElement&&(e.parentElement.style.background="#fff"),AI.selectAll("#assign_exam_obj","removeAttr","disabled")):(AI.select("#assign_exam_obj").disabled=!0,e.parentElement&&(e.parentElement.style.background="#e3e3eb"))}function formatXml(e,t){let n=t||!1;if(n)var a=e.match(/<!--\[CDATA\[[\s\S]*?\]\]-->/gim);if(e=(e=e.replace(/\t/g,"")).replace(/(>)(<)(\/*)/g,"$1\n$2$3").replace(/ *(.*) +\n/g,"$1\n").replace(/(<.+>)(.+\n)/g,"$1\n$2"),n){var l=e.match(/<!--\[CDATA\[[\s\S]*?\]\]-->/gim);e=e.replace(l,a)}let r="",i=e.split("\n"),o=0,c="other",s={"single->single":0,"single->closing":-1,"single->opening":0,"single->other":0,"closing->single":0,"closing->closing":-1,"closing->opening":0,"closing->other":0,"opening->single":1,"opening->closing":0,"opening->opening":1,"opening->other":1,"other->single":0,"other->closing":-1,"other->opening":0,"other->other":0};for(let e=0;e<i.length;e++){var d=i[e];if(""!=d){var u=Boolean(d.match(/<.+\/>/)),m=Boolean(d.match(/<\/.+>/)),p=Boolean(d.match(/<[^!].*>/)),g=u?"single":m?"closing":p?"opening":"other",b=c+"->"+g;c=g;var f="";o+=s[b];for(var h=0;h<o;h++)f+="\t";"opening->closing"==b?r=r.substr(0,r.length-1)+d+"\n":r+=f+d+"\n"}}return r}function functionForFullscreen(){var e=document.getElementById("authoringFrame");BigScreen.enabled&&BigScreen.toggle(e),BigScreen.onenter=function(){document.querySelector("#authoringFrame").contentDocument.querySelector("#fullScreenButton").innerText="Back To Editor";const e=document.querySelector("#authoringFrame").contentDocument.querySelector("#smartFullscr i");e&&(e.classList.remove("icomoon-expand"),e.classList.add("icomoon-contract"));const t=document.querySelectorAll(".educator_my_items");t.length>0&&t.forEach(e=>e.setAttribute("style","position: relative; z-index: -1;"));const n=document.querySelectorAll("#titlebar");n.length>0&&n.forEach(e=>e.setAttribute("style","display: none;"));const a=document.querySelectorAll("#bottombar");a.length>0&&a.forEach(e=>e.setAttribute("style","display: none"))},BigScreen.onexit=function(){document.querySelector("#authoringFrame").contentDocument.querySelector("#fullScreenButton").innerText="FullScreen";const e=document.querySelector("#authoringFrame").contentDocument.querySelector("#smartFullscr i");e&&(e.classList.add("icomoon-expand"),e.classList.remove("icomoon-contract"));const t=document.querySelectorAll(".educator_my_items");t.length>0&&t.forEach(e=>e.setAttribute("style","z-index: initial;"));const n=document.querySelectorAll("#titlebar");n.length>0&&n.forEach(e=>e.setAttribute("style","display: block;"));const a=document.querySelectorAll("#bottombar");a.length>0&&a.forEach(e=>e.setAttribute("style","display: block"))}}function scrollToTop(e){if(0===document.scrollingElement.scrollTop)return;const t=document.scrollingElement.scrollTop;let n=t,a=null;window.requestAnimationFrame(function l(r){if(null!==a){if((n-=t*(r-a)/e)<=0)return document.scrollingElement.scrollTop=0;document.scrollingElement.scrollTop=n}a=r,window.requestAnimationFrame(l)})}function scrollnow(e){}var UCUTIL=UCUTIL||{};function getTestFrameworkDetail(e){const t=document.querySelector("#uc-item-test-template");if(t){var n=t.setAttribute("temp_test_view");return!e&&n&&""!=n?n:t.attr("view")}return-1}function createPlayerEmbed(e,t,n,a,l){var r="";return n=n||!1,t=t||!1,l=l||!1,"inline"==e?r='<iframe tabindex="0" title="'+t+'" src="'+n+'" onload="autoResize(this.id)" allow="fullscreen" allowfullscreen="true" webkitallowfullscreen="true" mozallowfullscreen="true"'+a+"></iframe>":"overlay"==e?r='<button tabindex="0" type="button" '+a+">"+l+"</button>":"new_tab"==e&&(r='<a tabindex="0" href="'+n+'" target="_blank" '+a+">"+l+"</a>"),r}function getPlayerAttrVal(e,t){var n="",a="",l="";return e.getAttribute(t)?l=e.getAttribute(t):(e.getAttribute("option")&&(n=UCUTIL.parseJSON(e.getAttribute("option"))),e.getAttribute("styles")&&(a=UCUTIL.parseJSON(e.getAttribute("styles"))),null!=n[t]?l=n[t]:null!=a[t]&&(item_val=a[t],l=isNaN(item_val)||-1!=item_val.indexOf("px")||-1!=item_val.indexOf("%")?item_val:item_val+"px")),l}function createSimulationHtml(e,t,n,a,l,r,i,o,c){var s,d=[],u=[],m="",p="",g="",b="";title="";var f,h,v='<div class="alert alert-info clearfix lab-title p-md">',_="",y=new Array;for(l.getAttribute("title")&&(title=l.getAttribute("title")),""!=e&&(e=e.split("-")),document.querySelectorAll("#user_answer_details").length>0&&(d=(d=(d=document.querySelector("#user_answer_details").value).replace("\x3c!--[CDATA[","").replace("]]--\x3e","").trim()).split("\n")),""!=t&&(u=t.split("|")),u=(u=[...u,...d]).filter(e=>e),f=0;f<u.length;f++){var A=u[f].split("=");_+="&default["+(A[0]||"")+"]="+(A[1]||"")}if(""!=n&&(y=n.split("|")),""!=title?v+='<span class="float-left" style="padding-top: 5px;">'+title+"</span>":v+='<span class="float-left" style="padding-top: 5px;">&nbsp;</span>',m=1==r&&"assessment"==sub_type?"javascipt:;' disabled='disabled'":baseUrl+"sim/?module="+(e[0]||"")+"&type="+(e[1]||"")+"&version="+(e[2]||"")+"&is_player=1"+_,s=getPlayerAttrVal(l,"button_name"),l.getAttribute("correct")||"inline"==a?(m+="&show_click=1",b=1):(l.getAttribute("is_sql")||"overlay"==a)&&(p=1),i?(hint_btn='<button tabindex="0" type="button" style="margin-left:5px; background: #9B9B9B;" class="btn text-white" id="hintBtn'+o+"\" onclick=\"swal({title:'Hint', text:'"+i+"'});\">Hint</button>",i=""):hint_btn="",1==b){if(m+="&is_single=1",void 0===d&&(d=new Array),y.length>0&&1==r){var x='<table class="external"><tr><th>Correct Answer</th><th>Your Answer</th></tr>',w="",S="";if(sql_correct=y[0].split("="),"query_editor_area"==sql_correct[0])w+=sql_correct[1];else for(f=0;f<y.length;f++){var I=y[f].substring(y[f].lastIndexOf("~"),y[f].length);"~i"==I&&(y[f]=y[f].replace(I,"")),w+=y[f]+"</br>"}for(f=0;f<d.length;f++){let e=d[f].split("=");"query_editor_area"==e[0]?S+=e[1]+"<br>":S+=void 0!==d[f]?d[f]+"</br>":""}x+="<tr><td>"+w+"</td><td>"+S+"</td></tr></table>",h=l,"split"===getTestFrameworkDetail()&&(h=document.querySelector("#item_answer")),h.innerHTML+=x}else if(y.length>0){if(activate(1),h=l,"split"===getTestFrameworkDetail()){var k=l.cloneNode();l.remove(),document.querySelector("#specialModuleExtQuestion").innerHTML+=k,h=document.querySelector("player[type='external']")}g='id="msoffice_frame" frameBorder="0" correct="'+n+'" user_answer="'+d.join("|")+'" onload="autoResize(this.id)" scrolling="no" player_id="'+o+'"',h.innerHTML+=createPlayerEmbed("inline",c,m+"&wmode=transparent",g),setTimeout(function(){activate(0)},5e3)}else if(!l.getAttribute("try_me")&&"inline"!=l.getAttribute("try_me")){var E=l.getAttribute("custum-btn")?"":'<p tabindex="0" class="try-me-s">Click to see me in action</p>';const e=l.children||[];for(let t of e)t.innerHTML='<a tabindex="'+tabindex.n+'" href="'+m+'&nozoom=1" style="position:relative;display:inline-block;" onclick="return open_single_lab(this)">'+t.innerHTML+"</a>",t.querySelector("a").insertAdjacentHTML("afterbegin",E);l.querySelector("img").classList.add("noImgModal")}}else l.getAttribute("guids")&&""!=l.getAttribute("guids")?(""==title&&(title="Try it"),m+="&no_action=1&content_guid="+l.getAttribute("guids"),l.insertAdjacentHTML("afterbegin",'<a tabindex="0" class="btn btn-primary startlab focus_lab" href="'+m+'" target="_blank">'+title+"</a>")):""!=p?(g="class='btn btn-success startlab"+o+"' onclick='bindSql(\""+(m+="&is_single=1")+'", '+o+")'",l.insertAdjacentHTML("afterbegin","<div class='text-center'>"+createPlayerEmbed("overlay",!1,!1,g,s||"Start Lab")+hint_btn+"</div>")):"new_tab"==a?(g='class="btn btn-primary float-right startlab"',l.insertAdjacentHTML("afterbegin",v+createPlayerEmbed(a,!1,m,g,s||"Start Lab")+"</div>")):l.insertAdjacentHTML("afterbegin",v+'<a tabindex="0" class="btn btn-primary float-right startlab" href="'+m+'" target="_blank">Start Lab</a></div>')}UCUTIL.overlay={ui:function(e){return{1:'<div id="modal-from-test" class="modal test-modal" tabindex="-1"><div class="modal-body pt-0"><iframe title="Overlay window" name="test_frame" id="test_frame" frameBorder="0" src="" allowfullscreen="true"></iframe></div></div>'}[e]}},UCUTIL.parseJSON=function(e,t){var n=t||!1;try{return JSON.parse(e)}catch(e){return n&&console.warn(e),{}}},UCUTIL.param2Url=function(e){var t=[];for(var n in e){var a=n+"="+e[n];t.push(a)}return t.join("&")};const AH={jsAction:function(e,t){if(e instanceof HTMLElement||e instanceof Node)switch(t.action){case"show":e.style.display=t.actionData||"";break;case"hide":e.style.display="none";break;case"toggleDisplay":e.style.display="none"==e.style.display?"block":"none";break;case"addClass":"object"==typeof t.actionData?e.classList.add(...t.actionData):e.classList.add(t.actionData);break;case"removeClass":"object"==typeof t.actionData?e.classList.remove(...t.actionData):e.classList.remove(t.actionData);break;case"toggleClass":e.classList.toggle(t.actionData);break;case"html":e.innerHTML=t.actionData;break;case"value":e.value=t.actionData;break;case"text":e.textContent=t.actionData;break;case"checked":e.checked=t.actionData;break;case"remove":e.remove();break;case"removeAttr":e.removeAttribute(t.actionData);break;case"css":this.setCss(e,t.actionData);break;case"attr":this.setAttr(e,t.actionData);break;case"data":this.setData(e,t.actionData);break;case"getData":this.getData(e,t.actionData)}},selectAll:function(e,t,n){let a="object"==typeof e?e:document.querySelectorAll(e);return a&&a.length>0&&t&&Array.prototype.forEach.call(a,e=>this.jsAction(e,{action:t,actionData:n})),a},setAttr:function(e,t){let n="object"==typeof e?e:document.querySelector(e);if(n)for(let e in t)n.setAttribute(e,t[e]);return n||{}},setCss:function(e,t){let n="object"==typeof e?e:document.querySelector(e);if(n)for(let e in t)n.style&&(n.style[e]=t[e]);return n||{}},ajax:function(e){let t="";if("object"==typeof e.data)if(e.formData)t=e.data;else if(e.withUrl){let t="?";for(let n in e.data)"object"!=typeof e.data[n]&&(t+="&"+n+"="+e.data[n]);e.url+=t}else{t=new FormData;for(let n in e.data)"object"==typeof e.data[n]&&this.isValid(e.data[n])?t=this.jsonFormEncode(t,n,e.data[n]):t.append(n,e.data[n])}return new Promise((n,a)=>{const l=new XMLHttpRequest;l.open(e.type||"POST",e.url,!0),e.responseType&&(l.responseType=e.responseType),l.onreadystatechange=(e=>{if(4==l.readyState&&200===l.status)try{n(l.responseText,e)}catch(e){a(e)}}),l.onerror=(e=>{a(e)}),e.onStart&&(l.onloadstart=e.onStart),e.onEnd&&(l.onloadend=e.onEnd),l.send(t)})},jsonFormEncode:function(e,t,n){try{if(Array.isArray(n))for(let a=0;a<n.length;a++)for(let l in n[a])e.append(`${t}[${a}][${l}]`,n[a][l]);else for(var a in n)e.append(`${t}[${a}]`,n[a])}catch(e){console.warn("Please provide valid JSON Object in ajax data."+e)}return e},addScript:function(e,t,n={}){let a=document.createElement("script");return t?(a.src=t,a.async=!0,n.callback&&(a.onload=function(){n.callback()})):a.innerHTML=e,(n.target?document.body:document.head).append(a),a},activate(e){document.querySelector("#activateLoaderContainer")&&document.querySelector("#activateLoaderContainer").remove(),e>0&&document.body.insertAdjacentHTML("afterend",'<div id="activateLoaderContainer" class="activateOverlay" style="z-index:9999999;"><center><div class="activator" style="height:100px; width: 100px;"></div></center></div>')}};var html_editor=[],evalInline={getRegString:function(e,t,n){n=n?1:0;var a=new RegExp("\\<"+e+"\\>([\\s\\S]*?)\\<\\/"+e+"\\>","gm").exec(t),l="";return a&&(l=a[1],l=n?l:l.replace(/</g,"&lt;").replace(/>/,"&gt;")),l},createEditor:function(e,t,n,a,l){e.disabled=!0,AH.activate(1),n="html"==n?"xml":n,"function"!=typeof CodeMirror?AH.ajax({type:"POST",longData:!0,url:themeUrl+"svelte_items/lib/merged_codemirror.txt"}).then(r=>{const i=r.split("<\/script>");i[0]=i[0].replace("<script>",""),AH.addScript(i[0],"",{target:"body"});const o=document.createElement("style");i[1]=i[1].replace("<style>",""),i[1]=i[1].replace("</style>",""),o.innerHTML=i[1],document.head.append(o),setTimeout(()=>evalInline.renderEditor(e,t,n,a,l),500),AH.selectAll("#printPanel"+t,"hide"),AH.activate(0)}):(AH.selectAll("#printPanel"+t,"hide"),setTimeout(()=>evalInline.renderEditor(e,t,n,a,l),500),AH.activate(0))},getBack:function(e){AH.selectAll("#printPanel"+e,"show");const t=AH.selectAll("#evalCreator"+e);t&&t.length>0&&t.forEach(e=>e.removeAttribute("disabled")),AH.selectAll("#editorPanel"+e,"hide"),AH.selectAll("#framePanel"+e,"hide")},renderEditor:function(e,t,n,a,l){AH.selectAll("#framePanel"+t,"attr",{style:"width:38.3%;float:left;margin-left:5px;"}),AH.selectAll("#editorPanel"+t,"attr",{style:"width:59.6%;float:left;min-height:580px"}),l>0&&(AH.selectAll("#editorPanel"+t+" .panel-heading,#framePanel"+t+" .panel-heading, #framePanel"+t+".panel.panel-default.mb","attr",{style:" background: #474747;border-color: #000;color: #d5d5d5 !important;"}),AH.selectAll("#framePanel"+t+" textarea","attr",{style:"background: #272822;color: #fff;"})),AH.selectAll("#framePanel"+t,"attr",{class:""}),AH.selectAll("#editorPanel"+t,"attr",{class:""});var r=document.querySelector("#htmlEditor"+t);r.style.border="0";var i=r.firstElementChild.innerText;i||(i=r.firstElementChild.getAttribute("value")||r.firstElementChild.value),r.innerHTML=`<textarea class="h" id="htmlText${t}" value="${i}"></textarea>`,AH.selectAll("#htmlText"+t,"value",i);var o=document.querySelector("#htmlEditor"+t+" textarea");html_editor[t]=CodeMirror.fromTextArea(o,{lineNumbers:!0,mode:"xml"==n?"xml":"text/x-"+n,styleActiveLine:!0,autoCloseBrackets:!0,theme:l?"monokai":"default",lineWrapping:!0,scrollbarStyle:"simple",matchBrackets:!0,gutters:["CodeMirror-linenumbers","breakpoints"]}),AH.selectAll(".CodeMirror","css",{"min-height":"580px","max-height":"580px",border:"0","line-height":"1.2","font-size":"16px"}),AH.selectAll("#frameDiv"+t,"css",{height:"458.5px",position:"relative"}),AH.selectAll(".CodeMirror-scroll","css",{"min-height":"558px","max-height":"558px"}),AH.selectAll(".CodeMirror-gutters","css",{height:"580px"}),a<2&&(AH.selectAll("#inputPanel"+t,"hide"),AH.selectAll("#frameDiv"+t,"css",{height:"580.5px"}))},sendToFrame:function(e,t,n,a){AH.selectAll("#runBtn"+e,"attr",{disabled:!0}),t=t||0;var l,r=evalInline.getCode(e),i=["mp4","ogg","webm","mp3","wav"],o=["gif","tif","png","jpg"];r=(r=r.replace(/src[ ]*=[ ]*['"](.*?)['"]/gm,function(e,t){if(t){for(l=0;l<i.length;l++)if(t.includes(i[l]))return e.replace(t,"https://s3.amazonaws.com/jigyaasa_content_stream/"+t);for(l=0;l<o.length;l++)if(t.includes(o[l]))return e.replace(t,"https://s3.amazonaws.com/jigyaasa_content_static/"+t)}})).replace(/url\(['"](.*?)['"]\)/g,'url("https://s3.amazonaws.com/jigyaasa_content_static/$1")');var c=document.querySelector("#frameDiv"+e);if(c.style.position="relative",c.style.overflow="auto",AH.activate(1,"#frameDiv"+e,"","absolute"),t)t>1&&evalInline.executeTestCases(e),evalInline.runEvalPro(e,r,n,0,a);else{var s=document.createElement("iframe");s.className="fwidth bg-white border-0",s.style.height="564px",s.style.width="600px",c.innerHTML="",c.appendChild(s);var d=c.firstElementChild.contentDocument;d.open(),d.write(r),d.close(),AH.activate(0),AH.selectAll("#runBtn"+e,"attr",{disabled:!1})}},getCode:function(e){return html_editor[e].getValue()},executeTestCases:function(e){var t=AH.select("#evalXML"+e).value,n=evalInline.getCode(e);t=t.replace(/\<editor\>[\s\S]*?\<\/editor\>/g,"<editor>"+n+"</editor>"),t=encodeURIComponent(t),AH.ajax({type:"POST",url:baseUrl+"sim/evalpro/?user_code="+t+"&execute_testcases=1&isCompiled=0"}).then(function(t){1==t?AH.selectAll("#evalCheck"+e,"html",'<span class="item_score font-weight-bold"><span class="label-correct">Correct</span></span>'):AH.selectAll("#evalCheck"+e,"html",'<span class="item_score font-weight-bold"><span class="label-incorrect">Incorrect</span></span>'),AH.selectAll("#runBtn"+e,"attr",{disabled:!1})})},resetDb:function(e,t,n){AH.activate(1,"#frameDiv"+n,"","absolute"),AH.selectAll("#resetBtn"+n,"attr",{disabled:!1}),t=t||"myDBs",AH.ajax({type:"POST",url:baseUrl+"sim/evalpro/index.php",data:{ajax:1,in_editor:0,user_guid:e,resetDB:1}}).then(function(){AH.selectAll("#frameDiv"+n,"html","<div class='fwidth bg-white border-0 font14' style='height:282px'>Database reset complete!</div>"),AH.selectAll("#resetBtn"+n,"attr",{disabled:!1})})},runEvalPro:function(e,t,n,a,l){l=l||"myDBs";var r=AH.select("#evalXML"+e).value;t=evalInline.getRegString("pre",r,1)+t+evalInline.getRegString("post",r,1),a=a||AH.select("#evalInput"+e).value;AH.ajax({type:"POST",url:baseUrl+"sim/evalpro/",data:{code:t,repltype:n,stdin:a,user_guid:user_guid,dbName:l,run_code:1}}).then(function(t){AH.activate(0);var n=t.output?t.output:t.stderr?t.stderr:"Your code didn't print anything...";AH.selectAll("#frameDiv"+e,"html","<div class='fwidth bg-white border-0 font14' style='height:282px'>"+n+"</div>"),AH.selectAll("#runBtn"+e,"attr",{disabled:!1})})}};function createPlaygroundHtml(e,t,n,a,l,r){var i=/language="(\w+)"/g.exec(e),o="",c="";if(i&&(i=i[1]),e){if(e.indexOf('type="22"')>-1){i="html";var s=evalInline.getRegString("tag",e),d=evalInline.getRegString("css",e),u=evalInline.getRegString("js",e);c=s+(d=d.length>1?"&lt;style&gt;"+d+"&lt;/style&gt;\n":"")+(u=u.length>1?"&lt;script&gt;"+u+"&lt;/script&gt;":"")}else{var m=evalInline.getRegString("editor",e),p=evalInline.getRegString("case",e);o=(o=/db_name="(.*?)"/gim.exec(e))?o[1]:"";var g=p.replace(/\|\d+/g,"").replace(",","\n");c=m}l.innerHTML='<div class="row"><textarea class="h-imp" id="evalXML'+a+'">'+e.replace(/</g,"&lt;").replace(/>/g,"&gt;")+'</textarea><div id="printPanel'+a+'" class="col-md-12"><div class="card"><div class="card-header height44">'+r+'<div class="d-inline-block ml" id="evalPCheck'+a+'"></div><button id="evalCreator'+a+'" onclick="evalInline.createEditor(this,'+a+",'"+i+"',"+t+","+n+')" style="margin-top: -8px" type="button" class="btn btn-primary m-t-n-xs float-right"><i class="fa fa-code"></i> Run</button></div><div id="htmlPEditor'+a+'" class="card-body p-0 border-0"><pre class="prettyprint black linenums mb-0">'+c+'</pre></div></div></div><div id="editorPanel'+a+'" class="h" style="max-height:500px;" class="col-md-12"><div class="card"><div class="card-header height44">'+r+'<div class="d-inline-block ml" id="evalCheck'+a+'"></div><button class="btn btn-success float-right" style="margin-top: -8px" onclick="evalInline.sendToFrame('+a+","+t+",'"+i+"','"+o+'\')"><i class="fa fa-code"></i> Run</button><button type="button" class="btn btn-danger mr-sm float-right mr-1" style="margin-top: -8px" onclick="evalInline.getBack('+a+')">Back</button>'+(o?'<button type="button" id="resetBtn'+a+'" class="btn btn-danger mr-sm float-right mr-1" style="margin-top: -8px" onclick="evalInline.resetDb(\''+user_guid+"','"+o+"',"+a+')">ResetDB</button>':"")+'</div><div id="htmlEditor'+a+'" class="card-body p-0 border-0"><pre class="prettyprint black linenums mb-0">'+c+'</pre></div></div></div><div id="framePanel'+a+'" class="h-imp"><div class="card mb" id="inputPanel'+a+'"><div class="card-header height44">Input</div><div id="inputDiv'+a+'" class="card-body p-0"><textarea rows="3" placeholder="Enter your input seperated by Enter.." class="form-control border-0 resize_none outline0 shadow-none p" id="evalInput'+a+'" autofocus>'+g+'</textarea></div></div><div class="card"><div class="card-header height44">Output</div><div id="frameDiv'+a+'" class="card-body p" style="resize: both;overflow: auto;background:#fff"></div></div></div></div>',prettyPrint()}}function seqTag(e,t){if(t=t||!1,e&&isValidContent(e)){var n=e.match(/<seq(.*?)><\/seq>|<snt(.*?)><\/snt>/gim);if(n)for(var a=0;a<n.length;a++){var l=n[a].replace(/><\/seq>|><\/snt>/gim," />").replace(/data-style/gim,"style");e=e.replace(n[a],l)}e=customTableReplace(e);var r=["div","li","table","tbody","tr","td","th","h1","h2","h3","h4","h5","h6","pre","p","figure","figcaption","dl","dt","section","main","article"];for(var a in r)e=e.replace(new RegExp(r[a]+">\\s+<","g"),r[a]+"><").replace(new RegExp(">\\s+<"+r[a],"g"),"><"+r[a]).replace(new RegExp(">\\s+</"+r[a],"g"),"></"+r[a]).replace(new RegExp("\n.<"+r[a],"g"),"<"+r[a]).replace(new RegExp(r[a]+">\n","g"),r[a]+">");return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/<br \/> |<br\/> |<br> | <br \/>| <br\/>| <br>|<br \/>|<br\/>|<br>/gim,"\n")).replace(/<g class([\s\S]*?)>|<\/g>/,"")).replace(/<grammarly-btn([\s\S]*?)<\/grammarly-btn>/g,"")).replace(/<grammarly([\s\S]*?)<\/grammarly([\s\S]*?)>/g,"")).replace(/<p><\/p>/,"\n")).replace(new RegExp("\n.<ul|\n<ul","g"),"<ul")).replace(new RegExp("\n.<ol|\n<ol","g"),"<ol")).replace(/\[/g,"&lsqb;")).replace(/<main data-remove="true"[\s\S]*?<\/main>/g,"")).replace(/class\=(\"|\')ebook_item_text.*?(\"|\')/g,"class='ebook_item_text'")).replace(/(\'|\")ebook_item_text(\'|\").*?\>/g,"'ebook_item_text'>")).replace(/(\'|\")ebook_item_text inline(\'|\").*?\>/g,"'ebook_item_text inline'>")).replace(/(\'|\")inline ebook_item_text(\'|\").*?\>/g,"'ebook_item_text inline'>")).replace(/mce-item-table/g,"")).replace(/\<input type="hidden".*?\>|\<input type="hidden".*?\/>/gm,""),"remed"==t&&(e=e.replace(/sec_button inline|sec_button/,"sec_button inline").replace(/ebook_item_text inline|ebook_item_text/,"ebook_item_text inline")),1==t&&(e=e.replace(/<p>/gim,"\n").replace(/<\/p>/,"")),e}return""}